import{r as e,c as t,j as r,T as n,C as o,u as a,a as i,b as s,P as l,B as c,E as d,d as u,e as m,f as p,S as h,G as g,F as f,s as x,A as b,g as y,h as v,L as w,U as C,I as j,i as S,k,W as R,l as N,m as P,n as I,o as M,p as D,q as T,M as E,t as F,v as A,w as O,x as H,y as L,z as $,D as z,H as q,J as B,K as V,N as W,O as G,Q as U,V as K,X as _,Y as Q,Z as X,_ as Y,$ as Z,a0 as J,a1 as ee,a2 as te,a3 as re,a4 as ne,a5 as oe,a6 as ae,a7 as ie,a8 as se,a9 as le,aa as ce,ab as de,ac as ue,ad as me,ae as pe,af as he,ag as ge,ah as fe,ai as xe,aj as be,ak as ye,al as ve,am as we,an as Ce,ao as je,ap as Se,aq as ke,ar as Re,as as Ne,at as Pe,au as Ie,av as Me,aw as De,ax as Te,ay as Ee,az as Fe,aA as Ae,aB as Oe,aC as He,aD as Le,aE as $e,aF as ze,aG as qe,aH as Be,aI as Ve,aJ as We,aK as Ge,aL as Ue,aM as Ke,aN as _e,aO as Qe,aP as Xe,aQ as Ye,aR as Ze,aS as Je,aT as et,aU as tt,aV as rt,aW as nt,aX as ot,aY as at,aZ as it,a_ as st,a$ as lt,b0 as ct,b1 as dt,R as ut,b2 as mt,b3 as pt,b4 as ht,b5 as gt,b6 as ft,b7 as xt,b8 as bt,b9 as yt,ba as vt,bb as wt,bc as Ct}from"./mui-C83OwR4D.js";import{i as jt,B as St,a as kt,u as Rt,I as Nt}from"./i18n-Dem1pn8f.js";import{a as Pt,g as It,b as Mt,r as Dt}from"./vendor-C9RBa7uG.js";import{u as Tt,a as Et,L as Ft,R as At,b as Ot,B as Ht}from"./router-CvQC92Mg.js";import{w as Lt,n as $t,f as zt,i as qt,e as Bt,c as Vt,a as Wt,p as Gt,b as Ut,d as Kt,g as _t,h as Qt,j as Xt,k as Yt,l as Zt,m as Jt,S as er,o as tr,q as rr,r as nr,s as or,t as ar,u as ir,v as sr,x as lr,y as cr,z as dr,A as ur,B as mr,C as pr,D as hr,E as gr,F as fr,G as xr,P as br}from"./redux-CzK37nEB.js";import{H as yr,L as vr}from"./signalr-Cqggks5J.js";import{o as wr,r as Cr,a as jr,b as Sr,s as kr,n as Rr,e as Nr,u as Pr,C as Ir,c as Mr,l as Dr}from"./forms-CFyrNdPh.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Tr={en:{translation:{welcome:"Hi",home:"Home",login:"Login",logout:"Logout",register:"Register",profile:"Profile",adminDashboard:"Admin Dashboard",fetchData:"Fetch Data",user:"User",settings:"Settings",language:"Language",theme:"Theme",search:"Search",flightCompanion:"Flight Companion",appName:"WingCompanion",pickupService:"Pickup Service",submit:"Submit",cancel:"Cancel",error:"An error occurred. Please try again.",success:"Operation successful!",communityGuidelines:"Community Guidelines",termsOfService:"Terms of Service",services:"Services",support:"Support",legal:"Legal",emergencyAssistance:"Emergency Assistance",helpCenter:"Help Center",contactUs:"Contact Us",faq:"FAQ",safetyTips:"Safety Tips",privacyPolicy:"Privacy Policy",cookiePolicy:"Cookie Policy",footerDescription:"Connecting travelers for safer and more enjoyable journeys. Find trusted companions for flights and reliable airport pickup services.",locationNZ:"Auckland, New Zealand",allRightsReserved:"All rights reserved.",guidelines:{title:"Community Guidelines",subtitle:"Building a safe, respectful, and trustworthy platform for everyone",lastUpdated:"Last updated: {{date}}",sections:{overview:{title:"Our Community",content:"WingCompanion connects travelers to create safer, more enjoyable journeys. Our community guidelines ensure that everyone can participate with confidence, knowing they're part of a respectful and trustworthy platform."},conduct:{title:"Expected Conduct",respect:{title:"Treat Everyone with Respect",content:"Communicate politely and considerately. Remember that behind every profile is a real person deserving of dignity and kindness."},discrimination:{title:"Zero Tolerance for Discrimination",content:"Discrimination based on race, religion, gender, nationality, age, sexual orientation, or any other characteristic is strictly prohibited."},harassment:{title:"No Harassment or Abuse",content:"Harassment, bullying, threats, or any form of abusive behavior will result in immediate account suspension."}},safety:{title:"Safety First",verification:{title:"Complete Profile Verification",content:"Verify your identity to build trust with other community members. Verified profiles receive priority in search results."},meetings:{title:"Safe Meeting Practices",content:"Meet in public places, inform trusted contacts of your plans, and trust your instincts if something feels wrong."},personal:{title:"Protect Personal Information",content:"Never share sensitive information like passport numbers, home address, or financial details through the platform."}},services:{title:"Service Standards",reliability:{title:"Be Reliable and Punctual",content:"Honor your commitments. If you must cancel, do so as early as possible and communicate clearly with affected parties."},payment:{title:"Transparent Pricing",content:"Be clear about costs upfront. No hidden fees or last-minute price changes. All payments must go through the platform."},quality:{title:"Provide Quality Service",content:"Whether offering or requesting services, maintain high standards and treat others as you would want to be treated."}},reporting:{title:"Reporting & Enforcement",violations:{title:"Report Violations",content:"If you experience or witness violations of these guidelines, report them immediately through the app or contact support."},consequences:{title:"Consequences",content:"Violations may result in warnings, temporary suspension, or permanent account termination depending on severity."},appeals:{title:"Appeals Process",content:"If you believe action was taken in error, you can appeal through our support system within 30 days."}}}},firstName:"First Name",lastName:"Last Name",phoneNumber:"Phone Number",preferredLanguage:"Preferred Language",emergencyContact:"Emergency Contact Name",emergencyPhone:"Emergency Contact Phone",email:"Email",emailCannotBeChanged:"Email cannot be changed",edit:"Edit",cancelEdit:"Cancel",saveChanges:"Save Changes",saving:"Saving...",basicInformation:"Basic Information",emergencyContactSection:"Emergency Contact",profileInformation:"Profile Information",userProfile:"User Profile",manageAccount:"Manage your account information and preferences",verified:"Verified",unverified:"Unverified",memberSince:"Member since",submitVerification:"Submit Verification",activityStatistics:"Activity Statistics",requestsCreated:"Requests Created",servicesOffered:"Services Offered",completedServices:"Completed Services",averageRating:"Average Rating",profileUpdated:"Profile updated successfully!",languageChanged:"Language changed to",errorLoadingProfile:"Error loading profile",errorUpdatingProfile:"Error updating profile",errorLoadingStats:"Error loading statistics",submitVerificationDocuments:"Submit Verification Documents",verificationDialogDesc:"Please provide references to your identification documents. This helps us verify your identity and build trust in our community.",documentReferences:"Document References",documentReferencesPlaceholder:"Please provide document references that can be used to verify your identity...",documentReferencesHelper:"e.g., Passport number, Driver's license number, etc.",submitting:"Submitting...",verificationSubmitted:"Verification documents submitted successfully!",errorSubmittingVerification:"Error submitting verification documents",pleaseLoginProfile:"Please log in to view your profile.",paymentHistory:"Payment History",fullName:"Full Name",password:"Password",confirmPassword:"Confirm Password",registerTitle:"Register",validation:{firstNameRequired:"First name is required",firstNameMax:"First name must be less than 50 characters",firstNameRegex:"First name can only contain letters and spaces",lastNameRequired:"Last name is required",lastNameMax:"Last name must be less than 50 characters",lastNameRegex:"Last name can only contain letters and spaces",phoneNumberFormat:"Phone number must be in format +64XXXXXXXX",preferredLanguageRequired:"Please select a preferred language",emergencyContactLength:"Emergency contact name must be between 2 and 100 characters",emergencyPhoneFormat:"Emergency phone must be in format +64XXXXXXXX",documentReferencesMin:"Document references must be at least 10 characters",documentReferencesMax:"Document references must be less than 500 characters",fullNameRequired:"Full name is required",invalidEmail:"Invalid email address",passwordMin:"Password must be at least 6 characters",passwordsDontMatch:"Passwords do not match"},loginFailed:"Login failed. Please try again.",emergency:{help:"Emergency Help",selectType:"Select Emergency Type",warningMessage:"🚨 This will immediately notify your emergency contact, platform administrators, and any matched users. Only use for genuine emergencies.",medical:"Medical Emergency",medicalDesc:"Medical assistance needed urgently",safety:"Safety Emergency",safetyDesc:"Personal safety or security concern",travel:"Travel Emergency",travelDesc:"Travel-related emergency or assistance needed",sos:"SOS - General Emergency",sosDesc:"Immediate assistance needed",responseInfo:"Emergency contacts will be notified immediately via email and SMS. Platform administrators will also be alerted.",quickSOS:"Quick SOS Button",active:"Emergency Active",helpOnWay:"Help is on the way",cancel:"Cancel Emergency",sending:"Sending...",history:"Emergency History",noHistory:"No emergency history",noHistoryDesc:"You haven't triggered any emergency alerts yet.",createdAt:"Created",resolvedAt:"Resolved",contactNotified:"Emergency Contact Notified",adminNotified:"Admins Notified",markResolved:"Mark as Resolved",resolveTitle:"Resolve Emergency",resolveDesc:"Please provide details about how this emergency was resolved.",resolutionDetails:"Resolution Details",resolutionPlaceholder:"Describe how the emergency was resolved...",resolve:"Resolve",status:{active:"Active",resolved:"Resolved",cancelled:"Cancelled"}},terms:{title:"Terms of Service",subtitle:"Legal agreement for using the WingCompanion platform",lastUpdated:"Last updated: {{date}}",effectiveDate:"Effective date: {{date}}",sections:{acceptance:{title:"1. Acceptance of Terms",content:"By accessing and using WingCompanion, you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, you may not use our services."},description:{title:"2. Service Description",content:"WingCompanion is a platform that connects Chinese professionals in Auckland for flight companionship and airport pickup services. We facilitate connections between users but are not a party to the actual service agreements."},eligibility:{title:"3. User Eligibility",age:"You must be at least 18 years old to use our services.",verification:"You must provide accurate information and complete identity verification.",compliance:"You must comply with all applicable laws and regulations."},accounts:{title:"4. User Accounts",responsibility:"You are responsible for maintaining the confidentiality of your account credentials.",accuracy:"You must provide accurate and current information during registration.",notification:"You must notify us immediately of any unauthorized use of your account."},conduct:{title:"5. Prohibited Conduct",illegal:"Using the platform for illegal activities or harassment",fraud:"Providing false information or engaging in fraudulent activities",interference:"Interfering with the platform's operation or other users' experience",violation:"Violating these terms or community guidelines"},payments:{title:"6. Payment Terms",escrow:"Payments are held in escrow until service completion",fees:"Platform fees may apply to certain transactions",disputes:"Payment disputes will be resolved according to our dispute resolution process",refunds:"Refunds are subject to our refund policy"},liability:{title:"7. Limitation of Liability",disclaimer:"WingCompanion is not liable for the quality, safety, or legality of services provided by users",maximum:"Our maximum liability is limited to the amount of fees paid by you",exclusion:"We exclude liability for indirect, consequential, or punitive damages"},privacy:{title:"8. Privacy Policy",content:"Your privacy is important to us. Please review our Privacy Policy to understand how we collect, use, and protect your information."},termination:{title:"9. Termination",user:"You may terminate your account at any time by contacting support",platform:"We may suspend or terminate accounts that violate these terms",effect:"Upon termination, your access to the platform will cease immediately"},changes:{title:"10. Changes to Terms",content:"We reserve the right to modify these terms at any time. Users will be notified of significant changes via email or platform notifications."},governing:{title:"11. Governing Law",content:"These terms are governed by the laws of New Zealand. Any disputes will be resolved in Auckland courts."},contact:{title:"12. Contact Information",content:"For questions about these terms, contact us at legal@networkingapp.co.nz"}}},admin:{checkingAccess:"Checking admin access...",loginRequired:"Please log in to access the admin dashboard.",accessDenied:"Access denied. Admin privileges required.",dashboard:{title:"Admin Dashboard",subtitle:"Manage users and verifications"},stats:{totalUsers:"Total Users",pendingVerifications:"Pending Verifications",openDisputes:"Open Disputes",systemHealth:"System Health"},tabs:{users:"User Management",verifications:"Verifications",disputes:"Disputes",monitoring:"Monitoring"},users:{title:"User Management",fetchError:"Failed to fetch users",statusUpdated:"User status updated successfully",statusUpdateError:"Failed to update user status",userVerified:"User verified successfully",verifyError:"Failed to verify user",columns:{id:"ID",name:"Name",email:"Email",phone:"Phone",language:"Language",verified:"Verified",status:"Status",rating:"Rating",joinedDate:"Joined",actions:"Actions"},actions:{edit:"Edit User",verify:"Verify User",deactivate:"Deactivate",activate:"Activate"},editDialog:{title:"Edit User"}},verifications:{title:"Verification Management",fetchError:"Failed to fetch verification documents",approveSuccess:"Verification approved successfully",approveError:"Failed to approve verification",rejectSuccess:"Verification rejected",rejectError:"Failed to reject verification",columns:{id:"ID",user:"User",document:"Document",uploadedAt:"Uploaded",status:"Status",comment:"Comment",actions:"Actions"},actions:{review:"Review",approve:"Approve",reject:"Reject"},reviewDialog:{title:"Review Verification Document",userInfo:"User Information",documentInfo:"Document Information",documentReferences:"Document References",adminComment:"Admin Comment",commentPlaceholder:"Add your review comments here..."}},disputes:{title:"Dispute Management",fetchError:"Failed to fetch disputes",resolveSuccess:"Dispute resolved successfully",resolveError:"Failed to resolve dispute",status:{open:"Open",underReview:"Under Review",resolved:"Resolved",refunded:"Refunded",rejected:"Rejected"},columns:{id:"ID",user:"Reported By",service:"Service",amount:"Amount",reason:"Reason",status:"Status",createdAt:"Created",actions:"Actions"},actions:{resolve:"Resolve",view:"View",refund:"Issue Refund"},resolveDialog:{title:"Resolve Dispute",viewTitle:"View Dispute Details",disputeInfo:"Dispute Information",disputeId:"Dispute ID",paymentId:"Payment ID",amount:"Amount",service:"Service",status:"Status",userInfo:"Reported By",createdAt:"Created At",resolvedAt:"Resolved At",reason:"Dispute Reason",evidence:"Evidence",viewEvidence:"View Evidence",resolution:"Resolution",adminNotes:"Admin Notes",notesPlaceholder:"Add resolution notes..."},resolution:{resolved:"Resolved - No refund",refunded:"Refunded - Issue refund",rejected:"Rejected - Invalid dispute"}},monitoring:{title:"Platform Monitoring",loading:"Loading monitoring data...",fetchError:"Failed to fetch monitoring data",stats:{totalUsers:"Total Users",activeUsers:"Active Users",totalBookings:"Total Bookings",totalRevenue:"Total Revenue",successRate:"Success Rate",avgResponseTime:"Avg Response"},systemMetrics:"System Metrics",activityLogs:"Recent Activity",columns:{timestamp:"Time",level:"Level",source:"Source",message:"Message",details:"Details"}}},active:"Active",inactive:"Inactive",approved:"Approved",rejected:"Rejected",pending:"Pending",save:"Save",fileName:"File Name",fileType:"File Type",uploadedAt:"Uploaded At",status:"Status"}},zh:{translation:{welcome:"你好",home:"首页",login:"登录",logout:"登出",register:"注册",profile:"个人资料",adminDashboard:"管理员仪表板",fetchData:"获取数据",user:"用户",settings:"设置",language:"语言",theme:"主题",search:"搜索",flightCompanion:"结伴飞行",appName:"翼伴",pickupService:"接送服务",submit:"提交",cancel:"取消",error:"发生错误，请重试。",success:"操作成功！",communityGuidelines:"社区指南",termsOfService:"服务条款",services:"服务",support:"支持",legal:"法律",emergencyAssistance:"紧急援助",helpCenter:"帮助中心",contactUs:"联系我们",faq:"常见问题",safetyTips:"安全提示",privacyPolicy:"隐私政策",cookiePolicy:"Cookie政策",footerDescription:"为旅行者提供安全愉快的旅程连接服务。寻找可信的飞行伙伴和可靠的机场接送服务。",locationNZ:"新西兰奥克兰",allRightsReserved:"版权所有。",guidelines:{title:"社区指南",subtitle:"为每个人建设一个安全、尊重和值得信赖的平台",lastUpdated:"最后更新：{{date}}",sections:{overview:{title:"我们的社区",content:"翼伴连接旅行者，创造更安全、更愉快的旅程。我们的社区指南确保每个人都能充满信心地参与，知道他们是一个尊重和值得信赖的平台的一部分。"},conduct:{title:"行为准则",respect:{title:"尊重每个人",content:"礼貌和体贴地沟通。记住每个档案背后都是一个真实的人，值得尊严和善待。"},discrimination:{title:"零容忍歧视",content:"严格禁止基于种族、宗教、性别、国籍、年龄、性取向或任何其他特征的歧视。"},harassment:{title:"禁止骚扰或虐待",content:"骚扰、欺凌、威胁或任何形式的虐待行为将导致立即暂停账户。"}},safety:{title:"安全第一",verification:{title:"完成档案验证",content:"验证您的身份以与其他社区成员建立信任。已验证的档案在搜索结果中将获得优先级。"},meetings:{title:"安全会面实践",content:"在公共场所见面，告知信任的联系人您的计划，如果感觉有什么不对劲，请相信您的直觉。"},personal:{title:"保护个人信息",content:"绝不要通过平台分享敏感信息，如护照号码、家庭地址或财务详细信息。"}},services:{title:"服务标准",reliability:{title:"可靠和准时",content:"履行您的承诺。如果您必须取消，请尽早取消并与受影响的各方清楚沟通。"},payment:{title:"透明定价",content:"提前明确费用。没有隐藏费用或最后一分钟的价格变更。所有付款必须通过平台进行。"},quality:{title:"提供优质服务",content:"无论是提供还是请求服务，都要保持高标准，并像您希望被对待的那样对待他人。"}},reporting:{title:"举报和执行",violations:{title:"举报违规",content:"如果您经历或目睹违反这些指南的行为，请立即通过应用程序举报或联系支持。"},consequences:{title:"后果",content:"违规可能导致警告、临时暂停或永久账户终止，具体取决于严重程度。"},appeals:{title:"申诉程序",content:"如果您认为采取的行动是错误的，您可以在30天内通过我们的支持系统进行申诉。"}}}},firstName:"名字",lastName:"姓氏",phoneNumber:"电话号码",preferredLanguage:"首选语言",emergencyContact:"紧急联系人姓名",emergencyPhone:"紧急联系人电话",email:"电子邮件",emailCannotBeChanged:"电子邮件不可更改",edit:"编辑",cancelEdit:"取消编辑",saveChanges:"保存更改",saving:"保存中...",basicInformation:"基本信息",emergencyContactSection:"紧急联系人",profileInformation:"个人信息",userProfile:"用户资料",manageAccount:"管理您的账户信息和偏好设置",verified:"已验证",unverified:"未验证",memberSince:"会员自 ",submitVerification:"提交验证",activityStatistics:"活动统计",requestsCreated:"已创建请求",servicesOffered:"已提供服务",completedServices:"已完成服务",averageRating:"平均评分",profileUpdated:"个人资料更新成功！",languageChanged:"语言已更改为",errorLoadingProfile:"加载个人资料时出错",errorUpdatingProfile:"更新个人资料时出错",errorLoadingStats:"加载统计信息时出错",submitVerificationDocuments:"提交验证文件",verificationDialogDesc:"请提供您的身份证明文件参考。这有助于我们验证您的身份并建立社区信任。",documentReferences:"文件参考",documentReferencesPlaceholder:"请提供可用于验证您身份的文件参考...",documentReferencesHelper:"例如：护照号、驾照号等。",submitting:"提交中...",verificationSubmitted:"验证文件提交成功！",errorSubmittingVerification:"提交验证文件时出错",pleaseLoginProfile:"请登录以查看您的个人资料。",paymentHistory:"支付历史",fullName:"全名",password:"密码",confirmPassword:"确认密码",registerTitle:"注册",validation:{firstNameRequired:"名字为必填项",firstNameMax:"名字不能超过50个字符",firstNameRegex:"名字只能包含字母和空格",lastNameRequired:"姓氏为必填项",lastNameMax:"姓氏不能超过50个字符",lastNameRegex:"姓氏只能包含字母和空格",phoneNumberFormat:"电话号码格式应为 +64XXXXXXXX",preferredLanguageRequired:"请选择首选语言",emergencyContactLength:"紧急联系人姓名长度应为2到100个字符",emergencyPhoneFormat:"紧急联系人电话格式应为 +64XXXXXXXX",documentReferencesMin:"文件参考至少为10个字符",documentReferencesMax:"文件参考不能超过500个字符",fullNameRequired:"全名为必填项",invalidEmail:"无效的电子邮件地址",passwordMin:"密码至少为6个字符",passwordsDontMatch:"两次输入的密码不一致"},loginFailed:"登录失败，请重试。",emergency:{help:"紧急救助",selectType:"选择紧急类型",warningMessage:"🚨 这将立即通知您的紧急联系人、平台管理员和任何匹配的用户。仅在真正紧急情况下使用。",medical:"医疗紧急情况",medicalDesc:"急需医疗援助",safety:"安全紧急情况",safetyDesc:"人身安全或安保担忧",travel:"旅行紧急情况",travelDesc:"旅行相关紧急情况或需要援助",sos:"SOS - 一般紧急情况",sosDesc:"需要立即援助",responseInfo:"紧急联系人将立即通过电子邮件和短信收到通知。平台管理员也会收到警报。",quickSOS:"快速SOS按钮",active:"紧急情况已激活",helpOnWay:"救援正在路上",cancel:"取消紧急情况",sending:"发送中...",history:"紧急情况历史",noHistory:"无紧急情况历史",noHistoryDesc:"您还未触发过任何紧急警报。",createdAt:"创建时间",resolvedAt:"解决时间",contactNotified:"已通知紧急联系人",adminNotified:"已通知管理员",markResolved:"标记为已解决",resolveTitle:"解决紧急情况",resolveDesc:"请提供有关如何解决此紧急情况的详细信息。",resolutionDetails:"解决详情",resolutionPlaceholder:"描述紧急情况是如何解决的...",resolve:"解决",status:{active:"进行中",resolved:"已解决",cancelled:"已取消"}},terms:{title:"服务条款",subtitle:"使用翼伴平台的法律协议",lastUpdated:"最后更新: {{date}}",effectiveDate:"生效日期: {{date}}",sections:{acceptance:{title:"1. 条款接受",content:"通过访问和使用翼伴，您接受并同意受这些服务条款的约束。如果您不同意这些条款，您不得使用我们的服务。"},description:{title:"2. 服务描述",content:"翼伴是一个为奥克兰的华人专业人士提供结伴飞行和机场接送服务连接的平台。我们促进用户之间的连接，但不是实际服务协议的当事方。"},eligibility:{title:"3. 用户资格",age:"您必须年满18岁才能使用我们的服务。",verification:"您必须提供准确信息并完成身份验证。",compliance:"您必须遵守所有适用的法律法规。"},accounts:{title:"4. 用户账户",responsibility:"您有责任维护账户凭据的机密性。",accuracy:"您必须在注册期间提供准确和最新的信息。",notification:"您必须立即通知我们任何未经授权使用您账户的情况。"},conduct:{title:"5. 禁止行为",illegal:"将平台用于非法活动或骚扰",fraud:"提供虚假信息或从事欺诈活动",interference:"干扰平台运营或其他用户的体验",violation:"违反这些条款或社区指南"},payments:{title:"6. 付款条款",escrow:"付款将托管直到服务完成",fees:"某些交易可能适用平台费用",disputes:"付款争议将按照我们的争议解决流程解决",refunds:"退款受我们的退款政策约束"},liability:{title:"7. 责任限制",disclaimer:"翼伴不对用户提供的服务质量、安全性或合法性承担责任",maximum:"我们的最大责任限于您支付的费用金额",exclusion:"我们排除对间接、后果性或惩罚性损害的责任"},privacy:{title:"8. 隐私政策",content:"您的隐私对我们很重要。请查看我们的隐私政策以了解我们如何收集、使用和保护您的信息。"},termination:{title:"9. 终止",user:"您可以随时通过联系支持团队终止您的账户",platform:"我们可能暂停或终止违反这些条款的账户",effect:"终止后，您对平台的访问将立即停止"},changes:{title:"10. 条款变更",content:"我们保留随时修改这些条款的权利。用户将通过电子邮件或平台通知收到重大变更的通知。"},governing:{title:"11. 管辖法律",content:"这些条款受新西兰法律管辖。任何争议将在奥克兰法院解决。"},contact:{title:"12. 联系信息",content:"有关这些条款的问题，请联系我们：legal@networkingapp.co.nz"}}},admin:{checkingAccess:"检查管理员权限中...",loginRequired:"请登录以访问管理员仪表板。",accessDenied:"访问被拒绝。需要管理员权限。",dashboard:{title:"管理员仪表板",subtitle:"管理用户和验证"},stats:{totalUsers:"总用户数",pendingVerifications:"待验证",openDisputes:"未结争议",systemHealth:"系统健康"},tabs:{users:"用户管理",verifications:"验证管理",disputes:"争议管理",monitoring:"监控"},users:{title:"用户管理",fetchError:"获取用户失败",statusUpdated:"用户状态更新成功",statusUpdateError:"用户状态更新失败",userVerified:"用户验证成功",verifyError:"用户验证失败",columns:{id:"ID",name:"姓名",email:"邮箱",phone:"电话",language:"语言",verified:"已验证",status:"状态",rating:"评分",joinedDate:"注册日期",actions:"操作"},actions:{edit:"编辑用户",verify:"验证用户",deactivate:"停用",activate:"激活"},editDialog:{title:"编辑用户"}},verifications:{title:"验证管理",fetchError:"获取验证文档失败",approveSuccess:"验证批准成功",approveError:"验证批准失败",rejectSuccess:"验证被拒绝",rejectError:"验证拒绝失败",columns:{id:"ID",user:"用户",document:"文档",uploadedAt:"上传时间",status:"状态",comment:"备注",actions:"操作"},actions:{review:"审核",approve:"批准",reject:"拒绝"},reviewDialog:{title:"审核验证文档",userInfo:"用户信息",documentInfo:"文档信息",documentReferences:"文档参考",adminComment:"管理员备注",commentPlaceholder:"在此添加您的审核意见..."}},disputes:{title:"争议管理",fetchError:"获取争议失败",resolveSuccess:"争议解决成功",resolveError:"争议解决失败",status:{open:"未处理",underReview:"审核中",resolved:"已解决",refunded:"已退款",rejected:"已拒绝"},columns:{id:"ID",user:"举报者",service:"服务",amount:"金额",reason:"原因",status:"状态",createdAt:"创建时间",actions:"操作"},actions:{resolve:"解决",view:"查看",refund:"退款"},resolveDialog:{title:"解决争议",viewTitle:"查看争议详情",disputeInfo:"争议信息",disputeId:"争议ID",paymentId:"支付ID",amount:"金额",service:"服务",status:"状态",userInfo:"举报者",createdAt:"创建时间",resolvedAt:"解决时间",reason:"争议原因",evidence:"证据",viewEvidence:"查看证据",resolution:"解决方案",adminNotes:"管理员备注",notesPlaceholder:"添加解决备注..."},resolution:{resolved:"已解决 - 不退款",refunded:"已退款 - 处理退款",rejected:"已拒绝 - 无效争议"}},monitoring:{title:"平台监控",loading:"加载监控数据中...",fetchError:"获取监控数据失败",stats:{totalUsers:"总用户数",activeUsers:"活跃用户",totalBookings:"总预订数",totalRevenue:"总收入",successRate:"成功率",avgResponseTime:"平均响应时间"},systemMetrics:"系统指标",activityLogs:"最近活动",columns:{timestamp:"时间",level:"级别",source:"来源",message:"消息",details:"详情"}}},active:"活跃",inactive:"非活跃",approved:"已批准",rejected:"已拒绝",pending:"待处理",save:"保存",fileName:"文件名",fileType:"文件类型",uploadedAt:"上传时间",status:"状态"}}};jt.use(St).use(kt).init({resources:Tr,fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});var Er,Fr={};const Ar=It(function(){if(Er)return Fr;Er=1;var e=Pt();return Fr.createRoot=e.createRoot,Fr.hydrateRoot=e.hydrateRoot,Fr}());var Or=class extends Error{issues;constructor(e){super(e[0].message),this.name="SchemaError",this.issues=e}},Hr=(e=>(e.uninitialized="uninitialized",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected",e))(Hr||{});function Lr(e){return{status:e,isUninitialized:"uninitialized"===e,isLoading:"pending"===e,isSuccess:"fulfilled"===e,isError:"rejected"===e}}var $r=qt;function zr(e,t){if(e===t||!($r(e)&&$r(t)||Array.isArray(e)&&Array.isArray(t)))return t;const r=Object.keys(t),n=Object.keys(e);let o=r.length===n.length;const a=Array.isArray(t)?[]:{};for(const i of r)a[i]=zr(e[i],t[i]),o&&(o=e[i]===a[i]);return o?e:a}function qr(e){let t=0;for(const r in e)t++;return t}var Br=e=>[].concat(...e);function Vr(e){return null!=e}function Wr(e,t){if(!e)return t;if(!t)return e;if(function(e){return new RegExp("(^|:)//").test(e)}(t))return t;const r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=(e=>e.replace(/\/$/,""))(e),`${e}${r}${t=(e=>e.replace(/^\//,""))(t)}`}var Gr=(...e)=>fetch(...e),Ur=e=>e.status>=200&&e.status<=299,Kr=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function _r(e){if(!qt(e))return e;const t={...e};for(const[r,n]of Object.entries(t))void 0===n&&delete t[r];return t}function Qr({baseUrl:e,prepareHeaders:t=e=>e,fetchFn:r=Gr,paramsSerializer:n,isJsonContentType:o=Kr,jsonContentType:a="application/json",jsonReplacer:i,timeout:s,responseHandler:l,validateStatus:c,...d}={}){return async(m,p,h)=>{const{getState:g,extra:f,endpoint:x,forced:b,type:y}=p;let v,w,{url:C,headers:j=new Headers(d.headers),params:S,responseHandler:k=l??"json",validateStatus:R=c??Ur,timeout:N=s,...P}="string"==typeof m?{url:m}:m,I=p.signal;N&&(w=new AbortController,p.signal.addEventListener("abort",w.abort),I=w.signal);let M={...d,signal:I,...P};j=new Headers(_r(j)),M.headers=await t(j,{getState:g,arg:m,extra:f,endpoint:x,forced:b,type:y,extraOptions:h})||j;const D=e=>"object"==typeof e&&(qt(e)||Array.isArray(e)||"function"==typeof e.toJSON);if(!M.headers.has("content-type")&&D(M.body)&&M.headers.set("content-type",a),D(M.body)&&o(M.headers)&&(M.body=JSON.stringify(M.body,i)),S){const e=~C.indexOf("?")?"&":"?";C+=e+(n?n(S):new URLSearchParams(_r(S)))}C=Wr(e,C);const T=new Request(C,M);v={request:new Request(C,M)};let E,F=!1,A=w&&setTimeout(()=>{F=!0,w.abort()},N);try{E=await r(T)}catch($){return{error:{status:F?"TIMEOUT_ERROR":"FETCH_ERROR",error:String($)},meta:v}}finally{A&&clearTimeout(A),w?.signal.removeEventListener("abort",w.abort)}const O=E.clone();let H;v.response=O;let L="";try{let e;if(await Promise.all([u(E,k).then(e=>H=e,t=>e=t),O.text().then(e=>L=e,()=>{})]),e)throw e}catch($){return{error:{status:"PARSING_ERROR",originalStatus:E.status,data:L,error:String($)},meta:v}}return R(E,H)?{data:H,meta:v}:{error:{status:E.status,data:H},meta:v}};async function u(e,t){if("function"==typeof t)return t(e);if("content-type"===t&&(t=o(e.headers)?"json":"text"),"json"===t){const t=await e.text();return t.length?JSON.parse(t):null}return e.text()}}var Xr=class{constructor(e,t=void 0){this.value=e,this.meta=t}},Yr=Vt("__rtkq/focused"),Zr=Vt("__rtkq/unfocused"),Jr=Vt("__rtkq/online"),en=Vt("__rtkq/offline"),tn=!1;function rn(e){return"query"===e.type}function nn(e){return"infinitequery"===e.type}function on(e){return rn(e)||nn(e)}function an(e,t,r,n,o,a){return"function"==typeof e?e(t,r,n,o).filter(Vr).map(sn).map(a):Array.isArray(e)?e.map(sn).map(a):[]}function sn(e){return"string"==typeof e?{type:e}:e}var ln=Symbol("forceQueryFn"),cn=e=>"function"==typeof e[ln];var dn=class extends Or{constructor(e,t,r,n){super(e),this.value=t,this.schemaName=r,this._bqMeta=n}};async function un(e,t,r,n){const o=await e["~standard"].validate(t);if(o.issues)throw new dn(o.issues,t,r,n);return o.value}function mn(e){return e}var pn=(e={})=>({...e,[er]:!0});function hn(e,{pages:t,pageParams:r},n){const o=t.length-1;return e.getNextPageParam(t[o],t,r[o],r,n)}function gn(e,{pages:t,pageParams:r},n){return e.getPreviousPageParam?.(t[0],t,r[0],r,n)}function fn(e,t,r,n){return an(r[e.meta.arg.endpointName][t],Yt(e)?e.payload:void 0,Xt(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function xn(e,t,r){const n=e[t];n&&r(n)}function bn(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function yn(e,t,r){const n=e[bn(t)];n&&r(n)}var vn={};function wn({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:o,apiUid:a,extractRehydrationInfo:i,hasRehydrationInfo:s},assertTagType:l,config:c}){const d=Vt(`${e}/resetApiState`);function u(e,t,r,n){e[t.queryCacheKey]??={status:"uninitialized",endpointName:t.endpointName},xn(e,t.queryCacheKey,e=>{e.status="pending",e.requestId=r&&e.requestId?e.requestId:n.requestId,void 0!==t.originalArgs&&(e.originalArgs=t.originalArgs),e.startedTimeStamp=n.startedTimeStamp;nn(o[n.arg.endpointName])&&"direction"in t&&(e.direction=t.direction)})}function m(e,t,r,n){xn(e,t.arg.queryCacheKey,e=>{if(e.requestId!==t.requestId&&!n)return;const{merge:a}=o[t.arg.endpointName];if(e.status="fulfilled",a)if(void 0!==e.data){const{fulfilledTimeStamp:n,arg:o,baseQueryMeta:i,requestId:s}=t;let l=Gt(e.data,e=>a(e,r,{arg:o.originalArgs,baseQueryMeta:i,fulfilledTimeStamp:n,requestId:s}));e.data=l}else e.data=r;else e.data=o[t.arg.endpointName].structuralSharing??1?zr(lr(e.data)?cr(e.data):e.data,r):r;delete e.error,e.fulfilledTimeStamp=t.fulfilledTimeStamp})}const p=Kt({name:`${e}/queries`,initialState:vn,reducers:{removeQueryResult:{reducer(e,{payload:{queryCacheKey:t}}){delete e[t]},prepare:_t()},cacheEntriesUpserted:{reducer(e,t){for(const r of t.payload){const{queryDescription:n,value:o}=r;u(e,n,!0,{arg:n,requestId:t.meta.requestId,startedTimeStamp:t.meta.timestamp}),m(e,{arg:n,requestId:t.meta.requestId,fulfilledTimeStamp:t.meta.timestamp,baseQueryMeta:{}},o,!0)}},prepare:e=>({payload:e.map(e=>{const{endpointName:t,arg:r,value:a}=e,i=o[t];return{queryDescription:{type:"query",endpointName:t,originalArgs:e.arg,queryCacheKey:n({queryArgs:r,endpointDefinition:i,endpointName:t})},value:a}}),meta:{[er]:!0,requestId:$t(),timestamp:Date.now()}})},queryResultPatched:{reducer(e,{payload:{queryCacheKey:t,patches:r}}){xn(e,t,e=>{e.data=Zt(e.data,r.concat())})},prepare:_t()}},extraReducers(e){e.addCase(t.pending,(e,{meta:t,meta:{arg:r}})=>{u(e,r,cn(r),t)}).addCase(t.fulfilled,(e,{meta:t,payload:r})=>{m(e,t,r,cn(t.arg))}).addCase(t.rejected,(e,{meta:{condition:t,arg:r,requestId:n},error:o,payload:a})=>{xn(e,r.queryCacheKey,e=>{if(t);else{if(e.requestId!==n)return;e.status="rejected",e.error=a??o}})}).addMatcher(s,(e,t)=>{const{queries:r}=i(t);for(const[n,o]of Object.entries(r))"fulfilled"!==o?.status&&"rejected"!==o?.status||(e[n]=o)})}}),h=Kt({name:`${e}/mutations`,initialState:vn,reducers:{removeMutationResult:{reducer(e,{payload:t}){const r=bn(t);r in e&&delete e[r]},prepare:_t()}},extraReducers(e){e.addCase(r.pending,(e,{meta:t,meta:{requestId:r,arg:n,startedTimeStamp:o}})=>{n.track&&(e[bn(t)]={requestId:r,status:"pending",endpointName:n.endpointName,startedTimeStamp:o})}).addCase(r.fulfilled,(e,{payload:t,meta:r})=>{r.arg.track&&yn(e,r,e=>{e.requestId===r.requestId&&(e.status="fulfilled",e.data=t,e.fulfilledTimeStamp=r.fulfilledTimeStamp)})}).addCase(r.rejected,(e,{payload:t,error:r,meta:n})=>{n.arg.track&&yn(e,n,e=>{e.requestId===n.requestId&&(e.status="rejected",e.error=t??r)})}).addMatcher(s,(e,t)=>{const{mutations:r}=i(t);for(const[n,o]of Object.entries(r))"fulfilled"!==o?.status&&"rejected"!==o?.status||n===o?.requestId||(e[n]=o)})}}),g=Kt({name:`${e}/invalidation`,initialState:{tags:{},keys:{}},reducers:{updateProvidedBy:{reducer(e,t){for(const{queryCacheKey:r,providedTags:n}of t.payload){f(e,r);for(const{type:t,id:o}of n){const n=(e.tags[t]??={})[o||"__internal_without_id"]??=[];n.includes(r)||n.push(r)}e.keys[r]=n}},prepare:_t()}},extraReducers(e){e.addCase(p.actions.removeQueryResult,(e,{payload:{queryCacheKey:t}})=>{f(e,t)}).addMatcher(s,(e,t)=>{const{provided:r}=i(t);for(const[n,o]of Object.entries(r))for(const[t,r]of Object.entries(o)){const o=(e.tags[n]??={})[t||"__internal_without_id"]??=[];for(const e of r){o.includes(e)||o.push(e)}}}).addMatcher(Qt(Yt(t),Xt(t)),(e,t)=>{x(e,[t])}).addMatcher(p.actions.cacheEntriesUpserted.match,(e,t)=>{x(e,t.payload.map(({queryDescription:e,value:t})=>({type:"UNKNOWN",payload:t,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:e}})))})}});function f(e,t){const r=e.keys[t]??[];for(const n of r){const r=n.type,o=n.id??"__internal_without_id",a=e.tags[r]?.[o];a&&(e.tags[r][o]=a.filter(e=>e!==t))}delete e.keys[t]}function x(e,t){const r=t.map(e=>{const t=fn(e,"providesTags",o,l),{queryCacheKey:r}=e.meta.arg;return{queryCacheKey:r,providedTags:t}});g.caseReducers.updateProvidedBy(e,g.actions.updateProvidedBy(r))}const b=Kt({name:`${e}/subscriptions`,initialState:vn,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),y=Kt({name:`${e}/internalSubscriptions`,initialState:vn,reducers:{subscriptionsUpdated:{reducer:(e,t)=>Zt(e,t.payload),prepare:_t()}}}),v=Kt({name:`${e}/config`,initialState:{online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine,focused:"undefined"==typeof document||"hidden"!==document.visibilityState,middlewareRegistered:!1,...c},reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered="conflict"!==e.middlewareRegistered&&a===t||"conflict"}},extraReducers:e=>{e.addCase(Jr,e=>{e.online=!0}).addCase(en,e=>{e.online=!1}).addCase(Yr,e=>{e.focused=!0}).addCase(Zr,e=>{e.focused=!1}).addMatcher(s,e=>({...e}))}}),w=Jt({queries:p.reducer,mutations:h.reducer,provided:g.reducer,subscriptions:y.reducer,config:v.reducer});return{reducer:(e,t)=>w(d.match(t)?void 0:e,t),actions:{...v.actions,...p.actions,...b.actions,...y.actions,...h.actions,...g.actions,resetApiState:d}}}var Cn=Symbol.for("RTKQ/skipToken"),jn={status:"uninitialized"},Sn=Gt(jn,()=>{}),kn=Gt(jn,()=>{});var Rn=WeakMap?new WeakMap:void 0,Nn=({endpointName:e,queryArgs:t})=>{let r="";const n=Rn?.get(t);if("string"==typeof n)r=n;else{const e=JSON.stringify(t,(e,t)=>(t="bigint"==typeof t?{$bigint:t.toString()}:t,t=qt(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t));qt(t)&&Rn?.set(t,e),r=e}return`${e}(${r})`};function Pn(...e){return function(t){const r=Lt(e=>t.extractRehydrationInfo?.(e,{reducerPath:t.reducerPath??"api"})),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:r,serializeQueryArgs(e){let r=Nn;if("serializeQueryArgs"in e.endpointDefinition){const t=e.endpointDefinition.serializeQueryArgs;r=e=>{const r=t(e);return"string"==typeof r?r:Nn({...e,queryArgs:r})}}else t.serializeQueryArgs&&(r=t.serializeQueryArgs);return r(e)},tagTypes:[...t.tagTypes||[]]},o={endpointDefinitions:{},batch(e){e()},apiUid:$t(),extractRehydrationInfo:r,hasRehydrationInfo:Lt(e=>null!=r(e))},a={injectEndpoints:function(e){const t=e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"}),infiniteQuery:e=>({...e,type:"infinitequery"})});for(const[r,n]of Object.entries(t))if(!0!==e.overrideExisting&&r in o.endpointDefinitions){if("throw"===e.overrideExisting)throw new Error(zt(39))}else{o.endpointDefinitions[r]=n;for(const e of i)e.injectEndpoint(r,n)}return a},enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(const r of e)n.tagTypes.includes(r)||n.tagTypes.push(r);if(t)for(const[r,n]of Object.entries(t))"function"==typeof n?n(o.endpointDefinitions[r]):Object.assign(o.endpointDefinitions[r]||{},n);return a}},i=e.map(e=>e.init(a,n,o));return a.injectEndpoints({endpoints:t.endpoints})}}function In(e,...t){return Object.assign(e,...t)}var Mn=({api:e,queryThunk:t,internalState:r})=>{const n=`${e.reducerPath}/subscriptions`;let o=null,a=null;const{updateSubscriptionOptions:i,unsubscribeQueryResult:s}=e.internalActions,l=()=>r.currentSubscriptions,c={getSubscriptions:l,getSubscriptionCount:e=>qr(l()[e]??{}),isRequestSubscribed:(e,t)=>{const r=l();return!!r?.[e]?.[t]}};return(l,d)=>{if(o||(o=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(l))return o=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(l))return[!1,c];const u=((r,n)=>{if(i.match(n)){const{queryCacheKey:e,requestId:t,options:o}=n.payload;return r?.[e]?.[t]&&(r[e][t]=o),!0}if(s.match(n)){const{queryCacheKey:e,requestId:t}=n.payload;return r[e]&&delete r[e][t],!0}if(e.internalActions.removeQueryResult.match(n))return delete r[n.payload.queryCacheKey],!0;if(t.pending.match(n)){const{meta:{arg:e,requestId:t}}=n,o=r[e.queryCacheKey]??={};return o[`${t}_running`]={},e.subscribe&&(o[t]=e.subscriptionOptions??o[t]??{}),!0}let o=!1;if(t.fulfilled.match(n)||t.rejected.match(n)){const e=r[n.meta.arg.queryCacheKey]||{},t=`${n.meta.requestId}_running`;o||=!!e[t],delete e[t]}if(t.rejected.match(n)){const{meta:{condition:e,arg:t,requestId:a}}=n;if(e&&t.subscribe){const e=r[t.queryCacheKey]??={};e[a]=t.subscriptionOptions??e[a]??{},o=!0}}return o})(r.currentSubscriptions,l);let m=!0;if(u){a||(a=setTimeout(()=>{const t=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,n]=ar(o,()=>t);d.next(e.internalActions.subscriptionsUpdated(n)),o=t,a=null},500));const i="string"==typeof l.type&&!!l.type.startsWith(n),s=t.rejected.match(l)&&l.meta.condition&&!!l.meta.arg.subscribe;m=!i&&!s}return[m,!1]}};var Dn=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:o,selectors:{selectQueryEntry:a,selectConfig:i}})=>{const{removeQueryResult:s,unsubscribeQueryResult:l,cacheEntriesUpserted:c}=t.internalActions,d=Qt(l.match,r.fulfilled,r.rejected,c.match);function u(e){const t=o.currentSubscriptions[e];return!!t&&!function(e){for(const t in e)return!1;return!0}(t)}const m={};function p(e,t,r){const n=t.getState();for(const o of e){const e=a(n,o);h(o,e?.endpointName,t,r)}}function h(e,t,r,o){const a=n.endpointDefinitions[t],i=a?.keepUnusedDataFor??o.keepUnusedDataFor;if(i===1/0)return;const l=Math.max(0,Math.min(i,2147482.647));if(!u(e)){const t=m[e];t&&clearTimeout(t),m[e]=setTimeout(()=>{u(e)||r.dispatch(s({queryCacheKey:e})),delete m[e]},1e3*l)}}return(e,r,o)=>{const a=r.getState(),s=i(a);if(d(e)){let t;if(c.match(e))t=e.payload.map(e=>e.queryDescription.queryCacheKey);else{const{queryCacheKey:r}=l.match(e)?e.payload:e.meta.arg;t=[r]}p(t,r,s)}if(t.util.resetApiState.match(e))for(const[t,n]of Object.entries(m))n&&clearTimeout(n),delete m[t];if(n.hasRehydrationInfo(e)){const{queries:t}=n.extractRehydrationInfo(e);p(Object.keys(t),r,s)}}},Tn=new Error("Promise never resolved before cacheEntryRemoved."),En=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:o,internalState:a,selectors:{selectQueryEntry:i,selectApiState:s}})=>{const l=sr(n),c=sr(o),d=Yt(n,o),u={};function m(e,t,r){const n=u[e];n?.valueResolved&&(n.valueResolved({data:t,meta:r}),delete n.valueResolved)}function p(e){const t=u[e];t&&(delete u[e],t.cacheEntryRemoved())}function h(t,n,o,a,i){const s=r.endpointDefinitions[t],l=s?.onCacheEntryAdded;if(!l)return;const c={},d=new Promise(e=>{c.cacheEntryRemoved=e}),m=Promise.race([new Promise(e=>{c.valueResolved=e}),d.then(()=>{throw Tn})]);m.catch(()=>{}),u[o]=c;const p=e.endpoints[t].select(on(s)?n:o),h=a.dispatch((e,t,r)=>r),g={...a,getCacheEntry:()=>p(a.getState()),requestId:i,extra:h,updateCachedData:on(s)?r=>a.dispatch(e.util.updateQueryData(t,n,r)):void 0,cacheDataLoaded:m,cacheEntryRemoved:d},f=l(n,g);Promise.resolve(f).catch(e=>{if(e!==Tn)throw e})}return(r,a,s)=>{const g=function(t){if(l(t))return t.meta.arg.queryCacheKey;if(c(t))return t.meta.arg.fixedCacheKey??t.meta.requestId;return e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?bn(t.payload):""}(r);function f(e,t,r,n){const o=i(s,t),l=i(a.getState(),t);!o&&l&&h(e,n,t,a,r)}if(n.pending.match(r))f(r.meta.arg.endpointName,g,r.meta.requestId,r.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(r))for(const{queryDescription:e,value:t}of r.payload){const{endpointName:n,originalArgs:o,queryCacheKey:a}=e;f(n,a,r.meta.requestId,o),m(a,t,{})}else if(o.pending.match(r)){a.getState()[t].mutations[g]&&h(r.meta.arg.endpointName,r.meta.arg.originalArgs,g,a,r.meta.requestId)}else if(d(r))m(g,r.payload,r.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(r)||e.internalActions.removeMutationResult.match(r))p(g);else if(e.util.resetApiState.match(r))for(const e of Object.keys(u))p(e)}},Fn=({api:e,context:{apiUid:t},reducerPath:r})=>(r,n)=>{e.util.resetApiState.match(r)&&n.dispatch(e.internalActions.middlewareRegistered(t))},An=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:o,api:a,assertTagType:i,refetchQuery:s,internalState:l})=>{const{removeQueryResult:c}=a.internalActions,d=Qt(Yt(n),Xt(n)),u=Qt(Yt(n,o),rr(n,o));let m=[];function p(r,n){const o=n.getState(),i=o[e];if(m.push(...r),"delayed"===i.config.invalidationBehavior&&function(e){const{queries:t,mutations:r}=e;for(const n of[t,r])for(const e in n)if("pending"===n[e]?.status)return!0;return!1}(i))return;const d=m;if(m=[],0===d.length)return;const u=a.util.selectInvalidatedBy(o,d);t.batch(()=>{const e=Array.from(u.values());for(const{queryCacheKey:t}of e){const e=i.queries[t],r=l.currentSubscriptions[t]??{};e&&(0===qr(r)?n.dispatch(c({queryCacheKey:t})):"uninitialized"!==e.status&&n.dispatch(s(e)))}})}return(e,t)=>{d(e)?p(fn(e,"invalidatesTags",r,i),t):u(e)?p([],t):a.util.invalidateTags.match(e)&&p(an(e.payload,void 0,void 0,void 0,void 0,i),t)}},On=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:o})=>{const a={};function i({queryCacheKey:t},r){const s=r.getState()[e],l=s.queries[t],d=o.currentSubscriptions[t];if(!l||"uninitialized"===l.status)return;const{lowestPollingInterval:u,skipPollingIfUnfocused:m}=c(d);if(!Number.isFinite(u))return;const p=a[t];p?.timeout&&(clearTimeout(p.timeout),p.timeout=void 0);const h=Date.now()+u;a[t]={nextPollTimestamp:h,pollingInterval:u,timeout:setTimeout(()=>{!s.config.focused&&m||r.dispatch(n(l)),i({queryCacheKey:t},r)},u)}}function s({queryCacheKey:t},r){const n=r.getState()[e].queries[t],s=o.currentSubscriptions[t];if(!n||"uninitialized"===n.status)return;const{lowestPollingInterval:d}=c(s);if(!Number.isFinite(d))return void l(t);const u=a[t],m=Date.now()+d;(!u||m<u.nextPollTimestamp)&&i({queryCacheKey:t},r)}function l(e){const t=a[e];t?.timeout&&clearTimeout(t.timeout),delete a[e]}function c(e={}){let t=!1,r=Number.POSITIVE_INFINITY;for(let n in e)e[n].pollingInterval&&(r=Math.min(e[n].pollingInterval,r),t=e[n].skipPollingIfUnfocused||t);return{lowestPollingInterval:r,skipPollingIfUnfocused:t}}return(e,n)=>{(r.internalActions.updateSubscriptionOptions.match(e)||r.internalActions.unsubscribeQueryResult.match(e))&&s(e.payload,n),(t.pending.match(e)||t.rejected.match(e)&&e.meta.condition)&&s(e.meta.arg,n),(t.fulfilled.match(e)||t.rejected.match(e)&&!e.meta.condition)&&i(e.meta.arg,n),r.util.resetApiState.match(e)&&function(){for(const e of Object.keys(a))l(e)}()}},Hn=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{const o=nr(r,n),a=rr(r,n),i=Yt(r,n),s={};return(r,n)=>{if(o(r)){const{requestId:o,arg:{endpointName:a,originalArgs:i}}=r.meta,l=t.endpointDefinitions[a],c=l?.onQueryStarted;if(c){const t={},r=new Promise((e,r)=>{t.resolve=e,t.reject=r});r.catch(()=>{}),s[o]=t;const d=e.endpoints[a].select(on(l)?i:o),u=n.dispatch((e,t,r)=>r),m={...n,getCacheEntry:()=>d(n.getState()),requestId:o,extra:u,updateCachedData:on(l)?t=>n.dispatch(e.util.updateQueryData(a,i,t)):void 0,queryFulfilled:r};c(i,m)}}else if(i(r)){const{requestId:e,baseQueryMeta:t}=r.meta;s[e]?.resolve({data:r.payload,meta:t}),delete s[e]}else if(a(r)){const{requestId:e,rejectedWithValue:t,baseQueryMeta:n}=r.meta;s[e]?.reject({error:r.payload??r.error,isUnhandledError:!t,meta:n}),delete s[e]}}};function Ln(e){const{reducerPath:t,queryThunk:r,api:n,context:o}=e,{apiUid:a}=o,i={invalidateTags:Vt(`${t}/invalidateTags`)},s=e=>e.type.startsWith(`${t}/`),l=[Fn,Dn,An,On,En,Hn];return{middleware:r=>{let i=!1;const d={...e,internalState:{currentSubscriptions:{}},refetchQuery:c,isThisApiSliceAction:s},u=l.map(e=>e(d)),m=Mn(d),p=(({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:o})=>{const{removeQueryResult:a}=r.internalActions;function i(r,i){const s=r.getState()[e],l=s.queries,c=o.currentSubscriptions;t.batch(()=>{for(const e of Object.keys(c)){const t=l[e],o=c[e];o&&t&&((Object.values(o).some(e=>!0===e[i])||Object.values(o).every(e=>void 0===e[i])&&s.config[i])&&(0===qr(o)?r.dispatch(a({queryCacheKey:e})):"uninitialized"!==t.status&&r.dispatch(n(t))))}})}return(e,t)=>{Yr.match(e)&&i(t,"refetchOnFocus"),Jr.match(e)&&i(t,"refetchOnReconnect")}})(d);return e=>l=>{if(!ir(l))return e(l);i||(i=!0,r.dispatch(n.internalActions.middlewareRegistered(a)));const c={...r,next:e},d=r.getState(),[h,g]=m(l,c,d);let f;if(f=h?e(l):g,r.getState()[t]&&(p(l,c,d),s(l)||o.hasRehydrationInfo(l)))for(const e of u)e(l,c,d);return f}},actions:i};function c(t){return e.api.endpoints[t.endpointName].initiate(t.originalArgs,{subscribe:!1,forceRefetch:!0})}}var $n=Symbol(),zn=({createSelector:e=Wt}={})=>({name:$n,init(t,{baseQuery:r,tagTypes:n,reducerPath:o,serializeQueryArgs:a,keepUnusedDataFor:i,refetchOnMountOrArgChange:s,refetchOnFocus:l,refetchOnReconnect:c,invalidationBehavior:d,onSchemaFailure:u,catchSchemaFailure:m,skipSchemaValidation:p},h){Bt();const g=e=>e;Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:Jr,onOffline:en,onFocus:Yr,onFocusLost:Zr},util:{}});const f=function({serializeQueryArgs:e,reducerPath:t,createSelector:r}){const n=e=>Sn,o=e=>kn;return{buildQuerySelector:function(e,t){return c(e,t,a)},buildInfiniteQuerySelector:function(e,t){const{infiniteQueryOptions:r}=t;return c(e,t,function(e){const t={...e,...Lr(e.status)},{isLoading:n,isError:o,direction:a}=t,i="forward"===a,s="backward"===a;return{...t,hasNextPage:d(r,t.data,t.originalArgs),hasPreviousPage:u(r,t.data,t.originalArgs),isFetchingNextPage:n&&i,isFetchingPreviousPage:n&&s,isFetchNextPageError:o&&i,isFetchPreviousPageError:o&&s}})},buildMutationSelector:function(){return e=>{let t;return t="object"==typeof e?bn(e)??Cn:e,r(t===Cn?o:e=>i(e)?.mutations?.[t]??kn,a)}},selectInvalidatedBy:function(e,r){const n=e[t],o=new Set;for(const t of r.filter(Vr).map(sn)){const e=n.provided.tags[t.type];if(!e)continue;let r=(void 0!==t.id?e[t.id]:Br(Object.values(e)))??[];for(const t of r)o.add(t)}return Br(Array.from(o.values()).map(e=>{const t=n.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]}))},selectCachedArgsForQuery:function(e,t){return Object.values(s(e)).filter(e=>e?.endpointName===t&&"uninitialized"!==e.status).map(e=>e.originalArgs)},selectApiState:i,selectQueries:s,selectMutations:function(e){return i(e)?.mutations},selectQueryEntry:l,selectConfig:function(e){return i(e)?.config}};function a(e){return{...e,...Lr(e.status)}}function i(e){return e[t]}function s(e){return i(e)?.queries}function l(e,t){return s(e)?.[t]}function c(t,o,a){return i=>{if(i===Cn)return r(n,a);const s=e({queryArgs:i,endpointDefinition:o,endpointName:t});return r(e=>l(e,s)??Sn,a)}}function d(e,t,r){return!!t&&null!=hn(e,t,r)}function u(e,t,r){return!(!t||!e.getPreviousPageParam)&&null!=gn(e,t,r)}}({serializeQueryArgs:a,reducerPath:o,createSelector:e}),{selectInvalidatedBy:x,selectCachedArgsForQuery:b,buildQuerySelector:y,buildInfiniteQuerySelector:v,buildMutationSelector:w}=f;In(t.util,{selectInvalidatedBy:x,selectCachedArgsForQuery:b});const{queryThunk:C,infiniteQueryThunk:j,mutationThunk:S,patchQueryData:k,updateQueryData:R,upsertQueryData:N,prefetch:P,buildMatchThunkActions:I}=function({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:o,assertTagType:a,selectors:i,onSchemaFailure:s,catchSchemaFailure:l,skipSchemaValidation:c}){function d(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}function u(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}const m=(e,t)=>e.query&&e[t]?e[t]:mn,p=async(e,{signal:n,abort:o,rejectWithValue:a,fulfillWithValue:p,dispatch:g,getState:f,extra:x})=>{const b=r[e.endpointName],{metaSchema:y,skipSchemaValidation:v=c}=b;try{let j=m(b,"transformResponse");const S={signal:n,abort:o,dispatch:g,getState:f,extra:x,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?h(e,f()):void 0,queryCacheKey:"query"===e.type?e.queryCacheKey:void 0},k="query"===e.type?e[ln]:void 0;let R;const N=async(t,r,n,o)=>{if(null==r&&t.pages.length)return Promise.resolve({data:t});const a={queryArg:e.originalArgs,pageParam:r},i=await P(a),s=o?d:u;return{data:{pages:s(t.pages,i.data,n),pageParams:s(t.pageParams,r,n)},meta:i.meta}};async function P(e){let r;const{extraOptions:n,argSchema:o,rawResponseSchema:a,responseSchema:i}=b;if(o&&!v&&(e=await un(o,e,"argSchema",{})),r=k?k():b.query?await t(b.query(e),S,n):await b.queryFn(e,S,n,e=>t(e,S,n)),r.error)throw new Xr(r.error,r.meta);let{data:s}=r;a&&!v&&(s=await un(a,r.data,"rawResponseSchema",r.meta));let l=await j(s,r.meta,e);return i&&!v&&(l=await un(i,l,"responseSchema",r.meta)),{...r,data:l}}if("query"===e.type&&"infiniteQueryOptions"in b){const{infiniteQueryOptions:I}=b,{maxPages:M=1/0}=I;let D;const T={pages:[],pageParams:[]},E=i.selectQueryEntry(f(),e.queryCacheKey)?.data,F=h(e,f())&&!e.direction||!E?T:E;if("direction"in e&&e.direction&&F.pages.length){const A="backward"===e.direction,O=(A?gn:hn)(I,F,e.originalArgs);D=await N(F,O,M,A)}else{const{initialPageParam:H=I.initialPageParam}=e,L=E?.pageParams??[],$=L[0]??H,z=L.length;D=await N(F,$,M),k&&(D={data:D.data.pages[0]});for(let q=1;q<z;q++){const B=hn(I,D.data,e.originalArgs);D=await N(D.data,B,M)}}R=D}else R=await P(e.originalArgs);return y&&!v&&R.meta&&(R.meta=await un(y,R.meta,"metaSchema",R.meta)),p(R.data,pn({fulfilledTimeStamp:Date.now(),baseQueryMeta:R.meta}))}catch(w){let V=w;if(V instanceof Xr){let W=m(b,"transformErrorResponse");const{rawErrorResponseSchema:G,errorResponseSchema:U}=b;let{value:K,meta:_}=V;try{G&&!v&&(K=await un(G,K,"rawErrorResponseSchema",_)),y&&!v&&(_=await un(y,_,"metaSchema",_));let Q=await W(K,_,e.originalArgs);return U&&!v&&(Q=await un(U,Q,"errorResponseSchema",_)),a(Q,pn({baseQueryMeta:_}))}catch(C){V=C}}try{if(V instanceof dn){const X={endpoint:e.endpointName,arg:e.originalArgs,type:e.type,queryCacheKey:"query"===e.type?e.queryCacheKey:void 0};b.onSchemaFailure?.(V,X),s?.(V,X);const{catchSchemaFailure:Y=l}=b;if(Y)return a(Y(V,X),pn({baseQueryMeta:V._bqMeta}))}}catch(C){V=C}throw V}};function h(e,t){const r=i.selectQueryEntry(t,e.queryCacheKey),n=i.selectConfig(t).refetchOnMountOrArgChange,o=r?.fulfilledTimeStamp,a=e.forceRefetch??(e.subscribe&&n);return!!a&&(!0===a||(Number(new Date)-Number(o))/1e3>=a)}const g=()=>Ut(`${e}/executeQuery`,p,{getPendingMeta({arg:e}){const t=r[e.endpointName];return pn({startedTimeStamp:Date.now(),...nn(t)?{direction:e.direction}:{}})},condition(e,{getState:t}){const n=t(),o=i.selectQueryEntry(n,e.queryCacheKey),a=o?.fulfilledTimeStamp,s=e.originalArgs,l=o?.originalArgs,c=r[e.endpointName],d=e.direction;return!(!cn(e)&&("pending"===o?.status||!h(e,n)&&(!rn(c)||!c?.forceRefetch?.({currentArg:s,previousArg:l,endpointState:o,state:n}))&&a&&!d))},dispatchConditionRejection:!0}),f=g(),x=g(),b=Ut(`${e}/executeMutation`,p,{getPendingMeta:()=>pn({startedTimeStamp:Date.now()})});function y(e){return t=>t?.meta?.arg?.endpointName===e}return{queryThunk:f,mutationThunk:b,infiniteQueryThunk:x,prefetch:(e,t,r)=>(n,a)=>{const i=(e=>"force"in e)(r)&&r.force,s=(e=>"ifOlderThan"in e)(r)&&r.ifOlderThan,l=(r=!0)=>{const n={forceRefetch:r,isPrefetch:!0};return o.endpoints[e].initiate(t,n)},c=o.endpoints[e].select(t)(a());if(i)n(l());else if(s){const e=c?.fulfilledTimeStamp;if(!e)return void n(l());(Number(new Date)-Number(new Date(e)))/1e3>=s&&n(l())}else n(l(!1))},updateQueryData:(e,t,r,n=!0)=>(a,i)=>{const s=o.endpoints[e].select(t)(i()),l={patches:[],inversePatches:[],undo:()=>a(o.util.patchQueryData(e,t,l.inversePatches,n))};if("uninitialized"===s.status)return l;let c;if("data"in s)if(or(s.data)){const[e,t,n]=ar(s.data,r);l.patches.push(...t),l.inversePatches.push(...n),c=e}else c=r(s.data),l.patches.push({op:"replace",path:[],value:c}),l.inversePatches.push({op:"replace",path:[],value:s.data});return 0===l.patches.length||a(o.util.patchQueryData(e,t,l.patches,n)),l},upsertQueryData:(e,t,r)=>n=>n(o.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[ln]:()=>({data:r})})),patchQueryData:(e,t,i,s)=>(l,c)=>{const d=r[e],u=n({queryArgs:t,endpointDefinition:d,endpointName:e});if(l(o.internalActions.queryResultPatched({queryCacheKey:u,patches:i})),!s)return;const m=o.endpoints[e].select(t)(c()),p=an(d.providesTags,m.data,void 0,t,{},a);l(o.internalActions.updateProvidedBy([{queryCacheKey:u,providedTags:p}]))},buildMatchThunkActions:function(e,t){return{matchPending:tr(nr(e),y(t)),matchFulfilled:tr(Yt(e),y(t)),matchRejected:tr(rr(e),y(t))}}}}({baseQuery:r,reducerPath:o,context:h,api:t,serializeQueryArgs:a,assertTagType:g,selectors:f,onSchemaFailure:u,catchSchemaFailure:m,skipSchemaValidation:p}),{reducer:M,actions:D}=wn({context:h,queryThunk:C,mutationThunk:S,serializeQueryArgs:a,reducerPath:o,assertTagType:g,config:{refetchOnFocus:l,refetchOnReconnect:c,refetchOnMountOrArgChange:s,keepUnusedDataFor:i,reducerPath:o,invalidationBehavior:d}});In(t.util,{patchQueryData:k,updateQueryData:R,upsertQueryData:N,prefetch:P,resetApiState:D.resetApiState,upsertQueryEntries:D.cacheEntriesUpserted}),In(t.internalActions,D);const{middleware:T,actions:E}=Ln({reducerPath:o,context:h,queryThunk:C,mutationThunk:S,infiniteQueryThunk:j,api:t,assertTagType:g,selectors:f});In(t.util,E),In(t,{reducer:M,middleware:T});const{buildInitiateQuery:F,buildInitiateInfiniteQuery:A,buildInitiateMutation:O,getRunningMutationThunk:H,getRunningMutationsThunk:L,getRunningQueriesThunk:$,getRunningQueryThunk:z}=function({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:n,api:o,context:a}){const i=new Map,s=new Map,{unsubscribeQueryResult:l,removeMutationResult:c,updateSubscriptionOptions:d}=o.internalActions;return{buildInitiateQuery:function(e,t){return u(e,t)},buildInitiateInfiniteQuery:function(e,t){return u(e,t)},buildInitiateMutation:function(e){return(t,{track:r=!0,fixedCacheKey:o}={})=>(a,i)=>{const l=n({type:"mutation",endpointName:e,originalArgs:t,track:r,fixedCacheKey:o}),d=a(l),{requestId:u,abort:m,unwrap:p}=d,h=(g=e=>({error:e}),d.unwrap().then(e=>({data:e})).catch(g));var g;const f=Object.assign(h,{arg:d.arg,requestId:u,abort:m,unwrap:p,reset:()=>{a(c({requestId:u,fixedCacheKey:o}))}}),x=s.get(a)||{};return s.set(a,x),x[u]=f,f.then(()=>{delete x[u],qr(x)||s.delete(a)}),o&&(x[o]=f,f.then(()=>{x[o]===f&&(delete x[o],qr(x)||s.delete(a))})),f}},getRunningQueryThunk:function(t,r){return n=>{const o=a.endpointDefinitions[t],s=e({queryArgs:r,endpointDefinition:o,endpointName:t});return i.get(n)?.[s]}},getRunningMutationThunk:function(e,t){return e=>s.get(e)?.[t]},getRunningQueriesThunk:function(){return e=>Object.values(i.get(e)||{}).filter(Vr)},getRunningMutationsThunk:function(){return e=>Object.values(s.get(e)||{}).filter(Vr)}};function u(n,a){const s=(c,{subscribe:u=!0,forceRefetch:m,subscriptionOptions:p,[ln]:h,...g}={})=>(f,x)=>{const b=e({queryArgs:c,endpointDefinition:a,endpointName:n});let y;const v={...g,type:"query",subscribe:u,forceRefetch:m,subscriptionOptions:p,endpointName:n,originalArgs:c,queryCacheKey:b,[ln]:h};if(rn(a))y=t(v);else{const{direction:e,initialPageParam:t}=g;y=r({...v,direction:e,initialPageParam:t})}const w=o.endpoints[n].select(c),C=f(y),j=w(x()),{requestId:S,abort:k}=C,R=j.requestId!==S,N=i.get(f)?.[b],P=()=>w(x()),I=Object.assign(h?C.then(P):R&&!N?Promise.resolve(j):Promise.all([N,C]).then(P),{arg:c,requestId:S,subscriptionOptions:p,queryCacheKey:b,abort:k,async unwrap(){const e=await I;if(e.isError)throw e.error;return e.data},refetch:()=>f(s(c,{subscribe:!1,forceRefetch:!0})),unsubscribe(){u&&f(l({queryCacheKey:b,requestId:S}))},updateSubscriptionOptions(e){I.subscriptionOptions=e,f(d({endpointName:n,requestId:S,queryCacheKey:b,options:e}))}});if(!N&&!R&&!h){const e=(D=f,T={},(M=i).has(D)?M.get(D):M.set(D,T).get(D));e[b]=I,I.then(()=>{delete e[b],qr(e)||i.delete(f)})}var M,D,T;return I};return s}}({queryThunk:C,mutationThunk:S,infiniteQueryThunk:j,api:t,serializeQueryArgs:a,context:h});return In(t.util,{getRunningMutationThunk:H,getRunningMutationsThunk:L,getRunningQueryThunk:z,getRunningQueriesThunk:$}),{name:$n,injectEndpoint(e,r){const n=t,o=n.endpoints[e]??={};rn(r)&&In(o,{name:e,select:y(e,r),initiate:F(e,r)},I(C,e)),"mutation"===r.type&&In(o,{name:e,select:w(),initiate:O(e)},I(S,e)),nn(r)&&In(o,{name:e,select:v(e,r),initiate:A(e,r)},I(C,e))}}}});zn();const qn={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!1,error:null},Bn=Ut("auth/login",async(e,{rejectWithValue:t})=>{try{const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){return t(await r.text()||"loginFailed")}const n=await r.json();return localStorage.setItem("token",n.token),n}catch(r){return t("loginFailed")}}),Vn=Ut("auth/getCurrentUser",async(e,{rejectWithValue:t})=>{try{const e=localStorage.getItem("token");if(!e)return t("noToken");const r=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)return 401===r.status&&localStorage.removeItem("token"),t("getUserProfileFailed");return{user:await r.json(),token:e}}catch(r){return t("getUserProfileFailed")}}),Wn=Kt({name:"auth",initialState:qn,reducers:{clearError:e=>{e.error=null},clearAuth:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token")}},extraReducers:e=>{e.addCase(Bn.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Bn.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(Bn.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(Vn.pending,e=>{e.isLoading=!0}).addCase(Vn.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(Vn.rejected,(e,t)=>{e.isLoading=!1,e.isAuthenticated=!1,e.user=null,e.error=t.payload||"Failed to fetch user profile.","noToken"!==t.payload&&"getUserProfileFailed"!==t.payload||(e.token=null)})}}),{clearError:Gn,clearAuth:Un}=Wn.actions,Kn=Wn.reducer,_n=Ut("flightCompanion/fetchRequests",async(e,{rejectWithValue:t})=>{try{const e=await fetch("/api/flightcompanion/requests");if(!e.ok)throw new Error("Failed to fetch requests");return await e.json()}catch(r){return t(r instanceof Error?r.message:"Unknown error")}}),Qn=Ut("flightCompanion/fetchOffers",async(e,{rejectWithValue:t})=>{try{const e=await fetch("/api/flightcompanion/offers");if(!e.ok)throw new Error("Failed to fetch offers");return await e.json()}catch(r){return t(r instanceof Error?r.message:"Unknown error")}}),Xn=Ut("flightCompanion/createRequest",async(e,{rejectWithValue:t})=>{try{const t=await fetch("/api/flightcompanion/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create request");return await t.json()}catch(r){return t(r instanceof Error?r.message:"Unknown error")}}),Yn=Ut("flightCompanion/createOffer",async(e,{rejectWithValue:t})=>{try{const t=await fetch("/api/flightcompanion/offers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create offer");return await t.json()}catch(r){return t(r instanceof Error?r.message:"Unknown error")}}),Zn=Kt({name:"flightCompanion",initialState:{requests:[],offers:[],selectedRequest:null,selectedOffer:null,filters:{departureAirport:"",arrivalAirport:"",dateRange:{start:"",end:""},priceRange:{min:0,max:1e3}},isLoading:!1,error:null},reducers:{setSelectedRequest:(e,t)=>{e.selectedRequest=t.payload},setSelectedOffer:(e,t)=>{e.selectedOffer=t.payload},updateFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(_n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(_n.fulfilled,(e,t)=>{e.isLoading=!1,e.requests=t.payload}).addCase(_n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Qn.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Qn.fulfilled,(e,t)=>{e.isLoading=!1,e.offers=t.payload}).addCase(Qn.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Xn.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Xn.fulfilled,(e,t)=>{e.isLoading=!1,e.requests.push(t.payload)}).addCase(Xn.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Yn.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Yn.fulfilled,(e,t)=>{e.isLoading=!1,e.offers.push(t.payload)}).addCase(Yn.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{setSelectedRequest:Jn,setSelectedOffer:eo,updateFilters:to,clearError:ro}=Zn.actions,no=Zn.reducer,oo={requests:[],offers:[],filters:{airport:"",dateRange:{start:"",end:""},priceRange:{min:0,max:200},passengerCount:void 0,vehicleType:"",hasLuggage:void 0,serviceArea:"",searchText:""},isLoading:!1,error:null},ao=Kt({name:"pickup",initialState:oo,reducers:{updateFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters=oo.filters},clearError:e=>{e.error=null}}}),{updateFilters:io,clearFilters:so,clearError:lo}=ao.actions,co=ao.reducer,uo={theme:localStorage.getItem("theme")||"light",isDrawerOpen:!1,notifications:[],isLoading:!1,currentPage:"/",searchQuery:""},mo=Kt({name:"ui",initialState:uo,reducers:{toggleTheme:e=>{e.theme="light"===e.theme?"dark":"light",localStorage.setItem("theme",e.theme)},setTheme:(e,t)=>{e.theme=t.payload,localStorage.setItem("theme",e.theme)},toggleDrawer:e=>{e.isDrawerOpen=!e.isDrawerOpen},setDrawerOpen:(e,t)=>{e.isDrawerOpen=t.payload},addNotification:(e,t)=>{const r={...t.payload,id:Date.now().toString()};e.notifications.push(r)},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(e=>e.id!==t.payload)},clearNotifications:e=>{e.notifications=[]},setLoading:(e,t)=>{e.isLoading=t.payload},setCurrentPage:(e,t)=>{e.currentPage=t.payload},setSearchQuery:(e,t)=>{e.searchQuery=t.payload}}}),{toggleTheme:po,setTheme:ho,toggleDrawer:go,setDrawerOpen:fo,addNotification:xo,removeNotification:bo,clearNotifications:yo,setLoading:vo,setCurrentPage:wo,setSearchQuery:Co}=mo.actions,jo=mo.reducer,So=Ut("emergency/trigger",async(e,{rejectWithValue:t})=>{try{const r=localStorage.getItem("token"),n=await fetch("/api/emergency/trigger",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(e)});if(!n.ok){return t(await n.text())}return await n.json()}catch(r){return t("Failed to trigger emergency")}}),ko=Ut("emergency/triggerSOS",async(e,{rejectWithValue:t})=>{try{const r=localStorage.getItem("token"),n=await fetch("/api/emergency/sos",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(e)});if(!n.ok){return t(await n.text())}return await n.json()}catch(r){return t("Failed to trigger SOS")}}),Ro=Ut("emergency/cancel",async(e,{rejectWithValue:t})=>{try{const r=localStorage.getItem("token"),n=await fetch(`/api/emergency/${e}/cancel`,{method:"PUT",headers:{Authorization:`Bearer ${r}`}});if(!n.ok){return t(await n.text())}return e}catch(r){return t("Failed to cancel emergency")}}),No=Ut("emergency/resolve",async(e,{rejectWithValue:t})=>{try{const r=localStorage.getItem("token"),n=await fetch(`/api/emergency/${e.emergencyId}/resolve`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({resolution:e.resolution})});if(!n.ok){return t(await n.text())}return await n.json()}catch(r){return t("Failed to resolve emergency")}}),Po=Ut("emergency/fetchMy",async(e,{rejectWithValue:t})=>{try{const e=localStorage.getItem("token"),r=await fetch("/api/emergency/my-emergencies",{headers:{Authorization:`Bearer ${e}`}});if(!r.ok){return t(await r.text())}return await r.json()}catch(r){return t("Failed to fetch emergencies")}}),Io=Ut("emergency/fetchActive",async(e,{rejectWithValue:t})=>{try{const e=localStorage.getItem("token"),r=await fetch("/api/emergency/active",{headers:{Authorization:`Bearer ${e}`}});if(!r.ok){return t(await r.text())}return await r.json()}catch(r){return t("Failed to fetch active emergencies")}}),Mo=Kt({name:"emergency",initialState:{emergencies:[],activeEmergency:null,loading:!1,error:null},reducers:{clearError:e=>{e.error=null},clearActiveEmergency:e=>{e.activeEmergency=null}},extraReducers:e=>{e.addCase(So.pending,e=>{e.loading=!0,e.error=null}).addCase(So.fulfilled,(e,t)=>{e.loading=!1,e.activeEmergency=t.payload,e.emergencies.unshift(t.payload)}).addCase(So.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(ko.pending,e=>{e.loading=!0,e.error=null}).addCase(ko.fulfilled,(e,t)=>{e.loading=!1,e.activeEmergency=t.payload,e.emergencies.unshift(t.payload)}).addCase(ko.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Ro.fulfilled,(e,t)=>{e.activeEmergency=null;const r=e.emergencies.find(e=>e.id===t.payload);r&&(r.status="Cancelled")}).addCase(No.fulfilled,(e,t)=>{const r=e.emergencies.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.emergencies[r]=t.payload),e.activeEmergency?.id===t.payload.id&&(e.activeEmergency=null)}).addCase(Po.fulfilled,(e,t)=>{e.emergencies=t.payload,e.activeEmergency=t.payload.find(e=>"Active"===e.status)||null}).addCase(Io.fulfilled,(e,t)=>{e.emergencies=t.payload})}}),{clearError:Do,clearActiveEmergency:To}=Mo.actions,Eo=Mo.reducer;function Fo(e){return e.replace(e[0],e[0].toUpperCase())}function Ao(e){return"infinitequery"===e.type}function Oo(e,...t){return Object.assign(e,...t)}var Ho=Symbol();function Lo(t,r,n,o){const a=e.useMemo(()=>({queryArgs:t,serialized:"object"==typeof t?r({queryArgs:t,endpointDefinition:n,endpointName:o}):t}),[t,r,n,o]),i=e.useRef(a);return e.useEffect(()=>{i.current.serialized!==a.serialized&&(i.current=a)},[a]),i.current.serialized===a.serialized?i.current.queryArgs:t}function $o(t){const r=e.useRef(t);return e.useEffect(()=>{hr(r.current,t)||(r.current=t)},[t]),hr(r.current,t)?r.current:t}var zo=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),qo=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Bo=(()=>zo||qo?e.useLayoutEffect:e.useEffect)(),Vo=e=>e.isUninitialized?{...e,isUninitialized:!1,isFetching:!0,isLoading:void 0===e.data,status:Hr.pending}:e;function Wo(e,...t){const r={};return t.forEach(t=>{r[t]=e[t]}),r}var Go=["data","status","isLoading","isSuccess","isError","error"];var Uo=Symbol(),Ko=Pn(zn(),(({batch:t=dr,hooks:r={useDispatch:pr,useSelector:mr,useStore:ur},createSelector:n=Wt,unstable__sideEffectsInRender:o=!1,...a}={})=>({name:Uo,init(a,{serializeQueryArgs:i},s){const l=a,{buildQueryHooks:c,buildInfiniteQueryHooks:d,buildMutationHook:u,usePrefetch:m}=function({api:t,moduleOptions:{batch:r,hooks:{useDispatch:n,useSelector:o,useStore:a},unstable__sideEffectsInRender:i,createSelector:s},serializeQueryArgs:l,context:c}){const d=i?e=>e():e.useEffect;return{buildQueryHooks:function(o){const a=(t,r={})=>{const[n]=p(o,t,r);return g(n),e.useMemo(()=>({refetch:()=>f(n)}),[n])},i=({refetchOnReconnect:a,refetchOnFocus:i,pollingInterval:s=0,skipPollingIfUnfocused:l=!1}={})=>{const{initiate:c}=t.endpoints[o],u=n(),[m,p]=e.useState(Ho),h=e.useRef(void 0),g=$o({refetchOnReconnect:a,refetchOnFocus:i,pollingInterval:s,skipPollingIfUnfocused:l});d(()=>{const e=h.current?.subscriptionOptions;g!==e&&h.current?.updateSubscriptionOptions(g)},[g]);const f=e.useRef(g);d(()=>{f.current=g},[g]);const x=e.useCallback(function(e,t=!1){let n;return r(()=>{h.current?.unsubscribe(),h.current=n=u(c(e,{subscriptionOptions:f.current,forceRefetch:!t})),p(e)}),n},[u,c]),b=e.useCallback(()=>{h.current?.queryCacheKey&&u(t.internalActions.removeQueryResult({queryCacheKey:h.current?.queryCacheKey}))},[u]);return e.useEffect(()=>()=>{h?.current?.unsubscribe()},[]),e.useEffect(()=>{m===Ho||h.current||x(m,!0)},[m,x]),e.useMemo(()=>[x,m,{reset:b}],[x,m,b])},s=h(o,u);return{useQueryState:s,useQuerySubscription:a,useLazyQuerySubscription:i,useLazyQuery(t){const[r,n,{reset:o}]=i(t),a=s(n,{...t,skip:n===Ho}),l=e.useMemo(()=>({lastArg:n}),[n]);return e.useMemo(()=>[r,{...a,reset:o},l],[r,a,o,l])},useQuery(t,r){const n=a(t,r),o=s(t,{selectFromResult:t===Cn||r?.skip?void 0:Vo,...r}),i=Wo(o,...Go);return e.useDebugValue(i),e.useMemo(()=>({...o,...n}),[o,n])}}},buildInfiniteQueryHooks:function(t){const n=(n,o={})=>{const[a,i,s,l]=p(t,n,o),u=e.useRef(l);d(()=>{u.current=l},[l]);const m=e.useCallback(function(e,t){let n;return r(()=>{a.current?.unsubscribe(),a.current=n=i(s(e,{subscriptionOptions:u.current,direction:t}))}),n},[a,i,s]);g(a);const h=Lo(o.skip?Cn:n,Nn,c.endpointDefinitions[t],t),x=e.useCallback(()=>f(a),[a]);return e.useMemo(()=>({trigger:m,refetch:x,fetchNextPage:()=>m(h,"forward"),fetchPreviousPage:()=>m(h,"backward")}),[x,m,h])},o=h(t,m);return{useInfiniteQueryState:o,useInfiniteQuerySubscription:n,useInfiniteQuery(t,r){const{refetch:a,fetchNextPage:i,fetchPreviousPage:s}=n(t,r),l=o(t,{selectFromResult:t===Cn||r?.skip?void 0:Vo,...r}),c=Wo(l,...Go,"hasNextPage","hasPreviousPage");return e.useDebugValue(c),e.useMemo(()=>({...l,fetchNextPage:i,fetchPreviousPage:s,refetch:a}),[l,i,s,a])}}},buildMutationHook:function(a){return({selectFromResult:i,fixedCacheKey:l}={})=>{const{select:c,initiate:d}=t.endpoints[a],u=n(),[m,p]=e.useState();e.useEffect(()=>()=>{m?.arg.fixedCacheKey||m?.reset()},[m]);const h=e.useCallback(function(e){const t=u(d(e,{fixedCacheKey:l}));return p(t),t},[u,d,l]),{requestId:g}=m||{},f=e.useMemo(()=>c({fixedCacheKey:l,requestId:m?.requestId}),[l,m,c]),x=e.useMemo(()=>i?s([f],i):f,[i,f]),b=o(x,hr),y=null==l?m?.arg.originalArgs:void 0,v=e.useCallback(()=>{r(()=>{m&&p(void 0),l&&u(t.internalActions.removeMutationResult({requestId:g,fixedCacheKey:l}))})},[u,l,m,g]),w=Wo(b,...Go,"endpointName");e.useDebugValue(w);const C=e.useMemo(()=>({...b,originalArgs:y,reset:v}),[b,y,v]);return e.useMemo(()=>[h,C],[h,C])}},usePrefetch:function(r,o){const a=n(),i=$o(o);return e.useCallback((e,n)=>a(t.util.prefetch(r,e,{...i,...n})),[r,a,i])}};function u(e,t,r){if(t?.endpointName&&e.isUninitialized){const{endpointName:e}=t,n=c.endpointDefinitions[e];r!==Cn&&l({queryArgs:t.originalArgs,endpointDefinition:n,endpointName:e})===l({queryArgs:r,endpointDefinition:n,endpointName:e})&&(t=void 0)}let n=e.isSuccess?e.data:t?.data;void 0===n&&(n=e.data);const o=void 0!==n,a=e.isLoading,i=(!t||t.isLoading||t.isUninitialized)&&!o&&a,s=e.isSuccess||o&&(a&&!t?.isError||e.isUninitialized);return{...e,data:n,currentData:e.data,isFetching:a,isLoading:i,isSuccess:s}}function m(e,t,r){if(t?.endpointName&&e.isUninitialized){const{endpointName:e}=t,n=c.endpointDefinitions[e];r!==Cn&&l({queryArgs:t.originalArgs,endpointDefinition:n,endpointName:e})===l({queryArgs:r,endpointDefinition:n,endpointName:e})&&(t=void 0)}let n=e.isSuccess?e.data:t?.data;void 0===n&&(n=e.data);const o=void 0!==n,a=e.isLoading,i=(!t||t.isLoading||t.isUninitialized)&&!o&&a,s=e.isSuccess||a&&o;return{...e,data:n,currentData:e.data,isFetching:a,isLoading:i,isSuccess:s}}function p(r,o,{refetchOnReconnect:a,refetchOnFocus:i,refetchOnMountOrArgChange:s,skip:l=!1,pollingInterval:u=0,skipPollingIfUnfocused:m=!1,...p}={}){const{initiate:h}=t.endpoints[r],g=n(),f=e.useRef(void 0);if(!f.current){const e=g(t.internalActions.internal_getRTKQSubscriptions());f.current=e}const x=Lo(l?Cn:o,Nn,c.endpointDefinitions[r],r),b=$o({refetchOnReconnect:a,refetchOnFocus:i,pollingInterval:u,skipPollingIfUnfocused:m}),y=$o(p.initialPageParam),v=e.useRef(void 0);let{queryCacheKey:w,requestId:C}=v.current||{},j=!1;w&&C&&(j=f.current.isRequestSubscribed(w,C));const S=!j&&void 0!==v.current;return d(()=>{S&&(v.current=void 0)},[S]),d(()=>{const e=v.current;if(x===Cn)return e?.unsubscribe(),void(v.current=void 0);const t=v.current?.subscriptionOptions;if(e&&e.arg===x)b!==t&&e.updateSubscriptionOptions(b);else{e?.unsubscribe();const t=g(h(x,{subscriptionOptions:b,forceRefetch:s,...Ao(c.endpointDefinitions[r])?{initialPageParam:y}:{}}));v.current=t}},[g,h,s,x,b,S,y,r]),[v,g,h,b]}function h(r,n){return(i,{skip:d=!1,selectFromResult:u}={})=>{const{select:m}=t.endpoints[r],p=Lo(d?Cn:i,l,c.endpointDefinitions[r],r),h=e.useRef(void 0),g=e.useMemo(()=>s([m(p),(e,t)=>t,e=>p],n,{memoizeOptions:{resultEqualityCheck:hr}}),[m,p]),f=e.useMemo(()=>u?s([g],u,{devModeChecks:{identityFunctionCheck:"never"}}):g,[g,u]),x=o(e=>f(e,h.current),hr),b=a(),y=g(b.getState(),h.current);return Bo(()=>{h.current=y},[y]),x}}function g(t){e.useEffect(()=>()=>{t.current?.unsubscribe?.(),t.current=void 0},[t])}function f(e){if(!e.current)throw new Error(zt(38));return e.current.refetch()}}({api:a,moduleOptions:{batch:t,hooks:r,unstable__sideEffectsInRender:o,createSelector:n},serializeQueryArgs:i,context:s});return Oo(l,{usePrefetch:m}),Oo(s,{batch:t}),{injectEndpoint(e,t){if("query"===t.type){const{useQuery:t,useLazyQuery:r,useLazyQuerySubscription:n,useQueryState:o,useQuerySubscription:i}=c(e);Oo(l.endpoints[e],{useQuery:t,useLazyQuery:r,useLazyQuerySubscription:n,useQueryState:o,useQuerySubscription:i}),a[`use${Fo(e)}Query`]=t,a[`useLazy${Fo(e)}Query`]=r}if(function(e){return"mutation"===e.type}(t)){const t=u(e);Oo(l.endpoints[e],{useMutation:t}),a[`use${Fo(e)}Mutation`]=t}else if(Ao(t)){const{useInfiniteQuery:t,useInfiniteQuerySubscription:r,useInfiniteQueryState:n}=d(e);Oo(l.endpoints[e],{useInfiniteQuery:t,useInfiniteQuerySubscription:r,useInfiniteQueryState:n}),a[`use${Fo(e)}InfiniteQuery`]=t}}}}}))());const _o=Ko({reducerPath:"api",baseQuery:Qr({baseUrl:"/api",prepareHeaders:(e,{getState:t})=>{const r=t().auth.token;return r&&e.set("authorization",`Bearer ${r}`),e}}),tagTypes:["FlightCompanionRequest","FlightCompanionOffer","PickupRequest","PickupOffer","User"],endpoints:()=>({})}),Qo=Ko({reducerPath:"paymentApi",baseQuery:Qr({baseUrl:"/api/payment/",prepareHeaders:(e,{getState:t})=>{const r=t().auth.token;return r&&e.set("authorization",`Bearer ${r}`),e}}),endpoints:e=>({getPaymentHistory:e.query({query:()=>"history"})})}),{useGetPaymentHistoryQuery:Xo}=Qo,Yo=gr({reducer:{auth:Kn,flightCompanion:no,pickup:co,ui:jo,emergency:Eo,[_o.reducerPath]:_o.reducer,[Qo.reducerPath]:Qo.reducer},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}).concat(_o.middleware).concat(Qo.middleware),devTools:!1});var Zo;Zo=Yo.dispatch,function(){const e=()=>Zo(Yr()),t=()=>Zo(Jr()),r=()=>Zo(en()),n=()=>{"visible"===window.document.visibilityState?e():Zo(Zr())};tn||"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",e,!1),window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),tn=!0)}();const Jo=()=>pr(),ea=mr,ta=e.createContext(void 0),ra=()=>{const t=e.useContext(ta);if(void 0===t)throw new Error("useTheme must be used within a ThemeProvider");return t},na=({children:a})=>{const i=Jo(),s=ea(e=>e.ui.theme);e.useEffect(()=>{if(!localStorage.getItem("theme")){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;i(ho(e?"dark":"light"))}const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{localStorage.getItem("theme")||i(ho(e.matches?"dark":"light"))};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[i]),e.useEffect(()=>{const e=document.documentElement;"dark"===s?e.classList.add("dark"):e.classList.remove("dark")},[s]);const l=t({palette:{mode:s,primary:{main:"#082B6D",light:"#3a4e8c",dark:"#061e4a"},secondary:{main:"#97E1F5",light:"#c2f1fb",dark:"#6bb3c7"},background:{default:"dark"===s?"#121212":"#ffffff",paper:"dark"===s?"#1e1e1e":"#ffffff"},text:{primary:"dark"===s?"#ffffff":"#000000",secondary:"dark"===s?"#b0b0b0":"#666666"}},typography:{fontFamily:["Roboto","Helvetica","Arial","sans-serif"].join(","),h1:{fontWeight:600,color:"#082B6D"},h2:{fontWeight:600,color:"#082B6D"},h3:{fontWeight:500,color:"#082B6D"},button:{textTransform:"none",fontWeight:500}},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,textTransform:"none",fontWeight:500,boxShadow:"none","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.15)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"dark"===s?"0 4px 20px rgba(0,0,0,0.3)":"0 2px 12px rgba(0,0,0,0.08)"}}},MuiContainer:{styleOverrides:{root:{paddingLeft:"16px",paddingRight:"16px","@media (min-width: 600px)":{paddingLeft:"24px",paddingRight:"24px"}}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"dark"===s?"#1e1e1e":"#1976d2",color:"#ffffff"}}}}}),c={theme:s,toggleTheme:()=>{i(po())},muiTheme:l};return r.jsx(ta.Provider,{value:c,children:r.jsxs(n,{theme:l,children:[r.jsx(o,{}),a]})})};var oa={};const aa=Mt(a);var ia;function sa(){return ia||(ia=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=aa}(oa)),oa}const la=({error:e,errorInfo:t,onRetry:n,showDetails:o,onToggleDetails:a})=>{const[h,g]=i.useState(!1);return r.jsx(s,{maxWidth:"sm",className:"py-16 animate-fade-in",children:r.jsxs(l,{elevation:4,sx:{p:{xs:3,sm:6},borderRadius:4,border:e=>`2px solid ${e.palette.error.light}`,textAlign:"center",boxShadow:6,position:"relative",overflow:"hidden"},role:"alert","aria-live":"assertive",children:[r.jsx(c,{sx:{position:"absolute",bottom:0,right:0,width:{xs:80,sm:120},height:{xs:80,sm:120},opacity:.1,zIndex:0,pointerEvents:"none"},children:r.jsx("img",{src:"/images/airplane-art.png",alt:"Airplane decoration",style:{width:"100%",height:"100%",objectFit:"contain"}})}),r.jsx(d,{sx:{fontSize:70,color:"error.main",mb:2,opacity:.85}}),r.jsx(u,{variant:"h4",fontWeight:700,color:"error.main",gutterBottom:!0,children:"Something went wrong"}),r.jsx(u,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Sorry, we hit a snag. Try refreshing the page, or contact us if the problem continues."}),r.jsxs(c,{className:"flex flex-col sm:flex-row gap-3 justify-center mb-6",children:[r.jsx(m,{variant:"contained",color:"primary",size:"large",startIcon:r.jsx(p,{}),onClick:n,sx:{minWidth:140,fontWeight:600,boxShadow:2},"aria-label":"Try again",children:"Try Again"}),r.jsx(m,{variant:"outlined",size:"large",className:"bg-[#DC6E6A] text-white border-[#DC6E6A]",onClick:()=>window.location.href="/",sx:{minWidth:140},"aria-label":"Go home",children:"Go Home"})]}),!1,r.jsxs(c,{sx:{mt:6,pt:3,borderTop:"1px solid",borderColor:"grey.200"},children:[r.jsx(u,{variant:"body2",color:"text.secondary",mb:1,children:"Need help? Contact our support team"}),r.jsxs(c,{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[r.jsx(m,{variant:"text",size:"small",href:"mailto:support@wingcompanion.co.nz",sx:{color:"primary.main",fontWeight:500},"aria-label":"Email support",children:"Email Support"}),r.jsx(m,{variant:"text",size:"small",href:"/help-center",sx:{color:"primary.main",fontWeight:500},"aria-label":"Help center",children:"Help Center"})]})]})]})})};class ca extends e.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,showDetails:!1})},this.handleToggleDetails=()=>{this.setState(e=>({showDetails:!e.showDetails}))},this.state={hasError:!1,showDetails:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.props.onError?.(e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx(la,{error:this.state.error,errorInfo:this.state.errorInfo,onRetry:this.handleRetry,showDetails:this.state.showDetails,onToggleDetails:this.handleToggleDetails}):this.props.children}}const da=i.forwardRef(function(e,t){return r.jsx(h,{direction:"up",ref:t,...e})}),ua=i.forwardRef(function(e,t){return r.jsx(g,{ref:t,...e})}),ma=i.forwardRef(function(e,t){return r.jsx(f,{ref:t,...e})}),pa=x(b)(({theme:e})=>({minWidth:"320px",maxWidth:"600px",borderRadius:e.spacing(1.5),boxShadow:e.shadows[8],backdropFilter:"blur(8px)","& .MuiAlert-icon":{fontSize:"1.5rem"},"& .MuiAlert-message":{padding:"2px 0",display:"flex",flexDirection:"column",gap:e.spacing(1)},"& .MuiAlert-action":{padding:"0 0 0 16px",marginRight:0},[e.breakpoints.down("sm")]:{minWidth:"280px",maxWidth:"90vw",margin:"0 16px"}})),ha=x(c)(({theme:e})=>({position:"fixed",zIndex:e.zIndex.snackbar,display:"flex",flexDirection:"column",gap:e.spacing(1),maxHeight:"80vh",overflow:"hidden","&.position-top-right":{top:e.spacing(3),right:e.spacing(3)},"&.position-top-left":{top:e.spacing(3),left:e.spacing(3)},"&.position-top-center":{top:e.spacing(3),left:"50%",transform:"translateX(-50%)"},"&.position-bottom-right":{bottom:e.spacing(3),right:e.spacing(3)},"&.position-bottom-left":{bottom:e.spacing(3),left:e.spacing(3)},"&.position-bottom-center":{bottom:e.spacing(3),left:"50%",transform:"translateX(-50%)"},[e.breakpoints.down("sm")]:{left:e.spacing(2),right:e.spacing(2),transform:"none","&.position-top-center, &.position-bottom-center":{left:e.spacing(2),right:e.spacing(2),transform:"none"}}})),ga=({id:e,message:t,type:n,duration:o,persistent:a=!1,action:s,undoAction:l,showProgress:p=!1,onClose:h,onDismiss:g,transition:f,autoHideDuration:x})=>{const[b,y]=i.useState(100),[P,I]=i.useState(!0),M=i.useRef(),D=i.useRef(),T=o??x,E=i.useCallback(()=>{I(!1),setTimeout(()=>{g(e),h?.()},300)},[e,g,h]);i.useEffect(()=>{if(!(a||T<=0)){if(p){const e=50,t=100/(T/e);let r=100;M.current=setInterval(()=>{r-=t,r<=0&&(r=0,clearInterval(M.current),E()),y(r)},e)}else D.current=setTimeout(()=>{E()},T);return()=>{M.current&&clearInterval(M.current),D.current&&clearTimeout(D.current)}}},[T,a,p,E]);const F=(()=>{switch(f){case"slide":default:return da;case"grow":return ua;case"fade":return ma}})();return r.jsx(v,{open:P,TransitionComponent:F,className:"relative",children:r.jsx(pa,{severity:n,icon:(()=>{switch(n){case"success":return r.jsx(N,{});case"error":return r.jsx(d,{});case"warning":return r.jsx(R,{});default:return r.jsx(k,{})}})(),action:r.jsxs(c,{className:"flex items-center gap-1",children:[l&&r.jsx(m,{size:"small",startIcon:r.jsx(C,{}),onClick:()=>{l?.handler(),E()},className:"text-current hover:bg-black/10",children:l.label}),s&&r.jsx(m,{size:"small",onClick:()=>{s?.handler(),E()},className:"text-current hover:bg-black/10",children:s.label}),!a&&r.jsx(j,{size:"small",onClick:E,className:"text-current hover:bg-black/10","aria-label":"Close notification",children:r.jsx(S,{fontSize:"small"})})]}),className:"animate-fade-in",children:r.jsxs(c,{className:"w-full",children:[r.jsx(u,{variant:"body2",className:"font-medium",children:t}),p&&!a&&T>0&&r.jsx(w,{variant:"determinate",value:b,className:"mt-2 h-1 rounded-full",sx:{backgroundColor:"rgba(255, 255, 255, 0.3)","& .MuiLinearProgress-bar":{backgroundColor:"rgba(255, 255, 255, 0.7)"}}})]})})})},fa=({maxNotifications:e=5,position:t={vertical:"bottom",horizontal:"right"},transition:n="slide",autoHideDuration:o=6e3})=>{const a=Jo(),s=ea(e=>e.ui.notifications),l=i.useMemo(()=>s.slice(-e),[s,e]),c=e=>{a(bo(e))},d=`position-${t.vertical}-${t.horizontal}`;return 0===l.length?null:r.jsxs(ha,{className:d,children:[l.map(e=>r.jsx(ga,{...e,onDismiss:c,transition:n,autoHideDuration:o},e.id)),s.length>e&&r.jsx(y,{label:`+${s.length-e} more`,size:"small",className:"self-center animate-fade-in",onClick:()=>{}})]})},xa=x(c)(({theme:e})=>({position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:e.zIndex.modal,flexDirection:"column",gap:e.spacing(2)})),ba=x(c)(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(2),padding:e.spacing(3),backgroundColor:e.palette.background.paper,borderRadius:e.spacing(2),boxShadow:e.shadows[8],minWidth:"200px",[e.breakpoints.down("sm")]:{margin:e.spacing(2),minWidth:"160px",padding:e.spacing(2)}})),ya=({size:e="medium",color:t="primary",thickness:n=3.6,className:o="",overlay:a=!1,message:i})=>{const s=r.jsx(P,{size:e,color:t,thickness:n,className:`${o} animate-fade-in`.trim()});return a?r.jsx(f,{in:!0,timeout:300,children:r.jsx(xa,{children:r.jsxs(ba,{children:[s,i&&r.jsx(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300 text-center",children:i})]})})}):r.jsxs(c,{className:"flex flex-col items-center gap-2",children:[s,i&&r.jsx(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300 text-center",children:i})]})},va=({open:e,message:t="Loading...",backdrop:n=!0,children:o})=>e?r.jsx(f,{in:e,timeout:300,children:r.jsx(xa,{className:n?"bg-black/50 backdrop-blur-sm":"bg-transparent",children:o||r.jsxs(ba,{className:"animate-scale-in",children:[r.jsx(ya,{size:48}),r.jsx(u,{variant:"body1",className:"text-gray-700 dark:text-gray-200 font-medium",children:t})]})})}):null;var wa,Ca={};function ja(){if(wa)return Ca;wa=1;var e=I();Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.default=void 0;var t=e(sa()),r=M();return Ca.default=(0,t.default)((0,r.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightMode"),Ca}const Sa=It(ja());var ka,Ra={};function Na(){if(ka)return Ra;ka=1;var e=I();Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.default=void 0;var t=e(sa()),r=M();return Ra.default=(0,t.default)((0,r.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),Ra}const Pa=It(Na()),Ia=()=>{const{theme:e,toggleTheme:t}=ra();return r.jsx(D,{title:`Switch to ${"light"===e?"dark":"light"} mode`,children:r.jsx(j,{onClick:t,color:"inherit",className:"ml-2 transition-transform duration-200 hover:scale-110",children:"light"===e?r.jsx(Pa,{}):r.jsx(Sa,{})})})};var Ma,Da={};function Ta(){if(Ma)return Da;Ma=1;var e=I();Object.defineProperty(Da,"__esModule",{value:!0}),Da.default=void 0;var t=e(sa()),r=M();return Da.default=(0,t.default)((0,r.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language"),Da}const Ea=It(Ta()),Fa=[{code:"en",label:"English"},{code:"zh",label:"中文"}],Aa=()=>{const{i18n:e}=Rt(),t=e.language?.split("-")[0]||"en";return r.jsxs(c,{display:"flex",alignItems:"center",ml:2,children:[r.jsx(Ea,{className:"mr-1 text-[#020F6F]"}),r.jsx(T,{value:t,onChange:t=>{e.changeLanguage(t.target.value)},variant:"standard",disableUnderline:!0,sx:{minWidth:80,color:"text.primary"},children:Fa.map(e=>r.jsx(E,{value:e.code,children:e.label},e.code))})]})},Oa=({title:t="WingCompanion",items:n})=>{const[o,a]=e.useState(!1),{t:s}=Rt(),l=F(),d=A(l.breakpoints.down("md")),p=Tt(),h=Et(),g=Jo(),f=ea(e=>e.auth.isAuthenticated),x=ea(e=>e.auth.user),b=i.useMemo(()=>{if(!f||!x)return!1;try{const e=localStorage.getItem("token");if(e){const t=JSON.parse(atob(e.split(".")[1])),r=t?.role||t?.roles||t?.["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||[];return Array.isArray(r)?r.includes("Admin"):"Admin"===r}}catch(e){}return!1},[f,x]),y=n||((e=!1)=>{const t=[{textKey:"home",path:"/",icon:r.jsx(U,{})},{textKey:"flightCompanion",path:"/flight-companion",icon:r.jsx(K,{})},{textKey:"pickupService",path:"/pickup",icon:r.jsx(_,{})}];return e?[...t,{textKey:"adminDashboard",path:"/admin",icon:r.jsx(W,{}),requiresAuth:!0}]:[...t,{textKey:"profile",path:"/profile",icon:r.jsx(G,{}),requiresAuth:!0}]})(b),v=y.filter(e=>!e.requiresAuth||f),w=()=>{a(!o)},C=()=>{g(Un()),h("/"),a(!1)},S=r.jsx(c,{sx:{width:250},onClick:w,children:r.jsxs(O,{children:[v.map(e=>r.jsxs(H,{component:Ft,to:e.path,className:"transition-colors duration-200 "+(p.pathname===e.path?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"hover:bg-gray-50 dark:hover:bg-gray-800"),sx:{textDecoration:"none",color:"inherit"},children:[r.jsx(L,{className:p.pathname===e.path?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300",children:e.icon}),r.jsx($,{primary:s(e.textKey),className:"font-medium"})]},e.textKey)),f?r.jsx(H,{button:!0,onClick:C,children:r.jsx($,{primary:s("logout")})}):r.jsxs(r.Fragment,{children:[r.jsx(H,{component:Ft,to:"/login",sx:{color:"inherit",textDecoration:"none"},children:r.jsx($,{primary:s("login")})}),r.jsx(H,{component:Ft,to:"/register",sx:{color:"inherit",textDecoration:"none"},children:r.jsx($,{primary:s("register")})})]})]})});return r.jsxs(r.Fragment,{children:[r.jsx(z,{position:"static",className:"shadow-sm border-b border-gray-200 text-color-primary bg-[#CBDDDF]",elevation:0,children:r.jsxs(q,{children:[d&&r.jsx(j,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:w,className:"mr-2",sx:{color:"var(--color-primary)"},children:r.jsx(B,{})}),r.jsxs(u,{variant:"h6",component:Ft,to:"/",className:"flex-grow font-bold no-underline transition-colors flex items-center",sx:{color:"var(--color-primary)","&:hover":{color:"#061e4a"}},children:[r.jsx("img",{src:"/images/logo.png",alt:"WingCompanion Logo",style:{height:40,marginRight:12,display:"inline-block",verticalAlign:"middle"}}),t]}),!d&&r.jsxs(c,{className:"flex items-center space-x-1",children:[v.map(e=>r.jsxs(m,{component:Ft,to:e.path,className:"flex items-center space-x-2 px-5 py-2 text-sm font-medium transition-colors duration-200 no-underline "+(p.pathname===e.path?"bg-white/40":"hover:bg-white/30"),sx:{color:"var(--color-primary)"},children:[e.icon,r.jsx("span",{children:s(e.textKey)})]},e.textKey)),f?r.jsxs(c,{className:"flex items-center space-x-2 ml-4",children:[r.jsxs(u,{variant:"body2",sx:{color:"var(--color-primary)"},children:[s("Hi"),", ",b?"Admin":x?.firstName||s("user")]}),r.jsx(m,{color:"inherit",onClick:C,sx:{color:"var(--color-primary)"},children:s("logout")})]}):r.jsxs(c,{className:"flex items-center space-x-2 ml-4",children:[r.jsx(m,{component:Ft,to:"/login",color:"inherit",sx:{color:"var(--color-primary)"},children:s("login")}),r.jsx(m,{component:Ft,to:"/register",color:"inherit",variant:"outlined",sx:{color:"var(--color-primary)",borderColor:"var(--color-primary)"},children:s("register")})]})]}),r.jsx(Ia,{}),r.jsx(Aa,{})]})}),r.jsx(V,{variant:"temporary",open:o,onClose:w,ModalProps:{keepMounted:!0},className:"md:hidden",sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:250,backgroundColor:"background.default"}},children:S})]})},Ha=({companyName:e="WingCompanion"})=>{const{t:t}=Rt();F();const n=(new Date).getFullYear(),o=[{icon:r.jsx(te,{}),url:"https://facebook.com",label:"Facebook"},{icon:r.jsx(re,{}),url:"https://twitter.com",label:"Twitter"},{icon:r.jsx(ne,{}),url:"https://instagram.com",label:"Instagram"},{icon:r.jsx(oe,{}),url:"https://linkedin.com",label:"LinkedIn"}];return r.jsx(c,{component:"footer",className:"border-t border-gray-200 mt-auto bg-[#CBDDDF]",sx:{mt:"auto",color:"var(--color-primary)"},children:r.jsxs(s,{maxWidth:"lg",children:[r.jsx(c,{sx:{py:6},children:r.jsxs(Q,{container:!0,spacing:4,children:[r.jsxs(Q,{item:!0,xs:12,md:3,children:[r.jsx(u,{variant:"h6",className:"font-bold mb-4",sx:{color:"var(--color-primary)"},children:r.jsxs(X,{component:Ft,to:"/",className:"flex items-center no-underline",style:{color:"var(--color-primary)"},sx:{"&:hover":{color:"#061e4a"}},children:[r.jsx("img",{src:"/images/logo.png",alt:"WingCompanion Logo",style:{height:40,marginRight:12,display:"inline-block",verticalAlign:"middle"}}),e]})}),r.jsx(u,{variant:"body2",className:"mb-4",sx:{color:"var(--color-primary)"},children:t("footerDescription")}),r.jsxs(c,{className:"space-y-2",children:[r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx(Y,{className:"w-4 h-4",sx:{color:"var(--color-primary)"}}),r.jsx(u,{variant:"body2",sx:{color:"var(--color-primary)"},children:"support@wingcompanion.com"})]}),r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx(Z,{className:"w-4 h-4",sx:{color:"var(--color-primary)"}}),r.jsx(u,{variant:"body2",sx:{color:"var(--color-primary)"},children:"+64 21 123 4567"})]}),r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx(J,{className:"w-4 h-4",sx:{color:"var(--color-primary)"}}),r.jsx(u,{variant:"body2",sx:{color:"var(--color-primary)"},children:t("locationNZ")})]})]})]}),[{titleKey:"services",links:[{textKey:"flightCompanion",path:"/flight-companion"},{textKey:"pickupService",path:"/pickup"}]},{titleKey:"support",links:[{textKey:"helpCenter",path:"/help-center"},{textKey:"contactUs",path:"/contact"},{textKey:"faq",path:"/faq"}]},{titleKey:"legal",links:[{textKey:"termsOfService",path:"/terms-of-service"},{textKey:"privacyPolicy",path:"/privacy-policy"},{textKey:"communityGuidelines",path:"/community-guidelines"},{textKey:"cookiePolicy",path:"/cookie-policy"}]}].map(e=>r.jsxs(Q,{item:!0,xs:12,md:3,children:[r.jsx(u,{variant:"subtitle1",className:"font-semibold mb-3",sx:{color:"var(--color-primary)"},children:t(e.titleKey)}),r.jsx("ul",{className:"space-y-2",children:e.links.map(e=>r.jsx("li",{children:r.jsx(X,{component:Ft,to:e.path,className:"transition-colors",style:{color:"var(--color-primary)"},sx:{"&:hover":{color:"#061e4a"}},children:t(e.textKey)})},e.textKey))})]},e.titleKey))]})}),r.jsx(ee,{sx:{borderColor:"rgba(8,43,109,0.15)",mb:2}}),r.jsxs(c,{className:"flex flex-col sm:flex-row items-center justify-between py-4",children:[r.jsxs(u,{variant:"body2",className:"mb-2 sm:mb-0",sx:{color:"var(--color-primary)"},children:["© ",n," ",e,". ",t("allRightsReserved")]}),r.jsx(c,{className:"flex space-x-2",children:o.map(e=>r.jsx(j,{component:"a",href:e.url,target:"_blank",rel:"noopener noreferrer",className:"",sx:{color:"var(--color-primary)"},"aria-label":e.label,children:e.icon},e.label))})]})]})})},La=({children:e})=>r.jsxs(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[r.jsx(Oa,{}),r.jsx(s,{maxWidth:"lg",children:e}),r.jsx(Ha,{})]}),$a=Kt({name:"notification",initialState:{notifications:[],unreadCount:0,isSignalRConnected:!1},reducers:{addNotification:(e,t)=>{const r={...t.payload,id:Math.random().toString(36).substr(2,9),timestamp:Date.now()};e.notifications.push(r)},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(e=>e.id!==t.payload)},clearAllNotifications:e=>{e.notifications=[]},addSignalRNotification:(e,t)=>{const r={id:`signalr_${t.payload.id}`,serverId:t.payload.id,title:t.payload.title,message:t.payload.message,type:za(t.payload.type),actionUrl:t.payload.actionUrl,isRead:t.payload.isRead,timestamp:new Date(t.payload.createdAt).getTime(),duration:"Error"===t.payload.type?void 0:1e4,persistent:"Error"===t.payload.type};e.notifications.push(r),t.payload.isRead||e.unreadCount++},addSignalRMessage:(e,t)=>{const r={id:`message_${t.payload.senderId}_${Date.now()}`,title:`New message from ${t.payload.senderName}`,message:t.payload.messagePreview,type:"info",timestamp:new Date(t.payload.timestamp).getTime(),duration:8e3,action:{label:"View",handler:()=>{window.location.href=`/messages/${t.payload.senderId}`}}};e.notifications.push(r)},addSystemNotification:(e,t)=>{const r={id:`system_${Date.now()}`,title:t.payload.title,message:t.payload.message,type:za(t.payload.type),timestamp:new Date(t.payload.timestamp).getTime(),duration:15e3,persistent:"Error"===t.payload.type||"Warning"===t.payload.type};e.notifications.push(r)},setUnreadCount:(e,t)=>{e.unreadCount=t.payload},setSignalRConnectionStatus:(e,t)=>{e.isSignalRConnected=t.payload},markNotificationAsRead:(e,t)=>{const r=e.notifications.find(e=>e.serverId===t.payload);r&&!r.isRead&&(r.isRead=!0,e.unreadCount=Math.max(0,e.unreadCount-1))},markAllNotificationsAsRead:(e,t)=>{e.notifications.forEach(e=>{e.serverId&&!e.isRead&&(e.isRead=!0)}),e.unreadCount=0}}});function za(e){switch(e.toLowerCase()){case"matchfound":case"paymentreceived":case"servicecompleted":case"success":return"success";case"error":case"paymentfailed":return"error";case"warning":case"servicecancelled":return"warning";default:return"info"}}const{addNotification:qa,removeNotification:Ba,clearAllNotifications:Va,addSignalRNotification:Wa,addSignalRMessage:Ga,addSystemNotification:Ua,setUnreadCount:Ka,setSignalRConnectionStatus:_a,markNotificationAsRead:Qa,markAllNotificationsAsRead:Xa}=$a.actions;const Ya=new class{constructor(){this.connection=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.usageCount=0,this.connection=(new yr).withUrl("https://localhost:5001/notificationHub",{accessTokenFactory:()=>localStorage.getItem("token")||"",withCredentials:!0}).withAutomaticReconnect({nextRetryDelayInMilliseconds:e=>e.previousRetryCount<this.maxReconnectAttempts?Math.min(1e3*Math.pow(2,e.previousRetryCount),3e4):null}).configureLogging(vr.Information).build(),this.setupEventHandlers()}setupEventHandlers(){this.connection&&(this.connection.onreconnecting(()=>{}),this.connection.onreconnected(()=>{this.reconnectAttempts=0}),this.connection.onclose(e=>{}))}async start(){if(!this.connection)throw new Error("SignalR connection not initialized");if("Disconnected"===this.connection.state)try{await this.connection.start()}catch(e){throw e}}async stop(){this.connection&&await this.connection.stop()}async acquire(){if(this.usageCount++,!this.isConnected()){for(;this.connection&&"Disconnecting"===this.connection.state;)await new Promise(e=>setTimeout(e,50));await this.start()}}async release(){this.usageCount=Math.max(0,this.usageCount-1),0===this.usageCount&&await this.stop()}onNotificationReceived(e){this.connection?.on("ReceiveNotification",e)}onMessageReceived(e){this.connection?.on("ReceiveMessage",e)}onSystemNotificationReceived(e){this.connection?.on("ReceiveSystemNotification",e)}onTestResponse(e){this.connection?.on("TestResponse",e)}onNotificationMarkedAsRead(e){this.connection?.on("NotificationMarkedAsRead",e)}onTypingIndicator(e){this.connection?.on("TypingIndicator",e)}async joinGroup(e){"Connected"===this.connection?.state&&await this.connection.invoke("JoinGroup",e)}async leaveGroup(e){"Connected"===this.connection?.state&&await this.connection.invoke("LeaveGroup",e)}async markNotificationAsRead(e){"Connected"===this.connection?.state&&await this.connection.invoke("MarkNotificationAsRead",e)}async sendTypingIndicator(e,t){"Connected"===this.connection?.state&&await this.connection.invoke("SendTypingIndicator",e,t)}async testConnection(e){if("Connected"!==this.connection?.state)throw new Error("SignalR connection is not active");await this.connection.invoke("TestConnection",e)}isConnected(){return"Connected"===this.connection?.state}getConnectionState(){return this.connection?.state||"Disconnected"}};var Za,Ja={};function ei(){if(Za)return Ja;Za=1;var e=I();Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.default=void 0;var t=e(sa()),r=M();return Ja.default=(0,t.default)((0,r.jsx)("path",{d:"M1 11h4v11H1zm15-7.75C16.65 2.49 17.66 2 18.7 2 20.55 2 22 3.45 22 5.3c0 2.27-2.91 4.9-6 7.7-3.09-2.81-6-5.44-6-7.7C10 3.45 11.45 2 13.3 2c1.04 0 2.05.49 2.7 1.25M20 17h-7l-2.09-.73.33-.94L13 16h2.82c.65 0 1.18-.53 1.18-1.18 0-.49-.31-.93-.77-1.11L8.97 11H7v9.02L14 22l8.01-3c-.01-1.1-.9-2-2.01-2"}),"VolunteerActivism"),Ja}const ti=It(ei()),ri=e=>e.auth.isAuthenticated,ni=e=>e.auth.user,oi=e=>e.auth.isLoading,ai=e=>e.auth.error,ii=_o.injectEndpoints({endpoints:e=>({getFlightCompanionRequests:e.query({query:()=>"/flightcompanion/requests",providesTags:["FlightCompanionRequest"]}),getFlightCompanionOffers:e.query({query:()=>"/flightcompanion/offers",providesTags:["FlightCompanionOffer"]}),createFlightCompanionRequest:e.mutation({query:e=>({url:"/flightcompanion/requests",method:"POST",body:e}),invalidatesTags:["FlightCompanionRequest"]}),createFlightCompanionOffer:e.mutation({query:e=>({url:"/flightcompanion/offers",method:"POST",body:e}),invalidatesTags:["FlightCompanionOffer"]}),getFlightCompanionRequest:e.query({query:e=>`/flightcompanion/requests/${e}`,providesTags:(e,t,r)=>[{type:"FlightCompanionRequest",id:r}]}),searchFlightCompanionRequests:e.query({query:e=>{const t=new URLSearchParams;return e.flightNumber&&t.append("flightNumber",e.flightNumber),e.flightDate&&t.append("flightDate",e.flightDate),`/flightcompanion/search-requests?${t.toString()}`},providesTags:["FlightCompanionRequest"]}),updateFlightCompanionRequest:e.mutation({query:({id:e,data:t})=>({url:`/flightcompanion/requests/${e}`,method:"PUT",body:t}),invalidatesTags:["FlightCompanionRequest"]}),deleteFlightCompanionRequest:e.mutation({query:e=>({url:`/flightcompanion/requests/${e}`,method:"DELETE"}),invalidatesTags:["FlightCompanionRequest"]}),updateFlightCompanionOffer:e.mutation({query:({id:e,data:t})=>({url:`/flightcompanion/offers/${e}`,method:"PUT",body:t}),invalidatesTags:["FlightCompanionOffer"]}),deleteFlightCompanionOffer:e.mutation({query:e=>({url:`/flightcompanion/offers/${e}`,method:"DELETE"}),invalidatesTags:["FlightCompanionOffer"]}),updatePickupRequest:e.mutation({query:({id:e,data:t})=>({url:`/pickup/requests/${e}`,method:"PUT",body:t}),invalidatesTags:["PickupRequest"]}),deletePickupRequest:e.mutation({query:e=>({url:`/pickup/requests/${e}`,method:"DELETE"}),invalidatesTags:["PickupRequest"]}),updatePickupOffer:e.mutation({query:({id:e,data:t})=>({url:`/pickup/offers/${e}`,method:"PUT",body:t}),invalidatesTags:["PickupOffer"]}),deletePickupOffer:e.mutation({query:e=>({url:`/pickup/offers/${e}`,method:"DELETE"}),invalidatesTags:["PickupOffer"]})})}),{useGetFlightCompanionRequestsQuery:si,useGetFlightCompanionOffersQuery:li,useCreateFlightCompanionRequestMutation:ci,useCreateFlightCompanionOfferMutation:di,useSearchFlightCompanionRequestsQuery:ui,useDeleteFlightCompanionRequestMutation:mi,useUpdateFlightCompanionRequestMutation:pi,useUpdateFlightCompanionOfferMutation:hi,useDeleteFlightCompanionOfferMutation:gi,useUpdatePickupRequestMutation:fi,useDeletePickupRequestMutation:xi,useUpdatePickupOfferMutation:bi,useDeletePickupOfferMutation:yi}=ii;var vi=function(e,t){for(var r={};e.length;){var n=e[0],o=n.code,a=n.message,i=n.path.join(".");if(!r[i])if("unionErrors"in n){var s=n.unionErrors[0].errors[0];r[i]={message:s.message,type:s.code}}else r[i]={message:a,type:o};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=r[i].types,c=l&&l[n.code];r[i]=jr(i,t,r,o,c?[].concat(c,n.message):n.message)}e.shift()}return r},wi=function(e,t,r){return void 0===r&&(r={}),function(n,o,a){try{return Promise.resolve(function(o,i){try{var s=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](n,t)).then(function(e){return a.shouldUseNativeValidation&&wr({},a),{errors:{},values:r.raw?n:e}})}catch(l){return i(l)}return s&&s.then?s.then(void 0,i):s}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:Cr(vi(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};var t;throw e}))}catch(i){return Promise.reject(i)}}};const Ci=x(m,{shouldForwardProp:e=>"loading"!==e})(({theme:e,loading:t})=>({borderRadius:e.spacing(1),fontWeight:500,textTransform:"none",boxShadow:"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:e.shadows[4],transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)"},"&.Mui-disabled":{opacity:.6,cursor:"not-allowed"},...t&&{pointerEvents:"none"},"&.MuiButton-sizeSmall":{padding:e.spacing(.75,2),fontSize:"0.875rem",minHeight:e.spacing(4)},"&.MuiButton-sizeMedium":{padding:e.spacing(1,3),fontSize:"0.9375rem",minHeight:e.spacing(5)},"&.MuiButton-sizeLarge":{padding:e.spacing(1.5,4),fontSize:"1rem",minHeight:e.spacing(6)}})),ji=({children:e,variant:t="contained",size:n="medium",color:o="primary",disabled:a=!1,loading:i=!1,fullWidth:s=!1,startIcon:l,endIcon:c,onClick:d,type:u="button",className:m="",sx:p,"data-testid":h,href:g,target:f,rel:x,component:b,...y})=>{const v={variant:t,size:n,color:o,disabled:a||i,fullWidth:s,startIcon:i?i?r.jsx(P,{size:16,color:"inherit",className:"mr-2"}):null:l,endIcon:c,onClick:e=>{i||a?e.preventDefault():d?.(e)},type:u,className:`${(()=>{const e="font-medium transition-all duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2";if("contained"===t)switch(o){case"primary":return`${e} bg-[var(--color-primary)] hover:bg-[var(--color-primary)]/90 text-white focus:ring-[var(--color-primary)]`;case"secondary":return`${e} bg-[var(--color-secondary)] hover:bg-[var(--color-secondary)]/80 text-[var(--color-primary)] focus:ring-[var(--color-secondary)]`;case"success":return`${e} bg-green-600 hover:bg-green-700 text-white focus:ring-green-500`;case"error":return`${e} bg-red-600 hover:bg-red-700 text-white focus:ring-red-500`;case"warning":return`${e} bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500`;case"info":return`${e} bg-cyan-600 hover:bg-cyan-700 text-white focus:ring-cyan-500`;default:return`${e} bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500`}else if("outlined"===t)switch(o){case"primary":return`${e} border border-[var(--color-primary)] text-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 dark:hover:bg-[var(--color-primary)]/20 focus:ring-[var(--color-primary)]`;case"secondary":return`${e} border border-[var(--color-secondary)] text-[var(--color-secondary)] hover:bg-[var(--color-secondary)]/10 dark:hover:bg-[var(--color-secondary)]/20 focus:ring-[var(--color-secondary)]`;case"success":return`${e} border border-green-600 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 focus:ring-green-500`;case"error":return`${e} border border-red-600 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:ring-red-500`;case"warning":return`${e} border border-yellow-600 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 focus:ring-yellow-500`;case"info":return`${e} border border-cyan-600 text-cyan-600 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 focus:ring-cyan-500`;default:return`${e} border border-gray-600 text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-900/20 focus:ring-gray-500`}else switch(o){case"primary":return`${e} text-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 dark:hover:bg-[var(--color-primary)]/20 focus:ring-[var(--color-primary)]`;case"secondary":return`${e} text-[var(--color-secondary)] hover:bg-[var(--color-secondary)]/10 dark:hover:bg-[var(--color-secondary)]/20 focus:ring-[var(--color-secondary)]`;case"success":return`${e} text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 focus:ring-green-500`;case"error":return`${e} text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:ring-red-500`;case"warning":return`${e} text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 focus:ring-yellow-500`;case"info":return`${e} text-cyan-600 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 focus:ring-cyan-500`;default:return`${e} text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-900/20 focus:ring-gray-500`}})()} ${m}`.trim(),sx:p,"data-testid":h,...y};return g&&(v.component=b||"a",v.href=g,f&&(v.target=f),x&&(v.rel=x),delete v.type,delete v.onClick),r.jsx(Ci,{...v,children:e})},Si=Sr({flightNumber:kr().min(3,"Flight number must be at least 3 characters").max(10,"Flight number must be less than 10 characters").regex(/^[A-Z]{2}\d{2,4}$/,"Invalid flight number format (e.g., NZ289)"),airline:kr().min(2,"Airline name is required").max(50,"Airline name must be less than 50 characters"),flightDate:kr().min(1,"Flight date is required").refine(e=>new Date(e)>new Date,"Flight date must be in the future"),departureAirport:kr().min(3,"Departure airport is required").max(10,"Invalid airport code"),arrivalAirport:kr().min(3,"Arrival airport is required").max(10,"Invalid airport code"),travelerName:kr().max(100,"Traveler name must be less than 100 characters").optional(),travelerAge:Nr(["Young Adult","Adult","Elderly"]).default("Adult"),specialNeeds:kr().max(500,"Special needs must be less than 500 characters").optional(),offeredAmount:Rr().min(0,"Amount cannot be negative").max(500,"Amount cannot exceed $500"),additionalNotes:kr().max(1e3,"Additional notes must be less than 1000 characters").optional()}),ki=[{value:"AKL",label:"Auckland (AKL)"},{value:"PVG",label:"Shanghai (PVG)"},{value:"PEK",label:"Beijing (PEK)"},{value:"CAN",label:"Guangzhou (CAN)"},{value:"CTU",label:"Chengdu (CTU)"}],Ri=[{value:"Young Adult",label:"Young Adult (18-30)"},{value:"Adult",label:"Adult (31-60)"},{value:"Elderly",label:"Elderly (60+)"}],Ni=({onSubmit:e,onCancel:t,loading:n=!1,initialData:o})=>{const{control:a,handleSubmit:i,formState:{errors:s,isSubmitting:l},reset:d}=Pr({resolver:wi(Si),defaultValues:{flightNumber:"",airline:"",flightDate:"",departureAirport:"",arrivalAirport:"",travelerName:"",travelerAge:"Adult",specialNeeds:"",offeredAmount:0,additionalNotes:"",...o}});return r.jsxs("form",{onSubmit:i(async t=>{try{await e(t),d()}catch(r){}}),style:{marginTop:"12px"},children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"flightNumber",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Flight Number",placeholder:"e.g., NZ289",error:!!s.flightNumber,helperText:s.flightNumber?.message,fullWidth:!0,required:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"airline",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Airline",placeholder:"e.g., Air New Zealand",error:!!s.airline,helperText:s.airline?.message,fullWidth:!0,required:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"flightDate",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Flight Date",type:"datetime-local",error:!!s.flightDate,helperText:s.flightDate?.message,fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"travelerAge",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,error:!!s.travelerAge,children:[r.jsx(se,{children:"Traveler Age"}),r.jsx(T,{...e,label:"Traveler Age",className:"bg-white dark:bg-gray-700",children:Ri.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"departureAirport",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.departureAirport,children:[r.jsx(se,{children:"From Airport"}),r.jsx(T,{...e,label:"From Airport",className:"bg-white dark:bg-gray-700",children:ki.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"arrivalAirport",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.arrivalAirport,children:[r.jsx(se,{children:"To Airport"}),r.jsx(T,{...e,label:"To Airport",className:"bg-white dark:bg-gray-700",children:ki.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"travelerName",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Traveler Name (Optional)",placeholder:"e.g., My parents",error:!!s.travelerName,helperText:s.travelerName?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"offeredAmount",control:a,render:({field:{onChange:e,value:t,...n}})=>r.jsx(ae,{...n,value:t||"",onChange:t=>e(parseFloat(t.target.value)||0),label:"Offered Amount (NZD)",type:"number",inputProps:{min:0,max:500,step:5},placeholder:"50",error:!!s.offeredAmount,helperText:s.offeredAmount?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"specialNeeds",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Special Needs/Help Required",placeholder:"e.g., Language translation, wheelchair assistance, airport navigation...",multiline:!0,rows:3,error:!!s.specialNeeds,helperText:s.specialNeeds?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"additionalNotes",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Additional Notes",placeholder:"Any other information that might be helpful...",multiline:!0,rows:3,error:!!s.additionalNotes,helperText:s.additionalNotes?.message,fullWidth:!0})})})]}),r.jsxs(c,{style:{marginTop:"12px",display:"flex",justifyContent:"flex-start",gap:"12px"},children:[r.jsx(ji,{type:"button",onClick:()=>{d(),t?.()},disabled:n||l,variant:"text",children:"Cancel"}),r.jsx(ji,{type:"submit",variant:"contained",loading:n||l,disabled:n||l,children:"Create Request"})]})]})},Pi=Sr({flightNumber:kr().min(3,"Flight number must be at least 3 characters").max(10,"Flight number must be less than 10 characters").regex(/^[A-Z]{2}\d{2,4}$/,"Invalid flight number format (e.g., NZ289)"),airline:kr().min(2,"Airline name is required").max(50,"Airline name must be less than 50 characters"),flightDate:kr().min(1,"Flight date is required").refine(e=>new Date(e)>new Date,"Flight date must be in the future"),departureAirport:kr().min(3,"Departure airport is required").max(10,"Invalid airport code"),arrivalAirport:kr().min(3,"Arrival airport is required").max(10,"Invalid airport code"),availableServices:kr().max(500,"Services must be less than 500 characters"),languages:kr().max(200,"Languages must be less than 200 characters"),helpedCount:Rr().min(0,"Must be 0 or more").max(100,"Unrealistic helped count"),additionalNotes:kr().max(1e3,"Additional notes must be less than 1000 characters").optional()}),Ii=[{value:"AKL",label:"Auckland (AKL)"},{value:"PVG",label:"Shanghai (PVG)"},{value:"PEK",label:"Beijing (PEK)"},{value:"CAN",label:"Guangzhou (CAN)"},{value:"CTU",label:"Chengdu (CTU)"}],Mi=({onSubmit:e,onCancel:t,loading:n=!1,initialData:o})=>{const{control:a,handleSubmit:i,formState:{errors:s,isSubmitting:l},reset:d}=Pr({resolver:wi(Pi),defaultValues:{flightNumber:"",airline:"",flightDate:"",departureAirport:"",arrivalAirport:"",availableServices:"",languages:"",helpedCount:0,additionalNotes:"",...o}});return r.jsxs("form",{onSubmit:i(async t=>{try{await e(t),d()}catch(r){}}),style:{marginTop:"12px"},children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"flightNumber",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Flight Number",placeholder:"e.g., NZ289",error:!!s.flightNumber,helperText:s.flightNumber?.message,fullWidth:!0,required:!0,className:"bg-white dark:bg-gray-700"})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"airline",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Airline",placeholder:"e.g., Air New Zealand",error:!!s.airline,helperText:s.airline?.message,fullWidth:!0,required:!0,className:"bg-white dark:bg-gray-700"})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"departureAirport",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.departureAirport,children:[r.jsx(se,{children:"From Airport"}),r.jsx(T,{...e,label:"From Airport",className:"bg-white dark:bg-gray-700",children:Ii.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"arrivalAirport",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.arrivalAirport,children:[r.jsx(se,{children:"To Airport"}),r.jsx(T,{...e,label:"To Airport",className:"bg-white dark:bg-gray-700",children:Ii.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"flightDate",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Flight Date",type:"datetime-local",error:!!s.flightDate,helperText:s.flightDate?.message,fullWidth:!0,required:!0,InputLabelProps:{shrink:!0},className:"bg-white dark:bg-gray-700"})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"languages",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Languages Spoken",placeholder:"e.g., English, Mandarin, Cantonese",error:!!s.languages,helperText:s.languages?.message,fullWidth:!0,className:"bg-white dark:bg-gray-700"})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"availableServices",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Available Services",placeholder:"e.g., Language translation, wheelchair assistance, airport navigation...",multiline:!0,rows:2,error:!!s.availableServices,helperText:s.availableServices?.message,fullWidth:!0,className:"bg-white dark:bg-gray-700"})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"helpedCount",control:a,render:({field:{onChange:e,value:t,...n}})=>r.jsx(ae,{...n,value:t||"",onChange:t=>e(parseInt(t.target.value)||0),label:"Number of Travelers Helped",type:"number",inputProps:{min:0,max:100,step:1},placeholder:"0",error:!!s.helpedCount,helperText:s.helpedCount?.message,fullWidth:!0,className:"bg-white dark:bg-gray-700"})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"additionalNotes",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Additional Notes",placeholder:"Any other information that might be helpful...",multiline:!0,rows:3,error:!!s.additionalNotes,helperText:s.additionalNotes?.message,fullWidth:!0,className:"bg-white dark:bg-gray-700"})})})]}),r.jsxs(c,{style:{marginTop:"12px",display:"flex",justifyContent:"flex-start",gap:"12px"},children:[r.jsx(ji,{type:"button",onClick:()=>{d(),t?.()},disabled:n||l,variant:"text",children:"Cancel"}),r.jsx(ji,{type:"submit",variant:"contained",loading:n||l,disabled:n||l,children:"Offer Help"})]})]})},Di=()=>{const{theme:e}=ra();return"dark"===e},Ti=()=>{const[t,n]=e.useState(0),[o,a]=e.useState(!1),[i,d]=e.useState("request"),[p,h]=e.useState(null),[g,f]=e.useState({flightNumber:"",flightDate:""}),[x,w]=e.useState(!1),[C,j]=e.useState(null),[S,k]=e.useState(""),[R,N]=e.useState({open:!1,message:"",severity:"info"});Jo();const I=ea(ri),{data:M=[],isLoading:D,error:T,refetch:E}=si(),{data:F=[],isLoading:A,error:O,refetch:H}=li(),[L,{isLoading:$}]=ci(),[z,{isLoading:q}]=di(),B=D||A,V=T||O,W=(e,t)=>{N({open:!0,message:e,severity:t})},U=()=>{N(e=>({...e,open:!1}))},_=()=>{I?(d(0===t?"request":"offer"),a(!0)):N({open:!0,message:"Please log in to use this feature.",severity:"warning"})},{muiTheme:X}=ra(),Y=Di(),Z=e=>r.jsxs(fe,{className:"h-full hover:shadow-lg transition-shadow duration-200 flex flex-col",style:{minHeight:"320px",background:Y?X.palette.background.paper:void 0},children:[r.jsxs(xe,{className:"flex-grow",children:[r.jsxs(c,{className:"flex justify-between items-start mb-3",children:[r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx(K,{sx:{color:Y?"#00BCD4":"#0B3866"}}),r.jsxs(u,{variant:"h6",className:"font-semibold text-gray-900 dark:text-gray-100",children:[e.flightNumber," - ",e.airline]})]}),r.jsx(y,{label:`${e.departureAirport} → ${e.arrivalAirport}`,size:"small",className:"bg-blue-100 text-blue-800"})]}),r.jsxs(c,{className:"space-y-2 mb-3",children:[r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Date:"})," ",new Date(e.flightDate).toLocaleDateString()]}),e.travelerName&&r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx(G,{className:"inline w-4 h-4 mr-1"}),r.jsx("strong",{children:"Traveler:"})," ",e.travelerName]}),e.specialNeeds&&r.jsxs(c,{className:"mb-2",children:[r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx(ue,{className:"inline w-4 h-4 mr-1"}),r.jsx("strong",{children:"Help Needed:"})]}),r.jsx(u,{variant:"body2",className:"ml-5 text-gray-700 dark:text-gray-200",children:e.specialNeeds})]}),e.additionalNotes&&r.jsxs(u,{variant:"body2",className:"mb-2 text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Notes:"})," ",e.additionalNotes]})]}),r.jsxs(c,{className:"flex justify-between items-center",children:[r.jsx(y,{label:`NZD $${e.offeredAmount}`,color:"success",variant:"filled",className:"font-semibold"}),e.user&&r.jsxs(u,{variant:"body2",color:"textSecondary",children:["by ",e.user.firstName," ",e.user.lastName]})]})]}),r.jsxs(be,{className:"justify-between bg-gray-50 dark:bg-gray-800",children:[r.jsx(y,{label:e.isMatched?"Matched":"Looking for Helper",color:e.isMatched?"warning":"success",variant:"outlined"}),r.jsxs(c,{className:"flex gap-2",children:[r.jsx(m,{variant:"outlined",size:"small",startIcon:r.jsx(ye,{}),sx:{color:Y?"#00BCD4":"#0B3866",borderColor:Y?"#00BCD4":"#0B3866","&:hover":{backgroundColor:Y?"rgba(0, 188, 212, 0.1)":"rgba(11, 56, 102, 0.1)"}},onClick:()=>{W("Contact feature coming soon!","info")},children:"Contact"}),0===t&&!e.isMatched&&r.jsx(m,{variant:"contained",size:"small",startIcon:r.jsx(ue,{}),sx:{backgroundColor:Y?"#00BCD4":"#0B3866","&:hover":{backgroundColor:Y?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)"}},onClick:()=>Se(e),children:"Offer Help"}),1===t&&!e.isMatched&&r.jsx(m,{variant:p===e.id?"contained":"outlined",size:"small",sx:{color:p===e.id?"#fff":Y?"#00BCD4":"#0B3866",backgroundColor:p===e.id?Y?"#00BCD4":"#0B3866":"transparent",borderColor:Y?"#00BCD4":"#0B3866","&:hover":{backgroundColor:p===e.id?Y?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)":Y?"rgba(0, 188, 212, 0.1)":"rgba(11, 56, 102, 0.1)"}},onClick:()=>p===e.id?re():te(e.id),children:p===e.id?"Selected":"Select"})]})]})]},e.id),J=e=>r.jsxs(fe,{className:"flex flex-col h-full hover:shadow-lg transition-shadow duration-200",style:{minHeight:340,height:340,width:"100%",background:Y?X.palette.background.paper:void 0},children:[r.jsxs(xe,{style:{flexGrow:1},children:[r.jsxs(c,{className:"flex justify-between items-start mb-3",children:[r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx(K,{className:"text-[#168046]"}),r.jsxs(u,{variant:"h6",className:"font-semibold text-gray-900 dark:text-gray-100",children:[e.flightNumber," - ",e.airline]})]}),r.jsx(y,{label:`${e.departureAirport} → ${e.arrivalAirport}`,size:"small",className:"bg-green-100 text-green-800"})]}),r.jsxs(u,{variant:"body2",className:"mb-2 text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Date:"})," ",new Date(e.flightDate).toLocaleDateString()]}),r.jsxs(u,{variant:"body2",className:"mb-2 text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Services:"})," ",e.availableServices||"General assistance"]}),r.jsxs(u,{variant:"body2",className:"mb-2 text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Languages:"})," ",e.languages||"Not specified"]}),r.jsxs(u,{variant:"body2",className:"mb-2 text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Experience:"})," Helped ",e.helpedCount," travelers"]})]}),r.jsxs(be,{className:"justify-between bg-gray-50 dark:bg-gray-800 mt-auto",children:[r.jsx(y,{label:"Available",color:"success",variant:"outlined"}),r.jsx(m,{variant:"outlined",size:"small",startIcon:r.jsx(ye,{}),className:"text-[#168046] border-[#168046]  hover:bg-[#168046]/10",onClick:()=>{W("Contact feature coming soon!","info")},children:"Contact"}),p&&r.jsx(m,{variant:"contained",color:"primary",onClick:()=>ee(p,e.id),children:"Match"})]})]},e.id),ee=async(e,t)=>{try{const r=localStorage.getItem("token"),n=await fetch("https://localhost:5001/api/flightcompanion/match",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({requestId:e,offerId:t})});if(!n.ok){const e=await n.json();return void W(e.message||"Failed to match","error")}W("Match successful!","success"),h(null),E(),H()}catch(r){W("Error matching: "+r,"error")}},te=e=>{h(e),W("Request selected. Now choose an offer to match.","info")},re=()=>{h(null),W("Selection cleared.","info")},[ne,oe]=e.useState(null),[ie,se]=e.useState({flightNumber:"",airport:""}),[ve,we]=e.useState(null),{data:Ce=[],isLoading:je}=ui(ne||{flightNumber:"",flightDate:""},{skip:!ne}),Se=e=>{j(e),w(!0)},ke=()=>{w(!1),k(""),j(null)};e.useEffect(()=>{g.flightNumber||g.flightDate||!ne||oe(null)},[g.flightNumber,g.flightDate,ne]);e.useEffect(()=>{ie.flightNumber||ie.airport||!ve||we(null)},[ie.flightNumber,ie.airport,ve]);const Re=ve?F.filter(e=>{const t=!ve.airport||e.departureAirport.toLowerCase().includes(ve.airport.toLowerCase()),r=!ve.flightNumber||e.flightNumber.toLowerCase().includes(ve.flightNumber.toLowerCase());return t&&r}):F;return V?r.jsx(s,{maxWidth:"lg",className:"py-8",children:r.jsxs(l,{className:"p-6 text-center",children:[r.jsx(u,{variant:"h6",color:"error",className:"mb-4",children:"Error loading data"}),r.jsx(u,{variant:"body2",className:"mb-4",children:V.toString()}),r.jsx(m,{variant:"contained",onClick:()=>{E(),H()},children:"Retry"})]})}):r.jsxs(s,{maxWidth:!1,className:"py-20 mb-20 ",children:[r.jsx(l,{elevation:0,className:"mb-8 p-6",children:r.jsxs(c,{className:"text-center",children:[r.jsx(u,{variant:"h3",component:"h1",className:"font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Flight Companion Service"}),r.jsx(u,{variant:"body1",className:"text-gray-600 dark:text-gray-300",children:"Connect with helpful travelers on your flight route"})]})}),r.jsx(l,{elevation:1,className:"mb-6",children:r.jsxs(le,{value:t,onChange:(e,t)=>{n(t)},className:"border-b border-gray-200",textColor:"primary",indicatorColor:"primary",sx:{"& .MuiTabs-indicator":Y?{backgroundColor:"#00BCD4"}:{}},children:[r.jsx(ce,{icon:r.jsx(K,{}),label:`Help Requests (${M.length})`,className:"font-medium",sx:{color:Y?"#fff":void 0,"&.Mui-selected":Y?{color:"#00BCD4"}:{}}}),r.jsx(ce,{icon:r.jsx(ti,{}),label:`Available Helpers (${F.length})`,className:"font-medium",sx:{color:Y?"#fff":void 0,"&.Mui-selected":Y?{color:"#00BCD4"}:{}}})]})}),r.jsx(c,{className:"min-h-96",children:!B||M.length||F.length?r.jsxs(r.Fragment,{children:[0===t&&r.jsxs(c,{children:[r.jsxs(l,{className:"mb-6 p-4",children:[r.jsx(u,{variant:"h6",className:"mb-4",children:"Search for Requests to Help"}),r.jsxs(Q,{container:!0,spacing:2,alignItems:"end",children:[r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,label:"Flight Number",value:g.flightNumber,onChange:e=>f(t=>({...t,flightNumber:e.target.value})),placeholder:"e.g., NZ289"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,type:"date",label:"Flight Date",value:g.flightDate,onChange:e=>f(t=>({...t,flightDate:e.target.value})),InputLabelProps:{shrink:!0}})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"contained",fullWidth:!0,onClick:()=>{if(!g.flightNumber&&!g.flightDate)return oe(null),void W("Showing all requests","info");oe({flightNumber:g.flightNumber||void 0,flightDate:g.flightDate||void 0}),W("Searching for requests...","info")},sx:{backgroundColor:Y?"#00BCD4":"#0B3866","&:hover":{backgroundColor:Y?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)"},height:"56px"},children:"Search Requests"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"outlined",fullWidth:!0,onClick:()=>{f({flightNumber:"",flightDate:""}),oe(null),W("Search cleared","info")},sx:{borderColor:Y?"#00BCD4":"#0B3866",color:Y?"#00BCD4":"#0B3866","&:hover":{borderColor:Y?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)",backgroundColor:Y?"rgba(0, 188, 212, 0.1)":"rgba(11, 56, 102, 0.1)"},height:"56px"},children:"Clear Search"})})]})]}),r.jsx(c,{className:"text-center mb-8",children:r.jsx(m,{variant:"contained",size:"large",startIcon:r.jsx(de,{}),onClick:_,sx:{backgroundColor:Y?"#00BCD4":"#0B3866","&:hover":{backgroundColor:Y?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)"}},className:"px-8 py-3 my-3 text-white",children:"Request Help"})}),je&&r.jsxs(c,{className:"flex justify-center items-center py-12",children:[r.jsx(P,{size:40}),r.jsx(u,{variant:"body1",className:"ml-3",children:"Searching for requests..."})]}),je||0!==(ne?Ce:M).length?r.jsx(Q,{container:!0,spacing:3,children:(ne?Ce:M).map(e=>r.jsx(Q,{item:!0,xs:12,sm:12,md:6,lg:4,xl:3,className:"flex flex-col",children:Z(e)},e.id))}):r.jsxs(l,{className:"text-center py-12 bg-gray-50 dark:bg-gray-800",children:[r.jsx(ue,{sx:{fontSize:64},className:"text-gray-400 mb-4"}),r.jsx(u,{variant:"h6",className:"text-gray-600 dark:text-gray-300",children:ne?"No matching requests found":"No help requests yet"}),r.jsx(u,{variant:"body2",className:"text-gray-500 dark:text-gray-400 mt-2",children:ne?"Try different search criteria":"Be the first to request help!"})]})]}),1===t&&r.jsxs(c,{children:[r.jsxs(l,{className:"mb-6 p-4",children:[r.jsx(u,{variant:"h6",className:"mb-4",children:"Search for Helper"}),r.jsxs(Q,{container:!0,spacing:2,alignItems:"end",children:[r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,label:"Flight Number",value:ie.flightNumber,onChange:e=>se(t=>({...t,flightNumber:e.target.value})),placeholder:"e.g., NZ289"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,label:"Airport",value:ie.airport,onChange:e=>se(t=>({...t,airport:e.target.value})),placeholder:"e.g., AKL"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"contained",fullWidth:!0,onClick:()=>{if(!ie.flightNumber&&!ie.airport)return we(null),void W("Showing all helpers","info");we({flightNumber:ie.flightNumber||void 0,airport:ie.airport||void 0}),W("Searching for helpers...","info")},sx:{backgroundColor:"#168046","&:hover":{backgroundColor:"rgba(22, 128, 70, 0.9)"},height:"56px"},children:"Search Helpers"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"outlined",fullWidth:!0,onClick:()=>{se({flightNumber:"",airport:""}),we(null),W("Search cleared","info")},sx:{borderColor:"#168046",color:"#168046","&:hover":{borderColor:"rgba(22, 128, 70, 0.9)",backgroundColor:"rgba(22, 128, 70, 0.1)"},height:"56px"},children:"Clear Search"})})]})]}),r.jsx(c,{className:"text-center mb-8",children:r.jsx(m,{variant:"contained",size:"large",startIcon:r.jsx(de,{}),onClick:_,sx:{backgroundColor:"#168046","&:hover":{backgroundColor:"rgba(22, 128, 70, 0.9)"}},className:"px-8 py-3 my-3 text-white",children:"Offer to Help"})}),p&&r.jsx(l,{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900",children:r.jsxs(c,{className:"flex justify-between items-center",children:[r.jsx(u,{variant:"body2",className:"text-blue-800 dark:text-blue-200",children:"Request selected. Choose an offer to match."}),r.jsx(m,{variant:"outlined",size:"small",onClick:re,children:"Clear Selection"})]})}),0===Re.length?r.jsxs(l,{className:"text-center py-12 bg-gray-50 dark:bg-gray-800",children:[r.jsx(K,{sx:{fontSize:64},className:"text-gray-400 mb-4"}),r.jsx(u,{variant:"h6",className:"text-gray-600 dark:text-gray-300",children:ve?"No matching helpers found":"No helpers available yet"}),r.jsx(u,{variant:"body2",className:"text-gray-500 dark:text-gray-400 mt-2",children:ve?"Try different search criteria":"Be the first to offer help!"})]}):r.jsx(Q,{container:!0,spacing:2,children:Re.map(e=>r.jsx(Q,{item:!0,xs:12,sm:12,md:6,lg:4,xl:4,children:J(e)},e.id))})]})]}):r.jsx(c,{className:"flex justify-center items-center py-12",children:r.jsx(P,{size:40})})}),r.jsxs(me,{open:x,onClose:ke,maxWidth:"sm",fullWidth:!0,children:[r.jsxs(pe,{children:["Offer Help to ",C?.user?.firstName," ",C?.user?.lastName]}),r.jsxs(he,{children:[r.jsxs(u,{variant:"body2",style:{marginBottom:"16px"},children:["Send a message to offer your help for Flight ",C?.flightNumber,"from ",C?.departureAirport," to ",C?.arrivalAirport,"."]}),r.jsx(ae,{fullWidth:!0,multiline:!0,rows:4,label:"Your message",value:S,onChange:e=>k(e.target.value),placeholder:"Hi! I'd be happy to help you with your flight. I can assist with..."})]}),r.jsxs(ge,{children:[r.jsx(m,{onClick:ke,children:"Cancel"}),r.jsx(m,{onClick:async()=>{if(C&&S.trim())try{const e=await fetch("/api/flightcompanion/initiate-help",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({requestId:C.id,initialMessage:S})});if(e.ok)W("Help message sent successfully!","success"),w(!1),k(""),j(null);else{const t=await e.json();W(t.message||"Failed to send message","error")}}catch(e){W("Error sending help message","error")}},variant:"contained",disabled:!S.trim(),sx:{backgroundColor:Y?"#00BCD4":"#0B3866","&:hover":{backgroundColor:Y?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)"}},children:"Send Message"})]})]}),r.jsxs(me,{open:o,onClose:()=>a(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(pe,{children:"request"===i?"Request Flight Companion Help":"Offer to Help as Flight Companion"}),r.jsx(he,{children:"request"===i?r.jsx(Ni,{onSubmit:async e=>{try{const t={flightNumber:e.flightNumber,airline:e.airline,flightDate:e.flightDate,departureAirport:e.departureAirport,arrivalAirport:e.arrivalAirport,travelerName:e.travelerName,travelerAge:e.travelerAge,specialNeeds:e.specialNeeds,offeredAmount:Number(e.offeredAmount),additionalNotes:e.additionalNotes};await L(t).unwrap(),W("Flight companion request created successfully!","success"),a(!1)}catch(t){const e=t instanceof Error?t.message:"Error creating request";W(e,"error")}},onCancel:()=>a(!1),loading:$}):r.jsx(Mi,{onSubmit:async e=>{try{const t={...e,userId:1};await z(t).unwrap(),a(!1),W("Offer created successfully!","success"),H()}catch(t){const e=t instanceof Error?t.message:"Error creating offer";W(e,"error")}},onCancel:()=>a(!1),loading:q})})]}),r.jsx(v,{open:R.open,autoHideDuration:2e3,onClose:U,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{zIndex:1400},children:r.jsx(b,{onClose:U,severity:R.severity,variant:"filled",children:R.message})})]})},Ei=_o.injectEndpoints({endpoints:e=>({getPickupRequests:e.query({query:()=>"/pickup/requests",providesTags:["PickupRequest"]}),getPickupOffers:e.query({query:()=>"/pickup/offers",providesTags:["PickupOffer"]}),createPickupRequest:e.mutation({query:e=>({url:"/pickup/requests",method:"POST",body:e}),invalidatesTags:["PickupRequest"]}),getPickupRequest:e.query({query:e=>`/pickup/requests/${e}`,providesTags:(e,t,r)=>[{type:"PickupRequest",id:r}]}),deletePickupRequest:e.mutation({query:e=>({url:`/pickup/requests/${e}`,method:"DELETE"}),invalidatesTags:["PickupRequest"]}),createPickupOffer:e.mutation({query:e=>({url:"/pickup/offers",method:"POST",body:e}),invalidatesTags:["PickupOffer"]})})}),{useGetPickupRequestsQuery:Fi,useGetPickupOffersQuery:Ai,useCreatePickupRequestMutation:Oi,useCreatePickupOfferMutation:Hi}=Ei,Li=Sr({flightNumber:kr().min(3,"Flight number must be at least 3 characters").max(10,"Flight number must be less than 10 characters").regex(/^[A-Z]{2}\d{2,4}$/,"Invalid flight number format (e.g., NZ289)"),arrivalDate:kr().min(1,"Arrival date is required").refine(e=>new Date(e)>=new Date,"Arrival date cannot be in the past"),arrivalTime:kr().min(1,"Arrival time is required").regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"Invalid time format (HH:MM)"),airport:kr().min(3,"Airport is required").max(10,"Invalid airport code"),destinationAddress:kr().min(5,"Destination address is required").max(200,"Address must be less than 200 characters"),passengerName:kr().max(100,"Passenger name must be less than 100 characters").optional(),passengerPhone:kr().regex(/^(\+64|0)[2-9]\d{7,9}$/,"Invalid New Zealand phone number").optional().or(Dr("")),passengerCount:Rr().min(1,"At least 1 passenger required").max(8,"Maximum 8 passengers allowed"),hasLuggage:Mr().default(!0),offeredAmount:Rr().min(0,"Amount cannot be negative").max(200,"Amount cannot exceed $200"),specialRequests:kr().max(500,"Special requests must be less than 500 characters").optional()}),$i=[{value:"AKL",label:"Auckland (AKL)"},{value:"WLG",label:"Wellington (WLG)"},{value:"CHC",label:"Christchurch (CHC)"},{value:"ZQN",label:"Queenstown (ZQN)"}],zi=[{value:1,label:"1 person"},{value:2,label:"2 people"},{value:3,label:"3 people"},{value:4,label:"4+ people"}],qi=({onSubmit:e,onCancel:t,loading:n=!1,initialData:o})=>{const{control:a,handleSubmit:i,formState:{errors:s,isSubmitting:l},reset:d}=Pr({resolver:wi(Li),defaultValues:{flightNumber:"",arrivalDate:"",arrivalTime:"",airport:"AKL",destinationAddress:"",passengerName:"",passengerPhone:"",passengerCount:1,hasLuggage:!0,offeredAmount:0,specialRequests:"",...o}});return r.jsxs("form",{onSubmit:i(async t=>{try{await e(t),d()}catch(r){}}),style:{marginTop:"12px"},children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"flightNumber",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Flight Number",placeholder:"e.g., NZ289",error:!!s.flightNumber,helperText:s.flightNumber?.message,fullWidth:!0,required:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"airport",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.airport,children:[r.jsx(se,{children:"Airport"}),r.jsx(T,{...e,label:"Airport",className:"bg-white dark:bg-gray-700",children:$i.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"arrivalDate",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Arrival Date",type:"date",error:!!s.arrivalDate,helperText:s.arrivalDate?.message,fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"arrivalTime",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Arrival Time",type:"time",error:!!s.arrivalTime,helperText:s.arrivalTime?.message,fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"destinationAddress",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Destination Address",placeholder:"e.g., 123 Queen Street, Auckland City",error:!!s.destinationAddress,helperText:s.destinationAddress?.message,fullWidth:!0,required:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"passengerName",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Passenger Name (Optional)",placeholder:"Name of person being picked up",error:!!s.passengerName,helperText:s.passengerName?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"passengerPhone",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Passenger Phone (Optional)",type:"tel",placeholder:"+64 21 123 4567",error:!!s.passengerPhone,helperText:s.passengerPhone?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"passengerCount",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.passengerCount,children:[r.jsx(se,{children:"Number of Passengers"}),r.jsx(T,{...e,label:"Number of Passengers",className:"bg-white dark:bg-gray-700",children:zi.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"offeredAmount",control:a,render:({field:{onChange:e,value:t,...n}})=>r.jsx(ae,{...n,value:t||"",onChange:t=>e(parseFloat(t.target.value)||0),label:"Offered Amount (NZD)",type:"number",inputProps:{min:0,max:200,step:5},placeholder:"50",error:!!s.offeredAmount,helperText:s.offeredAmount?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"hasLuggage",control:a,render:({field:{value:e,onChange:t,...n}})=>r.jsx(ve,{control:r.jsx(we,{...n,checked:e,onChange:e=>t(e.target.checked),className:"text-blue-600"}),label:"Has luggage"})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"specialRequests",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Special Requests",placeholder:"e.g., Elderly passengers, large luggage, Chinese speaking driver preferred...",multiline:!0,rows:3,error:!!s.specialRequests,helperText:s.specialRequests?.message,fullWidth:!0})})})]}),r.jsxs(c,{style:{marginTop:"12px",display:"flex",justifyContent:"flex-start",gap:"12px"},children:[r.jsx(ji,{type:"button",onClick:()=>{d(),t?.()},disabled:n||l,variant:"text",children:"Cancel"}),r.jsx(ji,{type:"submit",variant:"contained",loading:n||l,disabled:n||l,children:"Create Request"})]})]})},Bi=Sr({airport:kr().min(3,"Airport is required").max(10,"Invalid airport code"),vehicleType:kr().min(2,"Vehicle type must be at least 2 characters").max(50,"Vehicle type must be less than 50 characters").optional(),maxPassengers:Rr().min(1,"At least 1 passenger required").max(8,"Maximum 8 passengers allowed"),canHandleLuggage:Mr().default(!0),serviceArea:kr().min(5,"Service area must be at least 5 characters").max(200,"Service area must be less than 200 characters").optional(),baseRate:Rr().min(0,"Base rate cannot be negative").max(200,"Base rate cannot exceed $200"),languages:kr().max(200,"Languages must be less than 200 characters").optional(),additionalServices:kr().max(500,"Additional services must be less than 500 characters").optional()}),Vi=[{value:"AKL",label:"Auckland (AKL)"},{value:"WLG",label:"Wellington (WLG)"},{value:"CHC",label:"Christchurch (CHC)"},{value:"ZQN",label:"Queenstown (ZQN)"}],Wi=[{value:"Sedan",label:"Sedan (4 passengers)"},{value:"SUV",label:"SUV (6 passengers)"},{value:"Van",label:"Van (8 passengers)"},{value:"Luxury",label:"Luxury Vehicle"}],Gi=[{value:1,label:"1 passenger"},{value:2,label:"2 passengers"},{value:3,label:"3 passengers"},{value:4,label:"4 passengers"},{value:6,label:"6 passengers"},{value:8,label:"8 passengers"}],Ui=({onSubmit:e,onCancel:t,loading:n=!1,initialData:o})=>{const{control:a,handleSubmit:i,formState:{errors:s,isSubmitting:l},reset:d}=Pr({resolver:wi(Bi),defaultValues:{airport:"AKL",vehicleType:"",maxPassengers:4,canHandleLuggage:!0,serviceArea:"",baseRate:0,languages:"",additionalServices:"",...o}});return r.jsxs("form",{onSubmit:i(async t=>{try{await e(t),d()}catch(r){}}),style:{marginTop:"12px"},children:[r.jsxs(Q,{container:!0,spacing:2,children:[r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"airport",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.airport,children:[r.jsx(se,{children:"Airport"}),r.jsx(T,{...e,label:"Airport",children:Vi.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"vehicleType",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,error:!!s.vehicleType,children:[r.jsx(se,{children:"Vehicle Type"}),r.jsx(T,{...e,label:"Vehicle Type",children:Wi.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"maxPassengers",control:a,render:({field:e})=>r.jsxs(ie,{fullWidth:!0,required:!0,error:!!s.maxPassengers,children:[r.jsx(se,{children:"Max Passengers"}),r.jsx(T,{...e,label:"Max Passengers",children:Gi.map(e=>r.jsx(E,{value:e.value,children:e.label},e.value))})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"baseRate",control:a,render:({field:{onChange:e,value:t,...n}})=>r.jsx(ae,{...n,value:t||"",onChange:t=>e(parseFloat(t.target.value)||0),label:"Base Rate (NZD)",type:"number",inputProps:{min:0,max:200,step:5},placeholder:"50",error:!!s.baseRate,helperText:s.baseRate?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"serviceArea",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Service Area",placeholder:"e.g., Auckland CBD, North Shore, Airport to City",error:!!s.serviceArea,helperText:s.serviceArea?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"languages",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Languages Spoken (Optional)",placeholder:"e.g., English, Mandarin, Cantonese",error:!!s.languages,helperText:s.languages?.message,fullWidth:!0})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"canHandleLuggage",control:a,render:({field:{value:e,onChange:t,...n}})=>r.jsx(ve,{control:r.jsx(we,{...n,checked:e,onChange:e=>t(e.target.checked)}),label:"Can handle luggage"})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(Ir,{name:"additionalServices",control:a,render:({field:e})=>r.jsx(ae,{...e,label:"Additional Services",placeholder:"e.g., Child seats available, wheelchair accessible, meet and greet service...",multiline:!0,rows:3,error:!!s.additionalServices,helperText:s.additionalServices?.message,fullWidth:!0})})})]}),r.jsxs(c,{style:{marginTop:"12px",display:"flex",justifyContent:"flex-start",gap:"12px"},children:[r.jsx(ji,{type:"button",onClick:()=>{d(),t?.()},disabled:n||l,variant:"text",children:"Cancel"}),r.jsx(ji,{type:"submit",variant:"contained",loading:n||l,disabled:n||l,children:"Create Offer"})]})]})},Ki=()=>{Jo();const t=ea(ri),n=ea(ni),{muiTheme:o}=ra(),a=Di(),{data:i=[],isLoading:d,error:p,refetch:h}=Fi(),{data:g=[],isLoading:f,error:x,refetch:w}=Ai(),[C,{isLoading:j}]=Oi(),[S,{isLoading:k}]=Hi(),R=d||f,N=p||x,[I,M]=e.useState(0),[D,T]=e.useState(!1),[E,F]=e.useState("request"),[A,O]=e.useState(null),[H,L]=e.useState({airport:"",flightNumber:""}),[$,z]=e.useState(null),[q,B]=e.useState({airport:"",vehicleType:""}),[V,W]=e.useState(null),[U,X]=e.useState({open:!1,message:"",severity:"info"}),Y=(e,t)=>{X({open:!0,message:e,severity:t})},Z=()=>{X(e=>({...e,open:!1}))},ee=e=>{t?(F(e),T(!0)):X({open:!0,message:"Please log in to use this feature.",severity:"warning"})},te=e=>r.jsxs(fe,{className:"mb-4 hover:shadow-lg transition-shadow duration-200",style:{background:a?o.palette.background.paper:void 0},children:[r.jsxs(xe,{children:[r.jsxs(c,{className:"flex justify-between items-start mb-4",children:[r.jsxs(c,{className:"flex items-center space-x-3",children:[r.jsx(K,{style:{color:a?"#00BCD4":"#0B3866"}}),r.jsxs(c,{children:[r.jsx(u,{variant:"h6",className:"font-semibold text-gray-900 dark:text-gray-100",children:e.flightNumber}),r.jsx(y,{label:e.airport,size:"small",className:"bg-blue-100 text-blue-800",sx:{backgroundColor:a?"#112233":"#DBEAFE",color:a?"#00BCD4":"#0B3866"}})]})]}),r.jsx(y,{label:`NZD $${e.offeredAmount}`,className:"bg-green-100 text-green-800 font-semibold",sx:{backgroundColor:a?"#003C2F":"#D1FAE5",color:a?"#00E676":"#168046"}})]}),r.jsxs(c,{className:"space-y-3 ",children:[r.jsx(c,{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-300",children:r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx(Ce,{fontSize:"small"}),r.jsx("span",{children:new Date(e.arrivalDate).toLocaleDateString()}),r.jsx("span",{children:e.arrivalTime})]})}),r.jsxs(c,{className:"flex items-start space-x-2",children:[r.jsx(J,{fontSize:"small",className:"text-gray-400 mt-1 dark:text-gray-300"}),r.jsxs(u,{variant:"body2",className:"text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"To:"})," ",e.destinationAddress]})]}),r.jsxs(c,{className:"flex items-center space-x-4 text-sm dark:text-gray-300",children:[r.jsxs(c,{className:"flex items-center space-x-1",children:[r.jsx(G,{fontSize:"small",className:"text-gray-400 "}),r.jsxs("span",{children:[r.jsx("strong",{children:"Passengers:"})," ",e.passengerCount]})]}),e.hasLuggage&&r.jsx(y,{icon:r.jsx(je,{}),label:"Has Luggage",size:"small",className:"bg-blue-50 text-blue-700"})]}),e.passengerName&&r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Contact:"})," ",e.passengerName]}),e.specialRequests&&r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Special Requests:"})," ",e.specialRequests]})]})]}),r.jsxs(be,{className:"justify-between bg-gray-50 dark:bg-gray-800",children:[r.jsx(y,{label:e.isMatched?"Driver Found":"Looking for Driver",color:e.isMatched?"success":"default",variant:e.isMatched?"filled":"outlined",sx:e.isMatched?{backgroundColor:a?"#FFD600":void 0,color:a?"#333":void 0}:{color:a?"#00BCD4":void 0,borderColor:a?"#00BCD4":void 0}}),r.jsxs(c,{className:"flex gap-2",children:[r.jsx(m,{variant:"outlined",size:"small",startIcon:r.jsx(ye,{}),onClick:()=>(e=>{Y(`Contacting passenger for ${e.flightNumber}`,"info")})(e),sx:{color:a?"#00BCD4":"#0B3866",borderColor:a?"#00BCD4":"#0B3866","&:hover":{backgroundColor:a?"rgba(0, 188, 212, 0.1)":"rgba(11, 56, 102, 0.1)"}},children:"Contact"}),1===I&&!e.isMatched&&r.jsx(m,{variant:A===e.id?"contained":"outlined",size:"small",sx:{color:A===e.id?"#fff":a?"#00BCD4":"#0B3866",backgroundColor:A===e.id?a?"#00BCD4":"#0B3866":"transparent",borderColor:a?"#00BCD4":"#0B3866","&:hover":{backgroundColor:A===e.id?a?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)":a?"rgba(0, 188, 212, 0.1)":"rgba(11, 56, 102, 0.1)"}},onClick:()=>A===e.id?ie():oe(e.id),children:A===e.id?"Selected":"Select"})]})]})]},e.id),re=e=>r.jsxs(fe,{className:"mb-4 hover:shadow-lg transition-shadow duration-200",style:{background:a?o.palette.background.paper:void 0},children:[r.jsxs(xe,{children:[r.jsxs(c,{className:"flex justify-between items-start mb-4",children:[r.jsxs(c,{className:"flex items-center space-x-3",children:[r.jsx(_,{className:"text-[#168046]"}),r.jsxs(c,{children:[r.jsx(u,{variant:"h6",className:"font-semibold text-gray-900 dark:text-gray-100",children:e.vehicleType}),r.jsx(y,{label:e.airport,size:"small",className:"bg-green-100 text-green-800",sx:{backgroundColor:a?"#003C2F":"#D1FAE5",color:a?"#00E676":"#168046"}})]})]}),r.jsxs(c,{className:"flex items-center space-x-1",children:[r.jsx(Se,{className:"text-yellow-500",fontSize:"small"}),r.jsx(u,{variant:"body2",className:"font-medium",children:e.rating})]})]}),r.jsxs(c,{className:"space-y-2 mb-3",children:[r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Capacity:"})," ",e.maxPassengers," passengers max"]}),r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Service Area:"})," ",e.serviceArea]}),e.languages&&r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Languages:"})," ",e.languages]}),r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Experience:"})," ",e.totalTrips," completed rides"]}),e.additionalServices&&r.jsxs(u,{variant:"body2",className:"text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Services:"})," ",e.additionalServices]})]}),r.jsxs(c,{className:"flex justify-between items-center",children:[r.jsx(y,{label:`$${e.baseRate}`,className:"bg-green-100 text-green-800 font-semibold",sx:{backgroundColor:a?"#003C2F":"#D1FAE5",color:a?"#00E676":"#168046"}}),e.canHandleLuggage&&r.jsx(y,{icon:r.jsx(je,{}),label:"Luggage OK",size:"small",className:"bg-blue-50 text-blue-700",sx:{backgroundColor:a?"#112233":"#DBEAFE",color:a?"#00BCD4":"#0B3866"}})]})]}),r.jsxs(be,{className:"justify-between bg-gray-50 dark:bg-gray-800 mt-auto",children:[r.jsx(y,{label:"Available",color:"success",variant:"outlined"}),r.jsx(m,{variant:"outlined",size:"small",startIcon:r.jsx(ye,{}),onClick:()=>(e=>{Y(`Contacting driver for ${e.vehicleType}`,"info")})(e),sx:{color:"#168046",borderColor:"#168046","&:hover":{backgroundColor:"rgba(22, 128, 70, 0.1)"}},children:"Contact"}),A&&r.jsx(m,{variant:"contained",color:"primary",onClick:()=>ne(A,e.id),children:"Match"})]})]},e.id),ne=async(e,t)=>{try{const r=localStorage.getItem("token"),n=await fetch("https://localhost:5001/api/pickup/match",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({requestId:e,offerId:t})});if(!n.ok){const e=await n.json();return void Y(e.message||"Failed to match","error")}Y("Pickup match successful!","success"),O(null),h(),w()}catch(r){Y("Error matching: "+r,"error")}},oe=e=>{O(e),Y("Request selected. Now choose an offer to match.","info")},ie=()=>{O(null),Y("Selection cleared.","info")};e.useEffect(()=>{H.airport||H.flightNumber||!$||z(null)},[H.airport,H.flightNumber,$]);const se=$?i.filter(e=>{const t=!$.airport||e.airport.toLowerCase().includes($.airport.toLowerCase()),r=!$.flightNumber||e.flightNumber.toLowerCase().includes($.flightNumber.toLowerCase());return t&&r}):i;e.useEffect(()=>{q.airport||q.vehicleType||!V||W(null)},[q.airport,q.vehicleType,V]);const ue=V?g.filter(e=>{const t=!V.airport||e.airport.toLowerCase().includes(V.airport.toLowerCase()),r=!V.vehicleType||e.vehicleType.toLowerCase().includes(V.vehicleType.toLowerCase());return t&&r}):g;return N?r.jsx(s,{maxWidth:!1,className:"py-8",children:r.jsxs(l,{className:"p-6 text-center",style:{background:a?o.palette.background.paper:void 0},children:[r.jsx(u,{variant:"h6",color:"error",className:"mb-4",children:"Error loading data"}),r.jsx(u,{variant:"body2",className:"mb-4",children:N.toString()}),r.jsx(m,{variant:"contained",onClick:()=>{h(),w()},sx:{backgroundColor:a?"#00BCD4":"#0B3866",color:"#fff","&:hover":{backgroundColor:a?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)"}},children:"Retry"})]})}):r.jsxs(s,{maxWidth:!1,className:"py-20 mb-20",children:[r.jsx(l,{elevation:0,className:"mb-8 p-6 ",style:{background:a?o.palette.background.paper:void 0},children:r.jsxs(c,{className:"text-center",children:[r.jsx(u,{variant:"h3",component:"h1",className:"font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Airport Pickup Service"}),r.jsx(u,{variant:"body1",className:"text-gray-600 dark:text-gray-300",children:"Connect with reliable drivers for airport transfers"})]})}),r.jsx(l,{elevation:1,className:"mb-6",style:{background:a?o.palette.background.paper:void 0},children:r.jsxs(le,{value:I,onChange:(e,t)=>{M(t)},className:"border-b border-gray-200",textColor:"primary",indicatorColor:"primary",sx:{"& .MuiTabs-indicator":a?{backgroundColor:"#00BCD4"}:{}},children:[r.jsx(ce,{icon:r.jsx(K,{style:{color:a?"#00BCD4":void 0}}),label:`Pickup Requests (${i.length})`,className:"font-medium",sx:{color:a?"#fff":void 0,"&.Mui-selected":a?{color:"#00BCD4"}:{}}}),r.jsx(ce,{icon:r.jsx(_,{style:{color:a?"#00BCD4":void 0}}),label:`Available Drivers (${g.length})`,className:"font-medium",sx:{color:a?"#fff":void 0,"&.Mui-selected":a?{color:"#00BCD4"}:{}}})]})}),r.jsxs(c,{className:"min-h-96",children:[0===I&&r.jsxs(c,{children:[r.jsxs(l,{className:"mb-6 p-4",style:{background:a?o.palette.background.paper:void 0},children:[r.jsx(u,{variant:"h6",className:"mb-4",children:"Search for Requests to Help"}),r.jsxs(Q,{container:!0,spacing:2,alignItems:"end",children:[r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,label:"Airport",value:H.airport,onChange:e=>L(t=>({...t,airport:e.target.value})),placeholder:"e.g., AKL"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,label:"Flight Number",value:H.flightNumber,onChange:e=>L(t=>({...t,flightNumber:e.target.value})),placeholder:"e.g., NZ289"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"contained",fullWidth:!0,onClick:()=>{if(!H.airport&&!H.flightNumber)return z(null),void Y("Showing all requests","info");z({airport:H.airport||void 0,flightNumber:H.flightNumber||void 0}),Y("Searching for requests...","info")},sx:{backgroundColor:a?"#00BCD4":"#0B3866","&:hover":{backgroundColor:a?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)"},height:"56px"},children:"Search Requests"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"outlined",fullWidth:!0,onClick:()=>{L({airport:"",flightNumber:""}),z(null),Y("Search cleared","info")},sx:{borderColor:a?"#00BCD4":"#0B3866",color:a?"#00BCD4":"#0B3866","&:hover":{borderColor:a?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)",backgroundColor:a?"rgba(0, 188, 212, 0.1)":"rgba(11, 56, 102, 0.1)"},height:"56px"},children:"Clear Search"})})]})]}),r.jsx(c,{className:"text-center mb-8",children:r.jsx(m,{variant:"contained",size:"large",startIcon:r.jsx(de,{}),onClick:()=>ee(0===I?"request":"offer"),sx:{backgroundColor:0===I?a?"#00BCD4":"#0B3866":"#168046",color:"#fff","&:hover":{backgroundColor:0===I?a?"rgba(0, 188, 212, 0.9)":"rgba(11, 56, 102, 0.9)":"rgba(22, 128, 70, 0.9)"}},className:"px-8 py-3  my-3 text-white",children:0===I?"Request Pickup":"Offer Service"})}),R&&!i.length?r.jsx(c,{className:"flex justify-center items-center py-12",children:r.jsx(P,{size:40})}):0===se.length?r.jsxs(l,{className:"text-center py-12 bg-gray-50 dark:bg-gray-800",style:{background:a?o.palette.background.paper:void 0},children:[r.jsx(K,{sx:{fontSize:64,color:a?"#00BCD4":void 0},className:"text-gray-400 mb-4"}),r.jsx(u,{variant:"h6",className:"text-gray-600 dark:text-gray-300",children:$?"No matching requests found":"No pickup requests yet"}),r.jsx(u,{variant:"body2",className:"text-gray-500 dark:text-gray-400 mt-2",children:$?"Try different search criteria":"Be the first to request a pickup!"})]}):r.jsx(Q,{container:!0,spacing:3,children:se.map(e=>r.jsx(Q,{item:!0,xs:12,sm:12,md:6,lg:4,xl:3,className:"flex flex-col",children:te(e)},e.id))})]}),1===I&&r.jsxs(c,{children:[r.jsxs(l,{className:"mb-6 p-4",style:{background:a?o.palette.background.paper:void 0},children:[r.jsx(u,{variant:"h6",className:"mb-4",children:"Search for Driver"}),r.jsxs(Q,{container:!0,spacing:2,alignItems:"end",children:[r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,label:"Airport",value:q.airport,onChange:e=>B(t=>({...t,airport:e.target.value})),placeholder:"e.g., AKL"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(ae,{fullWidth:!0,label:"Vehicle Type",value:q.vehicleType,onChange:e=>B(t=>({...t,vehicleType:e.target.value})),placeholder:"e.g., Sedan"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"contained",fullWidth:!0,onClick:()=>{if(!q.airport&&!q.vehicleType)return W(null),void Y("Showing all drivers","info");W({airport:q.airport||void 0,vehicleType:q.vehicleType||void 0}),Y("Searching for drivers...","info")},sx:{backgroundColor:"#168046","&:hover":{backgroundColor:"rgba(22, 128, 70, 0.9)"},height:"56px"},children:"Search Drivers"})}),r.jsx(Q,{item:!0,xs:12,sm:3,children:r.jsx(m,{variant:"outlined",fullWidth:!0,onClick:()=>{B({airport:"",vehicleType:""}),W(null),Y("Search cleared","info")},sx:{borderColor:"#168046",color:"#168046","&:hover":{borderColor:"rgba(22, 128, 70, 0.9)",backgroundColor:"rgba(22, 128, 70, 0.1)"},height:"56px"},children:"Clear Search"})})]})]}),r.jsx(c,{className:"text-center mb-8",children:r.jsx(m,{variant:"contained",size:"large",startIcon:r.jsx(de,{}),onClick:()=>ee("offer"),sx:{backgroundColor:"#168046",color:"#fff","&:hover":{backgroundColor:"rgba(22, 128, 70, 0.9)"}},className:"px-8 py-3  my-3 text-white",children:"Offer Service"})}),A&&r.jsx(l,{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900",children:r.jsxs(c,{className:"flex justify-between items-center",children:[r.jsx(u,{variant:"body2",className:"text-blue-800 dark:text-blue-200",children:"Request selected. Choose an offer to match."}),r.jsx(m,{variant:"outlined",size:"small",onClick:ie,children:"Clear Selection"})]})}),R&&!g.length?r.jsx(c,{className:"flex justify-center items-center py-12",children:r.jsx(P,{size:40})}):0===ue.length?r.jsxs(l,{className:"text-center py-12 bg-gray-50 dark:bg-gray-800",style:{background:a?o.palette.background.paper:void 0},children:[r.jsx(_,{sx:{fontSize:64,color:a?"#00BCD4":void 0},className:"text-gray-400 mb-4"}),r.jsx(u,{variant:"h6",className:"text-gray-600 dark:text-gray-300",children:V?"No matching drivers found":"No drivers available yet"}),r.jsx(u,{variant:"body2",className:"text-gray-500 dark:text-gray-400 mt-2",children:V?"Try different search criteria":"Be the first to offer pickup services!"})]}):r.jsx(Q,{container:!0,spacing:3,children:ue.map(e=>r.jsx(Q,{item:!0,xs:12,sm:12,md:6,lg:4,xl:3,className:"flex flex-col",children:re(e)},e.id))})]})]}),r.jsxs(me,{open:D,onClose:()=>T(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(pe,{style:{background:a?o.palette.background.paper:void 0},children:"request"===E?"Request Airport Pickup":"Offer Pickup Service"}),r.jsx(he,{className:"p-6",style:{background:a?o.palette.background.default:void 0},children:"request"===E?r.jsx(qi,{onSubmit:async e=>{try{const t={...e,userId:1};await C(t).unwrap(),Y("Pickup request created successfully!","success"),T(!1)}catch(t){const e=t instanceof Error?t.message:"Error creating pickup request";Y(e,"error")}},onCancel:()=>T(!1),loading:j}):r.jsx(Ui,{onSubmit:async e=>{try{if(!n?.id)return void Y("User not authenticated. Please log in.","error");const t={userId:n.id,airport:e.airport,vehicleType:e.vehicleType||null,maxPassengers:e.maxPassengers,canHandleLuggage:e.canHandleLuggage,serviceArea:e.serviceArea||null,baseRate:parseFloat(e.baseRate)||0,languages:e.languages||null,additionalServices:e.additionalServices||null};await S(t).unwrap(),Y("Pickup offer created successfully!","success"),T(!1),w()}catch(t){const e=t instanceof Error?t.message:"Error creating offer";Y(e,"error")}},onCancel:()=>T(!1),loading:k})})]}),r.jsx(v,{open:U.open,autoHideDuration:2e3,onClose:Z,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{zIndex:1400},children:r.jsx(b,{onClose:Z,severity:U.severity,variant:"filled",children:U.message})})]})},_i=x(fe,{shouldForwardProp:e=>"hover"!==e})(({theme:e,hover:t})=>({borderRadius:e.spacing(1.5),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:`1px solid ${e.palette.divider}`,...t&&{cursor:"pointer","&:hover":{transform:"translateY(-2px)",boxShadow:e.shadows[8]}},[e.breakpoints.up("xs")]:{".dark &":{backgroundColor:"dark"===e.palette.mode?"#1f2937":e.palette.background.paper,borderColor:"dark"===e.palette.mode?"#374151":e.palette.divider}}}));Object.assign(({children:e,className:t="",elevation:n=1,variant:o="elevation",sx:a,hover:i=!1,onClick:s,loading:l=!1,"data-testid":c,...d})=>l?r.jsx("div",{"data-testid":"card-skeleton",children:r.jsx("div",{children:"Loading..."})}):r.jsx(_i,{elevation:n,variant:o,hover:i,onClick:s,className:`${t} bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700`,sx:a,"data-testid":c,...d,children:e}),{Header:({title:e,subheader:t,action:n,avatar:o,className:a="",sx:i,...s})=>r.jsx(ke,{title:e,subheader:t,action:n,avatar:o,className:`${a} bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700`,sx:i,...s}),Content:({children:e,className:t="",sx:n,...o})=>r.jsx(xe,{className:`${t} p-6`,sx:n,...o,children:e}),Actions:({children:e,className:t="",disableSpacing:n=!1,sx:o,...a})=>r.jsx(be,{disableSpacing:n,className:`${t} px-6 py-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700`,sx:o,...a,children:e})});const Qi=x(ae)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:e.spacing(1),transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderWidth:2}}},"& .MuiInputLabel-root":{fontWeight:500},"& .MuiFormHelperText-root":{marginLeft:0,marginTop:e.spacing(.5)}})),Xi=i.forwardRef(({type:e="text",multiline:t=!1,rows:n,maxRows:o,minRows:a,startAdornment:s,endAdornment:l,size:c="medium",variant:d="outlined",autoComplete:u,autoFocus:m=!1,maxLength:p,minLength:h,pattern:g,className:f="",sx:x,"data-testid":b,...y},v)=>{const[w,C]=i.useState(!1),S=()=>{C(!w)};return r.jsx(Qi,{ref:v,type:"password"===e?w?"text":"password":e,multiline:t,rows:n,maxRows:o,minRows:a,size:c,variant:d,autoComplete:u,autoFocus:m,InputProps:{startAdornment:s?r.jsx(De,{position:"start",children:s}):void 0,endAdornment:"password"===e?r.jsxs(De,{position:"end",children:[r.jsx(j,{onClick:S,edge:"end",size:"small",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:w?r.jsx(Te,{}):r.jsx(Ee,{})}),l]}):l,inputProps:{maxLength:p,minLength:h,pattern:g}},className:`${f} bg-white dark:bg-gray-700 rounded-lg`.trim(),sx:x,"data-testid":b,...y})});Xi.displayName="TextField";const Yi=i.forwardRef(({options:e,multiple:t=!1,size:n="medium",variant:o="outlined",displayEmpty:a=!1,startAdornment:i,endAdornment:s,className:l="",sx:c,"data-testid":d,...u},m)=>r.jsxs(Qi,{ref:m,select:!0,size:n,variant:o,SelectProps:{multiple:t,displayEmpty:a},InputProps:{startAdornment:i?r.jsx(De,{position:"start",children:i}):void 0,endAdornment:s?r.jsx(De,{position:"end",children:s}):void 0},className:`${l} bg-white dark:bg-gray-700 rounded-lg`.trim(),sx:c,"data-testid":d,...u,children:[a&&r.jsx(E,{value:"",children:r.jsx("em",{children:"None"})}),e.map(e=>r.jsx(E,{value:e.value,disabled:e.disabled,children:e.label},e.value))]}));Yi.displayName="Select";i.forwardRef(({checked:e,onChange:t,indeterminate:n=!1,size:o="medium",color:a="primary",label:i,className:s="",sx:l,"data-testid":c,...d},u)=>{const m=r.jsx(we,{ref:u,checked:e,onChange:t,indeterminate:n,size:o,color:a,className:`${s} text-blue-600`.trim(),sx:l,"data-testid":c,...d});return i?r.jsx(ve,{control:m,label:i,disabled:d.disabled}):m}).displayName="Checkbox";i.forwardRef(({options:e,onChange:t,row:n=!1,size:o="medium",color:a="primary",className:i="",sx:s,"data-testid":l,...c},d)=>r.jsxs(ie,{component:"fieldset",error:c.error,disabled:c.disabled,children:[c.label&&r.jsx(Re,{component:"legend",children:c.label}),r.jsx(Ne,{ref:d,value:c.value,onChange:t,row:n,className:`${i}`.trim(),sx:s,"data-testid":l,children:e.map(e=>r.jsx(ve,{value:e.value,control:r.jsx(Pe,{size:o,color:a,disabled:e.disabled,className:"text-blue-600"}),label:e.label,disabled:e.disabled||c.disabled},e.value))}),c.helperText&&r.jsx(Ie,{children:c.helperText})]})).displayName="RadioGroup";i.forwardRef(({checked:e,onChange:t,size:n="medium",color:o="primary",label:a,className:i="",sx:s,"data-testid":l,...c},d)=>{const u=r.jsx(Me,{ref:d,checked:e,onChange:t,size:n,color:o,className:`${i}`.trim(),sx:s,"data-testid":l,...c});return a?r.jsx(ve,{control:u,label:a,disabled:c.disabled}):u}).displayName="Switch";const Zi={TextField:Xi,Select:Yi};i.forwardRef(function(e,t){return r.jsx(h,{direction:"up",ref:t,...e})}),i.forwardRef(function(e,t){return r.jsx(Fe,{ref:t,...e})}),i.forwardRef(function(e,t){return r.jsx(g,{ref:t,...e})}),x(me)(({theme:e})=>({"& .MuiDialog-paper":{borderRadius:e.spacing(1.5),boxShadow:e.shadows[16],margin:e.spacing(2),maxHeight:"calc(100vh - 32px)",width:"100%",[e.breakpoints.down("sm")]:{margin:e.spacing(1),maxHeight:"calc(100vh - 16px)",borderRadius:e.spacing(1)},[e.breakpoints.down(400)]:{margin:0,maxHeight:"100vh",height:"100vh",borderRadius:0}},"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)"}})),x(pe)(({theme:e})=>({padding:e.spacing(3),paddingBottom:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${e.palette.divider}`,"& .MuiTypography-root":{fontWeight:600,fontSize:"1.25rem",lineHeight:1.2,[e.breakpoints.down("sm")]:{fontSize:"1.125rem"}},[e.breakpoints.down("sm")]:{padding:e.spacing(2),paddingBottom:e.spacing(1.5)}})),x(he)(({theme:e})=>({padding:e.spacing(3),"&.MuiDialogContent-dividers":{borderTop:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`},[e.breakpoints.down("sm")]:{padding:e.spacing(2)},[e.breakpoints.down("sm")]:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",WebkitOverflowScrolling:"touch"}})),x(ge)(({theme:e})=>({padding:e.spacing(2,3,3),gap:e.spacing(1),"& .MuiButton-root":{minWidth:e.spacing(10),minHeight:e.spacing(5.5)},[e.breakpoints.down("sm")]:{padding:e.spacing(2),flexDirection:"column-reverse","& .MuiButton-root":{width:"100%",margin:0}}}));const Ji=()=>{const{data:e,error:t,isLoading:n}=Xo();if(n)return r.jsx("div",{children:"Loading payment history..."});if(t)return r.jsx("div",{children:"Error loading payment history. Check console for details."});if(!e||0===e.length)return r.jsx("div",{children:"No payment history found."});try{return r.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[r.jsx("h2",{className:"text-lg font-bold mb-2",children:"Payment History"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm border-collapse border border-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Date"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Type"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Amount"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Status"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Receipt"})]})}),r.jsx("tbody",{children:e.map(e=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.requestType||"-"}),r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.amount?`${e.amount} ${e.currency||"NZD"}`:"-"}),r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.status||"-"}),r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.stripePaymentIntentId?r.jsx("a",{href:`/api/payment/receipt/${e.stripePaymentIntentId}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"View Receipt"}):"-"})]},e.id))})]})})]})}catch(o){return r.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded",children:[r.jsx("h2",{className:"text-lg font-bold mb-2 text-red-800",children:"Payment History"}),r.jsx("p",{className:"text-red-600",children:"Unable to display payment history. Please try again later."})]})}},es=()=>{const[t,n]=e.useState(null),[o,a]=e.useState(!1),[i,s]=e.useState(null),[l,d]=e.useState(!1),[p,h]=e.useState(null),[g,f]=e.useState(!1),x=async()=>{try{f(!0);const e=await fetch("https://localhost:5001/api/verification/status",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const t=await e.json();h(t)}}catch(e){}finally{f(!1)}};e.useEffect(()=>{x()},[]);return r.jsxs(c,{component:"form",onSubmit:async e=>{if(e.preventDefault(),!t)return s("Please select a file to upload."),void d(!1);a(!0),s(null),d(!1);const r=new FormData;r.append("file",t);try{const e=await fetch("https://localhost:5001/api/verification/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:r}),t=await e.json();e.ok?(s("Document uploaded successfully! Awaiting admin review."),n(null),d(!0),await x()):(s(t.message||"Failed to upload document."),d(!1))}catch(o){s("Failed to upload document. Please try again."),d(!1)}finally{a(!1)}},sx:{mx:5,my:5},children:[r.jsx(u,{variant:"h5",gutterBottom:!0,style:{color:"#020F6F"},children:"Submit Verification Documents"}),r.jsx(u,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Please provide references to your identification documents. This helps us verify your identity and build trust in our community."}),g?r.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[r.jsx(P,{size:20,sx:{mr:1}}),r.jsx(u,{children:"Loading verification status..."})]}):p&&r.jsxs(b,{severity:(e=>{switch(e){case"pending":return"warning";case"approved":return"success";case"rejected":return"error";default:return"info"}})(p.status),sx:{mb:3},children:[r.jsxs(u,{variant:"subtitle2",sx:{mb:1},children:["Current Status: ",p.status.toUpperCase()]}),r.jsx(u,{variant:"body2",children:(e=>{switch(e){case"pending":return"Your document is pending admin review. You cannot upload a new document until this one is reviewed.";case"approved":return"Your document has been approved! You are now verified.";case"rejected":return"Your document was rejected. You can upload a new document.";default:return"No verification document submitted."}})(p.status)}),p.fileName&&r.jsxs(u,{variant:"body2",sx:{mt:1},children:["File: ",p.fileName]}),p.adminComment&&r.jsxs(u,{variant:"body2",sx:{mt:1},children:["Admin Comment: ",p.adminComment]})]}),p&&"rejected"!==p.status&&"not_submitted"!==p.status?"pending"===p.status?r.jsx(b,{severity:"info",sx:{mb:2},children:"You already have a verification document in the system. Please wait for admin review or contact support if you need to update your document."}):null:r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:e=>{e.target.files&&e.target.files.length>0&&(n(e.target.files[0]),s(null),d(!1))},style:{marginBottom:8}}),r.jsx(u,{variant:"caption",color:"text.secondary",sx:{mb:2,display:"block"},children:"Accepted file types: Images (JPG, PNG, GIF, etc.) or PDF"}),r.jsx(c,{children:r.jsx(m,{type:"submit",variant:"contained",disabled:o||!t,children:o?r.jsx(P,{size:20}):"Upload"})})]}),i&&r.jsx(b,{sx:{mt:2},severity:l?"success":"error",children:i})]})},ts=({label:e,value:t,onChange:n,error:o,helperText:a,disabled:i,placeholder:s="21 123 4567"})=>{const l=(t||"").startsWith("+64")?(t||"").substring(3):t||"";return r.jsx(ae,{label:e,value:l||"",onChange:e=>{const t=e.target.value.replace(/[^0-9\s]/g,"");n(t?`+64${t}`:"")},error:o,helperText:a,disabled:i,placeholder:s,fullWidth:!0,InputProps:{startAdornment:r.jsx(De,{position:"start",children:r.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(Z,{className:"text-gray-400",sx:{mr:1}}),r.jsx(u,{variant:"body2",sx:{color:"text.secondary",fontWeight:"bold"},children:"+64"})]})})}})},rs=()=>{const{t:t,i18n:n}=Rt(),{muiTheme:o}=ra(),a=Di(),l=i.useMemo(()=>Sr({firstName:kr().min(1,t("validation.firstNameRequired")).max(50,t("validation.firstNameMax")).regex(/^[a-zA-Z\s]+$/,t("validation.firstNameRegex")),lastName:kr().min(1,t("validation.lastNameRequired")).max(50,t("validation.lastNameMax")).regex(/^[a-zA-Z\s]+$/,t("validation.lastNameRegex")),phoneNumber:kr().optional().refine(e=>!e||/^\+64\d{8,9}$/.test(e),t("validation.phoneNumberFormat")),preferredLanguage:Nr(["English","Chinese"],{errorMap:()=>({message:t("validation.preferredLanguageRequired")})}),emergencyContact:kr().optional().refine(e=>!e||e.length>=2&&e.length<=100,t("validation.emergencyContactLength")),emergencyPhone:kr().optional().refine(e=>!e||/^\+64\d{8,9}$/.test(e),t("validation.emergencyPhoneFormat"))}),[t]);i.useMemo(()=>Sr({documentReferences:kr().min(10,t("validation.documentReferencesMin")).max(500,t("validation.documentReferencesMax"))}),[t]);const[d,p]=e.useState(!1),[h,g]=e.useState(!1),[f,x]=e.useState(null),[w,C]=e.useState(null),[j,S]=e.useState(!1),[k,R]=e.useState({open:!1,message:"",severity:"info"}),[N,I]=e.useState([]),[M,D]=e.useState([]),[T,E]=e.useState([]),[F,A]=e.useState([]),[O,H]=e.useState(!1),[L,$]=e.useState(null),[z,{isLoading:q}]=pi(),[B,{isLoading:V}]=mi(),[W,{isLoading:U}]=hi(),[K,{isLoading:_}]=gi(),[X,{isLoading:Z}]=fi(),[J,{isLoading:te}]=xi(),[re,{isLoading:ne}]=bi(),[oe,{isLoading:ie}]=yi(),[se,le]=e.useState(!1),[ce,de]=e.useState(null),[ue,ge]=e.useState(null),[be,ye]=e.useState(!1),[ve,we]=e.useState(null),[Ce,je]=e.useState(null),{user:ke,isAuthenticated:Re}=ea(e=>e.auth),Ne=Pr({resolver:wi(l),defaultValues:{firstName:"",lastName:"",phoneNumber:"",preferredLanguage:"English",emergencyContact:"",emergencyPhone:""}}),Pe=(e,t)=>{R({open:!0,message:e,severity:t})},Ie=()=>{R(e=>({...e,open:!1}))},Me=async()=>{try{g(!0);const e=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to fetch profile");const t=await e.json();x(t),Ne.reset({firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber||"",preferredLanguage:t.preferredLanguage,emergencyContact:t.emergencyContact||"",emergencyPhone:t.emergencyPhone||""});const r=n.language?.split("-")[0]||"en",o="Chinese"===t.preferredLanguage?"zh":"en";r!==o&&n.changeLanguage(o)}catch(e){Pe(t("errorLoadingProfile"),"error")}finally{g(!1)}},De=async()=>{try{H(!0),$(null);const e=await fetch("/api/user/my-requests-offers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to fetch requests/offers");const t=await e.json();I(t.flightCompanionRequests||[]),D(t.flightCompanionOffers||[]),E(t.pickupRequests||[]),A(t.pickupOffers||[])}catch(e){$("Could not load your requests/offers.")}finally{H(!1)}},Te=(e,t)=>{de(e),ge(t),le(!0)},Ee=()=>{le(!1),de(null),ge(null)},Fe=async e=>{try{"request"===ce?(await z({id:ue.id,data:e}).unwrap(),Pe("Request updated!","success")):"offer"===ce?(await W({id:ue.id,data:e}).unwrap(),Pe("Offer updated!","success")):"pickupRequest"===ce?(await X({id:ue.id,data:e}).unwrap(),Pe("Pickup request updated!","success")):"pickupOffer"===ce&&(await re({id:ue.id,data:e}).unwrap(),Pe("Pickup offer updated!","success")),Ee(),De()}catch(t){Pe("Failed to update.","error")}},We=(e,t)=>{we(e),je(t),ye(!0)},Ge=()=>{ye(!1),we(null),je(null)};if(e.useEffect(()=>{Re&&(Me(),(async()=>{try{const e=await fetch("/api/user/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to fetch stats");const t=await e.json();C(t)}catch(e){Pe(t("errorLoadingStatistics"),"error")}})(),De())},[Re]),h&&!f)return r.jsx(s,{maxWidth:"lg",className:"py-6",children:r.jsx(c,{className:"flex justify-center items-center py-12",children:r.jsx(P,{size:40})})});if(!Re||!f)return r.jsx(s,{maxWidth:"lg",className:"py-6",children:r.jsx(b,{severity:"warning",children:t("pleaseLoginProfile")})});return r.jsxs(s,{maxWidth:"lg",className:"py-6",children:[r.jsxs(c,{className:"mb-6 mt-10",children:[r.jsx(u,{variant:"h3",component:"h1",className:"mb-2 font-bold text-gray-800 dark:text-white",children:t("userProfile")}),r.jsx(u,{variant:"h6",className:"text-gray-600 dark:text-gray-300",children:t("manageAccount")})]}),r.jsxs(Q,{container:!0,spacing:4,children:[r.jsx(Q,{item:!0,xs:12,md:8,children:r.jsx(fe,{sx:{background:a?o.palette.background.paper:void 0},children:r.jsxs(xe,{className:"p-6",children:[r.jsxs(c,{className:"flex justify-between items-center mb-6",children:[r.jsx(u,{variant:"h5",className:"font-semibold",children:t("profileInformation")}),r.jsx(m,{variant:d?"outlined":"contained",startIcon:d?r.jsx(Ae,{}):r.jsx(Oe,{}),onClick:()=>{p(!d),d&&Ne.reset({firstName:f?.firstName||"",lastName:f?.lastName||"",phoneNumber:f?.phoneNumber||"",preferredLanguage:f?.preferredLanguage||"English",emergencyContact:f?.emergencyContact||"",emergencyPhone:f?.emergencyPhone||""})},disabled:h,sx:!d&&a?{color:"#00BCD4",borderColor:"#00BCD4",backgroundColor:"transparent","&:hover":{backgroundColor:"rgba(0, 188, 212, 0.1)",borderColor:"#00BCD4",color:"#00BCD4"}}:d&&a?{color:"#00BCD4",borderColor:"#00BCD4","&:hover":{backgroundColor:"rgba(0, 188, 212, 0.1)",borderColor:"#00BCD4",color:"#00BCD4"}}:{},children:t(d?"cancel":"edit")})]}),r.jsx("form",{onSubmit:Ne.handleSubmit(async e=>{try{g(!0);const r=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(!r.ok)throw new Error("Failed to update profile");const o=await r.json();if(x(o),p(!1),Pe(t("profileUpdated"),"success"),e.preferredLanguage!==f?.preferredLanguage){const r="Chinese"===e.preferredLanguage?"zh":"en";n.changeLanguage(r);const o="Chinese"===e.preferredLanguage?"中文":"English";Pe(`${t("languageChanged")} ${o}`,"info")}}catch(r){Pe(t("errorUpdatingProfile"),"error")}finally{g(!1)}}),children:r.jsxs(Q,{container:!0,spacing:3,children:[r.jsx(Q,{item:!0,xs:12,children:r.jsx(u,{variant:"h6",className:"mb-3 text-gray-700 dark:text-gray-300",children:t("basicInformation")})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"firstName",control:Ne.control,render:({field:e,fieldState:n})=>r.jsx(Zi.TextField,{...e,label:t("firstName"),disabled:!d,error:!!n.error,helperText:n.error?.message,fullWidth:!0,required:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"lastName",control:Ne.control,render:({field:e,fieldState:n})=>r.jsx(Zi.TextField,{...e,label:t("lastName"),disabled:!d,error:!!n.error,helperText:n.error?.message,fullWidth:!0,required:!0})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Zi.TextField,{label:t("email"),value:f.email,disabled:!0,fullWidth:!0,helperText:t("emailCannotBeChanged"),startAdornment:r.jsx(Y,{className:"text-gray-400"})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"phoneNumber",control:Ne.control,render:({field:e,fieldState:n})=>r.jsx(ts,{label:t("phoneNumber"),value:e.value,onChange:e.onChange,error:!!n.error,helperText:n.error?.message||t("validation.phoneNumberFormat"),disabled:!d})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"preferredLanguage",control:Ne.control,render:({field:e,fieldState:n})=>r.jsx(Zi.Select,{...e,label:t("preferredLanguage"),disabled:!d,error:!!n.error,helperText:n.error?.message,fullWidth:!0,options:[{value:"English",label:t("English")},{value:"Chinese",label:t("Chinese")}]})})}),r.jsxs(Q,{item:!0,xs:12,children:[r.jsx(ee,{className:"my-4"}),r.jsx(u,{variant:"h6",className:"mb-3 text-gray-700 dark:text-gray-300",children:t("emergencyContact")})]}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"emergencyContact",control:Ne.control,render:({field:e,fieldState:n})=>r.jsx(Zi.TextField,{...e,label:t("emergencyContact"),disabled:!d,error:!!n.error,helperText:n.error?.message,fullWidth:!0,startAdornment:r.jsx(He,{className:"text-gray-400"})})})}),r.jsx(Q,{item:!0,xs:12,sm:6,children:r.jsx(Ir,{name:"emergencyPhone",control:Ne.control,render:({field:e,fieldState:n})=>r.jsx(ts,{label:t("emergencyPhone"),value:e.value,onChange:e.onChange,error:!!n.error,helperText:n.error?.message||t("validation.phoneNumberFormat"),disabled:!d})})}),d&&r.jsx(Q,{item:!0,xs:12,children:r.jsx(c,{className:"flex justify-end gap-3 pt-4",children:r.jsx(m,{type:"submit",variant:"contained",startIcon:h?r.jsx(P,{size:20}):r.jsx(Le,{}),disabled:h,className:"bg-green-600 hover:bg-green-700",children:t(h?"saving":"saveChanges")})})})]})})]})})}),r.jsxs(Q,{item:!0,xs:12,md:4,children:[r.jsx(fe,{className:"mb-4",sx:{background:a?o.palette.background.paper:void 0},children:r.jsxs(xe,{className:"text-center p-6",sx:{background:a?o.palette.background.paper:void 0},children:[r.jsx($e,{className:"mx-auto mb-4 w-20 h-20 bg-blue-600",sx:{width:80,height:80},children:r.jsx(G,{sx:{fontSize:40}})}),r.jsxs(u,{variant:"h5",className:"font-semibold mb-2",children:[f.firstName," ",f.lastName]}),r.jsxs(c,{className:"flex justify-center items-center gap-2 mb-3",children:[f.isVerified?r.jsx(y,{icon:r.jsx(ze,{}),label:t("verified"),color:"success",size:"small"}):r.jsx(y,{icon:r.jsx(qe,{}),label:t("unverified"),color:"warning",size:"small"}),r.jsx(y,{icon:r.jsx(Be,{}),label:f.preferredLanguage,variant:"outlined",size:"small"})]}),(Ue=f.rating,r.jsxs(c,{className:"flex items-center justify-center",children:[[1,2,3,4,5].map(e=>r.jsx(Se,{className:"w-4 h-4 "+(e<=Math.round(Ue)?"text-yellow-400":"text-gray-300")},e)),r.jsxs(u,{variant:"body2",className:"ml-2 text-gray-600 dark:text-gray-100",children:[Ue.toFixed(1)," (",f.totalRatings," ",t("reviews"),")"]})]})),r.jsxs(u,{variant:"body2",className:"text-gray-600 mt-3 dark:text-gray-100",children:[t("memberSince")," ",new Date(f.createdAt).toLocaleDateString()]}),!f.isVerified&&r.jsx(m,{variant:"outlined",startIcon:r.jsx(Ve,{}),onClick:()=>S(!0),className:"mt-4",fullWidth:!0,sx:a?{color:"#00BCD4",borderColor:"#00BCD4","&:hover":{backgroundColor:"rgba(0, 188, 212, 0.1)",borderColor:"#00BCD4",color:"#00BCD4"}}:{},children:t("submitVerification")})]})}),w&&r.jsx(fe,{sx:{background:a?o.palette.background.paper:void 0},children:r.jsxs(xe,{className:"p-6",sx:{background:a?o.palette.background.paper:void 0},children:[r.jsx(u,{variant:"h6",className:"font-semibold mb-4",children:t("activityStatistics")}),r.jsxs(c,{className:"space-y-3",children:[r.jsxs(c,{className:"flex justify-between",children:[r.jsxs(u,{variant:"body2",children:[t("requestsCreated"),":"]}),r.jsx(u,{variant:"body2",className:"font-semibold",children:w.totalFlightCompanionRequests+w.totalPickupRequests})]}),r.jsxs(c,{className:"flex justify-between",children:[r.jsxs(u,{variant:"body2",children:[t("servicesOffered"),":"]}),r.jsx(u,{variant:"body2",className:"font-semibold",children:w.totalFlightCompanionOffers+w.totalPickupOffers})]}),r.jsxs(c,{className:"flex justify-between",children:[r.jsxs(u,{variant:"body2",children:[t("completedServices"),":"]}),r.jsx(u,{variant:"body2",className:"font-semibold",children:w.completedServices})]}),r.jsx(ee,{}),r.jsxs(c,{className:"flex justify-between",children:[r.jsxs(u,{variant:"body2",children:[t("averageRating"),":"]}),r.jsxs(u,{variant:"body2",className:"font-semibold",children:[w.averageRating.toFixed(1),"/5.0"]})]})]})]})})]})]}),r.jsxs(c,{className:"my-8",children:[r.jsx(u,{variant:"h5",className:"mb-4 font-bold",children:"My Flight Companion Requests"}),O?r.jsx(c,{className:"flex justify-center items-center py-4",children:r.jsx(P,{size:28})}):L?r.jsx(b,{severity:"error",children:L}):0===N.length?r.jsx(u,{children:"No requests found."}):N.map(e=>r.jsx(fe,{className:"mb-2",children:r.jsxs(xe,{children:[r.jsxs(u,{children:[e.flightNumber," - ",e.airline," (",e.departureAirport," → ",e.arrivalAirport,") on ",new Date(e.flightDate).toLocaleDateString()]}),r.jsxs(u,{variant:"body2",color:"textSecondary",children:["Status: ",e.isMatched?"Matched":"Open"]}),r.jsxs(c,{className:"flex gap-2 mt-2",children:[r.jsx(m,{size:"small",variant:"outlined",onClick:()=>Te("request",e),disabled:q,children:"Edit"}),r.jsx(m,{size:"small",variant:"outlined",color:"error",onClick:()=>We("request",e),disabled:V,children:"Delete"})]})]})},e.id)),r.jsx(u,{variant:"h5",className:"mb-4 font-bold mt-8",children:"My Flight Companion Offers"}),O?r.jsx(c,{className:"flex justify-center items-center py-4",children:r.jsx(P,{size:28})}):L?r.jsx(b,{severity:"error",children:L}):0===M.length?r.jsx(u,{children:"No offers found."}):M.map(e=>r.jsx(fe,{className:"mb-2",children:r.jsxs(xe,{children:[r.jsxs(u,{children:[e.flightNumber," - ",e.airline," (",e.departureAirport," → ",e.arrivalAirport,") on ",new Date(e.flightDate).toLocaleDateString()]}),r.jsxs(u,{variant:"body2",color:"textSecondary",children:["Status: ",e.isAvailable?"Available":"Matched"]}),r.jsxs(c,{className:"flex gap-2 mt-2",children:[r.jsx(m,{size:"small",variant:"outlined",onClick:()=>Te("offer",e),disabled:U,children:"Edit"}),r.jsx(m,{size:"small",variant:"outlined",color:"error",onClick:()=>We("offer",e),disabled:_,children:"Delete"})]})]})},e.id)),r.jsx(u,{variant:"h5",className:"mb-4 font-bold mt-8",children:"My Pickup Requests"}),O?r.jsx(c,{className:"flex justify-center items-center py-4",children:r.jsx(P,{size:28})}):L?r.jsx(b,{severity:"error",children:L}):0===T.length?r.jsx(u,{children:"No pickup requests found."}):T.map(e=>r.jsx(fe,{className:"mb-2",children:r.jsxs(xe,{children:[r.jsxs(u,{children:[e.airport," on ",new Date(e.arrivalDate).toLocaleDateString()," (Offered: $",e.offeredAmount,")"]}),r.jsxs(u,{variant:"body2",color:"textSecondary",children:["Status: ",e.isMatched?"Matched":"Open"]}),r.jsxs(c,{className:"flex gap-2 mt-2",children:[r.jsx(m,{size:"small",variant:"outlined",onClick:()=>Te("pickupRequest",e),disabled:Z,children:"Edit"}),r.jsx(m,{size:"small",variant:"outlined",color:"error",onClick:()=>We("pickupRequest",e),disabled:te,children:"Delete"})]})]})},e.id)),r.jsx(u,{variant:"h5",className:"mb-4 font-bold mt-8",children:"My Pickup Offers"}),O?r.jsx(c,{className:"flex justify-center items-center py-4",children:r.jsx(P,{size:28})}):L?r.jsx(b,{severity:"error",children:L}):0===F.length?r.jsx(u,{children:"No pickup offers found."}):F.map(e=>r.jsx(fe,{className:"mb-2",children:r.jsxs(xe,{children:[r.jsxs(u,{children:[e.airport," (Base Rate: $",e.baseRate,")"]}),r.jsxs(u,{variant:"body2",color:"textSecondary",children:["Status: ",e.isAvailable?"Available":"Matched"]}),r.jsxs(c,{className:"flex gap-2 mt-2",children:[r.jsx(m,{size:"small",variant:"outlined",onClick:()=>Te("pickupOffer",e),disabled:ne,children:"Edit"}),r.jsx(m,{size:"small",variant:"outlined",color:"error",onClick:()=>We("pickupOffer",e),disabled:ie,children:"Delete"})]})]})},e.id))]}),r.jsx(me,{open:j,onClose:()=>{S(!1),Me()},maxWidth:"sm",fullWidth:!0,children:r.jsx(es,{})}),r.jsx(v,{open:k.open,autoHideDuration:6e3,onClose:Ie,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(b,{onClose:Ie,severity:k.severity,variant:"filled",className:"w-full",children:k.message})}),r.jsxs(c,{className:"my-20",children:[r.jsx(u,{variant:"h4",component:"h2",className:"mb-4 font-bold text-gray-800 dark:text-white",children:t("paymentHistory")}),r.jsx(Ji,{})]}),r.jsxs(me,{open:se,onClose:Ee,maxWidth:"md",fullWidth:!0,children:[r.jsxs(pe,{children:["Edit ","request"===ce?"Request":"offer"===ce?"Offer":"pickupRequest"===ce?"Pickup Request":"Pickup Offer"]}),r.jsxs(he,{children:["request"===ce&&r.jsx(Ni,{onSubmit:Fe,onCancel:Ee,loading:q,initialData:ue}),"offer"===ce&&r.jsx(Mi,{onSubmit:Fe,onCancel:Ee,loading:U,initialData:ue}),"pickupRequest"===ce&&ue&&r.jsxs(c,{component:"form",onSubmit:e=>{e.preventDefault(),Fe({airport:e.target.airport.value,arrivalDate:e.target.arrivalDate.value,offeredAmount:Number(e.target.offeredAmount.value),additionalNotes:e.target.additionalNotes.value})},children:[r.jsx(ae,{name:"airport",label:"Airport",defaultValue:ue.airport,fullWidth:!0,margin:"normal",required:!0}),r.jsx(ae,{name:"arrivalDate",label:"Arrival Date",type:"datetime-local",defaultValue:ue.arrivalDate?.slice(0,16),fullWidth:!0,margin:"normal",required:!0,InputLabelProps:{shrink:!0}}),r.jsx(ae,{name:"offeredAmount",label:"Offered Amount",type:"number",defaultValue:ue.offeredAmount,fullWidth:!0,margin:"normal",required:!0}),r.jsx(ae,{name:"additionalNotes",label:"Additional Notes",defaultValue:ue.additionalNotes,fullWidth:!0,margin:"normal"}),r.jsxs(c,{className:"flex gap-2 mt-4",children:[r.jsx(m,{type:"submit",variant:"contained",color:"primary",disabled:Z,children:"Save"}),r.jsx(m,{onClick:Ee,variant:"outlined",children:"Cancel"})]})]}),"pickupOffer"===ce&&ue&&r.jsxs(c,{component:"form",onSubmit:e=>{e.preventDefault(),Fe({airport:e.target.airport.value,baseRate:Number(e.target.baseRate.value),averageRating:Number(e.target.averageRating.value),additionalInfo:e.target.additionalInfo.value})},children:[r.jsx(ae,{name:"airport",label:"Airport",defaultValue:ue.airport,fullWidth:!0,margin:"normal",required:!0}),r.jsx(ae,{name:"baseRate",label:"Base Rate",type:"number",defaultValue:ue.baseRate,fullWidth:!0,margin:"normal",required:!0}),r.jsx(ae,{name:"averageRating",label:"Average Rating",type:"number",defaultValue:ue.averageRating,fullWidth:!0,margin:"normal",required:!0}),r.jsx(ae,{name:"additionalInfo",label:"Additional Info",defaultValue:ue.additionalInfo,fullWidth:!0,margin:"normal"}),r.jsxs(c,{className:"flex gap-2 mt-4",children:[r.jsx(m,{type:"submit",variant:"contained",color:"primary",disabled:ne,children:"Save"}),r.jsx(m,{onClick:Ee,variant:"outlined",children:"Cancel"})]})]})]})]}),r.jsxs(me,{open:be,onClose:Ge,children:[r.jsx(pe,{children:"Confirm Delete"}),r.jsxs(he,{children:[r.jsxs(u,{children:["Are you sure you want to delete this ",ve,"?"]}),r.jsxs(c,{className:"flex gap-2 mt-4",children:[r.jsx(m,{onClick:async()=>{try{"request"===ve?(await B(Ce.id).unwrap(),Pe("Request deleted!","success")):"offer"===ve?(await K(Ce.id).unwrap(),Pe("Offer deleted!","success")):"pickupRequest"===ve?(await J(Ce.id).unwrap(),Pe("Pickup request deleted!","success")):"pickupOffer"===ve&&(await oe(Ce.id).unwrap(),Pe("Pickup offer deleted!","success")),ye(!1),we(null),je(null),De()}catch(e){Pe("Failed to delete.","error")}},color:"error",variant:"contained",disabled:V||_||Z||ne,children:"Delete"}),r.jsx(m,{onClick:Ge,variant:"outlined",children:"Cancel"})]})]})]})]});var Ue},ns=()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-20",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:r.jsxs("div",{className:"sticky top-6 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-300",children:"Table of Contents"}),r.jsx("ul",{className:"space-y-2 pl-0 list-none",children:[{id:"overview",title:"Community Overview"},{id:"conduct",title:"Code of Conduct"},{id:"safety",title:"Safety Guidelines"},{id:"services",title:"Service Standards"},{id:"reporting",title:"Reporting and Enforcement"},{id:"consequences",title:"Consequences of Violations"}].map((e,t)=>r.jsx("li",{className:"cursor-pointer list-none",children:r.jsxs("div",{onClick:()=>(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(e.id),className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 transition-colors text-left block w-full",children:[t+1,". ",e.title]})},e.id))})]})}),r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-300 mb-4",children:"Community Guidelines"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Last updated: ",e]})]}),r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsxs("section",{className:"mb-8",id:"overview",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"1. Community Overview"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Welcome to the WingCompanion community! Our platform connects travelers worldwide, fostering safe, reliable, and enjoyable travel experiences through companion matching, pickup services, and emergency assistance."}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"These Community Guidelines establish the standards of behavior expected from all platform users. By joining our community, you agree to uphold these values and contribute to a positive, safe environment for all travelers."}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Our community thrives on mutual respect, trust, and safety. Together, we create memorable travel experiences while ensuring everyone feels secure and valued."})]}),r.jsxs("section",{className:"mb-8",id:"conduct",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"2. Code of Conduct"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.1 Respectful Communication"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Treat all community members with dignity and respect. Our platform welcomes users from diverse backgrounds, cultures, and experiences. We expect all interactions to be courteous, professional, and considerate."}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Use polite and professional language in all communications"}),r.jsx("li",{children:"Respond promptly to messages and booking requests"}),r.jsx("li",{children:"Be patient and understanding with fellow travelers"}),r.jsx("li",{children:"Respect cultural differences and personal boundaries"}),r.jsx("li",{children:"Maintain constructive dialogue even during disagreements"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.2 Zero Tolerance for Discrimination"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Discrimination of any kind is strictly prohibited on our platform. We do not tolerate harassment, hate speech, or discriminatory behavior based on:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Race, ethnicity, or national origin"}),r.jsx("li",{children:"Religion or personal beliefs"}),r.jsx("li",{children:"Gender, gender identity, or sexual orientation"}),r.jsx("li",{children:"Age, disability, or health status"}),r.jsx("li",{children:"Economic status or profession"}),r.jsx("li",{children:"Political views or affiliations"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.3 Harassment Prevention"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Harassment in any form is unacceptable. This includes but is not limited to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Unwelcome sexual advances or inappropriate comments"}),r.jsx("li",{children:"Persistent unwanted contact or stalking behavior"}),r.jsx("li",{children:"Threats, intimidation, or aggressive behavior"}),r.jsx("li",{children:"Sharing personal information without consent"}),r.jsx("li",{children:"Creating fake profiles or impersonating others"})]})]}),r.jsxs("section",{className:"mb-8",id:"safety",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"3. Safety Guidelines"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.1 Identity Verification"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Complete identity verification is mandatory for all users. This process helps ensure platform safety and builds trust within our community."}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Upload a clear government-issued photo ID"}),r.jsx("li",{children:"Verify your phone number and email address"}),r.jsx("li",{children:"Use recent, genuine photos in your profile"}),r.jsx("li",{children:"Keep your profile information current and accurate"}),r.jsx("li",{children:"Complete additional verification steps when requested"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.2 Safe Meeting Practices"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Your safety is our top priority. Follow these guidelines when meeting fellow travelers:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Meet in public, well-lit areas with good foot traffic"}),r.jsx("li",{children:"Inform trusted friends or family about your travel plans"}),r.jsx("li",{children:"Trust your instincts – if something feels wrong, prioritize your safety"}),r.jsx("li",{children:"Use our in-app communication tools for initial contact"}),r.jsx("li",{children:"Verify companion identity before meeting in person"}),r.jsx("li",{children:"Keep your phone charged and emergency contacts readily available"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.3 Personal Information Protection"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Protect your personal information and respect others' privacy:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Don't share sensitive personal information until you feel comfortable"}),r.jsx("li",{children:"Use the platform's messaging system for initial communications"}),r.jsx("li",{children:"Be cautious about sharing home addresses or workplace information"}),r.jsx("li",{children:"Report users who request inappropriate personal information"}),r.jsx("li",{children:"Respect others' privacy preferences and boundaries"})]})]}),r.jsxs("section",{className:"mb-8",id:"services",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"4. Service Standards"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.1 Reliability and Commitment"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Honor your commitments and maintain reliability to ensure positive experiences for all users:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Arrive on time for all scheduled meetings and pickups"}),r.jsx("li",{children:"Provide advance notice if plans change or cancellation is necessary"}),r.jsx("li",{children:"Be prepared and bring agreed-upon items or documents"}),r.jsx("li",{children:"Follow through on agreed arrangements and pricing"}),r.jsx("li",{children:"Communicate proactively about any delays or issues"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.2 Payment and Financial Conduct"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Maintain transparency and honesty in all financial transactions:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Use only the platform's secure payment system"}),r.jsx("li",{children:"Be clear about pricing and any additional costs"}),r.jsx("li",{children:"Don't request or offer payments outside the platform"}),r.jsx("li",{children:"Report any attempts at payment fraud or manipulation"}),r.jsx("li",{children:"Respect the escrow system and dispute resolution process"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.3 Service Quality Standards"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Provide high-quality services that meet or exceed expectations:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Maintain clean, safe, and reliable transportation when offering pickup services"}),r.jsx("li",{children:"Be helpful, courteous, and professional at all times"}),r.jsx("li",{children:"Provide accurate descriptions of services offered"}),r.jsx("li",{children:"Address any issues or concerns promptly and professionally"}),r.jsx("li",{children:"Continuously strive to improve the user experience"})]})]}),r.jsxs("section",{className:"mb-8",id:"reporting",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"5. Reporting and Enforcement"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"5.1 Reporting Violations"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Help us maintain a safe community by reporting violations of these guidelines:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Use the in-app reporting feature to flag inappropriate behavior"}),r.jsx("li",{children:"Provide detailed information about the incident"}),r.jsx("li",{children:"Include screenshots or evidence when possible"}),r.jsx("li",{children:"Report immediately for safety-related concerns"}),r.jsx("li",{children:"Contact emergency services for immediate threats or danger"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"5.2 Investigation Process"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We take all reports seriously and investigate them thoroughly:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"All reports are reviewed within 24 hours"}),r.jsx("li",{children:"Both parties may be contacted for additional information"}),r.jsx("li",{children:"Evidence is carefully evaluated by our safety team"}),r.jsx("li",{children:"Decisions are made based on platform policies and user safety"}),r.jsx("li",{children:"Updates are provided to reporting users when appropriate"})]})]}),r.jsxs("section",{className:"mb-8",id:"consequences",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"6. Consequences of Violations"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.1 Warning System"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Minor violations may result in warnings and educational resources:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"First-time minor offenses receive educational warnings"}),r.jsx("li",{children:"Guidance provided on appropriate platform behavior"}),r.jsx("li",{children:"Opportunity for users to correct behavior"}),r.jsx("li",{children:"Tracking of warning history for pattern identification"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.2 Account Restrictions"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Serious or repeated violations may result in account limitations:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Temporary suspension of messaging or booking features"}),r.jsx("li",{children:"Reduced profile visibility in search results"}),r.jsx("li",{children:"Mandatory completion of safety education modules"}),r.jsx("li",{children:"Extended verification requirements"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.3 Account Termination"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Severe violations result in immediate and permanent account termination:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Harassment, discrimination, or threatening behavior"}),r.jsx("li",{children:"Fraud, scams, or payment manipulation"}),r.jsx("li",{children:"Creating fake profiles or identity misrepresentation"}),r.jsx("li",{children:"Repeated violations after multiple warnings"}),r.jsx("li",{children:"Any illegal activity or safety violations"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.4 Appeals Process"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Users may appeal enforcement decisions through our formal appeals process. Appeals are reviewed by a separate team and decided based on additional evidence and circumstances. Users have 30 days from the enforcement action to submit an appeal."})]})]})]})]})})},os=()=>{const{t:e,i18n:t}=Rt(),n=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-20 ",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 ",children:[r.jsx("div",{className:"lg:col-span-1 hidden lg:block ",children:r.jsxs("div",{className:"sticky top-6 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-300",children:"Table of Contents"}),r.jsx("ul",{className:"space-y-2 pl-0 list-none",children:[{id:"acceptance",title:"Acceptance of Terms"},{id:"description",title:"Service Description"},{id:"eligibility",title:"User Eligibility"},{id:"accounts",title:"User Accounts and Registration"},{id:"conduct",title:"User Conduct and Responsibilities"},{id:"payments",title:"Payment Terms and Conditions"},{id:"liability",title:"Limitation of Liability"},{id:"privacy",title:"Privacy and Data Protection"},{id:"termination",title:"Termination of Service"},{id:"changes",title:"Modifications to Terms"},{id:"governing",title:"Governing Law"},{id:"contact",title:"Contact Information"}].map((e,t)=>r.jsx("li",{className:"cursor-pointer list-none ",children:r.jsxs("div",{onClick:()=>(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(e.id),className:"text-gray-700 hover:text-blue-600 transition-colors text-left block w-full dark:text-gray-300",children:[t+1,". ",e.title]})},e.id))})]})}),r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"mb-8 ",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4 dark:text-gray-300",children:"Terms of Service"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Last updated: ",n]})]}),r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsxs("section",{className:"mb-8",id:"acceptance",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"1. Acceptance of Terms"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:'By accessing and using WingCompanion ("Service", "Platform", "we", "us", or "our"), you accept and agree to be bound by the terms and provision of this agreement.'}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"If you do not agree to abide by the above, please do not use this service. These Terms of Service, together with our Privacy Policy, constitute the entire agreement between you and our Platform."})]}),r.jsxs("section",{className:"mb-8",id:"description",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"2. Service Description"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"WingCompanion provides a comprehensive travel companion service that includes:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Flight companion matching for solo travelers"}),r.jsx("li",{children:"Airport pickup and drop-off services"}),r.jsx("li",{children:"Emergency assistance and safety features"}),r.jsx("li",{children:"Secure payment processing and escrow services"}),r.jsx("li",{children:"User verification and safety screening"}),r.jsx("li",{children:"Real-time communication and location sharing"})]}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"The Platform serves as an intermediary connecting travelers with compatible companions and service providers, facilitating safe and reliable travel experiences."})]}),r.jsxs("section",{className:"mb-8",id:"eligibility",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"3. User Eligibility"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"3.1 Age Requirements"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"You must be at least 18 years old to use our Service. Users under 18 may use the Service only with the involvement and consent of a parent or guardian."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"3.2 Identity Verification"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"All users must complete our identity verification process, which includes:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Government-issued photo identification"}),r.jsx("li",{children:"Phone number verification"}),r.jsx("li",{children:"Email address confirmation"}),r.jsx("li",{children:"Background check (where legally permitted)"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"3.3 Legal Compliance"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"You must comply with all applicable local, state, national, and international laws and regulations while using our Service."})]}),r.jsxs("section",{className:"mb-8",id:"accounts",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"4. User Accounts and Registration"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"4.1 Account Creation"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"To access our Service, you must create an account by providing accurate and complete information. You are responsible for safeguarding your account credentials and for all activities that occur under your account."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"4.2 Account Responsibilities"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Maintain accurate and up-to-date profile information"}),r.jsx("li",{children:"Use a secure password and enable two-factor authentication when available"}),r.jsx("li",{children:"Immediately notify us of any unauthorized use of your account"}),r.jsx("li",{children:"Accept responsibility for all activities under your account"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"4.3 Account Suspension"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We reserve the right to suspend or terminate accounts that violate these Terms of Service, engage in fraudulent activity, or pose a safety risk to other users."})]}),r.jsxs("section",{className:"mb-8",id:"conduct",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"5. User Conduct and Responsibilities"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"5.1 Prohibited Activities"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300 ",children:"You agree not to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Use the Service for any illegal or unauthorized purpose"}),r.jsx("li",{children:"Harass, threaten, or discriminate against other users"}),r.jsx("li",{children:"Share false, misleading, or fraudulent information"}),r.jsx("li",{children:"Engage in any activity that compromises platform security"}),r.jsx("li",{children:"Use the platform for commercial purposes without authorization"}),r.jsx("li",{children:"Attempt to circumvent our safety measures or verification processes"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"5.2 Safety Guidelines"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Always meet in public places when possible"}),r.jsx("li",{children:"Inform friends or family about your travel plans"}),r.jsx("li",{children:"Trust your instincts and report suspicious behavior"}),r.jsx("li",{children:"Use the platform's communication tools for initial contact"}),r.jsx("li",{children:"Verify companion identity before meeting"})]})]}),r.jsxs("section",{className:"mb-8",id:"payments",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"6. Payment Terms and Conditions"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"6.1 Payment Processing"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"All payments are processed securely through our third-party payment processor (Stripe). We use an escrow system to ensure safe transactions between users."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"6.2 Service Fees"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Platform service fee: 5% of transaction value"}),r.jsx("li",{children:"Payment processing fee: As determined by payment processor"}),r.jsx("li",{children:"Emergency service fee: Fixed rate per incident"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"6.3 Refund Policy"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Refunds are processed according to our refund policy and may vary based on the timing of cancellation and circumstances. Emergency cancellations may be eligible for full refunds."})]}),r.jsxs("section",{className:"mb-8",id:"liability",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"7. Limitation of Liability"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"While we strive to provide a safe and reliable platform, we cannot guarantee the conduct of users or the quality of services provided. Our liability is limited to the maximum extent permitted by law."}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"We are not liable for the actions or omissions of platform users"}),r.jsx("li",{children:"We do not guarantee the safety or quality of transportation services"}),r.jsx("li",{children:"Our maximum liability shall not exceed the fees paid by you in the 12 months preceding the claim"}),r.jsx("li",{children:"We are not responsible for indirect, incidental, or consequential damages"})]})]}),r.jsxs("section",{className:"mb-8",id:"privacy",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"8. Privacy and Data Protection"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"Your privacy is important to us. Our collection, use, and protection of your personal information is governed by our Privacy Policy, which is incorporated into these Terms by reference."}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"By using our Service, you consent to the collection and use of your information as outlined in our Privacy Policy."})]}),r.jsxs("section",{className:"mb-8",id:"termination",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"9. Termination of Service"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"9.1 Termination by User"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"You may terminate your account at any time by contacting our customer support team. Upon termination, your access to the Service will be immediately suspended."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-3 dark:text-gray-300",children:"9.2 Termination by Platform"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We may terminate or suspend your account immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms."})]}),r.jsxs("section",{className:"mb-8",id:"changes",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"10. Modifications to Terms"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"We reserve the right to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days' notice prior to any new terms taking effect."}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Your continued use of the Service after any changes constitutes acceptance of the new Terms."})]}),r.jsxs("section",{className:"mb-8",id:"governing",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"11. Governing Law"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"These Terms shall be interpreted and governed by the laws of New Zealand, without regard to its conflict of law provisions. Any disputes arising from these Terms shall be resolved in the courts of New Zealand."})]}),r.jsxs("section",{className:"mb-8",id:"contact",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 dark:text-gray-300",children:"12. Contact Information"}),r.jsx("p",{className:"text-gray-700 mb-4 dark:text-gray-300",children:"If you have any questions about these Terms of Service, please contact us:"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Email: legal@wingcompanion.com"}),r.jsx("li",{children:"Phone: +64 9 123 4567"}),r.jsx("li",{children:"Address: 123 Queen Street, Auckland, New Zealand"}),r.jsx("li",{children:"Support Portal: Available 24/7 through our mobile app"})]})]})]})]})]})})},as=()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-20",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:r.jsxs("div",{className:"sticky top-6 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-300",children:"Table of Contents"}),r.jsx("ul",{className:"space-y-2 pl-0 list-none",children:[{id:"introduction",title:"Introduction"},{id:"information-we-collect",title:"Information We Collect"},{id:"how-we-use",title:"How We Use Your Information"},{id:"information-sharing",title:"Information Sharing and Disclosure"},{id:"data-security",title:"Data Security"},{id:"privacy-rights",title:"Your Privacy Rights"},{id:"data-retention",title:"Data Retention"},{id:"international-transfers",title:"International Data Transfers"},{id:"children-privacy",title:"Children's Privacy"},{id:"third-party-services",title:"Third-Party Services"},{id:"policy-changes",title:"Changes to This Privacy Policy"},{id:"contact-us",title:"Contact Us"},{id:"regional-rights",title:"Regional Privacy Rights"}].map((e,t)=>r.jsx("li",{className:"cursor-pointer list-none",children:r.jsxs("div",{onClick:()=>(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(e.id),className:" text-gray-700 dark:text-gray-300 hover:text-blue-600 transition-colors text-left block w-full",children:[t+1,". ",e.title]})},e.id))})]})}),r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-300 mb-4",children:"Privacy Policy"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Last updated: ",e]})]}),r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsxs("section",{className:"mb-8",id:"introduction",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"1. Introduction"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:'Welcome to WingCompanion ("Service", "Platform", "we", "us", or "our"). This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application and web platform that connects travelers for flight companionship, pickup services, and emergency assistance.'}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"By using our Service, you agree to the collection and use of information in accordance with this policy. We are committed to protecting your privacy and ensuring the security of your personal information."})]}),r.jsxs("section",{className:"mb-8",id:"information-we-collect",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"2. Information We Collect"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.1 Personal Information"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"When you create an account, we collect:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Full name and contact information (email, phone number)"}),r.jsx("li",{children:"Profile photo and verification documents"}),r.jsx("li",{children:"Date of birth and gender"}),r.jsx("li",{children:"Government-issued ID for verification purposes"}),r.jsx("li",{children:"Emergency contact information"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.2 Travel and Location Information"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Flight details (dates, times, airports, flight numbers)"}),r.jsx("li",{children:"Current location and destination preferences"}),r.jsx("li",{children:"Real-time location data (when emergency features are activated)"}),r.jsx("li",{children:"Travel preferences and companion requirements"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.3 Payment Information"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Credit card and payment method details (processed securely through Stripe)"}),r.jsx("li",{children:"Billing address and payment history"}),r.jsx("li",{children:"Transaction records and receipts"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.4 Communication Data"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Messages exchanged through our platform"}),r.jsx("li",{children:"Ratings and reviews provided"}),r.jsx("li",{children:"Customer support communications"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.5 Technical Information"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Device information (device type, operating system, browser type)"}),r.jsx("li",{children:"IP address and geolocation data"}),r.jsx("li",{children:"Usage analytics and app interaction data"}),r.jsx("li",{children:"Log files and error reports"})]})]}),r.jsxs("section",{className:"mb-8",id:"how-we-use",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"3. How We Use Your Information"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.1 Core Service Functions"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Match you with compatible flight companions and pickup services"}),r.jsx("li",{children:"Facilitate secure communication between users"}),r.jsx("li",{children:"Process payments and manage escrow services"}),r.jsx("li",{children:"Verify user identity and ensure platform safety"}),r.jsx("li",{children:"Provide emergency assistance and location sharing"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.2 Safety and Security"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Conduct background checks and identity verification"}),r.jsx("li",{children:"Monitor for fraudulent or suspicious activity"}),r.jsx("li",{children:"Investigate disputes and safety incidents"}),r.jsx("li",{children:"Maintain platform integrity and user safety"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.3 Service Improvement"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Analyze usage patterns to improve our matching algorithms"}),r.jsx("li",{children:"Develop new features and enhance user experience"}),r.jsx("li",{children:"Conduct research and analytics for service optimization"}),r.jsx("li",{children:"Provide personalized recommendations"})]})]}),r.jsxs("section",{className:"mb-8",id:"information-sharing",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"4. Information Sharing and Disclosure"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.1 With Other Users"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We share limited profile information with matched users to facilitate connections. This includes your name, profile photo, verified status, and relevant travel details."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.2 Service Providers"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We may share information with trusted third parties who assist us in:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Payment processing (Stripe)"}),r.jsx("li",{children:"Identity verification services"}),r.jsx("li",{children:"Cloud hosting and data storage (Microsoft Azure)"}),r.jsx("li",{children:"Email and notification services"}),r.jsx("li",{children:"Analytics and performance monitoring"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.3 Legal Requirements"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We may disclose information when required by law or to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Comply with legal processes and law enforcement requests"}),r.jsx("li",{children:"Protect the rights, property, or safety of our users"}),r.jsx("li",{children:"Investigate potential violations of our terms of service"}),r.jsx("li",{children:"Respond to emergency situations"})]})]}),r.jsxs("section",{className:"mb-8",id:"data-security",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"5. Data Security"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We implement industry-standard security measures to protect your information:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"End-to-end encryption for sensitive communications"}),r.jsx("li",{children:"Secure data transmission using TLS/SSL protocols"}),r.jsx("li",{children:"Regular security audits and vulnerability assessments"}),r.jsx("li",{children:"Secure cloud infrastructure with Microsoft Azure"}),r.jsx("li",{children:"Multi-factor authentication options"}),r.jsx("li",{children:"Data minimization and retention policies"})]}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"While we strive to protect your personal information, no method of transmission over the internet or electronic storage is 100% secure. We cannot guarantee absolute security."})]}),r.jsxs("section",{className:"mb-8",id:"privacy-rights",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"6. Your Privacy Rights"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.1 Access and Control"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"You have the right to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Access and review your personal information"}),r.jsx("li",{children:"Update or correct inaccurate information"}),r.jsx("li",{children:"Delete your account and associated data"}),r.jsx("li",{children:"Export your data in a portable format"}),r.jsx("li",{children:"Control privacy settings and data sharing preferences"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.2 Location Services"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"You can control location sharing through your device settings. Note that disabling location services may limit certain features, including emergency assistance and matching accuracy."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.3 Marketing Communications"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"You can opt out of promotional emails and push notifications at any time through your account settings or by following the unsubscribe links in our communications."})]}),r.jsxs("section",{className:"mb-8",id:"data-retention",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"7. Data Retention"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We retain your information for as long as necessary to provide our services and comply with legal obligations:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Account information: Until account deletion plus 30 days"}),r.jsx("li",{children:"Transaction records: 7 years for financial compliance"}),r.jsx("li",{children:"Safety incidents: 5 years or as required by law"}),r.jsx("li",{children:"Marketing data: Until opt-out or account deletion"}),r.jsx("li",{children:"Technical logs: 90 days for security and debugging"})]})]}),r.jsxs("section",{className:"mb-8",id:"international-transfers",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"8. International Data Transfers"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your information in accordance with this Privacy Policy and applicable laws."})]}),r.jsxs("section",{className:"mb-8",id:"children-privacy",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"9. Children's Privacy"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Our Service is not intended for users under the age of 18. We do not knowingly collect personal information from children under 18. If we become aware that we have collected personal information from a child under 18, we will take steps to delete such information."})]}),r.jsxs("section",{className:"mb-8",id:"third-party-services",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"10. Third-Party Services"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Our Service may contain links to third-party websites or integrate with third-party services. We are not responsible for the privacy practices of these third parties. We encourage you to review their privacy policies before providing any information."})]}),r.jsxs("section",{className:"mb-8",id:"policy-changes",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"11. Changes to This Privacy Policy"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new Privacy Policy on this page and updating the "Last updated" date. We encourage you to review this Privacy Policy periodically for any changes.'})]}),r.jsxs("section",{className:"mb-8",id:"contact-us",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"12. Contact Us"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"If you have any questions about this Privacy Policy or our privacy practices, please contact us:"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-900 mb-2",children:[r.jsx("strong",{children:"Email:"})," privacy@flightcompanion.com"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-900 mb-2",children:[r.jsx("strong",{children:"Address:"})," [Your Company Address]"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-900",children:[r.jsx("strong",{children:"Phone:"})," [Your Contact Number]"]})]})]}),r.jsxs("section",{className:"mb-8",id:"regional-rights",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"13. Regional Privacy Rights"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"13.1 GDPR (European Union)"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"If you are located in the EU, you have additional rights under the General Data Protection Regulation (GDPR), including the right to object to processing, data portability, and the right to file a complaint with your local data protection authority."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"13.2 CCPA (California)"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"California residents have specific rights under the California Consumer Privacy Act (CCPA), including the right to know what personal information is collected, the right to delete personal information, and the right to opt-out of the sale of personal information."})]}),r.jsx("div",{className:"border-t pt-8 mt-8",children:r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:["This Privacy Policy is part of our Terms of Service and should be read in conjunction with our"," ",r.jsx(Ft,{to:"/community-guidelines",className:"text-blue-600 hover:text-blue-800 underline",children:"Community Guidelines"})," ","and"," ",r.jsx(Ft,{to:"/terms-of-service",className:"text-blue-600 hover:text-blue-800 underline",children:"Terms of Service"}),"."]})})]})]})]})})},is=()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-20",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:r.jsxs("div",{className:"sticky top-6 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-300",children:"Table of Contents"}),r.jsx("ul",{className:"space-y-2 pl-0 list-none",children:[{id:"introduction",title:"Introduction"},{id:"what-are-cookies",title:"What Are Cookies"},{id:"types-of-cookies",title:"Types of Cookies We Use"},{id:"how-we-use-cookies",title:"How We Use Cookies"},{id:"third-party-cookies",title:"Third-Party Cookies"},{id:"cookie-categories",title:"Cookie Categories"},{id:"managing-cookies",title:"Managing Your Cookie Preferences"},{id:"browser-settings",title:"Browser Settings"},{id:"mobile-settings",title:"Mobile App Settings"},{id:"cookie-retention",title:"Cookie Retention"},{id:"updates",title:"Updates to This Policy"},{id:"contact",title:"Contact Us"}].map((e,t)=>r.jsx("li",{className:"cursor-pointer list-none",children:r.jsxs("div",{onClick:()=>(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(e.id),className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 transition-colors text-left block w-full",children:[t+1,". ",e.title]})},e.id))})]})}),r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-300 mb-4",children:"Cookie Policy"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Last updated: ",e]})]}),r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsxs("section",{className:"mb-8",id:"introduction",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"1. Introduction"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:'This Cookie Policy explains how WingCompanion ("we", "us", "our") uses cookies and similar tracking technologies when you visit our website or use our mobile application.'}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["This policy should be read in conjunction with our"," ",r.jsx(Ft,{to:"/privacy-policy",className:"text-blue-600 hover:text-blue-800 underline",children:"Privacy Policy"})," ","and"," ",r.jsx(Ft,{to:"/terms-of-service",className:"text-blue-600 hover:text-blue-800 underline",children:"Terms of Service"}),"."]}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"By continuing to use our platform, you consent to our use of cookies as described in this policy."})]}),r.jsxs("section",{className:"mb-8",id:"what-are-cookies",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"2. What Are Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Cookies are small text files that are stored on your device (computer, tablet, or mobile) when you visit a website or use an application. They contain information that can be read by the website or app on subsequent visits."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"2.1 Similar Technologies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We also use similar technologies including:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Local Storage:"})," Stores data locally within your browser"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Session Storage:"})," Temporarily stores data for your current session"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Web Beacons:"})," Small images that help us analyze user behavior"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"SDKs:"})," Software development kits in our mobile app that collect analytics"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Pixels:"})," Tracking pixels from third-party services"]})]})]}),r.jsxs("section",{className:"mb-8",id:"types-of-cookies",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"3. Types of Cookies We Use"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.1 First-Party Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"These are cookies set directly by our platform. They are essential for providing our services and enhancing your user experience."}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.2 Third-Party Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"These are cookies set by external services we use to enhance functionality:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Google Analytics:"})," For website and app analytics"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Stripe:"})," For secure payment processing"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Microsoft Azure:"})," For cloud services and performance monitoring"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Social Media Platforms:"})," For social sharing and login functionality"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Customer Support:"})," For chat and support features"]})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"3.3 Session vs Persistent Cookies"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Session Cookies:"})," Deleted when you close your browser or app"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Persistent Cookies:"})," Remain on your device for a specified period or until manually deleted"]})]})]}),r.jsxs("section",{className:"mb-8",id:"how-we-use-cookies",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"4. How We Use Cookies"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.1 Authentication and Security"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Keep you logged in during your session"}),r.jsx("li",{children:"Remember your authentication status"}),r.jsx("li",{children:"Detect and prevent fraudulent activity"}),r.jsx("li",{children:"Enhance platform security measures"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.2 Functionality and Preferences"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Remember your language and region preferences"}),r.jsx("li",{children:"Store your search filters and travel preferences"}),r.jsx("li",{children:"Maintain your privacy and notification settings"}),r.jsx("li",{children:"Remember your dark/light mode preference"}),r.jsx("li",{children:"Save items in your favorites or wishlist"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.3 Performance and Analytics"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Analyze how you use our platform"}),r.jsx("li",{children:"Monitor platform performance and load times"}),r.jsx("li",{children:"Identify and fix technical issues"}),r.jsx("li",{children:"Understand user behavior patterns"}),r.jsx("li",{children:"Improve our matching algorithms"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"4.4 Personalization"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Provide personalized flight companion recommendations"}),r.jsx("li",{children:"Show relevant pickup services in your area"}),r.jsx("li",{children:"Customize content based on your travel history"}),r.jsx("li",{children:"Display targeted safety tips and travel advice"})]})]}),r.jsxs("section",{className:"mb-8",id:"third-party-cookies",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"5. Third-Party Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We work with trusted third-party service providers who may set cookies on our behalf. These partners have their own cookie policies:"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"5.1 Analytics and Performance"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Google Analytics:"})," Provides detailed usage analytics and user behavior insights",r.jsx("br",{}),r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Privacy Policy: ",r.jsx("a",{href:"https://policies.google.com/privacy",className:"text-blue-600 hover:text-blue-800",children:"https://policies.google.com/privacy"})]})]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Microsoft Application Insights:"})," Monitors app performance and crashes",r.jsx("br",{}),r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Privacy Policy: ",r.jsx("a",{href:"https://privacy.microsoft.com",className:"text-blue-600 hover:text-blue-800",children:"https://privacy.microsoft.com"})]})]})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"5.2 Payment Processing"}),r.jsx("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:r.jsxs("li",{children:[r.jsx("strong",{children:"Stripe:"})," Secure payment processing and fraud detection",r.jsx("br",{}),r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Privacy Policy: ",r.jsx("a",{href:"https://stripe.com/privacy",className:"text-blue-600 hover:text-blue-800",children:"https://stripe.com/privacy"})]})]})}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"5.3 Communication and Support"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Customer support chat widgets"}),r.jsx("li",{children:"Email marketing and communication tools"}),r.jsx("li",{children:"Push notification services"})]})]}),r.jsxs("section",{className:"mb-8",id:"cookie-categories",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"6. Cookie Categories"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.1 Strictly Necessary Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"These cookies are essential for the platform to function properly. They cannot be disabled."}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Authentication and login management"}),r.jsx("li",{children:"Security and fraud prevention"}),r.jsx("li",{children:"Session management"}),r.jsx("li",{children:"Load balancing and platform stability"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.2 Functional Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"These cookies enable enhanced functionality and personalization."}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"User preferences and settings"}),r.jsx("li",{children:"Language and region selection"}),r.jsx("li",{children:"Search filters and travel preferences"}),r.jsx("li",{children:"Accessibility features"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.3 Analytics Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"These cookies help us understand how users interact with our platform."}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Usage statistics and behavior analysis"}),r.jsx("li",{children:"Performance monitoring"}),r.jsx("li",{children:"Feature usage tracking"}),r.jsx("li",{children:"Error and crash reporting"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"6.4 Marketing Cookies"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"These cookies are used to deliver relevant advertisements and marketing content."}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Personalized content recommendations"}),r.jsx("li",{children:"Email marketing optimization"}),r.jsx("li",{children:"Social media integration"}),r.jsx("li",{children:"Retargeting and remarketing campaigns"})]})]}),r.jsxs("section",{className:"mb-8",id:"managing-cookies",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"7. Managing Your Cookie Preferences"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"7.1 Cookie Consent Manager"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"When you first visit our platform, you'll see a cookie consent banner allowing you to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Accept all cookies"}),r.jsx("li",{children:"Reject optional cookies"}),r.jsx("li",{children:"Customize your cookie preferences by category"}),r.jsx("li",{children:"Access detailed information about each cookie type"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"7.2 Changing Your Preferences"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"You can modify your cookie preferences at any time by:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Visiting your account settings page"}),r.jsx("li",{children:'Clicking the "Cookie Preferences" link in the footer'}),r.jsx("li",{children:"Using the cookie settings panel in our mobile app"}),r.jsx("li",{children:"Contacting our support team for assistance"})]})]}),r.jsxs("section",{className:"mb-8",id:"browser-settings",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"8. Browser Settings"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Most web browsers allow you to control cookies through their settings. You can:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Block cookies entirely"}),r.jsx("li",{children:"Block third-party cookies only"}),r.jsx("li",{children:"Delete existing cookies"}),r.jsx("li",{children:"Set notifications when cookies are being set"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"8.1 Browser-Specific Instructions"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Chrome:"})," Settings → Privacy and Security → Cookies and other site data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Firefox:"})," Settings → Privacy & Security → Cookies and Site Data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Safari:"})," Preferences → Privacy → Cookies and website data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Edge:"})," Settings → Site permissions → Cookies and site data"]})]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"Note:"})," Disabling cookies may affect the functionality of our platform and your user experience."]})]}),r.jsxs("section",{className:"mb-8",id:"mobile-settings",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"9. Mobile App Settings"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Our mobile app uses similar technologies to cookies. You can manage these settings through:"}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"9.1 In-App Settings"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Open the app and go to Settings → Privacy"}),r.jsx("li",{children:"Toggle analytics and marketing preferences"}),r.jsx("li",{children:"Manage location data sharing"}),r.jsx("li",{children:"Control push notification settings"})]}),r.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-gray-300 mb-3",children:"9.2 Device Settings"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"iOS:"})," Settings → Privacy & Security → Analytics & Improvements"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Android:"})," Settings → Privacy → Ads → Reset advertising ID"]})]})]}),r.jsxs("section",{className:"mb-8",id:"cookie-retention",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"10. Cookie Retention"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We retain cookies for different periods depending on their purpose:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Session cookies:"})," Deleted when you close your browser/app"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Authentication cookies:"})," 30 days or until logout"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Preference cookies:"})," 1 year"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Analytics cookies:"})," 2 years"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Marketing cookies:"})," 13 months"]})]})]}),r.jsxs("section",{className:"mb-8",id:"updates",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"11. Updates to This Policy"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We may update this Cookie Policy from time to time to reflect changes in our practices or legal requirements. When we make significant changes, we will:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:'Update the "Last updated" date at the top of this policy'}),r.jsx("li",{children:"Notify you through our platform or via email"}),r.jsx("li",{children:"Request renewed consent where required by law"}),r.jsx("li",{children:"Provide a summary of key changes"})]})]}),r.jsxs("section",{className:"mb-8",id:"contact",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:"12. Contact Us"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"If you have any questions about this Cookie Policy or our cookie practices, please contact us:"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"Email: privacy@wingcompanion.com"}),r.jsx("li",{children:"Phone: +64 9 123 4567"}),r.jsx("li",{children:"Address: 123 Queen Street, Auckland, New Zealand"}),r.jsx("li",{children:"Data Protection Officer: dpo@wingcompanion.com"}),r.jsxs("li",{children:["Cookie Preferences: Accessible through your account settings or"," ",r.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800 underline",children:"Cookie Settings"})]})]})]})]})]})]})})};function ss(...t){const r=e.useRef(void 0),n=e.useCallback(e=>{const r=t.map(t=>{if(null==t)return null;if("function"==typeof t){const r=t,n=r(e);return"function"==typeof n?n:()=>{r(null)}}return t.current=e,()=>{t.current=null}});return()=>{r.forEach(e=>e?.())}},t);return e.useMemo(()=>t.every(e=>null==e)?null:e=>{r.current&&(r.current(),r.current=void 0),null!=e&&(r.current=n(e))},t)}const ls="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function cs(t){const r=e.useRef(t);return ls(()=>{r.current=t}),e.useRef((...e)=>(0,r.current)(...e)).current}const ds=parseInt(e.version,10),us=t=>{if(ds>=19){const e=e=>t(e,e.ref??null);return e.displayName=t.displayName??t.name,e}return e.forwardRef(t)},ms=We,ps=ms(r.jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),hs=ms(r.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),gs=ms(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),fs=ms(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),xs=ms(r.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),bs=ms(r.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),ys=ms(r.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");ms(r.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),ms(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");const vs=ms(r.jsx("path",{d:"M14.67 5v14H9.33V5zm1 14H21V5h-5.33zm-7.34 0V5H3v14z"}),"ColumnIcon"),ws=ms(r.jsx("rect",{width:"1",height:"24",x:"11.5",rx:"0.5"}),"Separator"),Cs=ms(r.jsx("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),js=ms(r.jsx("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),Ss=ms(r.jsx("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),ks=ms(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),Rs=ms(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Ns=ms(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),Ps=ms(r.jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),Is=ms(r.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),Ms=ms(r.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),Ds=ms(r.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),Ts=ms(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),Es=ms(r.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),Fs=ms(r.jsx("g",{children:r.jsx("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),As=ms(r.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Clear");ms(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");const Os=ms(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),Hs=ms(r.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),Ls=e.createContext(void 0);function $s(){const t=e.useContext(Ls);if(void 0===t)throw new Error(["MUI X: Could not find the Data Grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join("\n"));return t}const zs=e.createContext(void 0),qs=()=>{const t=e.useContext(zs);if(!t)throw new Error("MUI X: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return t},Bs=new TextEncoder;let Vs=2048,Ws=new ArrayBuffer(Vs),Gs=new Uint8Array(Ws),Us=new Int32Array(Ws);const Ks=function(e){const t=2*e.length;t>Vs&&(Vs=t+(4-t%4),Ws=new ArrayBuffer(Vs),Gs=new Uint8Array(Ws),Us=new Int32Array(Ws));const r=Bs.encodeInto(e,Gs).written,n=0|r;let o=0,a=374761393+(0+n|0)|0;if(n<16)for(;(o+3|0)<n;o=o+4|0)a=Math.imul(0|_s(a+Math.imul(0|Us[o],3266489917)|0,17),668265263);else{let e=606290984,t=-2048144777,r=0,i=1640531535;for(;(o+15|0)<n;o=o+16|0)e=Math.imul(0|_s(e+Math.imul(0|Us[o+0|0],2246822519)|0,13),2654435761),t=Math.imul(0|_s(t+Math.imul(0|Us[o+4|0],2246822519)|0,13),2654435761),r=Math.imul(0|_s(r+Math.imul(0|Us[o+8|0],2246822519)|0,13),2654435761),i=Math.imul(0|_s(i+Math.imul(0|Us[o+12|0],2246822519)|0,13),2654435761);for(a=(((_s(e,1)|0+_s(t,7)|0)+_s(r,12)|0)+_s(i,18)|0)+n|0;(o+3|0)<n;o=o+4|0)a=Math.imul(0|_s(a+Math.imul(0|Us[o],3266489917)|0,17),668265263)}for(;o<n;o=o+1|0)a=Math.imul(0|_s(a+Math.imul(0|Gs[o],374761393)|0,11),2654435761);return a=Math.imul(a^a>>>15,2246822519),a=Math.imul(a^a>>>13,3266489917),((a^a>>>16)>>>0).toString()};function _s(e,t){return e<<t|e>>>32-t}const Qs={values:{xs:0,sm:600,md:900,lg:1200,xl:1536},up:e=>{const t=Qs.values;return`@media (min-width:${"number"==typeof t[e]?t[e]:e}px)`}},Xs={spacingUnit:"--DataGrid-t-spacing-unit",colors:{border:{base:"--DataGrid-t-color-border-base"},foreground:{base:"--DataGrid-t-color-foreground-base",muted:"--DataGrid-t-color-foreground-muted",accent:"--DataGrid-t-color-foreground-accent",disabled:"--DataGrid-t-color-foreground-disabled",error:"--DataGrid-t-color-foreground-error"},background:{base:"--DataGrid-t-color-background-base",overlay:"--DataGrid-t-color-background-overlay",backdrop:"--DataGrid-t-color-background-backdrop"},interactive:{hover:"--DataGrid-t-color-interactive-hover",hoverOpacity:"--DataGrid-t-color-interactive-hover-opacity",focus:"--DataGrid-t-color-interactive-focus",focusOpacity:"--DataGrid-t-color-interactive-focus-opacity",disabled:"--DataGrid-t-color-interactive-disabled",disabledOpacity:"--DataGrid-t-color-interactive-disabled-opacity",selected:"--DataGrid-t-color-interactive-selected",selectedOpacity:"--DataGrid-t-color-interactive-selected-opacity"}},header:{background:{base:"--DataGrid-t-header-background-base"}},cell:{background:{pinned:"--DataGrid-t-cell-background-pinned"}},radius:{base:"--DataGrid-t-radius-base"},typography:{font:{body:"--DataGrid-t-typography-font-body",small:"--DataGrid-t-typography-font-small",large:"--DataGrid-t-typography-font-large"},fontFamily:{base:"--DataGrid-t-typography-font-family-base"},fontWeight:{light:"--DataGrid-t-typography-font-weight-light",regular:"--DataGrid-t-typography-font-weight-regular",medium:"--DataGrid-t-typography-font-weight-medium",bold:"--DataGrid-t-typography-font-weight-bold"}},transitions:{easing:{easeIn:"--DataGrid-t-transition-easing-ease-in",easeOut:"--DataGrid-t-transition-easing-ease-out",easeInOut:"--DataGrid-t-transition-easing-ease-in-out"},duration:{short:"--DataGrid-t-transition-duration-short",base:"--DataGrid-t-transition-duration-base",long:"--DataGrid-t-transition-duration-long"}},shadows:{base:"--DataGrid-t-shadow-base",overlay:"--DataGrid-t-shadow-overlay"},zIndex:{panel:"--DataGrid-t-z-index-panel",menu:"--DataGrid-t-z-index-menu"}},Ys=function e(t){if("string"==typeof t)return`var(${t})`;const r={};for(const n in t)Object.hasOwn(t,n)&&(r[n]=e(t[n]));return r}(Xs),Zs=Ge({breakpoints:Qs,spacing:function(e,t,r,n){if(void 0===e)return Js(1);if(void 0===t)return Js(e);if(void 0===r)return Js(e)+" "+Js(t);if(void 0===n)return Js(e)+" "+Js(t)+" "+Js(r);return Js(e)+" "+Js(t)+" "+Js(r)+" "+Js(n)},transition:function(e,t){const{duration:r=Zs.transitions.duration.base,easing:n=Zs.transitions.easing.easeInOut,delay:o=0}=t??{};return e.map(e=>`${e} ${r} ${n} ${o}ms`).join(", ")},keys:Xs},Ys);function Js(e){return 0===e?"0":`calc(var(--DataGrid-t-spacing-unit) * ${e})`}function el(e){return function(e,t){return`rgba(from ${e} r g b / ${t})`}(e,1)}function tl(e){if(e)return`${e.fontWeight} ${e.fontSize} / ${e.lineHeight} ${e.fontFamily}`}const rl=["id","label","labelId","material","disabled","slotProps","onChange","onKeyDown","onOpen","onClose","size","style","fullWidth"],nl=["onRowsPerPageChange","material","disabled"],ol=["material"],al=["autoFocus","label","fullWidth","slotProps","className","material"],il=["material"],sl=["material"],ll=["material"],cl=["material"],dl=["material"],ul=["material"],ml=["material"],pl=["material"],hl=["material","label","className"],gl=["material"],fl=["inert","iconStart","iconEnd","children","material"],xl=["slotProps","material"],bl=["id","multiple","freeSolo","options","getOptionLabel","isOptionEqualToValue","value","onChange","label","placeholder","slotProps","material"],yl=["key"],vl=["inputProps","InputProps","InputLabelProps"],wl=["slotProps","material"],Cl=["ref","open","children","className","clickAwayTouchEvent","clickAwayMouseEvent","flip","focusTrap","onExited","onClickAway","onDidShow","onDidHide","id","target","transition","placement","material"],jl=["native"],Sl=x(De)(({theme:e})=>({[`&.${ct.positionEnd} .${dt.sizeSmall}`]:{marginRight:e.spacing(-.75)}})),kl=x(ve,{shouldForwardProp:e=>"fullWidth"!==e})(({theme:e})=>({gap:e.spacing(.5),margin:0,overflow:"hidden",[`& .${nt.label}`]:{fontSize:e.typography.pxToRem(14),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},variants:[{props:{fullWidth:!0},style:{width:"100%"}}]})),Rl=x(we,{shouldForwardProp:e=>"density"!==e})(({theme:e})=>({variants:[{props:{density:"compact"},style:{padding:e.spacing(.5)}}]})),Nl=x($)({[`& .${it.primary}`]:{overflowX:"clip",textOverflow:"ellipsis",maxWidth:"300px"}}),Pl=us(function(e,t){const{id:n,label:o,labelId:a,material:i,disabled:s,slotProps:l,onChange:c,onKeyDown:d,onOpen:u,onClose:m,size:p,style:h,fullWidth:g}=e,f=Qe(e,rl),x={PaperProps:{onKeyDown:d}};return m&&(x.onClose=m),r.jsxs(ie,{size:p,fullWidth:g,style:h,disabled:s,ref:t,children:[r.jsx(se,{id:a,htmlFor:n,shrink:!0,variant:"outlined",children:o}),r.jsx(T,Ge({id:n,labelId:a,label:o,displayEmpty:!0,onChange:c},f,{variant:"outlined",notched:!0,inputProps:l?.htmlInput,onOpen:u,MenuProps:x,size:p},i))]})}),Il=x(ot)(({theme:e})=>({[`& .${at.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${at.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}})),Ml=us(function(t,n){const{onRowsPerPageChange:o,material:a,disabled:i}=t,s=Qe(t,nl),l=e.useMemo(()=>{if(i)return{backIconButtonProps:{disabled:!0},nextIconButtonProps:{disabled:!0}}},[i]),c=$s(),d=qs(),{estimatedRowCount:u}=d;return r.jsx(Il,Ge({component:"div",onRowsPerPageChange:cs(e=>{o?.(Number(e.target.value))}),labelRowsPerPage:c.current.getLocaleText("paginationRowsPerPage"),labelDisplayedRows:e=>c.current.getLocaleText("paginationDisplayedRows")(Ge({},e,{estimated:u})),getItemAriaLabel:c.current.getLocaleText("paginationItemAriaLabel")},l,s,a,{ref:n}))}),Dl=us(function(e,t){const{material:n}=e,o=Qe(e,ol);return r.jsx(tt,Ge({},o,n,{ref:t}))}),Tl=us(function(t,n){const{autoFocus:o,label:a,fullWidth:i,slotProps:s,className:l,material:c}=t,d=Qe(t,al),u=e.useRef(null),m=ss(u,n),p=e.useRef(null);return e.useEffect(()=>{if(o){const e=u.current?.querySelector("input");e?.focus({preventScroll:!0})}else!1===o&&p.current&&p.current.stop({})},[o]),a?r.jsx(kl,{className:l,control:r.jsx(Rl,Ge({},d,c,{inputProps:s?.htmlInput,ref:m,touchRippleRef:p})),label:a,fullWidth:i}):r.jsx(Rl,Ge({},d,c,{className:et(l,c?.className),inputProps:s?.htmlInput,ref:m,touchRippleRef:p}))}),El=us(function(e,t){const{material:n}=e,o=Qe(e,il);return r.jsx(P,Ge({},o,n,{ref:t}))}),Fl=us(function(e,t){const{material:n}=e,o=Qe(e,sl);return r.jsx(ee,Ge({},o,n,{ref:t}))}),Al=us(function(e,t){const{material:n}=e,o=Qe(e,ll);return r.jsx(w,Ge({},o,n,{ref:t}))}),Ol=us(function(e,t){const{material:n}=e,o=Qe(e,cl);return r.jsx(m,Ge({},o,n,{ref:t}))}),Hl=us(function(e,t){const{material:n}=e,o=Qe(e,dl);return r.jsx(y,Ge({},o,n,{ref:t}))}),Ll=us(function(e,t){const{material:n}=e,o=Qe(e,ul);return r.jsx(j,Ge({},o,n,{ref:t}))}),$l=us(function(e,t){const{material:n}=e,o=Qe(e,ml);return r.jsx(D,Ge({},o,n,{ref:t}))}),zl=us(function(e,t){const{material:n}=e,o=Qe(e,pl);return r.jsx(Xe,Ge({},o,n,{ref:t}))}),ql=us(function(e,t){const{material:n,label:o,className:a}=e,i=Qe(e,hl);return o?r.jsx(kl,{className:a,control:r.jsx(Me,Ge({},i,n,{ref:t})),label:o}):r.jsx(Me,Ge({},i,n,{className:a,ref:t}))}),Bl=us(function(e,t){const{material:n}=e,o=Qe(e,gl);return r.jsx(Ze,Ge({},o,n,{ref:t}))});function Vl(e,t=!0){if(!e)return;const{slotProps:n,material:o}=e,a=Qe(e,wl);t&&(a.startAdornment&&(a.startAdornment=r.jsx(Sl,{position:"start",children:a.startAdornment})),a.endAdornment&&(a.endAdornment=r.jsx(Sl,{position:"end",children:a.endAdornment})));for(const r in o)Object.hasOwn(o,r)&&(a[r]=o[r]);return n?.htmlInput&&(a.inputProps?a.inputProps=Ge({},a.inputProps,n?.htmlInput):a.inputProps=n?.htmlInput),a}const Wl={"bottom-start":"top left","bottom-end":"top right"};function Gl(e,t){return function(e,t){if(void 0===e.focusTrap)return t;return r.jsx(st,{open:!0,disableEnforceFocus:!0,disableAutoFocus:!0,children:r.jsx("div",{tabIndex:-1,children:t})})}(e,function(e,t){if(void 0===e.onClickAway)return t;return r.jsx(lt,{onClickAway:e.onClickAway,touchEvent:e.clickAwayTouchEvent,mouseEvent:e.clickAwayMouseEvent,children:t})}(e,t))}const Ul={baseAutocomplete:function(e){const t=qs(),{id:n,multiple:o,freeSolo:a,options:i,getOptionLabel:s,isOptionEqualToValue:l,value:c,onChange:d,label:u,placeholder:m,slotProps:p,material:h}=e,g=Qe(e,bl);return r.jsx(rt,Ge({id:n,multiple:o,freeSolo:a,options:i,getOptionLabel:s,isOptionEqualToValue:l,value:c,onChange:d,renderTags:(e,t)=>e.map((e,n)=>{const o=t({index:n}),{key:a}=o,i=Qe(o,yl);return r.jsx(y,Ge({variant:"outlined",size:"small",label:"string"==typeof e?e:s?.(e)},i),a)}),renderInput:e=>{const{inputProps:n,InputProps:o,InputLabelProps:a}=e,i=Qe(e,vl);return r.jsx(ae,Ge({},i,{label:u,placeholder:m,inputProps:n,InputProps:Vl(o,!1),InputLabelProps:Ge({shrink:!0},a)},p?.textField,t.slotProps?.baseTextField))}},g,h))},baseBadge:Dl,baseCheckbox:Tl,baseChip:Hl,baseCircularProgress:El,baseDivider:Fl,baseInput:function(e){return r.jsx(Je,Ge({},Vl(e)))},baseLinearProgress:Al,baseMenuList:Bl,baseMenuItem:function(t){const{inert:n,iconStart:o,iconEnd:a,children:i,material:s}=t,l=Qe(t,fl);return n&&(l.disableRipple=!0),e.createElement(E,Ge({},l,s),[o&&r.jsx(L,{children:o},"1"),r.jsx(Nl,{children:i},"2"),a&&r.jsx(L,{children:a},"3")])},baseTextField:function(e){const{slotProps:t,material:n}=e,o=Qe(e,xl);return r.jsx(ae,Ge({variant:"outlined"},o,n,{inputProps:t?.htmlInput,InputProps:Vl(t?.input),InputLabelProps:Ge({shrink:!0},t?.inputLabel)}))},baseButton:Ol,baseIconButton:Ll,baseTooltip:$l,basePagination:Ml,basePopper:function(t){const{open:n,children:o,className:a,flip:i,onExited:s,onDidShow:c,onDidHide:d,id:u,target:m,transition:p,placement:h,material:f}=t,x=Qe(t,Cl),b=e.useMemo(()=>{const e=[{name:"preventOverflow",options:{padding:8}}];return i&&e.push({name:"flip",enabled:!0,options:{rootBoundary:"document"}}),(c||d)&&e.push({name:"isPlaced",enabled:!0,phase:"main",fn:()=>{c?.()},effect:()=>()=>{d?.()}}),e},[i,c,d]);let y;if(p){const e=e=>t=>{e&&e(),s&&s(t)};y=n=>Gl(t,r.jsx(g,Ge({},n.TransitionProps,{style:{transformOrigin:Wl[n.placement]},onExited:e(n.TransitionProps?.onExited),children:r.jsx(l,{children:o})})))}else y=Gl(t,o);return r.jsx(Ye,Ge({id:u,className:a,open:n,anchorEl:m,transition:p,placement:h,modifiers:b},x,f,{children:y}))},baseSelect:Pl,baseSelectOption:function(e){let{native:t}=e,n=Qe(e,jl);return t?r.jsx("option",Ge({},n)):r.jsx(E,Ge({},n))},baseSkeleton:zl,baseSwitch:ql},Kl=Ge({},Ul,{booleanCellTrueIcon:Ds,booleanCellFalseIcon:Rs,columnMenuIcon:ks,openFilterButtonIcon:xs,filterPanelDeleteIcon:Rs,columnFilteredIcon:bs,columnSelectorIcon:vs,columnSortedAscendingIcon:ps,columnSortedDescendingIcon:hs,columnResizeIcon:ws,densityCompactIcon:Cs,densityStandardIcon:js,densityComfortableIcon:Ss,exportIcon:Hs,moreActionsIcon:Ts,treeDataCollapseIcon:fs,treeDataExpandIcon:gs,groupingCriteriaCollapseIcon:fs,groupingCriteriaExpandIcon:gs,detailPanelExpandIcon:Ns,detailPanelCollapseIcon:Ps,rowReorderIcon:Ms,quickFilterIcon:ys,quickFilterClearIcon:As,columnMenuHideIcon:Es,columnMenuSortAscendingIcon:ps,columnMenuSortDescendingIcon:hs,columnMenuUnsortIcon:null,columnMenuFilterIcon:bs,columnMenuManageColumnsIcon:Fs,columnMenuClearIcon:As,loadIcon:Is,filterPanelAddIcon:Ns,filterPanelRemoveAllIcon:Os,columnReorderIcon:Ms,menuItemCheckIcon:Ds});function _l(e,t,r=void 0){const n={};for(const o in e){const a=e[o];let i="",s=!0;for(let e=0;e<a.length;e+=1){const n=a[e];n&&(i+=(!0===s?"":" ")+t(n),s=!1,r&&r[n]&&(i+=" "+r[n]))}n[o]=i}return n}const Ql=fr({memoize:xr,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});class Xl{static create(e){return new Xl(e)}constructor(e){this.state=void 0,this.listeners=void 0,this.subscribe=e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}),this.getSnapshot=()=>this.state,this.update=e=>{this.state!==e&&(this.state=e,this.listeners.forEach(t=>t(e)))},this.state=e,this.listeners=new Set}apply(e){for(const t in e)if(!Object.is(this.state[t],e[t]))return void this.update(Ge({},this.state,e))}set(e,t){Object.is(this.state[e],t)||this.update(Ge({},this.state,{[e]:t}))}}const Yl=(...e)=>{const t=((e,t,r,n,o,a,...i)=>{if(i.length>0)throw new Error("Unsupported number of selectors");let s;if(e&&t&&r&&n&&o&&a)s=(i,s,l,c)=>{const d=e(i,s,l,c),u=t(i,s,l,c),m=r(i,s,l,c),p=n(i,s,l,c),h=o(i,s,l,c);return a(d,u,m,p,h,s,l,c)};else if(e&&t&&r&&n&&o)s=(a,i,s,l)=>{const c=e(a,i,s,l),d=t(a,i,s,l),u=r(a,i,s,l),m=n(a,i,s,l);return o(c,d,u,m,i,s,l)};else if(e&&t&&r&&n)s=(o,a,i,s)=>{const l=e(o,a,i,s),c=t(o,a,i,s),d=r(o,a,i,s);return n(l,c,d,a,i,s)};else if(e&&t&&r)s=(n,o,a,i)=>{const s=e(n,o,a,i),l=t(n,o,a,i);return r(s,l,o,a,i)};else if(e&&t)s=(r,n,o,a)=>{const i=e(r,n,o,a);return t(i,n,o,a)};else{if(!e)throw new Error("Missing arguments");s=e}return s})(...e);return(e,r,n,o)=>t(ec(e),r,n,o)},Zl=(...e)=>{const t=((...e)=>{const t=new WeakMap;let r=1;const n=e[e.length-1],o=e.length-1||1,a=Math.max(n.length-o,0);if(a>3)throw new Error("Unsupported number of arguments");return(o,i,s,l)=>{let c=o.__cacheKey__;c||(c={id:r},o.__cacheKey__=c,r+=1);let d=t.get(c);if(!d){let r=e;const o=[void 0,void 0,void 0];switch(a){case 0:break;case 1:r=[...e.slice(0,-1),()=>o[0],n];break;case 2:r=[...e.slice(0,-1),()=>o[0],()=>o[1],n];break;case 3:r=[...e.slice(0,-1),()=>o[0],()=>o[1],()=>o[2],n];break;default:throw new Error("Unsupported number of arguments")}d=Ql(...r),d.selectorArgs=o,t.set(c,d)}switch(a){case 3:d.selectorArgs[2]=l;case 2:d.selectorArgs[1]=s;case 1:d.selectorArgs[0]=i}switch(a){case 0:return d(o);case 1:return d(o,i);case 2:return d(o,i,s);case 3:return d(o,i,s,l);default:throw new Error("unreachable")}}})(...e);return(e,r,n,o)=>t(ec(e),r,n,o)},Jl=e=>(t,r)=>e(ec(t),r);function ec(e){return"current"in e?e.current.state:e}const tc=Jl(e=>e.dimensions),rc=Yl(tc,e=>e.columnsTotalWidth),nc=Yl(tc,e=>e.rowHeight),oc=Yl(tc,e=>e.contentSize.height),ac=Yl(tc,e=>e.hasScrollX),ic=Yl(tc,e=>e.hasScrollY),sc=Yl(tc,e=>e.columnsTotalWidth<e.viewportOuterSize.width),lc=Yl(tc,e=>e.headerHeight),cc=Yl(tc,e=>e.groupHeaderHeight);Yl(tc,e=>e.headerFilterHeight);const dc=Yl(tc,e=>e.hasScrollX?e.scrollbarSize:0),uc=Yl(tc,e=>e.hasScrollY?e.scrollbarSize:0),mc=Yl(tc,dc,(e,t)=>{const r=e.viewportOuterSize.height-e.minimumSize.height>0;return!(0===t&&!r)}),pc=Object.is;function hc(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;let r=0,n=0;for(const o in e){if(r+=1,!pc(e[o],t[o]))return!1;if(!(o in t))return!1}for(const o in t)n+=1;return r===n}function gc(t){return e.memo(t,hc)}const fc={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",noColumnsOverlayLabel:"No columns",noColumnsOverlayManageColumns:"Manage columns",emptyPivotOverlayLabel:"Add fields to rows, columns, and values to create a pivot table",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>1!==e?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search…",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",toolbarPivot:"Pivot",toolbarAssistant:"AI Assistant",columnsManagementSearchTitle:"Search",columnsManagementNoColumns:"No columns",columnsManagementShowHideAllText:"Show/Hide All",columnsManagementReset:"Reset",columnsManagementDeleteIconLabel:"Clear",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorDoesNotContain:"does not contain",filterOperatorEquals:"equals",filterOperatorDoesNotEqual:"does not equal",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:"Contains",headerFilterOperatorDoesNotContain:"Does not contain",headerFilterOperatorEquals:"Equals",headerFilterOperatorDoesNotEqual:"Does not equal",headerFilterOperatorStartsWith:"Starts with",headerFilterOperatorEndsWith:"Ends with",headerFilterOperatorIs:"Is",headerFilterOperatorNot:"Is not",headerFilterOperatorAfter:"Is after",headerFilterOperatorOnOrAfter:"Is on or after",headerFilterOperatorBefore:"Is before",headerFilterOperatorOnOrBefore:"Is on or before",headerFilterOperatorIsEmpty:"Is empty",headerFilterOperatorIsNotEmpty:"Is not empty",headerFilterOperatorIsAnyOf:"Is any of","headerFilterOperator=":"Equals","headerFilterOperator!=":"Not equals","headerFilterOperator>":"Greater than","headerFilterOperator>=":"Greater than or equal to","headerFilterOperator<":"Less than","headerFilterOperator<=":"Less than or equal to",headerFilterClear:"Clear filter",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuAriaLabel:e=>`${e} column menu`,columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnMenuManagePivot:"Manage pivot",columnHeaderFiltersTooltipActive:e=>1!==e?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>1!==e?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>`${e.toLocaleString()} of ${t.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",paginationRowsPerPage:"Rows per page:",paginationDisplayedRows:({from:e,to:t,count:r,estimated:n})=>{if(!n)return`${e}–${t} of ${-1!==r?r:`more than ${t}`}`;return`${e}–${t} of ${-1!==r?r:n&&n>t?`around ${n}`:`more than ${t}`}`},paginationItemAriaLabel:e=>"first"===e?"Go to first page":"last"===e?"Go to last page":"next"===e?"Go to next page":"Go to previous page",rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size",pivotToggleLabel:"Pivot",pivotRows:"Rows",pivotColumns:"Columns",pivotValues:"Values",pivotCloseButton:"Close pivot settings",pivotSearchButton:"Search fields",pivotSearchControlPlaceholder:"Search fields",pivotSearchControlLabel:"Search fields",pivotSearchControlClear:"Clear search",pivotNoFields:"No fields",pivotMenuMoveUp:"Move up",pivotMenuMoveDown:"Move down",pivotMenuMoveToTop:"Move to top",pivotMenuMoveToBottom:"Move to bottom",pivotMenuRows:"Rows",pivotMenuColumns:"Columns",pivotMenuValues:"Values",pivotMenuOptions:"Field options",pivotMenuAddToRows:"Add to Rows",pivotMenuAddToColumns:"Add to Columns",pivotMenuAddToValues:"Add to Values",pivotMenuRemove:"Remove",pivotDragToRows:"Drag here to create rows",pivotDragToColumns:"Drag here to create columns",pivotDragToValues:"Drag here to create values",pivotYearColumnHeaderName:"(Year)",pivotQuarterColumnHeaderName:"(Quarter)",aiAssistantPanelTitle:"AI Assistant",aiAssistantPanelClose:"Close AI Assistant",aiAssistantPanelNewConversation:"New conversation",aiAssistantPanelConversationHistory:"Conversation history",aiAssistantPanelEmptyConversation:"No prompt history",aiAssistantSuggestions:"Suggestions",promptFieldLabel:"Prompt",promptFieldPlaceholder:"Type a prompt…",promptFieldPlaceholderWithRecording:"Type or record a prompt…",promptFieldPlaceholderListening:"Listening for prompt…",promptFieldSpeechRecognitionNotSupported:"Speech recognition is not supported in this browser",promptFieldSend:"Send",promptFieldRecord:"Record",promptFieldStopRecording:"Stop recording",promptRerun:"Run again",promptProcessing:"Processing…",promptAppliedChanges:"Applied changes",promptChangeGroupDescription:e=>`Group by ${e}`,promptChangeAggregationLabel:(e,t)=>`${e} (${t})`,promptChangeAggregationDescription:(e,t)=>`Aggregate ${e} (${t})`,promptChangeFilterLabel:(e,t,r)=>"is any of"===t?`${e} is any of: ${r}`:`${e} ${t} ${r}`,promptChangeFilterDescription:(e,t,r)=>"is any of"===t?`Filter where ${e} is any of: ${r}`:`Filter where ${e} ${t} ${r}`,promptChangeSortDescription:(e,t)=>`Sort by ${e} (${t})`,promptChangePivotEnableLabel:"Pivot",promptChangePivotEnableDescription:"Enable pivot",promptChangePivotColumnsLabel:e=>`Columns (${e})`,promptChangePivotColumnsDescription:(e,t)=>`${e}${t?` (${t})`:""}`,promptChangePivotRowsLabel:e=>`Rows (${e})`,promptChangePivotValuesLabel:e=>`Values (${e})`,promptChangePivotValuesDescription:(e,t)=>`${e} (${t})`},xc=e=>e,bc=(()=>{let e=xc;return{configure(t){e=t},generate:t=>e(t),reset(){e=xc}}})(),yc={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vc(e,t,r="Mui"){const n=yc[t];return n?`${r}-${n}`:`${bc.generate(e)}-${t}`}function wc(e,t,r="Mui"){const n={};return t.forEach(t=>{n[t]=vc(e,t,r)}),n}function Cc(e){return vc("MuiDataGrid",e)}const jc=wc("MuiDataGrid",["aiAssistantPanel","aiAssistantPanelHeader","aiAssistantPanelTitleContainer","aiAssistantPanelTitle","aiAssistantPanelBody","aiAssistantPanelEmptyText","aiAssistantPanelFooter","aiAssistantPanelConversation","aiAssistantPanelConversationList","aiAssistantPanelConversationTitle","aiAssistantPanelSuggestions","aiAssistantPanelSuggestionsList","aiAssistantPanelSuggestionsItem","aiAssistantPanelSuggestionsLabel","actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","aggregationColumnHeaderLabel","aggregationRowOverlayWrapper","autoHeight","autosizing","mainContent","withSidePanel","booleanCell","cell--editable","cell--editing","cell--flex","cell--textCenter","cell--textLeft","cell--textRight","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell--pinnedLeft","cell--pinnedRight","cell--selectionMode","cell","cellCheckbox","cellEmpty","cellSkeleton","cellOffsetLeft","checkboxInput","collapsible","collapsibleTrigger","collapsibleIcon","collapsiblePanel","columnHeader","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader--pinnedLeft","columnHeader--pinnedRight","columnHeader--last","columnHeader--lastUnpinned","columnHeader--siblingFocused","columnHeader--filter","columnHeaderFilterInput","columnHeaderFilterOperatorLabel","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeaders","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsManagement","columnsManagementRow","columnsManagementHeader","columnsManagementSearchInput","columnsManagementFooter","columnsManagementScrollArea","columnsManagementEmptyText","container--top","container--bottom","detailPanel","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filler","filler--borderBottom","filler--pinnedLeft","filler--pinnedRight","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","headerFilterRow","iconButtonContainer","iconSeparator","main","main--hasPinnedRight","main--hiddenContent","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","overlayWrapper","overlayWrapperInner","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","root--noToolbar","row","row--editable","row--editing","row--firstVisible","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","row--borderBottom","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","rowReorderIcon","rowSkeleton","scrollArea--left","scrollArea--right","scrollArea","scrollbar","scrollbar--vertical","scrollbar--horizontal","scrollbarFiller","scrollbarFiller--header","scrollbarFiller--borderTop","scrollbarFiller--borderBottom","scrollbarFiller--pinnedRight","selectedRowCount","sortButton","sortIcon","shadowScrollArea","sidebar","sidebarHeader","toolbarContainer","toolbar","toolbarLabel","toolbarDivider","toolbarFilterList","toolbarQuickFilter","toolbarQuickFilterTrigger","toolbarQuickFilterControl","virtualScroller","virtualScroller--hasScrollX","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","withVerticalBorder","withBorderColor","cell--withRightBorder","cell--withLeftBorder","columnHeader--withRightBorder","columnHeader--withLeftBorder","treeDataGroupingCell","treeDataGroupingCellToggle","treeDataGroupingCellLoadingContainer","groupingCriteriaCell","groupingCriteriaCellToggle","groupingCriteriaCellLoadingContainer","pinnedRows","pinnedRows--top","pinnedRows--bottom","pivotPanelAvailableFields","pivotPanelField","pivotPanelField--sorted","pivotPanelFieldActionContainer","pivotPanelFieldCheckbox","pivotPanelFieldDragIcon","pivotPanelFieldList","pivotPanelFieldName","pivotPanelHeader","pivotPanelPlaceholder","pivotPanelScrollArea","pivotPanelSearchContainer","pivotPanelSection","pivotPanelSectionTitle","pivotPanelSections","pivotPanelSwitch","pivotPanelSwitchLabel","prompt","promptContent","promptText","promptFeedback","promptChangeList","promptChangesToggle","promptChangesToggleIcon","promptIcon","promptIconContainer","promptError","promptAction"]);let Sc=function(e){return e.DataGrid="DataGrid",e.DataGridPro="DataGridPro",e.DataGridPremium="DataGridPremium",e}({});class kc{constructor(e=1e3){this.timeouts=new Map,this.cleanupTimeout=1e3,this.cleanupTimeout=e}register(e,t,r){this.timeouts||(this.timeouts=new Map);const n=setTimeout(()=>{"function"==typeof t&&t(),this.timeouts.delete(r.cleanupToken)},this.cleanupTimeout);this.timeouts.set(r.cleanupToken,n)}unregister(e){const t=this.timeouts.get(e.cleanupToken);t&&(this.timeouts.delete(e.cleanupToken),clearTimeout(t))}reset(){this.timeouts&&(this.timeouts.forEach((e,t)=>{this.unregister({cleanupToken:t})}),this.timeouts=void 0)}}class Rc{constructor(){this.registry=new FinalizationRegistry(e=>{"function"==typeof e&&e()})}register(e,t,r){this.registry.register(e,t,r)}unregister(e){this.registry.unregister(e)}reset(){}}class Nc{static create(){return new Nc}}const Pc={current:"undefined"!=typeof FinalizationRegistry?new Rc:new kc};let Ic=0;function Mc(t,r,n,o){const a=e.useState(Nc.create)[0],i=e.useRef(null),s=e.useRef(null);s.current=n;const l=e.useRef(null);if(!i.current&&s.current){const e=(e,t,r)=>{t.defaultMuiPrevented||s.current?.(e,t,r)};i.current=t.current.subscribeEvent(r,e,o),Ic+=1,l.current={cleanupToken:Ic},Pc.current.register(a,()=>{i.current?.(),i.current=null,l.current=null},l.current)}else!s.current&&i.current&&(i.current(),i.current=null,l.current&&(Pc.current.unregister(l.current),l.current=null));e.useEffect(()=>{if(!i.current&&s.current){const e=(e,t,r)=>{t.defaultMuiPrevented||s.current?.(e,t,r)};i.current=t.current.subscribeEvent(r,e,o)}return l.current&&Pc.current&&(Pc.current.unregister(l.current),l.current=null),()=>{i.current?.(),i.current=null}},[t,r,o])}const Dc={isFirst:!0};function Tc(e,t,r){Mc(e,t,r,Dc)}var Ec,Fc,Ac={exports:{}},Oc={};var Hc=(Fc||(Fc=1,Ac.exports=function(){if(Ec)return Oc;Ec=1;var e=Dt(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useState,n=e.useEffect,o=e.useLayoutEffect,a=e.useDebugValue;function i(e){var r=e.getSnapshot;e=e.value;try{var n=r();return!t(e,n)}catch(o){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),l=r({inst:{value:s,getSnapshot:t}}),c=l[0].inst,d=l[1];return o(function(){c.value=s,c.getSnapshot=t,i(c)&&d({inst:c})},[e,s,t]),n(function(){return i(c)&&d({inst:c}),e(function(){i(c)&&d({inst:c})})},[e]),a(s),s};return Oc.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:s,Oc}()),Ac.exports);const Lc={};function $c(t,r){const n=e.useRef(Lc);return n.current===Lc&&(n.current=t(r)),n}const zc=Object.is,qc=hc,Bc=(e,t)=>e===t||e.length===t.length&&e.every((e,r)=>e===t[r]),Vc=()=>({state:null,equals:null,selector:null,args:void 0}),Wc=[],Gc=()=>null;function Uc(t,r,n=void 0,o=zc){const a=$c(Vc),i=null!==a.current.selector,[s,l]=e.useState(i?null:r(t,n));a.current.state=s,a.current.equals=o,a.current.selector=r;const c=a.current.args;if(a.current.args=n,i&&!((e,t)=>{let r=Object.is;return t instanceof Array?r=Bc:t instanceof Object&&(r=qc),r(e,t)})(c,n)){const e=a.current.selector(t,a.current.args);a.current.equals(a.current.state,e)||(a.current.state=e,l(e))}const d=e.useCallback(()=>(a.current.subscription||(a.current.subscription=t.current.store.subscribe(()=>{const e=a.current.selector(t,a.current.args);a.current.equals(a.current.state,e)||(a.current.state=e,l(e))})),null),Wc),u=e.useCallback(()=>()=>{a.current.subscription&&(a.current.subscription(),a.current.subscription=void 0)},Wc);return Hc.useSyncExternalStore(u,d,Gc),s}const Kc={compact:.7,comfortable:1.3,standard:1},_c=Jl(e=>e.density),Qc=Yl(_c,e=>Kc[e]),Xc=[];function Yc(t){e.useEffect(t,Xc)}class Zc{static create(){return new Zc}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Jc(){const e=$c(Zc.create).current;return Yc(e.disposeEffect),e}function ed(e,t,r=!1){const n={...t};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const a=o;if("components"===a||"slots"===a)n[a]={...e[a],...n[a]};else if("componentsProps"===a||"slotProps"===a){const o=e[a],i=t[a];if(i)if(o){n[a]={...i};for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const t=e;n[a][t]=ed(o[t],i[t],r)}}else n[a]=i;else n[a]=o||{}}else"className"===a&&r&&t.className?n.className=et(e?.className,t?.className):"style"===a&&r&&t.style?n.style={...e?.style,...t?.style}:void 0===n[a]&&(n[a]=e[a])}return n}function td(e){throw new Error("Failed assertion: should not be rendered")}const rd=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange","slotProps"],nd=x(td,{name:"MuiDataGrid",slot:"EditInputCell"})({font:Zs.typography.font.body,padding:"1px 0","& input":{padding:"0 16px",height:"100%"}}),od=us((t,n)=>{const o=qs(),{id:a,value:i,field:s,colDef:l,hasFocus:c,debounceMs:d=200,isProcessingProps:u,onValueChange:m,slotProps:p}=t,h=Qe(t,rd),g=$s(),f=e.useRef(null),[x,b]=e.useState(i),y=(e=>{const{classes:t}=e;return _l({root:["editInputCell"]},Cc,t)})(o),v=e.useCallback(async e=>{const t=e.target.value,r=g.current.getColumn(s);let n=t;r.valueParser&&(n=r.valueParser(t,g.current.getRow(a),r,g)),b(n),g.current.setEditCellValue({id:a,field:s,value:n,debounceMs:d,unstable_skipValueParser:!0},e),m&&await m(e,t)},[g,d,s,a,m]),w=g.current.unstable_getEditCellMeta(a,s);return e.useEffect(()=>{"debouncedSetEditCellValue"!==w?.changeReason&&b(i)},[w,i]),ls(()=>{c&&f.current.focus()},[c]),r.jsx(nd,Ge({as:o.slots.baseInput,inputRef:f,className:y.root,ownerState:o,fullWidth:!0,type:"number"===l.type?l.type:"text",value:x??"",onChange:v,endAdornment:u?r.jsx(o.slots.loadIcon,{fontSize:"small",color:"action"}):void 0},h,p?.root,{ref:n}))}),ad=Jl(e=>e.rows),id=Yl(ad,e=>e.totalRowCount),sd=Yl(ad,e=>e.loading),ld=Yl(ad,e=>e.totalTopLevelRowCount),cd=Yl(ad,e=>e.dataRowIdToModelLookup);Yl(cd,(e,t)=>e[t]);const dd=Yl(ad,e=>e.tree),ud=Yl(dd,(e,t)=>e[t]),md=Yl(ad,e=>e.groupsToFetch),pd=Yl(ad,e=>e.groupingName),hd=Yl(ad,e=>e.treeDepths),gd=Zl(ad,e=>{const t=Object.entries(e.treeDepths);return 0===t.length?1:(t.filter(([,e])=>e>0).map(([e])=>Number(e)).sort((e,t)=>t-e)[0]??0)+1}),fd=Yl(ad,e=>e.dataRowIds),xd=Zl(fd,cd,(e,t)=>e.reduce((e,r)=>t[r]?(e.push(t[r]),e):e,[])),bd=Zl(Yl(ad,e=>e?.additionalRowGroups),e=>{const t=e?.pinnedRows;return{bottom:t?.bottom?.map(e=>({id:e.id,model:e.model??{}}))??[],top:t?.top?.map(e=>({id:e.id,model:e.model??{}}))??[]}}),yd=Yl(bd,e=>(e?.top?.length||0)+(e?.bottom?.length||0)),vd=(e,t)=>t&&e.length>1?[e[0]]:e,wd=(e,t)=>r=>Ge({},r,{sorting:Ge({},r.sorting,{sortModel:vd(e,t)})}),Cd=(e,t)=>{const r=e.map(e=>((e,t)=>{const r=t.current.getColumn(e.field);if(!r||null===e.sort)return null;let n;return n=r.getSortComparator?r.getSortComparator(e.sort):"desc"===e.sort?(...e)=>-1*r.sortComparator(...e):r.sortComparator,n?{getSortCellParams:e=>({id:e,field:r.field,rowNode:ud(t,e),value:t.current.getCellValue(e,r.field),api:t.current}),comparator:n}:null})(e,t)).filter(e=>!!e);return 0===r.length?null:e=>e.map(e=>({node:e,params:r.map(t=>t.getSortCellParams(e.id))})).sort((e,t)=>{return n=e,o=t,r.reduce((e,t,r)=>{if(0!==e)return e;const a=n.params[r],i=o.params[r];return t.comparator(a.value,i.value,a,i)},0);var n,o}).map(e=>e.node.id)},jd=(e,t)=>{const r=e.indexOf(t);return t&&-1!==r&&r+1!==e.length?e[r+1]:e[0]},Sd=(e,t)=>null==e&&null!=t?-1:null==t&&null!=e?1:null==e&&null==t?0:null,kd=new Intl.Collator,Rd=(e,t)=>{const r=Sd(e,t);return null!==r?r:Number(e)-Number(t)},Nd=(e,t)=>{const r=Sd(e,t);return null!==r?r:e>t?1:e<t?-1:0};let Pd=0;const Id={...ut}.useId;function Md(t){if(void 0!==Id){return Id()}return function(t){const[r,n]=e.useState(t),o=r;return e.useEffect(()=>{null==r&&(Pd+=1,n(`mui-${Pd}`))},[r]),o}(t)}const Dd=["item","applyValue","type","apiRef","focusElementRef","tabIndex","disabled","isFilterActive","slotProps","clearButton","headerFilterMenu"];function Td(t){const{item:n,applyValue:o,type:a,apiRef:i,focusElementRef:s,tabIndex:l,disabled:c,slotProps:d,clearButton:u,headerFilterMenu:m}=t,p=Qe(t,Dd),h=d?.root,g=Jc(),[f,x]=e.useState(Ed(n.value)),[b,y]=e.useState(!1),v=Md(),w=qs(),C=e.useCallback(e=>{const t=Ed(e.target.value);x(t),y(!0),g.start(w.filterDebounceMs,()=>{const e=Ge({},n,{value:"number"!==a||Number.isNaN(Number(t))?t:Number(t),fromInput:v});o(e),y(!1)})},[g,w.filterDebounceMs,n,a,v,o]);return e.useEffect(()=>{n.fromInput===v&&null!=n.value||x(Ed(n.value))},[v,n]),r.jsxs(e.Fragment,{children:[r.jsx(w.slots.baseTextField,Ge({id:v,label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),value:f??"",onChange:C,type:a||"text",disabled:c,slotProps:Ge({},h?.slotProps,{input:Ge({endAdornment:b?r.jsx(w.slots.loadIcon,{fontSize:"small",color:"action"}):null},h?.slotProps?.input),htmlInput:Ge({tabIndex:l},h?.slotProps?.htmlInput)}),inputRef:s},w.slotProps?.baseTextField,p,h)),m,u]})}function Ed(e){if(null!=e&&""!==e)return String(e)}function Fd(e){return"object"==typeof e&&null!==e}function Ad(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const Od=(e,t,r)=>Math.max(t,Math.min(r,e));function Hd(e,t){return Array.from({length:t-e}).map((t,r)=>e+r)}function Ld(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}const $d=(e,t)=>r=>{e&&t(r)};function zd(t){const{item:n,applyValue:o,type:a,apiRef:i,focusElementRef:s,slotProps:l}=t,c=Md(),[d,u]=e.useState([]),[m,p]=e.useState(n.value||[]),h=qs();e.useEffect(()=>{const e=n.value??[];p(e.map(String))},[n.value]);const g=e.useCallback((e,t)=>{p(t.map(String)),o(Ge({},n,{value:[...t.map(e=>"number"===a?Number(e):e)]}))},[o,n,a]),f=e.useCallback((e,t)=>{u(""===t?[]:[t])},[u]),x=h.slots.baseAutocomplete;return r.jsx(x,Ge({multiple:!0,freeSolo:!0,options:d,id:c,value:m,onChange:g,onInputChange:f,label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),slotProps:{textField:{type:a||"text",inputRef:s}}},l?.root))}var qd=function(e){return e.Cell="cell",e.Row="row",e}(qd||{}),Bd=function(e){return e.Edit="edit",e.View="view",e}(Bd||{}),Vd=function(e){return e.Edit="edit",e.View="view",e}(Vd||{}),Wd=function(e){return e.And="and",e.Or="or",e}(Wd||{});class Gd{constructor(e){this.data=void 0,this.data=e.ids}has(e){return this.data.has(e)}select(e){this.data.add(e)}unselect(e){this.data.delete(e)}}class Ud{constructor(e){this.data=void 0,this.data=e.ids}has(e){return!this.data.has(e)}select(e){this.data.delete(e)}unselect(e){this.data.add(e)}}const Kd=e=>"include"===e.type?new Gd(e):new Ud(e);var _d=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e.pasteKeyDown="pasteKeyDown",e}(_d||{}),Qd=function(e){return e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(Qd||{}),Xd=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e}(Xd||{}),Yd=function(e){return e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(Yd||{});function Zd(e){return void 0!==e.field}const Jd={filteredRowsLookup:{},filteredChildrenCountLookup:{},filteredDescendantCountLookup:{}},eu=()=>({items:[],logicOperator:Wd.And,quickFilterValues:[],quickFilterLogicOperator:Wd.And});function tu(e){return{current:e.current.getPublicApi()}}let ru=function(e){return e.LEFT="left",e.RIGHT="right",e}({});const nu={left:[],right:[]},ou=Jl(e=>e.isRtl),au=Jl(e=>e.columns),iu=Yl(au,e=>e.orderedFields),su=Yl(au,e=>e.lookup),lu=Zl(iu,su,(e,t)=>e.map(e=>t[e])),cu=Yl(au,e=>e.columnVisibilityModel),du=Yl(au,e=>e.initialColumnVisibilityModel),uu=Zl(lu,cu,(e,t)=>e.filter(e=>!1!==t[e.field])),mu=Zl(uu,e=>e.map(e=>e.field)),pu=Jl(e=>e.pinnedColumns);Zl(pu,iu,ou,(e,t,r)=>gu(e,t,r));const hu=Zl(au,pu,mu,ou,(e,t,r,n)=>{const o=gu(t,r,n);return{left:o.left.map(t=>e.lookup[t]),right:o.right.map(t=>e.lookup[t])}});function gu(e,t,r){if(!Array.isArray(e.left)&&!Array.isArray(e.right))return nu;if(0===e.left?.length&&0===e.right?.length)return nu;const n=(e,t)=>Array.isArray(e)?e.filter(e=>t.includes(e)):[],o=n(e.left,t),a=t.filter(e=>!o.includes(e)),i=n(e.right,a);return r?{left:i,right:o}:{left:o,right:i}}const fu=Zl(uu,e=>{const t=[];let r=0;for(let n=0;n<e.length;n+=1)t.push(r),r+=e[n].computedWidth;return t}),xu=Zl(lu,e=>e.filter(e=>e.filterable)),bu=Zl(lu,e=>e.reduce((e,t)=>(t.filterable&&(e[t.field]=t),e),{})),yu=Zl(lu,e=>e.some(e=>void 0!==e.colSpan));let vu;const wu=(e,t)=>{const r=Ge({},e);if(null==r.id&&(r.id=Math.round(1e5*Math.random())),null==r.operator){const e=su(t)[r.field];r.operator=e&&e.filterOperators[0].value}return r},Cu=(e,t,r)=>{const n=e.items.length>1;let o;o=n&&t?[e.items[0]]:e.items;const a=n&&o.some(e=>null==e.id);return o.some(e=>null==e.operator)||a?Ge({},e,{items:o.map(e=>wu(e,r))}):e.items!==o?Ge({},e,{items:o}):e},ju=(e,t,r)=>n=>Ge({},n,{filterModel:Cu(e,t,r)}),Su=e=>"string"==typeof e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e,ku=(e,t)=>{if(!e.field||!e.operator)return null;const r=t.current.getColumn(e.field);if(!r)return null;let n;if(r.valueParser){const o=r.valueParser;n=Array.isArray(e.value)?e.value?.map(e=>o(e,void 0,r,t)):o(e.value,void 0,r,t)}else n=e.value;const{ignoreDiacritics:o}=t.current.rootProps;o&&(n=Su(n));const a=Ge({},e,{value:n}),i=r.filterOperators;if(!i?.length)throw new Error(`MUI X: No filter operators found for column '${r.field}'.`);const s=i.find(e=>e.value===a.operator);if(!s)throw new Error(`MUI X: No filter operator found for column '${r.field}' and operator value '${a.operator}'.`);const l=tu(t),c=s.getApplyFilterFn(a,r);return"function"!=typeof c?null:{item:a,fn:e=>{let n=t.current.getRowValue(e,r);return o&&(n=Su(n)),c(n,e,r,l)}}};let Ru=1;const Nu=(e,t,r)=>{const{items:n}=e,o=n.map(e=>ku(e,t)).filter(e=>!!e);if(0===o.length)return null;if(r||!function(){if(void 0!==vu)return vu;try{vu=new Function("return true")()}catch(e){vu=!1}return vu}())return(e,t)=>{const r={};for(let n=0;n<o.length;n+=1){const a=o[n];t&&!t(a.item.field)||(r[a.item.id]=a.fn(e))}return r};const a=new Function("appliers","row","shouldApplyFilter",`"use strict";\n${o.map((e,t)=>`const shouldApply${t} = !shouldApplyFilter || shouldApplyFilter(${JSON.stringify(e.item.field)});`).join("\n")}\n\nconst result$$ = {\n${o.map((e,t)=>`  ${JSON.stringify(String(e.item.id))}: !shouldApply${t} ? false : appliers[${t}].fn(row),`).join("\n")}\n};\n\nreturn result$$;`.replaceAll("$$",String(Ru)));Ru+=1;return(e,t)=>a(o,e,t)},Pu=e=>e.quickFilterExcludeHiddenColumns??!0,Iu=(e,t,r)=>{const n=Nu(e,t,r),o=((e,t)=>{const r=e.quickFilterValues?.filter(Boolean)??[];if(0===r.length)return null;const n=Pu(e)?mu(t):iu(t),o=[],{ignoreDiacritics:a}=t.current.rootProps,i=tu(t);return n.forEach(e=>{const n=t.current.getColumn(e),s=n?.getApplyQuickFilterFn;s&&o.push({column:n,appliers:r.map(e=>{const t=a?Su(e):e;return{fn:s(t,n,i)}})})}),function(e,n){const s={};e:for(let l=0;l<r.length;l+=1){const c=r[l];for(let r=0;r<o.length;r+=1){const{column:d,appliers:u}=o[r],{field:m}=d;if(n&&!n(m))continue;const p=u[l];let h=t.current.getRowValue(e,d);if(null!==p.fn&&(a&&(h=Su(h)),p.fn(h,e,d,i))){s[c]=!0;continue e}}s[c]=!1}return s}})(e,t);return function(e,t,r){r.passingFilterItems=n?.(e,t)??null,r.passingQuickFilterValues=o?.(e,t)??null}},Mu=e=>null!=e,Du=(e,t,r,n,o)=>{const a=((e,t,r)=>(e.cleanedFilterItems||(e.cleanedFilterItems=r.filter(e=>null!==ku(e,t))),e.cleanedFilterItems))(o,n,r.items),i=e.filter(Mu),s=t.filter(Mu);if(i.length>0){const e=e=>i.some(t=>t[e.id]);if((r.logicOperator??eu().logicOperator)===Wd.And){if(!a.every(e))return!1}else{if(!a.some(e))return!1}}if(s.length>0&&null!=r.quickFilterValues){const e=e=>s.some(t=>t[e]);if((r.quickFilterLogicOperator??eu().quickFilterLogicOperator)===Wd.And){if(!r.quickFilterValues.every(e))return!1}else{if(!r.quickFilterValues.some(e))return!1}}return!0},Tu=(e,t)=>r=>{if(!r.value)return null;const n=e?r.value:r.value.trim(),o=new RegExp(Ad(n),"i");return e=>{if(null==e)return t;const r=o.test(String(e));return t?!r:r}},Eu=(e,t)=>r=>{if(!r.value)return null;const n=e?r.value:r.value.trim(),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return e=>{if(null==e)return t;const r=0===o.compare(n,e.toString());return t?!r:r}},Fu=e=>()=>t=>{const r=""===t||null==t;return e?!r:r},Au={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:(e,t)=>{const r=Sd(e,t);return null!==r?r:"string"==typeof e?kd.compare(e.toString(),t.toString()):e-t},type:"string",align:"left",filterOperators:((e=!1)=>[{value:"contains",getApplyFilterFn:Tu(e,!1),InputComponent:Td},{value:"doesNotContain",getApplyFilterFn:Tu(e,!0),InputComponent:Td},{value:"equals",getApplyFilterFn:Eu(e,!1),InputComponent:Td},{value:"doesNotEqual",getApplyFilterFn:Eu(e,!0),InputComponent:Td},{value:"startsWith",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(`^${Ad(r)}.*$`,"i");return e=>null!=e&&n.test(e.toString())},InputComponent:Td},{value:"endsWith",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(`.*${Ad(r)}$`,"i");return e=>null!=e&&n.test(e.toString())},InputComponent:Td},{value:"isEmpty",getApplyFilterFn:Fu(!1),requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:Fu(!0),requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:t=>{if(!Array.isArray(t.value)||0===t.value.length)return null;const r=e?t.value:t.value.map(e=>e.trim()),n=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return e=>null!=e&&r.some(t=>0===n.compare(t,e.toString()||""))},InputComponent:zd}])(),renderEditCell:e=>r.jsx(od,Ge({},e)),getApplyQuickFilterFn:e=>{if(!e)return null;const t=new RegExp(Ad(e),"i");return(e,r,n,o)=>{let a=o.current.getRowFormattedValue(r,n);return o.current.ignoreDiacritics&&(a=Su(a)),null!=a&&t.test(a.toString())}}};function Ou(e){return 1===e.key.length&&!e.ctrlKey&&!e.metaKey}const Hu=e=>0===e.indexOf("Arrow")||0===e.indexOf("Page")||" "===e||"Home"===e||"End"===e,Lu=e=>"Tab"===e||"Escape"===e;function $u(e){return(e.ctrlKey||e.metaKey)&&"V"===String.fromCharCode(e.keyCode)&&!e.shiftKey&&!e.altKey}const zu=e.createContext(void 0),qu=()=>{const t=e.useContext(zu);if(void 0===t)throw new Error(["MUI X: Could not find the Data Grid configuration context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join("\n"));return t},Bu=e.createContext({className:"unset",tag:r.jsx("style",{href:"/unset"})});function Vu(){return e.useContext(Bu).className}function Wu(t){const n=qu(),o=qs(),a=n.hooks.useCSSVariables(),i=e.useMemo(()=>{const e=`MuiDataGridVariables-${a.id}`,t=`.${e}{${function(e){let t="";for(const r in e)Object.hasOwn(e,r)&&void 0!==e[r]&&(t+=`${r}:${e[r]};`);return t}(a.variables)}}`;return{className:e,tag:r.jsx("style",{href:`/${e}`,nonce:o.nonce,children:t})}},[o.nonce,a]);return r.jsx(Bu.Provider,{value:i,children:t.children})}const Gu=["open","target","onClose","children","position","className","onExited"],Uu=x(td,{name:"MuiDataGrid",slot:"Menu"})({zIndex:Zs.zIndex.menu,[`& .${jc.menuList}`]:{outline:0}});function Ku(t){const{open:n,target:o,onClose:a,children:i,position:s,className:l,onExited:c}=t,d=Qe(t,Gu),u=$s(),m=qs(),p=(e=>{const{classes:t}=e;return _l({root:["menu"]},Cc,t)})(m),h=Vu(),g=e.useRef(null);ls(()=>{n?g.current=document.activeElement instanceof HTMLElement?document.activeElement:null:(g.current?.focus?.(),g.current=null)},[n]),e.useEffect(()=>{const e=n?"menuOpen":"menuClose";u.current.publishEvent(e,{target:o})},[u,n,o]);return r.jsx(Uu,Ge({as:m.slots.basePopper,className:et(p.root,l,h),ownerState:m,open:n,target:o,transition:!0,placement:s,onClickAway:e=>{e.target&&(o===e.target||o?.contains(e.target))||a(e)},onExited:c,clickAwayMouseEvent:"onMouseDown",onKeyDown:e=>{Lu(e.key)&&a(e)}},d,m.slotProps?.basePopper,{children:i}))}const _u=["api","colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"];function Qu(t){const{colDef:n,id:o,hasFocus:a,tabIndex:i,position:s="bottom-end",focusElementRef:l}=t,c=Qe(t,_u),[d,u]=e.useState(-1),[m,p]=e.useState(!1),h=$s(),g=e.useRef(null),f=e.useRef(null),x=e.useRef(!1),b=e.useRef({}),y=mt(),v=Md(),w=Md(),C=qs();if(!(e=>"function"==typeof e.getActions)(n))throw new Error("MUI X: Missing the `getActions` property in the `GridColDef`.");const j=n.getActions(h.current.getRowParams(o)),S=j.filter(e=>!e.props.showInMenu),k=j.filter(e=>e.props.showInMenu),R=S.length+(k.length?1:0);e.useLayoutEffect(()=>{a||Object.entries(b.current).forEach(([e,t])=>{t?.stop({},()=>{delete b.current[e]})})},[a]),e.useEffect(()=>{if(d<0||!g.current)return;if(d>=g.current.children.length)return;g.current.children[d].focus({preventScroll:!0})},[d]),e.useEffect(()=>{a||(u(-1),x.current=!1)},[a]),e.useImperativeHandle(l,()=>({focus(){if(!x.current){const e=j.findIndex(e=>!e.props.disabled);u(e)}}}),[j]),e.useEffect(()=>{d>=R&&u(R-1)},[d,R]);const N=()=>{p(!1)},P=e=>t=>{b.current[e]=t},I=(e,t)=>r=>{u(e),x.current=!0,t&&t(r)};return r.jsxs("div",Ge({role:"menu",ref:g,tabIndex:-1,className:jc.actionsCell,onKeyDown:e=>{if(R<=1)return;const t=(e,r)=>{if(e<0||e>j.length)return e;const n=("left"===r?-1:1)*(y?-1:1);return j[e+n]?.props.disabled?t(e+n,r):e+n};let r=d;"ArrowRight"===e.key?r=t(d,"right"):"ArrowLeft"===e.key&&(r=t(d,"left")),r<0||r>=R||r!==d&&(e.preventDefault(),e.stopPropagation(),u(r))}},c,{children:[S.map((t,r)=>e.cloneElement(t,{key:r,touchRippleRef:P(r),onClick:I(r,t.props.onClick),tabIndex:d===r?i:-1})),k.length>0&&w&&r.jsx(C.slots.baseIconButton,Ge({ref:f,id:w,"aria-label":h.current.getLocaleText("actionsCellMore"),"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?v:void 0,role:"menuitem",size:"small",onClick:e=>{e.stopPropagation(),e.preventDefault(),m?N():(p(!0),u(R-1),x.current=!0)},touchRippleRef:P(w),tabIndex:d===S.length?i:-1},C.slotProps?.baseIconButton,{children:r.jsx(C.slots.moreActionsIcon,{fontSize:"small"})})),k.length>0&&r.jsx(Ku,{open:m,target:f.current,position:s,onClose:N,children:r.jsx(C.slots.baseMenuList,{id:v,className:jc.menuList,"aria-labelledby":w,autoFocusItem:!0,children:k.map((t,r)=>e.cloneElement(t,{key:r,closeMenu:N}))})})]}))}const Xu="actions",Yu=Ge({},Au,{sortable:!1,filterable:!1,aggregable:!1,width:100,display:"flex",align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:e=>r.jsx(Qu,Ge({},e)),getApplyQuickFilterFn:()=>null}),Zu="auto-generated-group-node-root",Ju=Symbol("mui.id_autogenerated");const em=(e,t,r)=>{const n=t?t(e):e.id;return function(e,t,r="A row was provided without id in the rows prop:"){if(null==e)throw new Error(["MUI X: The Data Grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",r,JSON.stringify(t)].join("\n"))}(n,e,r),n},tm=({rows:e,getRowId:t,loading:r,rowCount:n})=>{const o={type:"full",rows:[]},a={};for(let i=0;i<e.length;i+=1){const r=e[i],n=em(r,t);a[n]=r,o.rows.push(n)}return{rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:r,rowCountPropBeforePartialUpdates:n,updates:o,dataRowIdToModelLookup:a}},rm=({tree:e,rowCountProp:t=0})=>{const r=e[Zu];return Math.max(t,r.children.length+(null==r.footerId?0:1))},nm=({apiRef:e,rowCountProp:t=0,loadingProp:r,previousTree:n,previousTreeDepths:o,previousGroupsToFetch:a})=>{const i=e.current.caches.rows,{tree:s,treeDepths:l,dataRowIds:c,groupingName:d,groupsToFetch:u=[]}=e.current.applyStrategyProcessor("rowTreeCreation",{previousTree:n,previousTreeDepths:o,updates:i.updates,dataRowIdToModelLookup:i.dataRowIdToModelLookup,previousGroupsToFetch:a}),m=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:s,treeDepths:l,dataRowIds:c,dataRowIdToModelLookup:i.dataRowIdToModelLookup});return e.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},Ge({},m,{totalRowCount:Math.max(t,m.dataRowIds.length),totalTopLevelRowCount:rm({tree:m.tree,rowCountProp:t}),groupingName:d,loading:r,groupsToFetch:u})},om=e=>"skeletonRow"===e.type||"footer"===e.type||"group"===e.type&&e.isAutoGenerated||"pinnedRow"===e.type&&e.isAutoGenerated,am=(e,t,r)=>{const n=e[t];if("group"!==n.type)return[];const o=[];for(let a=0;a<n.children.length;a+=1){const t=n.children[a];r&&om(e[t])||o.push(t);const i=am(e,t,r);for(let e=0;e<i.length;e+=1)o.push(i[e])}return r||null==n.footerId||o.push(n.footerId),o},im=({previousCache:e,getRowId:t,updates:r,groupKeys:n})=>{if("full"===e.updates.type)throw new Error("MUI X: Unable to prepare a partial update if a full update is not applied yet.");const o=new Map;r.forEach(e=>{const r=em(e,t,"A row was provided without id when calling updateRows():");o.has(r)?o.set(r,Ge({},o.get(r),e)):o.set(r,e)});const a={type:"partial",actions:{insert:[...e.updates.actions.insert??[]],modify:[...e.updates.actions.modify??[]],remove:[...e.updates.actions.remove??[]]},idToActionLookup:Ge({},e.updates.idToActionLookup),groupKeys:n},i=Ge({},e.dataRowIdToModelLookup),s={insert:{},modify:{},remove:{}};o.forEach((e,t)=>{const r=a.idToActionLookup[t];if("delete"===e._action){if("remove"===r||!i[t])return;return null!=r&&(s[r][t]=!0),a.actions.remove.push(t),void delete i[t]}const n=i[t];if(n)return"remove"===r?(s.remove[t]=!0,a.actions.modify.push(t)):null==r&&a.actions.modify.push(t),void(i[t]=Ge({},n,e));"remove"===r?(s.remove[t]=!0,a.actions.insert.push(t)):null==r&&a.actions.insert.push(t),i[t]=e});const l=Object.keys(s);for(let c=0;c<l.length;c+=1){const e=l[c],t=s[e];Object.keys(t).length>0&&(a.actions[e]=a.actions[e].filter(e=>!t[e]))}return{dataRowIdToModelLookup:i,updates:a,rowsBeforePartialUpdates:e.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:e.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:e.rowCountPropBeforePartialUpdates}},sm="var(--DataGrid-overlayHeight, calc(var(--height) * 2))";function lm(e,t,r){const n=[];return t.forEach(t=>{const o=em(t,r,"A row was provided without id when calling updateRows():"),a=ud(e,o);if("pinnedRow"===a?.type){const r=e.current.caches.pinnedRows,n=r.idLookup[o];n&&(r.idLookup[o]=Ge({},n,t))}else n.push(t)}),n}const cm=(e,t,r)=>"number"==typeof e&&e>0?e:t,dm="__row_group_by_columns_group__",um="__detail_panel_toggle__";let mm=function(e){return e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.VIRTUAL=3]="VIRTUAL",e}({});const pm=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","hideDescendantCount"];function hm(t){const{value:n,rowNode:o}=t,a=Qe(t,pm),i=$s(),s=qs(),l=(e=>{const{classes:t}=e;return _l({root:["booleanCell"]},Cc,t)})({classes:s.classes}),c=Uc(i,gd)>0&&"group"===o.type&&!1===s.treeData,d=e.useMemo(()=>n?s.slots.booleanCellTrueIcon:s.slots.booleanCellFalseIcon,[s.slots.booleanCellFalseIcon,s.slots.booleanCellTrueIcon,n]);return c&&void 0===n?null:r.jsx(d,Ge({fontSize:"small",className:l.root,titleAccess:i.current.getLocaleText(n?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(n)},a))}const gm=e.memo(hm),fm=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"];function xm(t){const{id:n,value:o,field:a,className:i,hasFocus:s,onValueChange:l}=t,c=Qe(t,fm),d=$s(),u=e.useRef(null),m=Md(),[p,h]=e.useState(o),g=qs(),f=(e=>{const{classes:t}=e;return _l({root:["editBooleanCell"]},Cc,t)})({classes:g.classes}),x=e.useCallback(async e=>{const t=e.target.checked;l&&await l(e,t),h(t),await d.current.setEditCellValue({id:n,field:a,value:t},e)},[d,a,n,l]);return e.useEffect(()=>{h(o)},[o]),ls(()=>{s&&u.current.focus()},[s]),r.jsx("label",Ge({htmlFor:m,className:et(f.root,i)},c,{children:r.jsx(g.slots.baseCheckbox,Ge({id:m,inputRef:u,checked:Boolean(p),onChange:x,size:"small"},g.slotProps?.baseCheckbox))}))}const bm=["item","applyValue","apiRef","focusElementRef","isFilterActive","headerFilterMenu","clearButton","tabIndex","slotProps"];function ym(t){const{item:n,applyValue:o,apiRef:a,focusElementRef:i,headerFilterMenu:s,clearButton:l,tabIndex:c,slotProps:d}=t,u=Qe(t,bm),[m,p]=e.useState(vm(n.value)),h=qs(),g=Md(),f=Md(),x=h.slotProps?.baseSelect||{},b=x.native??!1,y=h.slotProps?.baseSelectOption||{},v=e.useCallback(e=>{const t=vm(e.target.value);p(t),o(Ge({},n,{value:t}))},[o,n]);e.useEffect(()=>{p(vm(n.value))},[n.value]);const w=d?.root.label??a.current.getLocaleText("filterPanelInputLabel"),C=d?.root.slotProps;return r.jsxs(e.Fragment,{children:[r.jsxs(h.slots.baseSelect,Ge({fullWidth:!0,labelId:g,id:f,label:w,value:void 0===m?"":String(m),onChange:v,native:b,slotProps:{htmlInput:Ge({ref:i,tabIndex:c},C?.htmlInput)}},x,u,d?.root,{children:[r.jsx(h.slots.baseSelectOption,Ge({},y,{native:b,value:"",children:a.current.getLocaleText("filterValueAny")})),r.jsx(h.slots.baseSelectOption,Ge({},y,{native:b,value:"true",children:a.current.getLocaleText("filterValueTrue")})),r.jsx(h.slots.baseSelectOption,Ge({},y,{native:b,value:"false",children:a.current.getLocaleText("filterValueFalse")}))]})),s,l]})}function vm(e){return"true"===String(e).toLowerCase()||"false"!==String(e).toLowerCase()&&void 0}const wm=Ge({},Au,{type:"boolean",display:"flex",align:"center",headerAlign:"center",renderCell:e=>e.field!==dm&&om(e.rowNode)?"":r.jsx(gm,Ge({},e)),renderEditCell:e=>r.jsx(xm,Ge({},e)),sortComparator:Rd,valueFormatter:(e,t,r,n)=>e?n.current.getLocaleText("booleanCellTrueLabel"):n.current.getLocaleText("booleanCellFalseLabel"),filterOperators:[{value:"is",getApplyFilterFn:e=>{const t=vm(e.value);return void 0===t?null:e=>Boolean(e)===t},InputComponent:ym}],getApplyQuickFilterFn:()=>null,aggregable:!1,pastedValueParser:e=>(e=>{switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"null":case"undefined":return!1;default:return}})(e)});function Cm(e){for(const t in e)return!1;return!0}const jm=Jl(e=>e.sorting),Sm=Yl(jm,e=>e.sortedRows),km=Zl(Sm,cd,dd,(e,t,r)=>e.reduce((e,n)=>{const o=t[n];if(o)e.push({id:n,model:o});else{const t=r[n];t&&om(t)&&e.push({id:n,model:{[Ju]:n}})}return e},[])),Rm=Yl(jm,e=>e.sortModel),Nm=Zl(Rm,e=>e.reduce((t,r,n)=>(t[r.field]={sortDirection:r.sort,sortIndex:e.length>1?n+1:void 0},t),{}));Zl(Sm,e=>e.reduce((e,t,r)=>(e[t]=r,e),Object.create(null)));const Pm=Jl(e=>e.filter),Im=Yl(Pm,e=>e.filterModel),Mm=Yl(Im,e=>e.quickFilterValues),Dm=Jl(e=>e.visibleRowsLookup),Tm=Yl(Pm,e=>e.filteredRowsLookup);Yl(Pm,e=>e.filteredChildrenCountLookup),Yl(Pm,e=>e.filteredDescendantCountLookup);const Em=Zl(Dm,km,(e,t)=>Cm(e)?t:t.filter(t=>!1!==e[t.id])),Fm=Zl(Em,e=>e.map(e=>e.id)),Am=Zl(Tm,km,(e,t)=>Cm(e)?t:t.filter(t=>!1!==e[t.id])),Om=Zl(Am,e=>e.map(e=>e.id));Zl(Fm,dd,(e,t)=>{const r={};let n=0;return e.reduce((e,o)=>{const a=t[o];return r[a.depth]||(r[a.depth]=0),a.depth>n&&(r[a.depth]=0),n=a.depth,r[a.depth]+=1,e[o]=r[a.depth],e},{})});const Hm=Zl(Em,dd,gd,(e,t,r)=>r<2?e:e.filter(e=>0===t[e.id]?.depth)),Lm=Yl(Em,e=>e.length),$m=Yl(Hm,e=>e.length),zm=Yl(Am,e=>e.length);Yl(zm,$m,(e,t)=>e-t);const qm=Zl(Im,su,(e,t)=>e.items?.filter(e=>{if(!e.field)return!1;const r=t[e.field];if(!r?.filterOperators||0===r?.filterOperators?.length)return!1;const n=r.filterOperators.find(t=>t.value===e.operator);return!!n&&(!n.InputComponent||null!=e.value&&""!==e.value?.toString())})),Bm=Zl(qm,e=>e.reduce((e,t)=>(e[t.field]?e[t.field].push(t):e[t.field]=[t],e),{})),Vm=Jl(e=>e.rowSelection),Wm=Zl(Vm,Kd),Gm=Yl(Vm,zm,(e,t)=>"include"===e.type?e.ids.size:t-e.ids.size),Um=Zl(Vm,cd,fd,(e,t,r)=>{const n=new Map;if("include"===e.type)for(const o of e.ids)n.set(o,t[o]);else for(let o=0;o<r.length;o+=1){const a=r[o];e.ids.has(a)||n.set(a,t[a])}return n});function Km(e,t){const r=dd(e),n=Sm(e),o=Tm(e),a=r[t];if(!a||"group"!==a.type)return[];const i=[];for(let s=n.findIndex(e=>e===t)+1;s<n.length&&r[n[s]]?.depth>a.depth;s+=1){const t=n[s];!1!==o[t]&&e.current.isRowSelectable(t)&&i.push(t)}return i}const _m=Yl(dd,Tm,Wm,(e,t,r,{groupId:n,autoSelectParents:o})=>{const a=e[n];if(!a||"group"!==a.type||r.has(n))return{isIndeterminate:!1,isChecked:r.has(n)};let i=!1,s=!1;const l=n=>{if(!1===t[n]||i&&s)return;const o=e[n];"group"===o?.type&&o.children.forEach(l),r.has(n)?i=!0:s=!0};return l(n),{isIndeterminate:i&&s,isChecked:!!o&&(i&&!s)}});function Qm(e){return e.signature===Sc.DataGrid?e.checkboxSelection&&!0!==e.disableMultipleRowSelection:!e.disableMultipleRowSelection}const Xm=(e,t,r,n,o,a,i=Wm(e))=>{const s=Tm(e),l=new Set([]);if((n||o)&&!1!==s[r]){if(n){const n=t[r];if("group"===n?.type){Km(e,r).forEach(e=>{a(e),l.add(e)})}}if(o){const n=e=>{if(!i.has(e)&&!l.has(e))return!1;const r=t[e];return!!r&&("group"!==r.type||r.children.every(n))},o=r=>{const i=((e,t,r)=>{const n=e[r];if(!n)return[];const o=n.parent;return null==o?[]:e[o].children.filter(e=>e!==r&&!1!==t[e])})(t,s,r);if(0===i.length||i.every(n)){const n=t[r],i=n?.parent;null!=i&&i!==Zu&&e.current.isRowSelectable(i)&&(a(i),l.add(i),o(i))}};o(r)}}},Ym=(e,t,r,n,o,a)=>{const i=Wm(e);if(o||n){if(o){const e=((e,t)=>{const r=[];let n=t;for(;null!=n&&n!==Zu;){const t=e[n];if(!t)return r;r.push(n),n=t.parent}return r})(t,r);e.forEach(e=>{i.has(e)&&a(e)})}if(n){const n=t[r];if("group"===n?.type){Km(e,r).forEach(e=>{a(e)})}}}},Zm=["field","id","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],Jm=us(function(t,n){const{field:o,id:a,rowNode:i,tabIndex:s}=t,l=Qe(t,Zm),c=$s(),d=qs(),u=(e=>{const{classes:t}=e;return _l({root:["checkboxInput"]},Cc,t)})({classes:d.classes});e.useLayoutEffect(()=>{if(0===s){const e=c.current.getCellElement(a,o);e&&(e.tabIndex=-1)}},[c,s,a,o]);const m=e.useCallback(e=>{" "===e.key&&e.stopPropagation()},[]),p=c.current.isRowSelectable(a),{isIndeterminate:h,isChecked:g}=Uc(c,_m,{groupId:a,autoSelectParents:d.rowSelectionPropagation?.parents??!1});if("footer"===i.type||"pinnedRow"===i.type)return null;const f=c.current.getLocaleText(g&&!h?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return r.jsx(d.slots.baseCheckbox,Ge({tabIndex:s,checked:g&&!h,onChange:e=>{const t={value:e.target.checked,id:a};c.current.publishEvent("rowSelectionCheckboxChange",t,e)},className:u.root,slotProps:{htmlInput:{"aria-label":f,name:"select_row"}},onKeyDown:m,indeterminate:h,disabled:!p},d.slotProps?.baseCheckbox,l,{ref:n}))}),ep=Jl(e=>e.focus),tp=Yl(ep,e=>e.cell),rp=Yl(ep,e=>e.columnHeader);Yl(ep,e=>e.columnHeaderFilter);const np=Yl(ep,e=>e.columnGroupHeader),op=Jl(e=>e.tabIndex),ap=Yl(op,e=>e.cell),ip=Yl(op,e=>e.columnHeader);Yl(op,e=>e.columnHeaderFilter);const sp=Yl(op,e=>e.columnGroupHeader),lp=(e,t,r)=>t>0&&e>0?Math.ceil(e/t):-1===e?r+2:0,cp=e=>({page:0,pageSize:e?0:100}),dp=(e,t)=>{if(t===Sc.DataGrid&&e>100)throw new Error(["MUI X: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"))},up=Jl(e=>e.pagination),mp=Yl(up,e=>e.enabled&&"client"===e.paginationMode),pp=Yl(up,e=>e.paginationModel),hp=Yl(up,e=>e.rowCount),gp=Yl(up,e=>e.meta),fp=Yl(pp,e=>e.page),xp=Yl(pp,e=>e.pageSize),bp=Yl(pp,hp,(e,t)=>lp(t,e.pageSize,e.page)),yp=Zl(mp,pp,dd,gd,Em,Hm,(e,t,r,n,o,a)=>{if(!e)return null;const i=a.length,s=Math.min(t.pageSize*t.page,i-1),l=-1===t.pageSize?i-1:Math.min(s+t.pageSize-1,i-1);if(-1===s||-1===l)return null;if(n<2)return{firstRowIndex:s,lastRowIndex:l};const c=a[s],d=l-s+1,u=o.findIndex(e=>e.id===c.id);let m=u,p=0;for(;m<o.length&&p<=d;){const e=o[m],t=r[e.id]?.depth;void 0===t?m+=1:((p<d||t>0)&&(m+=1),0===t&&(p+=1))}return{firstRowIndex:u,lastRowIndex:m-1}}),vp=Zl(Em,yp,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),wp=Zl(Fm,yp,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),Cp=Zl(mp,yp,vp,Em,(e,t,r,n)=>e?{rows:r,range:t,rowIdToIndexMap:r.reduce((e,t,r)=>(e.set(t.id,r),e),new Map)}:{rows:n,range:0===n.length?null:{firstRowIndex:0,lastRowIndex:n.length-1},rowIdToIndexMap:n.reduce((e,t,r)=>(e.set(t.id,r),e),new Map)}),jp=["field","colDef"],Sp=us(function(t,n){const o=Qe(t,jp),[,a]=e.useState(!1),i=$s(),s=qs(),l=(e=>{const{classes:t}=e;return _l({root:["checkboxInput"]},Cc,t)})({classes:s.classes}),c=Uc(i,ip),d=Uc(i,Vm),u=Uc(i,Fm),m=Uc(i,wp),p=e.useMemo(()=>{const e=s.isRowSelectable;if("function"!=typeof e)return d;if("exclude"===d.type)return d;const t={type:"include",ids:new Set};for(const r of d.ids)s.keepNonExistentRowsSelected&&t.ids.add(r),i.current.getRow(r)&&e(i.current.getRowParams(r))&&t.ids.add(r);return t},[i,s.isRowSelectable,s.keepNonExistentRowsSelected,d]),h=e.useMemo(()=>{const e=s.pagination&&s.checkboxSelectionVisibleOnly&&"server"!==s.paginationMode?m:u,t=new Set;for(let r=0;r<e.length;r+=1){const n=e[r];i.current.getRow(n)&&(i.current.isRowSelectable(n)&&t.add(n))}return t},[i,s.pagination,s.paginationMode,s.checkboxSelectionVisibleOnly,m,u]),g=e.useMemo(()=>{const e=Kd(p);let t=0;for(const r of h)e.has(r)&&(t+=1);return t},[p,h]),f=e.useMemo(()=>{if(0===p.ids.size)return!1;const e=Kd(p);for(const t of h)if(!e.has(t))return!0;return!1},[p,h]),x=g>0,b=null!==c&&c.field===t.field?0:-1;e.useLayoutEffect(()=>{const e=i.current.getColumnHeaderElement(t.field);0===b&&e&&(e.tabIndex=-1)},[b,i,t.field]);const y=e.useCallback(e=>{" "===e.key&&i.current.publishEvent("headerSelectionCheckboxChange",{value:!x})},[i,x]),v=e.useCallback(()=>{a(e=>!e)},[]);e.useEffect(()=>i.current.subscribeEvent("rowSelectionChange",v),[i,v]);const w=i.current.getLocaleText(x&&!f?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return r.jsx(s.slots.baseCheckbox,Ge({indeterminate:f,checked:x&&!f,onChange:e=>{const t={value:e.target.checked};i.current.publishEvent("headerSelectionCheckboxChange",t)},className:l.root,slotProps:{htmlInput:{"aria-label":w,name:"select_all_rows"}},tabIndex:b,onKeyDown:y,disabled:!Qm(s)},s.slotProps?.baseCheckbox,o,{ref:n}))}),kp=Jl((e,t)=>Ju in t?t[Ju]:e.props.getRowId?e.props.getRowId(t):t.id),Rp="__check__",Np=Ge({},wm,{type:"custom",field:Rp,width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:()=>null,display:"flex",valueGetter:(e,t,r,n)=>{const o=kp(n,t);return n.current.isRowSelected(o)},renderHeader:e=>r.jsx(Sp,Ge({},e)),renderCell:e=>r.jsx(Jm,Ge({},e))}),Pp=["item","applyValue","type","apiRef","focusElementRef","slotProps","isFilterActive","headerFilterMenu","clearButton","tabIndex","disabled"];function Ip(e,t){if(null==e)return"";const r=new Date(e);return Number.isNaN(r.getTime())?"":"date"===t?r.toISOString().substring(0,10):"datetime-local"===t?(r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),r.toISOString().substring(0,19)):r.toISOString().substring(0,10)}function Mp(t){const{item:n,applyValue:o,type:a,apiRef:i,focusElementRef:s,slotProps:l,headerFilterMenu:c,clearButton:d,tabIndex:u,disabled:m}=t,p=Qe(t,Pp),h=l?.root.slotProps,g=Jc(),[f,x]=e.useState(()=>Ip(n.value,a)),[b,y]=e.useState(!1),v=Md(),w=qs(),C=e.useCallback(e=>{g.clear();const t=e.target.value;x(t),y(!0),g.start(w.filterDebounceMs,()=>{const e=new Date(t);o(Ge({},n,{value:Number.isNaN(e.getTime())?void 0:e})),y(!1)})},[o,n,w.filterDebounceMs,g]);return e.useEffect(()=>{const e=Ip(n.value,a);x(e)},[n.value,a]),r.jsxs(e.Fragment,{children:[r.jsx(w.slots.baseTextField,Ge({fullWidth:!0,id:v,label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),value:f,onChange:C,type:a||"text",disabled:m,inputRef:s,slotProps:Ge({},h,{input:Ge({endAdornment:b?r.jsx(w.slots.loadIcon,{fontSize:"small",color:"action"}):null},h?.input),htmlInput:Ge({max:"datetime-local"===a?"9999-12-31T23:59":"9999-12-31",tabIndex:u},h?.htmlInput)})},w.slotProps?.baseTextField,p,l?.root)),c,d]})}function Dp(e,t,r,n){if(!e.value)return null;const o=new Date(e.value);r?o.setSeconds(0,0):(o.setMinutes(o.getMinutes()+o.getTimezoneOffset()),o.setHours(0,0,0,0));const a=o.getTime();return e=>{if(!e)return!1;if(n)return t(e.getTime(),a);const o=new Date(e);return r?o.setSeconds(0,0):o.setHours(0,0,0,0),t(o.getTime(),a)}}const Tp=e=>[{value:"is",getApplyFilterFn:t=>Dp(t,(e,t)=>e===t,e),InputComponent:Mp,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:t=>Dp(t,(e,t)=>e!==t,e),InputComponent:Mp,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:t=>Dp(t,(e,t)=>e>t,e),InputComponent:Mp,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:t=>Dp(t,(e,t)=>e>=t,e),InputComponent:Mp,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:t=>Dp(t,(e,t)=>e<t,e,!e),InputComponent:Mp,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:t=>Dp(t,(e,t)=>e<=t,e),InputComponent:Mp,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:()=>e=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>e=>null!=e,requiresFilterValue:!1}],Ep=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange","slotProps"],Fp=x(td)({fontSize:"inherit"});function Ap(t){const{id:n,value:o,field:a,colDef:i,hasFocus:s,onValueChange:l,slotProps:c}=t,d=Qe(t,Ep),u="dateTime"===i.type,m=$s(),p=e.useRef(null),h=e.useMemo(()=>{let e,t;if(e=null==o?null:o instanceof Date?o:new Date((o??"").toString()),null==e||Number.isNaN(e.getTime()))t="";else{t=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().substr(0,u?16:10)}return{parsed:e,formatted:t}},[o,u]),[g,f]=e.useState(h),x=qs(),b=(e=>{const{classes:t}=e;return _l({root:["editInputCell"]},Cc,t)})({classes:x.classes}),y=e.useCallback(e=>{if(""===e)return null;const[t,r]=e.split("T"),[n,o,a]=t.split("-"),i=new Date;if(i.setFullYear(Number(n),Number(o)-1,Number(a)),i.setHours(0,0,0,0),r){const[e,t]=r.split(":");i.setHours(Number(e),Number(t),0,0)}return i},[]),v=e.useCallback(async e=>{const t=e.target.value,r=y(t);l&&await l(e,r),f({parsed:r,formatted:t}),m.current.setEditCellValue({id:n,field:a,value:r},e)},[m,a,n,l,y]);return e.useEffect(()=>{f(e=>h.parsed!==e.parsed&&h.parsed?.getTime()!==e.parsed?.getTime()?h:e)},[h]),ls(()=>{s&&p.current.focus()},[s]),r.jsx(Fp,Ge({as:x.slots.baseInput,inputRef:p,fullWidth:!0,className:b.root,type:u?"datetime-local":"date",value:g.formatted,onChange:v},d,c?.root,{slotProps:{htmlInput:Ge({max:u?"9999-12-31T23:59":"9999-12-31"},c?.root?.slotProps?.htmlInput)}}))}const Op=e=>r.jsx(Ap,Ge({},e));function Hp({value:e,columnType:t,rowId:r,field:n}){if(!(e instanceof Date))throw new Error([`MUI X: \`${t}\` column type only accepts \`Date\` objects as values.`,"Use `valueGetter` to transform the value into a `Date` object.",`Row ID: ${r}, field: "${n}".`].join("\n"))}const Lp=Ge({},Au,{type:"date",sortComparator:Nd,valueFormatter:(e,t,r,n)=>{if(!e)return"";return Hp({value:e,columnType:"date",rowId:kp(n,t),field:r.field}),e.toLocaleDateString()},filterOperators:Tp(),renderEditCell:Op,pastedValueParser:e=>new Date(e)}),$p=Ge({},Au,{type:"dateTime",sortComparator:Nd,valueFormatter:(e,t,r,n)=>{if(!e)return"";return Hp({value:e,columnType:"dateTime",rowId:kp(n,t),field:r.field}),e.toLocaleString()},filterOperators:Tp(!0),renderEditCell:Op,pastedValueParser:e=>new Date(e)}),zp=e=>null==e?null:Number(e),qp=Ge({},Au,{type:"number",align:"right",headerAlign:"right",sortComparator:Rd,valueParser:e=>""===e?null:Number(e),valueFormatter:e=>function(e){return"number"==typeof e&&!Number.isNaN(e)}(e)?e.toLocaleString():e||"",filterOperators:[{value:"=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>zp(t)===e.value,InputComponent:Td,InputComponentProps:{type:"number"}},{value:"!=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>zp(t)!==e.value,InputComponent:Td,InputComponentProps:{type:"number"}},{value:">",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&zp(t)>e.value,InputComponent:Td,InputComponentProps:{type:"number"}},{value:">=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&zp(t)>=e.value,InputComponent:Td,InputComponentProps:{type:"number"}},{value:"<",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&zp(t)<e.value,InputComponent:Td,InputComponentProps:{type:"number"}},{value:"<=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&zp(t)<=e.value,InputComponent:Td,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:()=>e=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>e=>null!=e,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:e=>Array.isArray(e.value)&&0!==e.value.length?t=>null!=t&&e.value.includes(Number(t)):null,InputComponent:zd,InputComponentProps:{type:"number"}}],getApplyQuickFilterFn:e=>null==e||Number.isNaN(e)||""===e?null:t=>zp(t)===zp(e)});function Bp(e){return"singleSelect"===e?.type}function Vp(e,t){if(e)return"function"==typeof e.valueOptions?e.valueOptions(Ge({field:e.field},t)):e.valueOptions}function Wp(e,t,r){if(void 0===t)return;const n=t.find(t=>{const n=r(t);return String(n)===String(e)});return r(n)}const Gp=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen","slotProps"];function Up(t){const n=qs(),{id:o,value:a,field:i,row:s,colDef:l,hasFocus:c,error:d,onValueChange:u,initialOpen:m=n.editMode===qd.Cell,slotProps:p}=t,h=Qe(t,Gp),g=$s(),f=e.useRef(null),x=e.useRef(null),[b,y]=e.useState(m),v=(n.slotProps?.baseSelect||{}).native??!1;if(ls(()=>{c&&x.current?.focus()},[c]),!Bp(l))return null;const w=Vp(l,{id:o,row:s});if(!w)return null;const C=l.getOptionValue,j=l.getOptionLabel;return w&&l?r.jsx(n.slots.baseSelect,Ge({ref:f,value:a,onChange:async e=>{if(!Bp(l)||!w)return;y(!1);const t=Wp(e.target.value,w,C);u&&await u(e,t),await g.current.setEditCellValue({id:o,field:i,value:t},e)},open:b,onOpen:e=>{(function(e){return!!e.key})(e)&&"Enter"===e.key||y(!0)},onClose:(e,t)=>{if(n.editMode!==qd.Row){if("backdropClick"===t||"Escape"===e.key){const t=g.current.getCellParams(o,i);g.current.publishEvent("cellEditStop",Ge({},t,{reason:"Escape"===e.key?Qd.escapeKeyDown:Qd.cellFocusOut}))}}else y(!1)},error:d,native:v,fullWidth:!0,slotProps:{htmlInput:{ref:x}}},h,p?.root,n.slotProps?.baseSelect,{children:w.map(t=>{const r=C(t);return e.createElement(n.slots.baseSelectOption,Ge({},n.slotProps?.baseSelectOption||{},{native:v,key:r,value:r}),j(t))})})):null}const Kp=["item","applyValue","type","apiRef","focusElementRef","tabIndex","isFilterActive","clearButton","headerFilterMenu","slotProps"],_p=({column:t,OptionComponent:r,getOptionLabel:n,getOptionValue:o,isSelectNative:a,baseSelectOptionProps:i})=>["",...Vp(t)||[]].map(t=>{const s=o(t);let l=n(t);return""===l&&(l=" "),e.createElement(r,Ge({},i,{native:a,key:s,value:s}),l)});function Qp(t){const{item:n,applyValue:o,type:a,apiRef:i,focusElementRef:s,tabIndex:l,clearButton:c,headerFilterMenu:d,slotProps:u}=t,m=Qe(t,Kp),p=n.value??"",h=Md(),g=Md(),f=qs(),x=f.slotProps?.baseSelect?.native??!1;let b=null;if(n.field){const e=i.current.getColumn(n.field);Bp(e)&&(b=e)}const y=b?.getOptionValue,v=b?.getOptionLabel,w=e.useMemo(()=>Vp(b),[b]),C=e.useCallback(e=>{let t=e.target.value;t=Wp(t,w,y),o(Ge({},n,{value:t}))},[w,y,o,n]);if(!Bp(b))return null;const j=u?.root.label??i.current.getLocaleText("filterPanelInputLabel");return r.jsxs(e.Fragment,{children:[r.jsx(f.slots.baseSelect,Ge({fullWidth:!0,id:h,label:j,labelId:g,value:p,onChange:C,slotProps:{htmlInput:Ge({tabIndex:l,ref:s,type:a||"text",placeholder:u?.root.placeholder??i.current.getLocaleText("filterPanelInputPlaceholder")},u?.root.slotProps?.htmlInput)},native:x},f.slotProps?.baseSelect,m,u?.root,{children:_p({column:b,OptionComponent:f.slots.baseSelectOption,getOptionLabel:v,getOptionValue:y,isSelectNative:x,baseSelectOptionProps:f.slotProps?.baseSelectOption})})),d,c]})}const Xp=["item","applyValue","type","apiRef","focusElementRef","slotProps"];function Yp(t){const{item:n,applyValue:o,type:a,apiRef:i,focusElementRef:s,slotProps:l}=t,c=Qe(t,Xp),d=Md(),u=qs();let m=null;if(n.field){const e=i.current.getColumn(n.field);Bp(e)&&(m=e)}const p=m?.getOptionValue,h=m?.getOptionLabel,g=e.useCallback((e,t)=>p(e)===p(t),[p]),f=e.useMemo(()=>Vp(m)||[],[m]),x=e.useMemo(()=>Array.isArray(n.value)?n.value.reduce((e,t)=>{const r=f.find(e=>p(e)===t);return null!=r&&e.push(r),e},[]):[],[p,n.value,f]),b=e.useCallback((e,t)=>{o(Ge({},n,{value:t.map(p)}))},[o,n,p]),y=u.slots.baseAutocomplete;return r.jsx(y,Ge({multiple:!0,options:f,isOptionEqualToValue:g,id:d,value:x,onChange:b,getOptionLabel:h,label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),slotProps:{textField:{type:a||"text",inputRef:s}}},c,l?.root))}const Zp=e=>null!=e&&Fd(e)?e.value:e,Jp=Ge({},Au,{type:"singleSelect",getOptionLabel:e=>Fd(e)?e.label:String(e),getOptionValue:e=>Fd(e)?e.value:e,valueFormatter(e,t,r,n){const o=kp(n,t);if(!Bp(r))return"";const a=Vp(r,{id:o,row:t});if(null==e)return"";if(!a)return e;if("object"!=typeof a[0])return r.getOptionLabel(e);const i=a.find(t=>r.getOptionValue(t)===e);return i?r.getOptionLabel(i):""},renderEditCell:e=>r.jsx(Up,Ge({},e)),filterOperators:[{value:"is",getApplyFilterFn:e=>null==e.value||""===e.value?null:t=>Zp(t)===Zp(e.value),InputComponent:Qp},{value:"not",getApplyFilterFn:e=>null==e.value||""===e.value?null:t=>Zp(t)!==Zp(e.value),InputComponent:Qp},{value:"isAnyOf",getApplyFilterFn:e=>{if(!Array.isArray(e.value)||0===e.value.length)return null;const t=e.value.map(Zp);return e=>t.includes(Zp(e))},InputComponent:Yp}],pastedValueParser:(e,t,r)=>{const n=r,o=Vp(n)||[],a=n.getOptionValue;if(o.find(t=>a(t)===e))return e}}),eh=Jl(e=>e.headerFiltering),th=Yl(eh,e=>e?.enabled??!1),rh=Yl(eh,e=>e.editing),nh=Yl(eh,e=>e.menuOpen),oh=Jl(e=>e.columnGrouping),ah=Zl(oh,e=>e?.unwrappedGroupingModel??{}),ih=Zl(oh,e=>e?.lookup??{}),sh=Zl(oh,e=>e?.headerStructure??[]),lh=Yl(oh,e=>e?.maxDepth??0),ch=["maxWidth","minWidth","width","flex"],dh={string:Au,number:qp,date:Lp,dateTime:$p,boolean:wm,singleSelect:Jp,[Xu]:Yu,custom:Au};const uh=(e,t)=>{const r={};let n=0,o=0;const a=[];e.orderedFields.forEach(t=>{let i=e.lookup[t],s=0,l=!1;!1!==e.columnVisibilityModel[t]&&(i.flex&&i.flex>0?(n+=i.flex,l=!0):s=Od(i.width||Au.width,i.minWidth||Au.minWidth,i.maxWidth||Au.maxWidth),o+=s),i.computedWidth!==s&&(i=Ge({},i,{computedWidth:s})),l&&a.push(i),r[t]=i});const i=void 0===t?0:t.viewportOuterSize.width-(t.hasScrollY?t.scrollbarSize:0),s=Math.max(i-o,0);if(n>0&&i>0){const e=function({initialFreeSpace:e,totalFlexUnits:t,flexColumns:r}){const n=new Set(r.map(e=>e.field)),o={all:{},frozenFields:[],freeze:e=>{const t=o.all[e];t&&!0!==t.frozen&&(o.all[e].frozen=!0,o.frozenFields.push(e))}};return function a(){if(o.frozenFields.length===n.size)return;const i={min:{},max:{}};let s=e,l=t,c=0;o.frozenFields.forEach(e=>{s-=o.all[e].computedWidth,l-=o.all[e].flex});for(let e=0;e<r.length;e+=1){const t=r[e];if(o.all[t.field]&&!0===o.all[t.field].frozen)continue;let n=s/l*t.flex;n<t.minWidth?(c+=t.minWidth-n,n=t.minWidth,i.min[t.field]=!0):n>t.maxWidth&&(c+=t.maxWidth-n,n=t.maxWidth,i.max[t.field]=!0),o.all[t.field]={frozen:!1,computedWidth:n,flex:t.flex}}c<0?Object.keys(i.max).forEach(e=>{o.freeze(e)}):c>0?Object.keys(i.min).forEach(e=>{o.freeze(e)}):r.forEach(({field:e})=>{o.freeze(e)}),a()}(),o.all}({initialFreeSpace:s,totalFlexUnits:n,flexColumns:a});Object.keys(e).forEach(t=>{r[t]=Ge({},r[t],{computedWidth:e[t].computedWidth})})}return Ge({},e,{lookup:r})};function mh(e){let t=dh.string;return e&&dh[e]&&(t=dh[e]),t}const ph=({apiRef:e,columnsToUpsert:t,initialState:r,columnVisibilityModel:n=cu(e),keepOnlyColumnsToUpsert:o=!1,updateInitialVisibilityModel:a=!1})=>{const i=!e.current.state.columns;let s;if(i)s={orderedFields:[],lookup:{},columnVisibilityModel:n,initialColumnVisibilityModel:n};else{const t=au(e);s={orderedFields:o?[]:[...t.orderedFields],lookup:Ge({},t.lookup),columnVisibilityModel:n,initialColumnVisibilityModel:a?n:t.initialColumnVisibilityModel}}let l={};o&&!i&&(l=Object.keys(s.lookup).reduce((e,t)=>Ge({},e,{[t]:!1}),{})),t.forEach(e=>{const{field:t}=e;l[t]=!0;let r=s.lookup[t];null==r?(r=Ge({},mh(e.type),{field:t,hasBeenResized:!1}),s.orderedFields.push(t)):o&&s.orderedFields.push(t),r&&r.type!==e.type&&(r=Ge({},mh(e.type),{field:t}));let n=r.hasBeenResized;ch.forEach(t=>{void 0!==e[t]&&(n=!0,-1===e[t]&&(e[t]=1/0))}),s.lookup[t]=ed(r,Ge({},mh(e.type),e,{hasBeenResized:n}))}),o&&!i&&Object.keys(s.lookup).forEach(e=>{l[e]||delete s.lookup[e]});const c=((e,t)=>{if(!t)return e;const{orderedFields:r=[],dimensions:n={}}=t,o=Object.keys(n);if(0===o.length&&0===r.length)return e;const a={},i=[];for(let c=0;c<r.length;c+=1){const t=r[c];e.lookup[t]&&(a[t]=!0,i.push(t))}const s=0===i.length?e.orderedFields:[...i,...e.orderedFields.filter(e=>!a[e])],l=Ge({},e.lookup);for(let c=0;c<o.length;c+=1){const e=o[c],t=Ge({},l[e],{hasBeenResized:!0});Object.entries(n[e]).forEach(([e,r])=>{t[e]=-1===r?1/0:r}),l[e]=t}return Ge({},e,{orderedFields:s,lookup:l})})(e.current.unstable_applyPipeProcessors("hydrateColumns",s),r);return uh(c,e.current.getRootDimensions?.()??void 0)};function hh(e,t){if(t.listView)return 0;const r=Qc(e),n=lh(e),o=th(e);return Math.floor(t.columnHeaderHeight*r)+Math.floor((t.columnGroupHeaderHeight??t.columnHeaderHeight)*r)*n+(o?Math.floor((t.headerFilterHeight??t.columnHeaderHeight)*r):0)}const gh=pt("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:(e,t)=>[{[`&.${jc["scrollArea--left"]}`]:t["scrollArea--left"]},{[`&.${jc["scrollArea--right"]}`]:t["scrollArea--right"]},t.scrollArea]})(()=>({position:"absolute",top:0,zIndex:101,width:20,bottom:0,[`&.${jc["scrollArea--left"]}`]:{left:0},[`&.${jc["scrollArea--right"]}`]:{right:0}})),fh=Yl(tc,(e,t)=>"left"===t?e.leftPinnedWidth:"right"===t?e.rightPinnedWidth+(e.hasScrollX?e.scrollbarSize:0):0);function xh(t){const{scrollDirection:n,scrollPosition:o}=t,a=e.useRef(null),i=$s(),s=Jc(),l=Uc(i,Qc),c=Uc(i,rc),d=Uc(i,fh,n),u=()=>{const e=tc(i);if("left"===n)return o.current.left>0;if("right"===n){const t=c-e.viewportInnerSize.width;return o.current.left<t}return!1},[m,p]=e.useState(u),h=qs(),g=Ge({},h,{scrollDirection:n}),f=(e=>{const{scrollDirection:t,classes:r}=e;return _l({root:["scrollArea",`scrollArea--${t}`]},Cc,r)})(g),x=hh(i,h),b=Math.floor(h.columnHeaderHeight*l),y={height:b,top:x-b};"left"===n?y.left=d:"right"===n&&(y.right=d);const v=cs(e=>{let t;if(e.preventDefault(),"left"===n)t=e.clientX-a.current.getBoundingClientRect().right;else{if("right"!==n)throw new Error("MUI X: Wrong drag direction");t=Math.max(1,e.clientX-a.current.getBoundingClientRect().left)}t=1.5*(t-1)+1,s.start(0,()=>{i.current.scroll({left:o.current.left+t,top:o.current.top})})});return Mc(i,"scrollPositionChange",()=>{p(u)}),m?r.jsx(gh,{ref:a,className:f.root,ownerState:g,onDragOver:v,style:y}):null}const bh=gc(function(t){const n=$s(),[o,a]=e.useState(!1);return Mc(n,"columnHeaderDragStart",()=>a(!0)),Mc(n,"columnHeaderDragEnd",()=>a(!1)),o?r.jsx(xh,Ge({},t)):null}),yh=e.createContext(void 0);function vh(){const t=e.useContext(yh);if(void 0===t)throw new Error(["MUI X: Could not find the Data Grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join("\n"));return t}const wh=()=>{};function Ch(t,r,n){const o=e.useRef(!0);ls(()=>{o.current=!1,t.current.register(n,r)},[t,n,r]),o.current&&t.current.register(n,r)}function jh(t,r){const n=e.useRef(null);if(n.current)return n.current;const o=t.current.getLogger(r);return n.current=o,o}const Sh=(e,t,r,n,o)=>{const a=jh(e,"useNativeEventListener");Tc(e,"rootMount",()=>{const e=t();if(e&&r)return a.debug(`Binding native ${r} event`),e.addEventListener(r,n,o),()=>{a.debug(`Clearing native ${r} event`),e.removeEventListener(r,n,o)}})},kh=t=>{const r=e.useRef(!0);r.current&&(r.current=!1,t())},Rh=(e,t)=>Cp(e),Nh=(e,t)=>Uc(e,Cp),Ph=("undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"empty").includes("firefox"),Ih=Jl(e=>e.rowsMeta),Mh=Jl(e=>e.virtualization);Yl(Mh,e=>e.enabled);const Dh=Yl(Mh,e=>e.enabledForColumns),Th=Yl(Mh,e=>e.enabledForRows),Eh=Yl(Mh,e=>e.renderContext),Fh=Zl(Jl(e=>e.virtualization.renderContext.firstColumnIndex),Jl(e=>e.virtualization.renderContext.lastColumnIndex),(e,t)=>({firstColumnIndex:e,lastColumnIndex:t})),Ah={firstRowIndex:0,lastRowIndex:0,firstColumnIndex:0,lastColumnIndex:0},Oh=(e,t)=>{const{disableVirtualization:r,autoHeight:n}=t;return Ge({},e,{virtualization:{enabled:!r,enabledForColumns:!r,enabledForRows:!r&&!n,renderContext:Ah}})};const Hh=Jl(e=>e.rowSpanning),Lh=Yl(Hh,e=>e.hiddenCells),$h=Yl(Hh,e=>e.spannedCells),zh=Yl(Hh,e=>e.hiddenCellOriginMap),qh=Jl(e=>e.listViewColumn),Bh=Zl(Yl(tp,Eh,Cp,uu,(e,t,r,n)=>{if(!e)return!1;const o=r.rowIdToIndexMap.get(e.id),a=n.slice(t.firstColumnIndex,t.lastColumnIndex).findIndex(t=>t.field===e.field);return!(void 0!==o&&-1!==a&&o>=t.firstRowIndex&&o<=t.lastRowIndex)}),uu,Cp,tp,(e,t,r,n)=>{if(!e)return null;const o=r.rowIdToIndexMap.get(n.id);if(void 0===o)return null;const a=t.findIndex(e=>e.field===n.field);return-1===a?null:Ge({},n,{rowIndex:o,columnIndex:a})});function Vh(e,t){return Math.round(e*10**t)/10**t}const Wh="undefined"!=typeof window&&/jsdom|HappyDOM/.test(window.navigator.userAgent);var Gh=function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e}(Gh||{});const Uh={top:0,left:0},Kh=Object.freeze(new Map),_h=()=>{const t=vh(),n=qs(),{listView:o}=n,a=Uc(t,()=>o?[qh(t)]:uu(t)),i=Uc(t,Th)&&!Wh,s=Uc(t,Dh)&&!Wh,l=Uc(t,bd),c=hu(t),d=o?nu:c,u=l.bottom.length>0,[m,p]=e.useState(Kh),h=mt(),g=Uc(t,Wm),f=Nh(t),x=t.current.mainElementRef,b=t.current.virtualScrollerRef,y=t.current.virtualScrollbarVerticalRef,v=t.current.virtualScrollbarHorizontalRef,w=Uc(t,yu),C=e.useRef(!1),j=Uc(t,nc),S=Uc(t,oc),k=Uc(t,rc),R=Uc(t,Qh),N=Uc(t,uc),P=Uc(t,sc),I=e.useRef(null),M=e.useCallback(e=>{if(x.current=e,!e)return;const r=e.getBoundingClientRect();let n={width:Vh(r.width,1),height:Vh(r.height,1)};if((!I.current||n.width!==I.current.width&&n.height!==I.current.height)&&(I.current=n,t.current.publishEvent("resize",n)),"undefined"==typeof ResizeObserver)return;const o=new ResizeObserver(e=>{const r=e[0];if(!r)return;const o={width:Vh(r.contentRect.width,1),height:Vh(r.contentRect.height,1)};o.width===n.width&&o.height===n.height||(t.current.publishEvent("resize",o),n=o)});return o.observe(e),ds>=19?()=>{x.current=null,o.disconnect()}:void 0},[t,x]),D=e.useRef(n.initialState?.scroll??Uh),T=e.useRef(!1),E=e.useRef(Uh),F=e.useRef(Ah),A=Uc(t,Eh),O=Uc(t,Bh),H=Jc(),L=e.useRef(void 0),$=$c(()=>((e,t,r,n,o)=>({direction:Gh.NONE,buffer:ng(e,Gh.NONE,t,r,n,o)}))(h,n.rowBufferPx,n.columnBufferPx,15*j,300)).current,z=e.useCallback(e=>{if(tg(e,t.current.state.virtualization.renderContext))return;const r=e.firstRowIndex!==F.current.firstRowIndex||e.lastRowIndex!==F.current.lastRowIndex;t.current.setState(t=>Ge({},t,{virtualization:Ge({},t.virtualization,{renderContext:e})}));tc(t).isReady&&r&&(F.current=e,t.current.publishEvent("renderedRowsIntervalChange",e)),E.current=D.current},[t]),q=cs(()=>{const e=b.current;if(!e)return;const r=tc(t),o=Math.ceil(r.minimumSize.height-r.viewportOuterSize.height),a=Math.ceil(r.minimumSize.width-r.viewportInnerSize.width),l={top:Od(e.scrollTop,0,o),left:h?Od(e.scrollLeft,-a,0):Od(e.scrollLeft,0,a)},c=l.left-D.current.left,d=l.top-D.current.top,u=0!==c||0!==d;D.current=l;const m=u?function(e,t){if(0===e&&0===t)return Gh.NONE;return Math.abs(t)>=Math.abs(e)?t>0?Gh.DOWN:Gh.UP:e>0?Gh.RIGHT:Gh.LEFT}(c,d):Gh.NONE,p=Math.abs(D.current.top-E.current.top),g=Math.abs(D.current.left-E.current.left),f=p>=j||g>=50,x=$.direction!==m;if(!(f||x))return A;if(x)switch(m){case Gh.NONE:case Gh.LEFT:case Gh.RIGHT:L.current=void 0;break;default:L.current=A}$.direction=m,$.buffer=ng(h,m,n.rowBufferPx,n.columnBufferPx,15*j,300);const y=Yh(Xh(t,n,i,s),D.current,$);return tg(y,A)||(ht.flushSync(()=>{z(y)}),H.start(1e3,q)),y}),B=()=>{if(!tc(t).isReady&&(i||s))return;const e=Yh(Xh(t,n,i,s),D.current,$);L.current=void 0,z(e)},V=cs(()=>{if(T.current)return void(T.current=!1);const e=q();t.current.publishEvent("scrollPositionChange",{top:D.current.top,left:D.current.left,renderContext:e})}),W=cs(e=>{t.current.publishEvent("virtualScrollerWheel",{},e)}),G=cs(e=>{t.current.publishEvent("virtualScrollerTouchMove",{},e)}),U=e.useMemo(()=>({overflowX:!R||o?"hidden":void 0,overflowY:n.autoHeight?"hidden":void 0}),[R,n.autoHeight,o]),K=e.useMemo(()=>{const e={width:R?k:"auto",flexBasis:S,flexShrink:0};return 0===e.flexBasis&&(e.flexBasis=sm),e},[k,S,R]),_=e.useCallback(e=>{e&&t.current.publishEvent("virtualScrollerContentSizeChange",{columnsTotalWidth:k,contentHeight:S})},[t,k,S]);return ls(()=>{C.current&&t.current.updateRenderContext?.()},[t,s,i]),ls(()=>{o&&(b.current.scrollLeft=0)},[o,b]),((t,r)=>{const n=e.useRef(!1);ls(()=>n.current||!t?wh:(n.current=!0,r()),[n.current||t])})(A!==Ah,()=>{if(t.current.publishEvent("scrollPositionChange",{top:D.current.top,left:D.current.left,renderContext:A}),C.current=!0,n.initialState?.scroll&&b.current){const e=b.current,{top:r,left:o}=n.initialState.scroll,a={top:!(r>0),left:!(o>0)};if(!a.left&&k&&(e.scrollLeft=o,T.current=!0,a.left=!0),!a.top&&S&&(e.scrollTop=r,T.current=!0,a.top=!0),!a.top||!a.left){const n=t.current.subscribeEvent("virtualScrollerContentSizeChange",t=>{!a.left&&t.columnsTotalWidth&&(e.scrollLeft=o,T.current=!0,a.left=!0),!a.top&&t.contentHeight&&(e.scrollTop=r,T.current=!0,a.top=!0),a.left&&a.top&&n()});return n}}}),t.current.register("private",{updateRenderContext:B}),Tc(t,"sortedRowsSet",B),Tc(t,"paginationModelChange",B),Tc(t,"columnsChange",B),{renderContext:A,setPanels:p,getRows:(e={})=>{if(!e.rows&&!f.range)return[];const o=dd(t);let i=A;e.renderContext&&(i=e.renderContext,i.firstColumnIndex=A.firstColumnIndex,i.lastColumnIndex=A.lastColumnIndex);const s=!u&&void 0===e.position||u&&"bottom"===e.position,c=void 0!==e.position;let p;switch(e.position){case"top":p=0;break;case"bottom":p=l.top.length+f.rows.length;break;case void 0:p=l.top.length}const h=e.rows??f.rows,x=i.firstRowIndex,b=Math.min(i.lastRowIndex,h.length),y=e.rows?Hd(0,e.rows.length):Hd(x,b);let v=-1;!c&&O&&(O.rowIndex<x&&(y.unshift(O.rowIndex),v=O.rowIndex),O.rowIndex>b&&(y.push(O.rowIndex),v=O.rowIndex));const C=[],j=n.slotProps?.row,S=fu(t);return y.forEach(l=>{const{id:u,model:x}=h[l];if(!o[u])return;const b=(f?.range?.firstRowIndex||0)+p+l;if(w){const e=d.left.length,r=a.length-d.right.length;t.current.calculateColSpan({rowId:u,minFirstColumn:e,maxLastColumn:r,columns:a}),d.left.length>0&&t.current.calculateColSpan({rowId:u,minFirstColumn:0,maxLastColumn:d.left.length,columns:a}),d.right.length>0&&t.current.calculateColSpan({rowId:u,minFirstColumn:a.length-d.right.length,maxLastColumn:a.length,columns:a})}const y=t.current.rowHasAutoHeight(u)?"auto":t.current.unstable_getRowHeight(u),R=g.has(u)&&t.current.isRowSelectable(u);let I=!1;void 0===e.position&&(I=0===l);let M=!1;const D=l===h.length-1;if(s)if(c)M=D;else{l===f.rows.length-1&&(M=!0)}let T=i;L.current&&l>=L.current.firstRowIndex&&l<L.current.lastRowIndex&&(T=L.current);const E=l===v,F=O?.rowIndex===b,A=rg(S,T,d.left.length),H=D&&"top"===e.position,$=T.firstColumnIndex,z=T.lastColumnIndex;if(C.push(r.jsx(n.slots.row,Ge({row:x,rowId:u,index:b,selected:R,offsetLeft:A,columnsTotalWidth:k,rowHeight:y,pinnedColumns:d,visibleColumns:a,firstColumnIndex:$,lastColumnIndex:z,focusedColumnIndex:F?O.columnIndex:void 0,isFirstVisible:I,isLastVisible:M,isNotVisible:E,showBottomBorder:H,scrollbarWidth:N,gridHasFiller:P},j),u)),E)return;const q=m.get(u);q&&C.push(q),void 0===e.position&&D&&C.push(t.current.getInfiniteLoadingTriggerElement?.({lastRowId:u}))}),C},getContainerProps:()=>({ref:M}),getScrollerProps:()=>({ref:b,onScroll:V,onWheel:W,onTouchMove:G,style:U,role:"presentation",tabIndex:Ph?-1:void 0}),getContentProps:()=>({style:K,role:"presentation",ref:_}),getRenderZoneProps:()=>({role:"rowgroup"}),getScrollbarVerticalProps:()=>({ref:y,scrollPosition:D}),getScrollbarHorizontalProps:()=>({ref:v,scrollPosition:D}),getScrollAreaProps:()=>({scrollPosition:D})}};function Qh(e){return e.current.state.dimensions.viewportOuterSize.width>0&&e.current.state.dimensions.columnsTotalWidth>e.current.state.dimensions.viewportOuterSize.width}function Xh(e,t,r,n){const o=tc(e),a=Rh(e),i=t.listView?[qh(e)]:uu(e),s=zh(e),l=e.current.state.rows.dataRowIds.at(-1),c=i.at(-1);return{enabledForRows:r,enabledForColumns:n,apiRef:e,autoHeight:t.autoHeight,rowBufferPx:t.rowBufferPx,columnBufferPx:t.columnBufferPx,leftPinnedWidth:o.leftPinnedWidth,columnsTotalWidth:o.columnsTotalWidth,viewportInnerWidth:o.viewportInnerSize.width,viewportInnerHeight:o.viewportInnerSize.height,lastRowHeight:void 0!==l?e.current.unstable_getRowHeight(l):0,lastColumnWidth:c?.computedWidth??0,rowsMeta:Ih(e),columnPositions:fu(e),rows:a.rows,range:a.range,pinnedColumns:hu(e),visibleColumns:i,hiddenCellsOriginMap:s,listView:t.listView??!1,virtualizeColumnsWithAutoRowHeight:t.virtualizeColumnsWithAutoRowHeight}}function Yh(e,t,r){const n={firstRowIndex:0,lastRowIndex:e.rows.length,firstColumnIndex:0,lastColumnIndex:e.visibleColumns.length},{top:o,left:a}=t,i=Math.abs(a)+e.leftPinnedWidth;if(e.enabledForRows){let t=Math.min(Zh(e,o,{atStart:!0,lastPosition:e.rowsMeta.positions[e.rowsMeta.positions.length-1]+e.lastRowHeight}),e.rowsMeta.positions.length-1);const r=e.hiddenCellsOriginMap[t];if(r){const e=Math.min(...Object.values(r));t=Math.min(t,e)}const a=e.autoHeight?t+e.rows.length:Zh(e,o+e.viewportInnerHeight);n.firstRowIndex=t,n.lastRowIndex=a}if(e.listView)return Ge({},n,{lastColumnIndex:1});if(e.enabledForColumns){let t=0,o=e.columnPositions.length,a=!1;const[s,l]=eg({firstIndex:n.firstRowIndex,lastIndex:n.lastRowIndex,minFirstIndex:0,maxLastIndex:e.rows.length,bufferBefore:r.buffer.rowBefore,bufferAfter:r.buffer.rowAfter,positions:e.rowsMeta.positions,lastSize:e.lastRowHeight});if(!e.virtualizeColumnsWithAutoRowHeight)for(let r=s;r<l&&!a;r+=1){const t=e.rows[r];a=e.apiRef.current.rowHasAutoHeight(t.id)}a&&!e.virtualizeColumnsWithAutoRowHeight||(t=Jh(i,e.columnPositions,{atStart:!0,lastPosition:e.columnsTotalWidth}),o=Jh(i+e.viewportInnerWidth,e.columnPositions)),n.firstColumnIndex=t,n.lastColumnIndex=o}const s=function(e,t,r){const[n,o]=eg({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:e.rows.length,bufferBefore:r.buffer.rowBefore,bufferAfter:r.buffer.rowAfter,positions:e.rowsMeta.positions,lastSize:e.lastRowHeight}),[a,i]=eg({firstIndex:t.firstColumnIndex,lastIndex:t.lastColumnIndex,minFirstIndex:e.pinnedColumns.left.length,maxLastIndex:e.visibleColumns.length-e.pinnedColumns.right.length,bufferBefore:r.buffer.columnBefore,bufferAfter:r.buffer.columnAfter,positions:e.columnPositions,lastSize:e.lastColumnWidth}),s=function({firstColumnToRender:e,apiRef:t,firstRowToRender:r,lastRowToRender:n,visibleRows:o}){let a=e,i=!1;for(;!i&&a>=0;){i=!0;for(let e=r;e<n;e+=1)if(o[e]){const r=o[e].id,n=t.current.unstable_getCellColSpanInfo(r,a);if(n&&n.spannedByColSpan&&n.leftVisibleCellIndex<a){a=n.leftVisibleCellIndex,i=!1;break}}}return a}({firstColumnToRender:a,apiRef:e.apiRef,firstRowToRender:n,lastRowToRender:o,visibleRows:e.rows});return{firstRowIndex:n,lastRowIndex:o,firstColumnIndex:s,lastColumnIndex:i}}(e,n,r);return s}function Zh(e,t,r){const n=e.apiRef.current.getLastMeasuredRowIndex();let o=n===1/0;e.range?.lastRowIndex&&!o&&(o=n>=e.range.lastRowIndex);const a=Od(n-(e.range?.firstRowIndex||0),0,e.rowsMeta.positions.length);return o||e.rowsMeta.positions[a]>=t?Jh(t,e.rowsMeta.positions,r):function(e,t,r,n){let o=1;for(;r<t.length&&Math.abs(t[r])<e;)r+=o,o*=2;return Jh(e,t,n,Math.floor(r/2),Math.min(r,t.length))}(t,e.rowsMeta.positions,a,r)}function Jh(e,t,r=void 0,n=0,o=t.length){if(t.length<=0)return-1;if(n>=o)return n;const a=n+Math.floor((o-n)/2),i=t[a];let s;if(r?.atStart){s=e-((a===t.length-1?r.lastPosition:t[a+1])-i)<i}else s=e<=i;return s?Jh(e,t,r,n,a):Jh(e,t,r,a+1,o)}function eg({firstIndex:e,lastIndex:t,bufferBefore:r,bufferAfter:n,minFirstIndex:o,maxLastIndex:a,positions:i,lastSize:s}){const l=i[e]-r,c=i[t]+n,d=Jh(l,i,{atStart:!0,lastPosition:i[i.length-1]+s}),u=Jh(c,i);return[Od(d,o,a),Od(u,o,a)]}function tg(e,t){return e===t||e.firstRowIndex===t.firstRowIndex&&e.lastRowIndex===t.lastRowIndex&&e.firstColumnIndex===t.firstColumnIndex&&e.lastColumnIndex===t.lastColumnIndex}function rg(e,t,r){const n=(e[t.firstColumnIndex]??0)-(e[r]??0);return Math.abs(n)}function ng(e,t,r,n,o,a){if(e)switch(t){case Gh.LEFT:t=Gh.RIGHT;break;case Gh.RIGHT:t=Gh.LEFT}switch(t){case Gh.NONE:return{rowAfter:r,rowBefore:r,columnAfter:n,columnBefore:n};case Gh.LEFT:return{rowAfter:0,rowBefore:0,columnAfter:0,columnBefore:a};case Gh.RIGHT:return{rowAfter:0,rowBefore:0,columnAfter:a,columnBefore:0};case Gh.UP:return{rowAfter:0,rowBefore:o,columnAfter:0,columnBefore:0};case Gh.DOWN:return{rowAfter:o,rowBefore:0,columnAfter:0,columnBefore:0};default:throw new Error("unreachable")}}const og=pt("div",{name:"MuiDataGrid",slot:"OverlayWrapper",shouldForwardProp:e=>"overlayType"!==e&&"loadingOverlayVariant"!==e&&"right"!==e})(({overlayType:e,loadingOverlayVariant:t,right:r})=>"skeleton"!==t?{position:"sticky",top:"var(--DataGrid-headersTotalHeight)",left:0,right:`${r}px`,width:0,height:0,zIndex:"loadingOverlay"===e?5:4}:{}),ag=pt("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",shouldForwardProp:e=>"overlayType"!==e&&"loadingOverlayVariant"!==e})({});function ig(e){const t=$s(),n=qs(),o=Uc(t,tc);let a=Math.max(o.viewportOuterSize.height-o.topContainerHeight-o.bottomContainerHeight-(o.hasScrollX?o.scrollbarSize:0),0);0===a&&(a=sm);const i=(e=>{const{classes:t}=e;return _l({root:["overlayWrapper"],inner:["overlayWrapperInner"]},Cc,t)})(Ge({},e,{classes:n.classes}));return r.jsx(og,Ge({className:i.root},e,{right:o.columnsTotalWidth-o.viewportOuterSize.width,children:r.jsx(ag,Ge({className:i.inner,style:{height:a,width:o.viewportOuterSize.width}},e))}))}const sg=Jl(e=>e.pivoting),lg=Yl(sg,e=>e?.active),cg=new Map,dg=Yl(sg,e=>e?.initialColumns||cg);Yl(sg,e=>e?.panelOpen);const ug=Jl(e=>e.columnMenu);const mg=gc(function(){const e=vh(),t=qs(),n=Uc(e,uu),o=Uc(e,Bm),a=Uc(e,Nm),i=Uc(e,ip),s=Uc(e,()=>null===ap(e)),l=Uc(e,sp),c=Uc(e,rp),d=Uc(e,np),u=Uc(e,lh),m=Uc(e,ug),p=Uc(e,cu),h=Uc(e,sh),g=!(null===l&&null===i&&s),f=e.current.columnHeadersContainerRef;return r.jsx(t.slots.columnHeaders,Ge({ref:f,visibleColumns:n,filterColumnLookup:o,sortColumnLookup:a,columnHeaderTabIndexState:i,columnGroupHeaderTabIndexState:l,columnHeaderFocus:c,columnGroupHeaderFocus:d,headerGroupingMaxDepth:u,columnMenuState:m,columnVisibility:p,columnGroupsHeaderStructure:h,hasOtherElementInTabSequence:g},t.slotProps?.columnHeaders))}),pg=pt("div")({position:"absolute",top:"var(--DataGrid-headersTotalHeight)",left:0,width:"calc(100% - (var(--DataGrid-hasScrollY) * var(--DataGrid-scrollbarSize)))"}),hg=pt("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>{const{ownerState:r,loadingOverlayVariant:n,overlayType:o}=e,a="skeleton"===n||"noColumnsOverlay"===o;return[t.main,r.hasPinnedRight&&t["main--hasPinnedRight"],a&&t["main--hiddenContent"]]}})({flexGrow:1,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"}),gg=us((e,t)=>{const{ownerState:n}=e,o=qs(),a=qu().hooks.useGridAriaAttributes();return r.jsxs(hg,Ge({ownerState:n,className:e.className,tabIndex:-1},a,o.slotProps?.main,{ref:t,children:[r.jsx(pg,{role:"presentation","data-id":"gridPanelAnchor"}),e.children]}))}),fg=pt("div")({position:"sticky",zIndex:40,top:0});function xg(e){const t=_l({root:["topContainer"]},Cc,{});return r.jsx(fg,Ge({},e,{className:et(t.root,jc["container--top"]),role:"presentation"}))}const bg=pt("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.virtualScrollerContent,r.overflowedContent&&t["virtualScrollerContent--overflowed"]]}})({}),yg=us(function(e,t){const n=qs(),o=!n.autoHeight&&"auto"===e.style?.minHeight,a=((e,t)=>{const{classes:r}=e;return _l({root:["virtualScrollerContent",t&&"virtualScrollerContent--overflowed"]},Cc,r)})(n,o),i={classes:n.classes,overflowedContent:o};return r.jsx(bg,Ge({},e,{ownerState:i,className:et(a.root,e.className),ref:t}))}),vg=pt("div")({display:"flex",flexDirection:"row",width:"var(--DataGrid-rowWidth)",boxSizing:"border-box"}),wg=pt("div")({position:"sticky",height:"100%",boxSizing:"border-box",borderTop:"1px solid var(--rowBorderColor)",backgroundColor:Zs.cell.background.pinned}),Cg=pt(wg)({left:0,borderRight:"1px solid var(--rowBorderColor)"}),jg=pt(wg)({right:0,borderLeft:"1px solid var(--rowBorderColor)"}),Sg=pt("div")({flexGrow:1,borderTop:"1px solid var(--rowBorderColor)"});const kg=gc(function({rowsLength:e}){const t=$s(),{viewportOuterSize:n,minimumSize:o,hasScrollX:a,hasScrollY:i,scrollbarSize:s,leftPinnedWidth:l,rightPinnedWidth:c}=Uc(t,tc),d=a?s:0,u=n.height-o.height>0;return 0!==d||u?r.jsxs(vg,{className:jc.filler,role:"presentation",style:{height:d,"--rowBorderColor":0===e?"transparent":"var(--DataGrid-rowBorderColor)"},children:[l>0&&r.jsx(Cg,{className:jc["filler--pinnedLeft"],style:{width:l}}),r.jsx(Sg,{}),c>0&&r.jsx(jg,{className:jc["filler--pinnedRight"],style:{width:c+(i?s:0)}})]}):null}),Rg=["className"],Ng=pt("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone"})({position:"absolute",display:"flex",flexDirection:"column"}),Pg=us(function(e,t){const{className:n}=e,o=Qe(e,Rg),a=$s(),i=qs(),s=(e=>{const{classes:t}=e;return _l({root:["virtualScrollerRenderZone"]},Cc,t)})(i),l=Uc(a,()=>{const e=Eh(a);return Ih(a).positions[e.firstRowIndex]??0});return r.jsx(Ng,Ge({className:et(s.root,n),ownerState:i,style:{transform:`translate3d(0, ${l}px, 0)`}},o,{ref:t}))}),Ig={includeHeaders:!0,includeOutliers:!1,outliersFactor:1.5,expand:!1,disableColumnVirtualization:!0},Mg=Jl(e=>e.editRows),Dg=Yl(Mg,(e,{rowId:t,editMode:r})=>r===qd.Row&&Boolean(e[t])),Tg=Yl(Mg,(e,{rowId:t,field:r})=>e[t]?.[r]??null),Eg=Jl(e=>e.preferencePanel),Fg=Yl(Eg,(e,t)=>!(!e.open||e.labelId!==t));var Ag=function(e){return e.filters="filters",e.columns="columns",e.aiAssistant="aiAssistant",e}(Ag||{});function Og(e){return JSON.stringify([e.filterModel,e.sortModel,e.start,e.end])}class Hg{constructor({ttl:e=3e5,getKey:t=Og}){this.cache=void 0,this.ttl=void 0,this.getKey=void 0,this.cache={},this.ttl=e,this.getKey=t}set(e,t){const r=this.getKey(e),n=Date.now()+this.ttl;this.cache[r]={value:t,expiry:n}}get(e){const t=this.getKey(e),r=this.cache[t];if(r){if(!(Date.now()>r.expiry))return r.value;delete this.cache[t]}}clear(){this.cache={}}}class Lg extends Error{constructor(e){super(e.message),this.params=void 0,this.cause=void 0,this.name="GridGetRowsError",this.params=e.params,this.cause=e.cause}}class $g extends Error{constructor(e){super(e.message),this.params=void 0,this.cause=void 0,this.name="GridUpdateRowError",this.params=e.params,this.cause=e.cause}}const zg=pt("div")({position:"absolute",display:"inline-block",zIndex:60,"&:hover":{zIndex:70},"--size":"calc(max(var(--DataGrid-scrollbarSize), 14px))"}),qg=pt(zg)({width:"var(--size)",height:"calc(var(--DataGrid-hasScrollY) * (100% - var(--DataGrid-topContainerHeight) - var(--DataGrid-bottomContainerHeight) - var(--DataGrid-hasScrollX) * var(--DataGrid-scrollbarSize)))",overflowY:"auto",overflowX:"hidden",outline:0,"& > div":{width:"var(--size)"},top:"var(--DataGrid-topContainerHeight)",right:"0px"}),Bg=pt(zg)({width:"100%",height:"var(--size)",overflowY:"hidden",overflowX:"auto",outline:0,"& > div":{height:"var(--size)"},bottom:"0px"}),Vg=us(function(t,n){const o=vh(),a=qs(),i=e.useRef(!1),s=e.useRef(0),l=e.useRef(null),c=e.useRef(null),d=((e,t)=>{const{classes:r}=e;return _l({root:["scrollbar",`scrollbar--${t}`],content:["scrollbarContent"]},Cc,r)})(a,t.position),u=Uc(o,tc),m="vertical"===t.position?"height":"width",p="vertical"===t.position?"scrollTop":"scrollLeft",h="vertical"===t.position?"top":"left",g="vertical"===t.position?u.hasScrollX:u.hasScrollY,f=u.minimumSize[m]+(g?u.scrollbarSize:0),x=("vertical"===t.position?u.viewportInnerSize.height:u.viewportOuterSize.width)*(f/u.viewportOuterSize[m]),b=cs(()=>{const e=l.current,r=t.scrollPosition.current;if(!e)return;if(r[h]===s.current)return;if(s.current=r[h],i.current)return void(i.current=!1);i.current=!0;const n=r[h]/f;e[p]=n*x}),y=cs(()=>{const e=o.current.virtualScrollerRef.current,t=l.current;if(!t)return;if(i.current)return void(i.current=!1);i.current=!0;const r=t[p]/x;e[p]=r*f});Yc(()=>{const e=o.current.virtualScrollerRef.current,t=l.current,r={passive:!0};return e.addEventListener("scroll",b,r),t.addEventListener("scroll",y,r),()=>{e.removeEventListener("scroll",b,r),t.removeEventListener("scroll",y,r)}}),e.useEffect(()=>{c.current.style.setProperty(m,`${x}px`)},[x,m]);const v="vertical"===t.position?qg:Bg;return r.jsx(v,{ref:ss(n,l),className:d.root,style:"vertical"===t.position&&a.listView?{height:"100%",top:0}:void 0,tabIndex:-1,"aria-hidden":"true",onFocus:e=>{e.target.blur()},children:r.jsx("div",{ref:c,className:d.content})})}),Wg=pt("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.virtualScroller,r.hasScrollX&&t["virtualScroller--hasScrollX"]]}})({position:"relative",height:"100%",flexGrow:1,overflow:"scroll",scrollbarWidth:"none",display:"flex",flexDirection:"column","&::-webkit-scrollbar":{display:"none"},"@media print":{overflow:"hidden"},zIndex:0}),Gg=e=>e.current.state.dimensions.rightPinnedWidth>0;function Ug(e){const t=$s(),n=qs(),o=Uc(t,ic),a=Uc(t,ac),i=Uc(t,Gg),s=Uc(t,mc),{getOverlay:l,overlaysProps:c}=(()=>{const e=$s(),t=qs(),n=Uc(e,id),o=Uc(e,Lm),a=Uc(e,yd),i=Uc(e,uu),s=0===n&&0===a,l=Uc(e,sd),c=Uc(e,lg),d=!l&&s,u=!l&&n>0&&0===o,m=!l&&0===i.length;let p=null,h=null;d&&(p="noRowsOverlay"),m&&(p="noColumnsOverlay"),d&&c&&(p="emptyPivotOverlay"),u&&(p="noResultsOverlay"),l&&(p="loadingOverlay",h=t.slotProps?.loadingOverlay?.[s?"noRowsVariant":"variant"]??(s?"skeleton":"linear-progress"));const g={overlayType:p,loadingOverlayVariant:h};return{getOverlay:()=>{if(!p)return null;const e=t.slots?.[p],n=t.slotProps?.[p];return r.jsx(ig,Ge({},g,{children:r.jsx(e,Ge({},n))}))},overlaysProps:g}})(),d=Ge({classes:n.classes,hasScrollX:a,hasPinnedRight:i},c),u=(e=>{const{classes:t,hasScrollX:r,hasPinnedRight:n,loadingOverlayVariant:o,overlayType:a}=e;return _l({root:["main",n&&"main--hasPinnedRight",("skeleton"===o||"noColumnsOverlay"===a)&&"main--hiddenContent"],scroller:["virtualScroller",r&&"virtualScroller--hasScrollX"]},Cc,t)})(d),m=_h(),{getContainerProps:p,getScrollerProps:h,getContentProps:g,getRenderZoneProps:f,getScrollbarVerticalProps:x,getScrollbarHorizontalProps:b,getRows:y,getScrollAreaProps:v}=m,w=y();return r.jsxs(gg,Ge({className:u.root},p(),{ownerState:d,children:[r.jsx(bh,Ge({scrollDirection:"left"},v())),r.jsx(bh,Ge({scrollDirection:"right"},v())),r.jsxs(Wg,Ge({className:u.scroller},h(),{ownerState:d,children:[r.jsxs(xg,{children:[!n.listView&&r.jsx(mg,{}),r.jsx(n.slots.pinnedRows,{position:"top",virtualScroller:m})]}),l(),r.jsx(yg,Ge({},g(),{children:r.jsxs(Pg,Ge({},f(),{children:[w,r.jsx(n.slots.detailPanels,{virtualScroller:m})]}))})),s&&r.jsx(kg,{rowsLength:w.length}),r.jsx(n.slots.bottomContainer,{children:r.jsx(n.slots.pinnedRows,{position:"bottom",virtualScroller:m})})]})),a&&!n.listView&&r.jsx(Vg,Ge({position:"horizontal"},b())),o&&r.jsx(Vg,Ge({position:"vertical"},x())),e.children]}))}function Kg(){const e=qs();return e.hideFooter?null:r.jsx(e.slots.footer,Ge({},e.slotProps?.footer))}function _g(e){return e&&e.ownerDocument||document}function Qg(e){if("string"!=typeof e)throw new Error(function(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(e=>r.searchParams.append("args[]",e)),`Minified MUI error #${e}; visit ${r} for the full message.`}(7));return e.charAt(0).toUpperCase()+e.slice(1)}let Xg;const Yg=(e,t)=>{if(e)if(t){if(e===mm.LEFT)return"right";if(e===mm.RIGHT)return"left"}else{if(e===mm.LEFT)return"left";if(e===mm.RIGHT)return"right"}};function Zg(e,t,r,n){const o=Yg(r,t);return o&&void 0!==n?(e[o]=n,e):e}const Jg=["column","row","rowId","rowNode","align","children","colIndex","width","className","style","colSpan","disableDragEvents","isNotVisible","pinnedOffset","pinnedPosition","showRightBorder","showLeftBorder","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver"],ef=["changeReason","unstable_updateValueOnRender"];mm.LEFT,ru.LEFT,mm.RIGHT,ru.RIGHT,mm.NONE,mm.VIRTUAL;const tf=gc(us(function(t,n){const{column:o,row:a,rowId:i,rowNode:s,align:l,colIndex:c,width:d,className:u,style:m,colSpan:p,disableDragEvents:h,isNotVisible:g,pinnedOffset:f,pinnedPosition:x,showRightBorder:b,showLeftBorder:y,onClick:v,onDoubleClick:w,onMouseDown:C,onMouseUp:j,onMouseOver:S,onKeyDown:k,onKeyUp:R,onDragEnter:N,onDragOver:P}=t,I=Qe(t,Jg),M=vh(),D=qs(),T=mt(),E=o.field,F=Uc(M,Tg,{rowId:i,field:E}),A=qu().hooks.useCellAggregationResult(i,E),O=F?Bd.Edit:Bd.View,H=M.current.getCellParamsForRow(i,E,a,{colDef:o,cellMode:O,rowNode:s,tabIndex:Uc(M,()=>{const e=ap(M);return e&&e.field===E&&e.id===i?0:-1}),hasFocus:Uc(M,()=>{const e=tp(M);return e?.id===i&&e.field===E})});H.api=M.current,A&&(H.value=A.value,H.formattedValue=o.valueFormatter?o.valueFormatter(H.value,a,o,M):H.value);const L=Uc(M,()=>M.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:i,field:E})),$=Uc(M,Lh),z=Uc(M,$h),{hasFocus:q,isEditable:B=!1,value:V}=H,W="actions"===o.type&&o.getActions?.(M.current.getRowParams(i)).some(e=>!e.props.disabled),G="view"!==O&&B||W?-1:H.tabIndex,{classes:U,getCellClassName:K}=D,_=[Uc(M,()=>M.current.unstable_applyPipeProcessors("cellClassName",[],{id:i,field:E}).filter(Boolean).join(" "))];o.cellClassName&&_.push("function"==typeof o.cellClassName?o.cellClassName(H):o.cellClassName),"flex"===o.display&&_.push(jc["cell--flex"]),K&&_.push(K(H));const Q=H.formattedValue??V,X=e.useRef(null),Y=ss(n,X),Z=e.useRef(null),J=D.cellSelection??!1,ee=(e=>{const{align:t,showLeftBorder:r,showRightBorder:n,pinnedPosition:o,isEditable:a,isSelected:i,isSelectionMode:s,classes:l}=e;return _l({root:["cell",`cell--text${Qg(t)}`,i&&"selected",a&&"cell--editable",r&&"cell--withLeftBorder",n&&"cell--withRightBorder",o===mm.LEFT&&"cell--pinnedLeft",o===mm.RIGHT&&"cell--pinnedRight",s&&!a&&"cell--selectionMode"]},Cc,l)})({align:l,showLeftBorder:y,showRightBorder:b,isEditable:B,classes:D.classes,pinnedPosition:x,isSelected:L,isSelectionMode:J}),te=e.useCallback(e=>t=>{const r=M.current.getCellParams(i,E||"");M.current.publishEvent(e,r,t),j&&j(t)},[M,E,j,i]),re=e.useCallback(e=>t=>{const r=M.current.getCellParams(i,E||"");M.current.publishEvent(e,r,t),C&&C(t)},[M,E,C,i]),ne=e.useCallback((e,t)=>r=>{if(!M.current.getRow(i))return;const n=M.current.getCellParams(i,E||"");M.current.publishEvent(e,n,r),t&&t(r)},[M,E,i]),oe=$[i]?.[E]??!1,ae=z[i]?.[E]??1,ie=e.useMemo(()=>{if(g)return{padding:0,opacity:0,width:0,height:0,border:0};const e=Zg(Ge({"--width":`${d}px`},m),T,x,f),t=x===mm.LEFT,r=x===mm.RIGHT;return ae>1&&(e.height=`calc(var(--height) * ${ae})`,e.zIndex=10,(t||r)&&(e.zIndex=40)),e},[d,g,m,f,x,T,ae]);if(e.useEffect(()=>{if(!q||O===Bd.Edit)return;const e=_g(M.current.rootElementRef.current);if(X.current&&!X.current.contains(e.activeElement)){const e=X.current.querySelector('[tabindex="0"]'),t=Z.current||e||X.current;if(void 0===Xg&&document.createElement("div").focus({get preventScroll(){return Xg=!0,!1}}),Xg)t.focus({preventScroll:!0});else{const e=M.current.getScrollPosition();t.focus(),M.current.scroll(e)}}},[q,O,M]),oe)return r.jsx("div",{"data-colindex":c,role:"presentation",style:Ge({width:"var(--width)"},ie)});let se,le,ce=I.onFocus;if(null===F&&o.renderCell&&(se=o.renderCell(H)),null!==F&&o.renderEditCell){const e=M.current.getRowWithUpdatedValues(i,o.field),t=Qe(F,ef),r=o.valueFormatter?o.valueFormatter(F.value,e,o,M):H.formattedValue,n=Ge({},H,{row:e,formattedValue:r},t);se=o.renderEditCell(n),_.push(jc["cell--editing"]),_.push(U?.["cell--editing"])}if(void 0===se){const e=Q?.toString();se=e,le=e}e.isValidElement(se)&&W&&(se=e.cloneElement(se,{focusElementRef:Z}));const de=h?null:{onDragEnter:ne("cellDragEnter",N),onDragOver:ne("cellDragOver",P)};return r.jsx("div",Ge({className:et(ee.root,_,u),role:"gridcell","data-field":E,"data-colindex":c,"aria-colindex":c+1,"aria-colspan":p,"aria-rowspan":ae,style:ie,title:le,tabIndex:G,onClick:ne("cellClick",v),onDoubleClick:ne("cellDoubleClick",w),onMouseOver:ne("cellMouseOver",S),onMouseDown:re("cellMouseDown"),onMouseUp:te("cellMouseUp"),onKeyDown:ne("cellKeyDown",k),onKeyUp:ne("cellKeyUp",R)},de,I,{onFocus:ce,ref:Y,children:se}))})),rf=["field","type","align","width","height","empty","style","className"],nf="1.3em",of=[40,80],af={number:[40,60],string:[40,80],date:[40,60],dateTime:[60,80],singleSelect:[40,80]},sf=function(e){const t=(r=e,()=>{let e=r+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296});var r;return(e,r)=>e+(r-e)*t()}(12345);const lf=gc(function(t){const{field:n,type:o,align:a,width:i,height:s,empty:l=!1,style:c,className:d}=t,u=Qe(t,rf),m=qs(),p=(e=>{const{align:t,classes:r,empty:n}=e;return _l({root:["cell","cellSkeleton",`cell--text${t?Qg(t):"Left"}`,n&&"cellEmpty"]},Cc,r)})({classes:m.classes,align:a,empty:l}),h=e.useMemo(()=>{if("boolean"===o||"actions"===o)return{variant:"circular",width:nf,height:nf};const[e,t]=o?af[o]??of:of;return{variant:"text",width:`${Math.round(sf(e,t))}%`,height:"1.2em"}},[o]);return r.jsx("div",Ge({"data-field":n,className:et(p.root,d),style:Ge({height:s,maxWidth:i,minWidth:i},c)},u,{children:!l&&r.jsx(m.slots.baseSkeleton,Ge({},h))}))}),cf={width:3,rx:1.5,x:10.5},df=e=>e.current.state.dimensions.hasScrollX&&(!e.current.state.dimensions.hasScrollY||0===e.current.state.dimensions.scrollbarSize),uf=x("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${jc.autoHeight}`]:t.autoHeight},{[`&.${jc.autosizing}`]:t.autosizing},{[`&.${jc["root--densityStandard"]}`]:t["root--densityStandard"]},{[`&.${jc["root--densityComfortable"]}`]:t["root--densityComfortable"]},{[`&.${jc["root--densityCompact"]}`]:t["root--densityCompact"]},{[`&.${jc["root--disableUserSelection"]}`]:t["root--disableUserSelection"]},{[`&.${jc["root--noToolbar"]}`]:t["root--noToolbar"]},{[`&.${jc.withVerticalBorder}`]:t.withVerticalBorder},{[`& .${jc.actionsCell}`]:t.actionsCell},{[`& .${jc.booleanCell}`]:t.booleanCell},{[`& .${jc.cell}`]:t.cell},{[`& .${jc["cell--editable"]}`]:t["cell--editable"]},{[`& .${jc["cell--editing"]}`]:t["cell--editing"]},{[`& .${jc["cell--flex"]}`]:t["cell--flex"]},{[`& .${jc["cell--pinnedLeft"]}`]:t["cell--pinnedLeft"]},{[`& .${jc["cell--pinnedRight"]}`]:t["cell--pinnedRight"]},{[`& .${jc["cell--rangeBottom"]}`]:t["cell--rangeBottom"]},{[`& .${jc["cell--rangeLeft"]}`]:t["cell--rangeLeft"]},{[`& .${jc["cell--rangeRight"]}`]:t["cell--rangeRight"]},{[`& .${jc["cell--rangeTop"]}`]:t["cell--rangeTop"]},{[`& .${jc["cell--selectionMode"]}`]:t["cell--selectionMode"]},{[`& .${jc["cell--textCenter"]}`]:t["cell--textCenter"]},{[`& .${jc["cell--textLeft"]}`]:t["cell--textLeft"]},{[`& .${jc["cell--textRight"]}`]:t["cell--textRight"]},{[`& .${jc["cell--withLeftBorder"]}`]:t["cell--withLeftBorder"]},{[`& .${jc["cell--withRightBorder"]}`]:t["cell--withRightBorder"]},{[`& .${jc.cellCheckbox}`]:t.cellCheckbox},{[`& .${jc.cellEmpty}`]:t.cellEmpty},{[`& .${jc.cellOffsetLeft}`]:t.cellOffsetLeft},{[`& .${jc.cellSkeleton}`]:t.cellSkeleton},{[`& .${jc.checkboxInput}`]:t.checkboxInput},{[`& .${jc.columnHeader}`]:t.columnHeader},{[`& .${jc["columnHeader--alignCenter"]}`]:t["columnHeader--alignCenter"]},{[`& .${jc["columnHeader--alignLeft"]}`]:t["columnHeader--alignLeft"]},{[`& .${jc["columnHeader--alignRight"]}`]:t["columnHeader--alignRight"]},{[`& .${jc["columnHeader--dragging"]}`]:t["columnHeader--dragging"]},{[`& .${jc["columnHeader--emptyGroup"]}`]:t["columnHeader--emptyGroup"]},{[`& .${jc["columnHeader--filledGroup"]}`]:t["columnHeader--filledGroup"]},{[`& .${jc["columnHeader--filtered"]}`]:t["columnHeader--filtered"]},{[`& .${jc["columnHeader--last"]}`]:t["columnHeader--last"]},{[`& .${jc["columnHeader--lastUnpinned"]}`]:t["columnHeader--lastUnpinned"]},{[`& .${jc["columnHeader--moving"]}`]:t["columnHeader--moving"]},{[`& .${jc["columnHeader--numeric"]}`]:t["columnHeader--numeric"]},{[`& .${jc["columnHeader--pinnedLeft"]}`]:t["columnHeader--pinnedLeft"]},{[`& .${jc["columnHeader--pinnedRight"]}`]:t["columnHeader--pinnedRight"]},{[`& .${jc["columnHeader--siblingFocused"]}`]:t["columnHeader--siblingFocused"]},{[`& .${jc["columnHeader--sortable"]}`]:t["columnHeader--sortable"]},{[`& .${jc["columnHeader--sorted"]}`]:t["columnHeader--sorted"]},{[`& .${jc["columnHeader--withLeftBorder"]}`]:t["columnHeader--withLeftBorder"]},{[`& .${jc["columnHeader--withRightBorder"]}`]:t["columnHeader--withRightBorder"]},{[`& .${jc.columnHeaderCheckbox}`]:t.columnHeaderCheckbox},{[`& .${jc.columnHeaderDraggableContainer}`]:t.columnHeaderDraggableContainer},{[`& .${jc.columnHeaderTitleContainer}`]:t.columnHeaderTitleContainer},{[`& .${jc.columnHeaderTitleContainerContent}`]:t.columnHeaderTitleContainerContent},{[`& .${jc.columnSeparator}`]:t.columnSeparator},{[`& .${jc["columnSeparator--resizable"]}`]:t["columnSeparator--resizable"]},{[`& .${jc["columnSeparator--resizing"]}`]:t["columnSeparator--resizing"]},{[`& .${jc["columnSeparator--sideLeft"]}`]:t["columnSeparator--sideLeft"]},{[`& .${jc["columnSeparator--sideRight"]}`]:t["columnSeparator--sideRight"]},{[`& .${jc["container--bottom"]}`]:t["container--bottom"]},{[`& .${jc["container--top"]}`]:t["container--top"]},{[`& .${jc.detailPanelToggleCell}`]:t.detailPanelToggleCell},{[`& .${jc["detailPanelToggleCell--expanded"]}`]:t["detailPanelToggleCell--expanded"]},{[`& .${jc.editBooleanCell}`]:t.editBooleanCell},{[`& .${jc.filterIcon}`]:t.filterIcon},{[`& .${jc["filler--borderBottom"]}`]:t["filler--borderBottom"]},{[`& .${jc["filler--pinnedLeft"]}`]:t["filler--pinnedLeft"]},{[`& .${jc["filler--pinnedRight"]}`]:t["filler--pinnedRight"]},{[`& .${jc.groupingCriteriaCell}`]:t.groupingCriteriaCell},{[`& .${jc.groupingCriteriaCellLoadingContainer}`]:t.groupingCriteriaCellLoadingContainer},{[`& .${jc.groupingCriteriaCellToggle}`]:t.groupingCriteriaCellToggle},{[`& .${jc.headerFilterRow}`]:t.headerFilterRow},{[`& .${jc.iconSeparator}`]:t.iconSeparator},{[`& .${jc.menuIcon}`]:t.menuIcon},{[`& .${jc.menuIconButton}`]:t.menuIconButton},{[`& .${jc.menuList}`]:t.menuList},{[`& .${jc.menuOpen}`]:t.menuOpen},{[`& .${jc.overlayWrapperInner}`]:t.overlayWrapperInner},{[`& .${jc.pinnedRows}`]:t.pinnedRows},{[`& .${jc["pinnedRows--bottom"]}`]:t["pinnedRows--bottom"]},{[`& .${jc["pinnedRows--top"]}`]:t["pinnedRows--top"]},{[`& .${jc.row}`]:t.row},{[`& .${jc["row--borderBottom"]}`]:t["row--borderBottom"]},{[`& .${jc["row--detailPanelExpanded"]}`]:t["row--detailPanelExpanded"]},{[`& .${jc["row--dragging"]}`]:t["row--dragging"]},{[`& .${jc["row--dynamicHeight"]}`]:t["row--dynamicHeight"]},{[`& .${jc["row--editable"]}`]:t["row--editable"]},{[`& .${jc["row--editing"]}`]:t["row--editing"]},{[`& .${jc["row--firstVisible"]}`]:t["row--firstVisible"]},{[`& .${jc["row--lastVisible"]}`]:t["row--lastVisible"]},{[`& .${jc.rowReorderCell}`]:t.rowReorderCell},{[`& .${jc["rowReorderCell--draggable"]}`]:t["rowReorderCell--draggable"]},{[`& .${jc.rowReorderCellContainer}`]:t.rowReorderCellContainer},{[`& .${jc.rowReorderCellPlaceholder}`]:t.rowReorderCellPlaceholder},{[`& .${jc.rowSkeleton}`]:t.rowSkeleton},{[`& .${jc.scrollbar}`]:t.scrollbar},{[`& .${jc["scrollbar--horizontal"]}`]:t["scrollbar--horizontal"]},{[`& .${jc["scrollbar--vertical"]}`]:t["scrollbar--vertical"]},{[`& .${jc.scrollbarFiller}`]:t.scrollbarFiller},{[`& .${jc["scrollbarFiller--borderBottom"]}`]:t["scrollbarFiller--borderBottom"]},{[`& .${jc["scrollbarFiller--borderTop"]}`]:t["scrollbarFiller--borderTop"]},{[`& .${jc["scrollbarFiller--header"]}`]:t["scrollbarFiller--header"]},{[`& .${jc["scrollbarFiller--pinnedRight"]}`]:t["scrollbarFiller--pinnedRight"]},{[`& .${jc.sortIcon}`]:t.sortIcon},{[`& .${jc.treeDataGroupingCell}`]:t.treeDataGroupingCell},{[`& .${jc.treeDataGroupingCellLoadingContainer}`]:t.treeDataGroupingCellLoadingContainer},{[`& .${jc.treeDataGroupingCellToggle}`]:t.treeDataGroupingCellToggle},{[`& .${jc.withBorderColor}`]:t.withBorderColor}]})(()=>{const e=Uc(vh(),df),t=Zs.colors.background.base,r=Zs.header.background.base,n=Zs.cell.background.pinned,o=mf(Zs.colors.interactive.hover,1);const a=Zs.colors.interactive.hoverOpacity,i=Zs.colors.interactive.selected,s=Zs.colors.interactive.selectedOpacity,l=i,c=`calc(${s} + ${a})`,d=pf(t,o,a),u=pf(t,i,s),m=pf(t,l,c),p=pf(n,o,a),h=pf(n,i,s),g=pf(n,l,c),f=e=>({[`& .${jc["cell--pinnedLeft"]}, & .${jc["cell--pinnedRight"]}`]:{backgroundColor:e,"&.Mui-selected":{backgroundColor:pf(e,u,s),"&:hover":{backgroundColor:pf(e,m,c)}}}}),x=f(p),b=f(h),y=f(g),v={backgroundColor:u,"&:hover":{backgroundColor:m,"@media (hover: none)":{backgroundColor:u}}};return{"--unstable_DataGrid-radius":Zs.radius.base,"--unstable_DataGrid-headWeight":Zs.typography.fontWeight.medium,"--DataGrid-rowBorderColor":Zs.colors.border.base,"--DataGrid-cellOffsetMultiplier":2,"--DataGrid-width":"0px","--DataGrid-hasScrollX":"0","--DataGrid-hasScrollY":"0","--DataGrid-scrollbarSize":"10px","--DataGrid-rowWidth":"0px","--DataGrid-columnsTotalWidth":"0px","--DataGrid-leftPinnedWidth":"0px","--DataGrid-rightPinnedWidth":"0px","--DataGrid-headerHeight":"0px","--DataGrid-headersTotalHeight":"0px","--DataGrid-topContainerHeight":"0px","--DataGrid-bottomContainerHeight":"0px",flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:Zs.colors.border.base,borderRadius:"var(--unstable_DataGrid-radius)",backgroundColor:Zs.colors.background.base,color:Zs.colors.foreground.base,font:Zs.typography.font.body,outline:"none",height:"100%",display:"flex",minWidth:0,minHeight:0,flexDirection:"column",overflow:"hidden",overflowAnchor:"none",transform:"translate(0, 0)",[`.${jc.main} > *:first-child/* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */`]:{borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"},[`&.${jc.autoHeight}`]:{height:"auto"},[`&.${jc.autosizing}`]:{[`& .${jc.columnHeaderTitleContainerContent} > *`]:{overflow:"visible !important"},"@media (hover: hover)":{[`& .${jc.menuIcon}`]:{width:"0 !important",visibility:"hidden !important"}},[`& .${jc.cell}`]:{overflow:"visible !important",whiteSpace:"nowrap",minWidth:"max-content !important",maxWidth:"max-content !important"},[`& .${jc.groupingCriteriaCell}`]:{width:"unset"},[`& .${jc.treeDataGroupingCell}`]:{width:"unset"}},[`&.${jc.withSidePanel}`]:{flexDirection:"row"},[`& .${jc.mainContent}`]:{display:"flex",flexDirection:"column",overflow:"hidden",flex:1},[`& .${jc.columnHeader}, & .${jc.cell}`]:{WebkitTapHighlightColor:"transparent",padding:"0 10px",boxSizing:"border-box"},[`& .${jc.columnHeader}:focus-within, & .${jc.cell}:focus-within`]:{outline:`solid ${mf(Zs.colors.interactive.focus,.5)} 1px`,outlineOffset:-1},[`& .${jc.columnHeader}:focus, & .${jc.cell}:focus`]:{outline:`solid ${Zs.colors.interactive.focus} 1px`,outlineOffset:-1},[`& .${jc.columnHeader}:focus,\n      & .${jc["columnHeader--withLeftBorder"]},\n      & .${jc["columnHeader--withRightBorder"]},\n      & .${jc["columnHeader--siblingFocused"]},\n      & .${jc["virtualScroller--hasScrollX"]} .${jc["columnHeader--lastUnpinned"]},\n      & .${jc["virtualScroller--hasScrollX"]} .${jc["columnHeader--last"]}\n      `]:{[`& .${jc.columnSeparator}`]:{opacity:0},"@media (hover: none)":{[`& .${jc["columnSeparator--resizable"]}`]:{opacity:1}},[`& .${jc["columnSeparator--resizable"]}:hover`]:{opacity:1}},[`&.${jc["root--noToolbar"]} [aria-rowindex="1"] [aria-colindex="1"]`]:{borderTopLeftRadius:"calc(var(--unstable_DataGrid-radius) - 1px)"},[`&.${jc["root--noToolbar"]} [aria-rowindex="1"] .${jc["columnHeader--last"]}`]:{borderTopRightRadius:e?"calc(var(--unstable_DataGrid-radius) - 1px)":void 0},[`& .${jc.columnHeaderCheckbox}, & .${jc.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${jc.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center",backgroundColor:r},[`& .${jc["columnHeader--filter"]}`]:{paddingTop:8,paddingBottom:8,paddingRight:5,minHeight:"min-content",overflow:"hidden"},[`& .${jc["virtualScroller--hasScrollX"]} .${jc["columnHeader--last"]}`]:{overflow:"hidden"},[`& .${jc["pivotPanelField--sorted"]} .${jc.iconButtonContainer},\n      & .${jc["columnHeader--sorted"]} .${jc.iconButtonContainer},\n      & .${jc["columnHeader--filtered"]} .${jc.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${jc.pivotPanelField}:not(.${jc["pivotPanelField--sorted"]}) .${jc.sortButton},\n      & .${jc.columnHeader}:not(.${jc["columnHeader--sorted"]}) .${jc.sortButton}`]:{opacity:0,transition:Zs.transition(["opacity"],{duration:Zs.transitions.duration.short})},[`& .${jc.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",gap:Zs.spacing(.25),minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"},[`& .${jc.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${jc["columnHeader--filledGroup"]} .${jc.columnHeaderTitleContainer}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${jc.sortIcon}, & .${jc.filterIcon}`]:{fontSize:"inherit"},[`& .${jc["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${jc["columnHeader--alignCenter"]} .${jc.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${jc["columnHeader--alignRight"]} .${jc.columnHeaderDraggableContainer}, & .${jc["columnHeader--alignRight"]} .${jc.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${jc["columnHeader--alignCenter"]} .${jc.menuIcon}`]:{marginLeft:"auto"},[`& .${jc["columnHeader--alignRight"]} .${jc.menuIcon}`]:{marginRight:"auto",marginLeft:-5},[`& .${jc["columnHeader--moving"]}`]:{backgroundColor:d},[`& .${jc["columnHeader--pinnedLeft"]}, & .${jc["columnHeader--pinnedRight"]}`]:{position:"sticky",zIndex:40,background:Zs.header.background.base},[`& .${jc.columnSeparator}`]:{position:"absolute",overflow:"hidden",zIndex:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:10,color:Zs.colors.border.base},[`& .${jc.columnHeaders}`]:{width:"var(--DataGrid-rowWidth)",backgroundColor:r},"@media (hover: hover)":{[`& .${jc.columnHeader}:hover`]:{[`& .${jc.menuIcon}`]:{width:"auto",visibility:"visible"},[`& .${jc.iconButtonContainer}`]:{visibility:"visible",width:"auto"}},[`& .${jc.columnHeader}:not(.${jc["columnHeader--sorted"]}):hover .${jc.sortButton},\n        & .${jc.pivotPanelField}:not(.${jc["pivotPanelField--sorted"]}):hover .${jc.sortButton},\n        & .${jc.pivotPanelField}:not(.${jc["pivotPanelField--sorted"]}) .${jc.sortButton}:focus-visible`]:{opacity:.5}},"@media (hover: none)":{[`& .${jc.columnHeader} .${jc.menuIcon}`]:{width:"auto",visibility:"visible"},[`& .${jc.columnHeader}:focus,\n        & .${jc["columnHeader--siblingFocused"]}`]:{[`.${jc["columnSeparator--resizable"]}`]:{color:Zs.colors.foreground.accent}},[`& .${jc.pivotPanelField}:not(.${jc["pivotPanelField--sorted"]}) .${jc.sortButton}`]:{opacity:.5}},[`& .${jc["columnSeparator--sideLeft"]}`]:{left:-5},[`& .${jc["columnSeparator--sideRight"]}`]:{right:-5},[`& .${jc["columnHeader--withRightBorder"]} .${jc["columnSeparator--sideLeft"]}`]:{left:-5.5},[`& .${jc["columnHeader--withRightBorder"]} .${jc["columnSeparator--sideRight"]}`]:{right:-5.5},[`& .${jc["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none",[`&.${jc["columnSeparator--resizing"]}`]:{color:Zs.colors.foreground.accent},"@media (hover: none)":{[`& .${jc.iconSeparator} rect`]:cf},"@media (hover: hover)":{"&:hover":{color:Zs.colors.foreground.accent,[`& .${jc.iconSeparator} rect`]:cf}},"& svg":{pointerEvents:"none"}},[`& .${jc.iconSeparator}`]:{color:"inherit",transition:Zs.transition(["color","width"],{duration:Zs.transitions.duration.short})},[`& .${jc.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-5,display:"flex",alignItems:"center"},[`.${jc.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${jc.headerFilterRow}`]:{[`& .${jc.columnHeader}`]:{boxSizing:"border-box",borderBottom:"1px solid var(--DataGrid-rowBorderColor)"}},[`& .${jc["row--borderBottom"]} .${jc.columnHeader},\n      & .${jc["row--borderBottom"]} .${jc.filler},\n      & .${jc["row--borderBottom"]} .${jc.scrollbarFiller}`]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},[`& .${jc["row--borderBottom"]} .${jc.cell}`]:{borderBottom:"1px solid var(--rowBorderColor)"},[`.${jc.row}`]:{display:"flex",width:"var(--DataGrid-rowWidth)",breakInside:"avoid","--rowBorderColor":"var(--DataGrid-rowBorderColor)",[`&.${jc["row--firstVisible"]}`]:{"--rowBorderColor":"transparent"},"&:hover":{backgroundColor:d,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${jc.rowSkeleton}:hover`]:{backgroundColor:"transparent"},"&.Mui-selected":v},[`& .${jc.cell}`]:{flex:"0 0 auto",height:"var(--height)",width:"var(--width)",lineHeight:"calc(var(--height) - 1px)",boxSizing:"border-box",borderTop:"1px solid var(--rowBorderColor)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis","&.Mui-selected":v},[`& .${jc["virtualScrollerContent--overflowed"]} .${jc["row--lastVisible"]} .${jc.cell}`]:{borderTopColor:"transparent"},[`& .${jc.pinnedRows} .${jc.row}, .${jc.aggregationRowOverlayWrapper} .${jc.row}`]:{backgroundColor:n,"&:hover":{backgroundColor:p}},[`& .${jc["pinnedRows--top"]} :first-of-type`]:{[`& .${jc.cell}, .${jc.scrollbarFiller}`]:{borderTop:"none"}},[`&.${jc["root--disableUserSelection"]}`]:{userSelect:"none"},[`& .${jc["row--dynamicHeight"]} > .${jc.cell}`]:{whiteSpace:"initial",lineHeight:"inherit"},[`& .${jc.cellEmpty}`]:{flex:1,padding:0,height:"unset"},[`& .${jc.cell}.${jc["cell--selectionMode"]}`]:{cursor:"default"},[`& .${jc.cell}.${jc["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:Zs.shadows.base,backgroundColor:Zs.colors.background.overlay,"&:focus-within":{outline:`1px solid ${Zs.colors.interactive.focus}`,outlineOffset:-1}},[`& .${jc["row--editing"]}`]:{boxShadow:Zs.shadows.base},[`& .${jc["row--editing"]} .${jc.cell}`]:{boxShadow:"none",backgroundColor:Zs.colors.background.overlay},[`& .${jc.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${jc.booleanCell}[data-value="true"]`]:{color:Zs.colors.foreground.muted},[`& .${jc.booleanCell}[data-value="false"]`]:{color:Zs.colors.foreground.disabled},[`& .${jc.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:Zs.spacing(1)},[`& .${jc.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:Zs.colors.interactive.disabledOpacity},[`& .${jc["rowReorderCell--draggable"]}`]:{cursor:"grab",opacity:1},[`& .${jc.rowReorderCellContainer}`]:{padding:0,display:"flex",alignItems:"stretch"},[`.${jc.withBorderColor}`]:{borderColor:Zs.colors.border.base},[`& .${jc["cell--withLeftBorder"]}, & .${jc["columnHeader--withLeftBorder"]}`]:{borderLeftColor:"var(--DataGrid-rowBorderColor)",borderLeftWidth:"1px",borderLeftStyle:"solid"},[`& .${jc["cell--withRightBorder"]}, & .${jc["columnHeader--withRightBorder"]}`]:{borderRightColor:"var(--DataGrid-rowBorderColor)",borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${jc["cell--flex"]}`]:{display:"flex",alignItems:"center",lineHeight:"inherit"},[`& .${jc["cell--textLeft"]}`]:{textAlign:"left",justifyContent:"flex-start"},[`& .${jc["cell--textRight"]}`]:{textAlign:"right",justifyContent:"flex-end"},[`& .${jc["cell--textCenter"]}`]:{textAlign:"center",justifyContent:"center"},[`& .${jc["cell--pinnedLeft"]}, & .${jc["cell--pinnedRight"]}`]:{position:"sticky",zIndex:30,background:Zs.cell.background.pinned,"&.Mui-selected":{backgroundColor:h}},[`& .${jc.row}`]:{"&:hover":x,"&.Mui-selected":b,"&.Mui-selected:hover":y},[`& .${jc.cellOffsetLeft}`]:{flex:"0 0 auto",display:"inline-block"},[`& .${jc.cellSkeleton}`]:{flex:"0 0 auto",height:"100%",display:"inline-flex",alignItems:"center"},[`& .${jc.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${jc.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${jc["columnHeader--dragging"]}, & .${jc["row--dragging"]}`]:{background:Zs.colors.background.overlay,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:Zs.colors.interactive.disabledOpacity},[`& .${jc["row--dragging"]}`]:{background:Zs.colors.background.overlay,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:Zs.colors.interactive.disabledOpacity,[`& .${jc.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${jc.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${jc.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:Zs.spacing(2)},[`& .${jc.treeDataGroupingCellLoadingContainer}, .${jc.groupingCriteriaCellLoadingContainer}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},[`& .${jc.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${jc.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:Zs.spacing(2)},[`& .${jc.columnHeaders} .${jc.scrollbarFiller}`]:{backgroundColor:r},[`.${jc.scrollbarFiller}`]:{minWidth:"calc(var(--DataGrid-hasScrollY) * var(--DataGrid-scrollbarSize))",alignSelf:"stretch",[`&.${jc["scrollbarFiller--borderTop"]}`]:{borderTop:"1px solid var(--DataGrid-rowBorderColor)"},[`&.${jc["scrollbarFiller--borderBottom"]}`]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},[`&.${jc["scrollbarFiller--pinnedRight"]}`]:{backgroundColor:Zs.cell.background.pinned,position:"sticky",right:0}},[`& .${jc.filler}`]:{flex:"1 0 auto"},[`& .${jc["filler--borderBottom"]}`]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},[`& .${jc.columnHeaders} .${jc.filler}`]:{backgroundColor:r},[`& .${jc["main--hiddenContent"]}`]:{[`& .${jc.virtualScrollerContent}`]:{position:"fixed",visibility:"hidden"},[`& .${jc["scrollbar--vertical"]}, & .${jc.pinnedRows}, & .${jc.virtualScroller} > .${jc.filler}`]:{display:"none"}}}});function mf(e,t){return`rgba(from ${e} r g b / ${t})`}function pf(e,t,r){return`color-mix(in srgb,${e}, ${t} calc(${r} * 100%))`}const hf=()=>()=>{},gf=()=>!1,ff=()=>!0,xf=e.createContext(void 0);function bf(){const t=e.useContext(xf);if(void 0===t)throw new Error("MUI X: Missing context.");return t}function yf({children:t}){const n=e.useRef(null),o=e.useRef(null),a=e.useRef(null),i=e.useMemo(()=>({columnsPanelTriggerRef:n,filterPanelTriggerRef:o,aiAssistantPanelTriggerRef:a}),[]);return r.jsx(xf.Provider,{value:i,children:t})}function vf(){const e=$s(),t=Uc(e,lu),n=qs(),o=Uc(e,Eg),{columnsPanelTriggerRef:a,filterPanelTriggerRef:i,aiAssistantPanelTriggerRef:s}=bf(),l=e.current.unstable_applyPipeProcessors("preferencePanel",null,o.openedPanelValue??Ag.filters);let c=null;switch(o.openedPanelValue){case Ag.filters:c=i.current;break;case Ag.columns:c=a.current;break;case Ag.aiAssistant:c=s.current}return r.jsx(n.slots.panel,Ge({id:o.panelId,open:t.length>0&&o.open,"aria-labelledby":o.labelId,target:c,onClose:()=>e.current.hidePreferences()},n.slotProps?.panel,{children:l}))}function wf(){const t=qs();return r.jsxs(e.Fragment,{children:[r.jsx(vf,{}),t.showToolbar&&r.jsx(t.slots.toolbar,Ge({},t.slotProps?.toolbar))]})}const Cf=["className","children","sidePanel"],jf=gc(us(function(t,n){const o=qs(),{className:a,children:i,sidePanel:s}=t,l=Qe(t,Cf),c=vh(),d=Uc(c,_c),u=ss(c.current.rootElementRef,n,e.useCallback(e=>{null!==e&&c.current.publishEvent("rootMount",e)},[c])),m=o,p=((e,t)=>{const{autoHeight:r,classes:n,showCellVerticalBorder:o}=e;return _l({root:["root",r&&"autoHeight",`root--density${Qg(t)}`,null===e.slots.toolbar&&"root--noToolbar","withBorderColor",o&&"withVerticalBorder"]},Cc,n)})(m,d),h=e.useContext(Bu);return Hc.useSyncExternalStore(hf,gf,ff)?null:r.jsxs(uf,Ge({className:et(p.root,a,h.className,s&&jc.withSidePanel),ownerState:m},l,{ref:u,children:[r.jsxs("div",{className:jc.mainContent,role:"presentation",children:[r.jsx(wf,{}),r.jsx(Ug,{children:i}),r.jsx(Kg,{})]}),s,h.tag]}))})),Sf=["className"],kf=pt("div",{name:"MuiDataGrid",slot:"FooterContainer"})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),Rf=us(function(e,t){const{className:n}=e,o=Qe(e,Sf),a=qs(),i=(e=>{const{classes:t}=e;return _l({root:["footerContainer","withBorderColor"]},Cc,t)})(a);return r.jsx(kf,Ge({className:et(i.root,n),ownerState:a},o,{ref:t}))}),Nf=["className"],Pf=pt("div",{name:"MuiDataGrid",slot:"Overlay"})({width:"100%",height:"100%",display:"flex",gap:Zs.spacing(1),flexDirection:"column",alignSelf:"center",alignItems:"center",justifyContent:"center",textAlign:"center",textWrap:"balance",backgroundColor:Zs.colors.background.backdrop}),If=us(function(e,t){const{className:n}=e,o=Qe(e,Nf),a=qs(),i=(e=>{const{classes:t}=e;return _l({root:["overlay"]},Cc,t)})(a);return r.jsx(Pf,Ge({className:et(i.root,n),ownerState:a},o,{ref:t}))});function Mf(t,r,n,o={}){return"function"==typeof r?r(n,o):r?(r.props.className&&(n.className=function(e,t){if(!e||!t)return e||t;return`${e} ${t}`}(r.props.className,n.className)),(r.props.style||n.style)&&(n.style=Ge({},n.style,r.props.style)),e.cloneElement(r,n)):e.createElement(t,n)}const Df=e.createContext(void 0);function Tf(e,t){if(!e.ref.current||!t.ref.current)return 0;const r=e.ref.current.compareDocumentPosition(t.ref.current);return r?r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0:0}const Ef=["render","className"],Ff=pt("div",{name:"MuiDataGrid",slot:"Toolbar"})({flex:0,display:"flex",alignItems:"center",justifyContent:"end",gap:Zs.spacing(.25),padding:Zs.spacing(.75),minHeight:52,boxSizing:"border-box",borderBottom:`1px solid ${Zs.colors.border.base}`}),Af=us(function(t,n){const{render:o,className:a}=t,i=Qe(t,Ef),s=qs(),l=(e=>{const{classes:t}=e;return _l({root:["toolbar"]},Cc,t)})(s),[c,d]=e.useState(null),[u,m]=e.useState([]),p=e.useCallback(()=>u.sort(Tf),[u]),h=e.useCallback((e,t,r=!0)=>{let n=e;const o=p(),a=o.length;for(let i=0;i<a;i+=1){if(n+=t,n>=a){if(!r)return-1;n=0}else if(n<0){if(!r)return-1;n=a-1}if(!o[n].ref.current?.disabled&&"true"!==o[n].ref.current?.ariaDisabled)return n}return-1},[p]),g=e.useCallback((e,t)=>{m(r=>[...r,{id:e,ref:t}])},[]),f=e.useCallback(e=>{m(t=>t.filter(t=>t.id!==e))},[]),x=e.useCallback(e=>{if(!c)return;const t=p(),r=t.findIndex(e=>e.id===c);let n=-1;if("ArrowRight"===e.key?(e.preventDefault(),n=h(r,1)):"ArrowLeft"===e.key?(e.preventDefault(),n=h(r,-1)):"Home"===e.key?(e.preventDefault(),n=h(-1,1,!1)):"End"===e.key&&(e.preventDefault(),n=h(t.length,-1,!1)),n>=0&&n<t.length){const e=t[n];d(e.id),e.ref.current?.focus()}},[p,c,h]),b=e.useCallback(e=>{c!==e&&d(e)},[c,d]),y=e.useCallback(e=>{const t=p(),r=t.findIndex(t=>t.id===e),n=h(r,1);if(n>=0&&n<t.length){const e=t[n];d(e.id),e.ref.current?.focus()}},[p,h]);e.useEffect(()=>{const e=p();if(e.length>0){if(!c)return void d(e[0].id);const t=e.findIndex(e=>e.id===c);if(e[t]){if(-1===t){const r=e[t];r&&(d(r.id),r.ref.current?.focus())}}else{const t=e[e.length-1];t&&(d(t.id),t.ref.current?.focus())}}},[p,h]);const v=e.useMemo(()=>({focusableItemId:c,registerItem:g,unregisterItem:f,onItemKeyDown:x,onItemFocus:b,onItemDisabled:y}),[c,g,f,x,b,y]),w=Mf(Ff,o,Ge({role:"toolbar","aria-orientation":"horizontal","aria-label":s.label||void 0,className:et(l.root,a)},i,{ref:n}));return r.jsx(Df.Provider,{value:v,children:w})}),Of=["render","onKeyDown","onFocus","disabled","aria-disabled"],Hf=us(function(t,n){const{render:o,onKeyDown:a,onFocus:i,disabled:s,"aria-disabled":l}=t,c=Qe(t,Of),d=Md(),u=qs(),m=e.useRef(null),p=ss(m,n),{focusableItemId:h,registerItem:g,unregisterItem:f,onItemKeyDown:x,onItemFocus:b,onItemDisabled:y}=function(){const t=e.useContext(Df);if(void 0===t)throw new Error("MUI X: Missing context. Toolbar subcomponents must be placed within a <Toolbar /> component.");return t}();e.useEffect(()=>(g(d,m),()=>f(d)),[]);const v=e.useRef(s);e.useEffect(()=>{v.current!==s&&!0===s&&y(d,s),v.current=s},[s,d,y]);const w=e.useRef(l);e.useEffect(()=>{w.current!==l&&!0===l&&y(d,!0),w.current=l},[l,d,y]);const C=Mf(u.slots.baseIconButton,o,Ge({},u.slotProps?.baseIconButton,{tabIndex:h===d?0:-1},c,{disabled:s,"aria-disabled":l,onKeyDown:e=>{x(e),a?.(e)},onFocus:e=>{b(d),i?.(e)},ref:p}));return r.jsx(e.Fragment,{children:C})}),Lf=["className","children"],$f=pt(Af,{name:"MuiDataGrid",slot:"ToolbarContainer",shouldForwardProp:e=>"ownerState"!==e})({display:"flex",alignItems:"center",flexWrap:"wrap",gap:Zs.spacing(1),padding:Zs.spacing(.5),minHeight:"auto"}),zf=us(function(e,t){const{className:n,children:o}=e,a=Qe(e,Lf),i=qs(),s=(e=>{const{classes:t}=e;return _l({root:["toolbarContainer"]},Cc,t)})(i);return o?r.jsx($f,Ge({className:et(s.root,n),ownerState:i},a,{ref:t,children:o})):null}),qf=e.memo(t=>{const{colDef:n,open:o,columnMenuId:a,columnMenuButtonId:i,iconButtonRef:s}=t,l=$s(),c=qs(),d=(e=>{const{classes:t,open:r}=e;return _l({root:["menuIcon",r&&"menuOpen"],button:["menuIconButton"]},Cc,t)})(Ge({},t,{classes:c.classes})),u=e.useCallback(e=>{e.preventDefault(),e.stopPropagation(),l.current.toggleColumnMenu(n.field)},[l,n.field]),m=n.headerName??n.field;return r.jsx("div",{className:d.root,children:r.jsx(c.slots.baseTooltip,Ge({title:l.current.getLocaleText("columnMenuLabel"),enterDelay:1e3},c.slotProps?.baseTooltip,{children:r.jsx(c.slots.baseIconButton,Ge({ref:s,tabIndex:-1,className:d.button,"aria-label":l.current.getLocaleText("columnMenuAriaLabel")(m),size:"small",onClick:u,"aria-haspopup":"menu","aria-expanded":o,"aria-controls":o?a:void 0,id:i},c.slotProps?.baseIconButton,{children:r.jsx(c.slots.columnMenuIcon,{fontSize:"inherit"})}))}))})});function Bf({columnMenuId:e,columnMenuButtonId:t,ContentComponent:n,contentComponentProps:o,field:a,open:i,target:s,onExited:l}){const c=$s(),d=c.current.getColumn(a),u=cs(e=>{e&&(e.stopPropagation(),s?.contains(e.target))||c.current.hideColumnMenu()});return s&&d?r.jsx(Ku,{position:"bottom-"+("right"===d.align?"start":"end"),open:i,target:s,onClose:u,onExited:l,children:r.jsx(n,Ge({colDef:d,hideMenu:u,open:i,id:e,labelledby:t},o))}):null}function Vf(e,t){return e.closest(`.${t}`)}function Wf(e){return e.replace(/["\\]/g,"\\$&")}function Gf(e){return`.${jc.row}[data-id="${Wf(String(e))}"]`}function Uf(e){return 1===e.target.nodeType&&!e.currentTarget.contains(e.target)}function Kf(e,t){return e.rootElementRef.current.querySelector(`.${jc[t]}`)}const _f=({api:e,colIndex:t,position:r,filterFn:n})=>{if(null===t)return[];const o=[];return Xf(e).forEach(e=>{e.getAttribute("data-id")&&e.querySelectorAll(`.${jc["left"===r?"cell--pinnedLeft":"cell--pinnedRight"]}`).forEach(e=>{const t=Yf(e);null!==t&&n(t)&&o.push(e)})}),o};const Qf=({api:e,colIndex:t,position:r,filterFn:n})=>{if(!e.columnHeadersContainerRef?.current)return[];if(null===t)return[];const o=[];return e.columnHeadersContainerRef.current.querySelectorAll(`.${jc["left"===r?"columnHeader--pinnedLeft":"columnHeader--pinnedRight"]}`).forEach(e=>{const t=Yf(e);null!==t&&n(t,e)&&o.push(e)}),o};function Xf(e){return e.virtualScrollerRef.current.querySelectorAll(`:scope > div > div > .${jc.row}`)}function Yf(e){const t=e.getAttribute("aria-colindex");return t?Number(t)-1:null}const Zf=["className","aria-label"],Jf=pt("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle"})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)",lineHeight:"normal"}),ex=us(function(e,t){const{className:n}=e,o=Qe(e,Zf),a=qs(),i=(e=>{const{classes:t}=e;return _l({root:["columnHeaderTitle"]},Cc,t)})(a);return r.jsx(Jf,Ge({className:et(i.root,n),ownerState:a},o,{ref:t}))});function tx(t){const{label:n,description:o}=t,a=qs(),i=e.useRef(null),[s,l]=e.useState(""),c=e.useCallback(()=>{if(!o&&i?.current){const t=(e=i.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth;l(t?n:"")}var e},[o,n]);return r.jsx(a.slots.baseTooltip,Ge({title:o||s},a.slotProps?.baseTooltip,{children:r.jsx(ex,{onMouseOver:c,ref:i,children:n})}))}const rx=["resizable","resizing","height","side"];var nx=function(e){return e.Left="left",e.Right="right",e}(nx||{});function ox(t){const{height:n,side:o=nx.Right}=t,a=Qe(t,rx),i=qs(),s=(e=>{const{resizable:t,resizing:r,classes:n,side:o}=e;return _l({root:["columnSeparator",t&&"columnSeparator--resizable",r&&"columnSeparator--resizing",o&&`columnSeparator--side${Qg(o)}`],icon:["iconSeparator"]},Cc,n)})(Ge({},t,{side:o,classes:i.classes})),l=e.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]);return r.jsx("div",Ge({className:s.root,style:{minHeight:n}},a,{onClick:l,children:r.jsx(i.slots.columnResizeIcon,{className:s.icon})}))}const ax=e.memo(ox),ix=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps","style"],sx=us(function(t,n){const{classes:o,colIndex:a,height:i,isResizing:s,sortDirection:l,hasFocus:c,tabIndex:d,separatorSide:u,isDraggable:m,headerComponent:p,description:h,width:g,columnMenuIconButton:f=null,columnMenu:x=null,columnTitleIconButtons:b=null,headerClassName:y,label:v,resizable:w,draggableContainerProps:C,columnHeaderSeparatorProps:j,style:S}=t,k=Qe(t,ix),R=vh(),N=qs(),P=e.useRef(null),I=ss(P,n);let M="none";return null!=l&&(M="asc"===l?"ascending":"descending"),e.useLayoutEffect(()=>{const e=R.current.state.columnMenu;if(c&&!e.open){const e=P.current.querySelector('[tabindex="0"]')||P.current;e?.focus(),R.current.columnHeadersContainerRef?.current&&(R.current.columnHeadersContainerRef.current.scrollLeft=0)}},[R,c]),r.jsxs("div",Ge({className:et(o.root,y),style:Ge({},S,{width:g}),role:"columnheader",tabIndex:d,"aria-colindex":a+1,"aria-sort":M},k,{ref:I,children:[r.jsxs("div",Ge({className:o.draggableContainer,draggable:m,role:"presentation"},C,{children:[r.jsxs("div",{className:o.titleContainer,role:"presentation",children:[r.jsx("div",{className:o.titleContainerContent,children:void 0!==p?p:r.jsx(tx,{label:v,description:h,columnWidth:g})}),b]}),f]})),r.jsx(ax,Ge({resizable:!N.disableColumnResize&&!!w,resizing:s,height:i,side:u},j)),x]}))});const lx=gc(function(t){const{colDef:n,columnMenuOpen:o,colIndex:a,headerHeight:i,isResizing:s,isLast:l,sortDirection:c,sortIndex:d,filterItemsCounter:u,hasFocus:m,tabIndex:p,disableReorder:h,separatorSide:g,showLeftBorder:f,showRightBorder:x,pinnedPosition:b,pinnedOffset:y}=t,v=vh(),w=qs(),C=mt(),j=e.useRef(null),S=Md(),k=Md(),R=e.useRef(null),[N,P]=e.useState(o),I=e.useMemo(()=>!w.disableColumnReorder&&!h&&!n.disableReorder,[w.disableColumnReorder,h,n.disableReorder]);let M;n.renderHeader&&(M=n.renderHeader(v.current.getColumnHeaderParams(n.field)));const D=(e=>{const{colDef:t,classes:r,isDragging:n,sortDirection:o,showRightBorder:a,showLeftBorder:i,filterItemsCounter:s,pinnedPosition:l,isLastUnpinned:c,isSiblingFocused:d}=e,u=null!=o,m=null!=s&&s>0,p="number"===t.type;return _l({root:["columnHeader","left"===t.headerAlign&&"columnHeader--alignLeft","center"===t.headerAlign&&"columnHeader--alignCenter","right"===t.headerAlign&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",n&&"columnHeader--moving",u&&"columnHeader--sorted",m&&"columnHeader--filtered",p&&"columnHeader--numeric","withBorderColor",a&&"columnHeader--withRightBorder",i&&"columnHeader--withLeftBorder",l===mm.LEFT&&"columnHeader--pinnedLeft",l===mm.RIGHT&&"columnHeader--pinnedRight",c&&"columnHeader--lastUnpinned",d&&"columnHeader--siblingFocused"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]},Cc,r)})(Ge({},t,{classes:w.classes,showRightBorder:x,showLeftBorder:f})),T=e.useCallback(e=>t=>{Uf(t)||v.current.publishEvent(e,v.current.getColumnHeaderParams(n.field),t)},[v,n.field]),E=e.useMemo(()=>({onClick:T("columnHeaderClick"),onContextMenu:T("columnHeaderContextMenu"),onDoubleClick:T("columnHeaderDoubleClick"),onMouseOver:T("columnHeaderOver"),onMouseOut:T("columnHeaderOut"),onMouseEnter:T("columnHeaderEnter"),onMouseLeave:T("columnHeaderLeave"),onKeyDown:T("columnHeaderKeyDown"),onFocus:T("columnHeaderFocus"),onBlur:T("columnHeaderBlur")}),[T]),F=e.useMemo(()=>I?{onDragStart:T("columnHeaderDragStart"),onDragEnter:T("columnHeaderDragEnter"),onDragOver:T("columnHeaderDragOver"),onDragEndCapture:T("columnHeaderDragEnd")}:{},[I,T]),A=e.useMemo(()=>({onMouseDown:T("columnSeparatorMouseDown"),onDoubleClick:T("columnSeparatorDoubleClick")}),[T]);e.useEffect(()=>{N||P(o)},[N,o]);const O=e.useCallback(()=>{P(!1)},[]),H=!w.disableColumnMenu&&!n.disableColumnMenu&&r.jsx(qf,{colDef:n,columnMenuId:S,columnMenuButtonId:k,open:N,iconButtonRef:R}),L=r.jsx(Bf,{columnMenuId:S,columnMenuButtonId:k,field:n.field,open:o,target:R.current,ContentComponent:w.slots.columnMenu,contentComponentProps:w.slotProps?.columnMenu,onExited:O}),$=n.sortingOrder??w.sortingOrder,z=(n.sortable||null!=c)&&!n.hideSortIcons&&!w.disableColumnSorting,q=r.jsxs(e.Fragment,{children:[!w.disableColumnFilter&&r.jsx(w.slots.columnHeaderFilterIconButton,Ge({field:n.field,counter:u},w.slotProps?.columnHeaderFilterIconButton)),z&&r.jsx(w.slots.columnHeaderSortIcon,Ge({field:n.field,direction:c,index:d,sortingOrder:$,disabled:!n.sortable},w.slotProps?.columnHeaderSortIcon))]});e.useLayoutEffect(()=>{const e=v.current.state.columnMenu;if(m&&!e.open){const e=j.current.querySelector('[tabindex="0"]')||j.current;e?.focus(),v.current.columnHeadersContainerRef?.current&&(v.current.columnHeadersContainerRef.current.scrollLeft=0)}},[v,m]);const B="function"==typeof n.headerClassName?n.headerClassName({field:n.field,colDef:n}):n.headerClassName,V=n.headerName??n.field,W=e.useMemo(()=>Zg(Ge({},t.style),C,b,y),[b,y,t.style,C]);return r.jsx(sx,Ge({ref:j,classes:D,columnMenuOpen:o,colIndex:a,height:i,isResizing:s,sortDirection:c,hasFocus:m,tabIndex:p,separatorSide:g,isDraggable:I,headerComponent:M,description:n.description,elementId:n.field,width:n.computedWidth,columnMenuIconButton:H,columnTitleIconButtons:q,headerClassName:et(B,l&&jc["columnHeader--last"]),label:V,resizable:!w.disableColumnResize&&!!n.resizable,"data-field":n.field,columnMenu:L,draggableContainerProps:F,columnHeaderSeparatorProps:A,style:W},E))}),cx=["className"],dx=pt("div",{name:"MuiDataGrid",slot:"IconButtonContainer"})(()=>({display:"flex",visibility:"hidden",width:0})),ux=us(function(e,t){const{className:n}=e,o=Qe(e,cx),a=qs(),i=(e=>{const{classes:t}=e;return _l({root:["iconButtonContainer"]},Cc,t)})(a);return r.jsx(dx,Ge({className:et(i.root,n),ownerState:a},o,{ref:t}))}),mx=["sortingOrder"],px=e.memo(function(e){const{sortingOrder:t}=e,n=Qe(e,mx),o=qs(),[a]=t,i="asc"===a?o.slots.columnSortedAscendingIcon:o.slots.columnSortedDescendingIcon;return i?r.jsx(i,Ge({},n)):null}),hx=["direction","index","sortingOrder","disabled","className"],gx=pt(td,{name:"MuiDataGrid",slot:"SortButton"})({transition:Zs.transition(["opacity"],{duration:Zs.transitions.duration.short,easing:Zs.transitions.easing.easeInOut})});function fx(t){const{direction:n,index:o,sortingOrder:a,disabled:i,className:s}=t,l=Qe(t,hx),c=$s(),d=qs(),u=Ge({},t,{classes:d.classes}),m=(e=>{const{classes:t}=e;return _l({root:["sortButton"],icon:["sortIcon"]},Cc,t)})(u),p=function(e,t,n,o){let a;const i={};return"asc"===t?a=e.columnSortedAscendingIcon:"desc"===t?a=e.columnSortedDescendingIcon:(a=px,i.sortingOrder=o),a?r.jsx(a,Ge({fontSize:"small",className:n},i)):null}(d.slots,n,m.icon,a);if(!p)return null;const h=r.jsx(gx,Ge({as:d.slots.baseIconButton,ownerState:u,"aria-label":c.current.getLocaleText("columnHeaderSortIconLabel"),title:c.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",disabled:i,className:et(m.root,s)},d.slotProps?.baseIconButton,l,{children:p}));return r.jsxs(e.Fragment,{children:[null!=o&&r.jsx(d.slots.baseBadge,{badgeContent:o,color:"default",overlap:"circular",children:h}),null==o&&h]})}function xx(e){return r.jsx(ux,{children:r.jsx(fx,Ge({},e,{tabIndex:-1}))})}const bx=e.memo(xx);function yx(t){const{counter:n,field:o,onClick:a}=t,i=$s(),s=qs(),l=(e=>{const{classes:t}=e;return _l({icon:["filterIcon"]},Cc,t)})(Ge({},t,{classes:s.classes})),c=Md(),d=Uc(i,Fg,c),u=Md(),m=e.useCallback(e=>{e.preventDefault(),e.stopPropagation();const{open:t,openedPanelValue:r}=Eg(i);t&&r===Ag.filters?i.current.hideFilterPanel():i.current.showFilterPanel(void 0,u,c),a&&a(i.current.getColumnHeaderParams(o),e)},[i,o,a,u,c]);if(!n)return null;const p=r.jsx(s.slots.baseIconButton,Ge({id:c,onClick:m,"aria-label":i.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":d,"aria-controls":d?u:void 0},s.slotProps?.baseIconButton,{children:r.jsx(s.slots.columnFilteredIcon,{className:l.icon,fontSize:"small"})}));return r.jsx(s.slots.baseTooltip,Ge({title:i.current.getLocaleText("columnHeaderFiltersTooltipActive")(n),enterDelay:1e3},s.slotProps?.baseTooltip,{children:r.jsxs(ux,{children:[n>1&&r.jsx(s.slots.baseBadge,{badgeContent:n,color:"default",children:p}),1===n&&p]})}))}const vx=["hideMenu","colDef","id","labelledby","className","children","open"],wx=x(td)(()=>({minWidth:248}));function Cx(e){e.currentTarget.contains(e.target)&&e.stopPropagation()}const jx=us(function(t,n){const{hideMenu:o,id:a,labelledby:i,className:s,children:l,open:c}=t,d=Qe(t,vx),u=qs(),m=e.useCallback(e=>{"Tab"===e.key&&e.preventDefault(),Lu(e.key)&&o(e)},[o]);return r.jsx(wx,Ge({as:u.slots.baseMenuList,id:a,className:et(jc.menuList,s),"aria-labelledby":i,onKeyDown:m,onWheel:Cx,onTouchMove:Cx,autoFocus:c},d,{ref:n,children:l}))}),Sx=["displayOrder"];function kx(t){const{colDef:n,onClick:o}=t,a=$s(),i=qs(),s=1===uu(a).filter(e=>!0!==e.disableColumnMenu).length,l=e.useCallback(e=>{s||(a.current.setColumnVisibility(n.field,!1),o(e))},[a,n.field,o,s]);return i.disableColumnSelector||!1===n.hideable?null:r.jsx(i.slots.baseMenuItem,{onClick:l,disabled:s,iconStart:r.jsx(i.slots.columnMenuHideIcon,{fontSize:"small"}),children:a.current.getLocaleText("columnMenuHideColumn")})}function Rx(t){const{onClick:n}=t,o=$s(),a=qs(),i=e.useCallback(e=>{n(e),o.current.showPreferences(Ag.columns)},[o,n]);return a.disableColumnSelector?null:r.jsx(a.slots.baseMenuItem,{onClick:i,iconStart:r.jsx(a.slots.columnMenuManageColumnsIcon,{fontSize:"small"}),children:o.current.getLocaleText("columnMenuManageColumns")})}const Nx=["defaultSlots","defaultSlotProps","slots","slotProps"],Px={columnMenuSortItem:function(t){const{colDef:n,onClick:o}=t,a=$s(),i=Uc(a,Rm),s=qs(),l=e.useMemo(()=>{if(!n)return null;const e=i.find(e=>e.field===n.field);return e?.sort},[n,i]),c=n.sortingOrder??s.sortingOrder,d=e.useCallback(e=>{o(e);const t=e.currentTarget.getAttribute("data-value")||null;a.current.sortColumn(n.field,t===l?null:t)},[a,n,o,l]);if(s.disableColumnSorting||!n||!n.sortable||!c.some(e=>!!e))return null;const u=e=>{const t=a.current.getLocaleText(e);return"function"==typeof t?t(n):t};return r.jsxs(e.Fragment,{children:[c.includes("asc")&&"asc"!==l?r.jsx(s.slots.baseMenuItem,{onClick:d,"data-value":"asc",iconStart:r.jsx(s.slots.columnMenuSortAscendingIcon,{fontSize:"small"}),children:u("columnMenuSortAsc")}):null,c.includes("desc")&&"desc"!==l?r.jsx(s.slots.baseMenuItem,{onClick:d,"data-value":"desc",iconStart:r.jsx(s.slots.columnMenuSortDescendingIcon,{fontSize:"small"}),children:u("columnMenuSortDesc")}):null,c.includes(null)&&null!=l?r.jsx(s.slots.baseMenuItem,{onClick:d,iconStart:s.slots.columnMenuUnsortIcon?r.jsx(s.slots.columnMenuUnsortIcon,{fontSize:"small"}):r.jsx("span",{}),children:a.current.getLocaleText("columnMenuUnsort")}):null]})},columnMenuFilterItem:function(t){const{colDef:n,onClick:o}=t,a=$s(),i=qs(),s=e.useCallback(e=>{o(e),a.current.showFilterPanel(n.field)},[a,n.field,o]);return i.disableColumnFilter||!n.filterable?null:r.jsx(i.slots.baseMenuItem,{onClick:s,iconStart:r.jsx(i.slots.columnMenuFilterIcon,{fontSize:"small"}),children:a.current.getLocaleText("columnMenuFilter")})},columnMenuColumnsItem:function(t){return r.jsxs(e.Fragment,{children:[r.jsx(kx,Ge({},t)),r.jsx(Rx,Ge({},t))]})}},Ix={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},Mx=us(function(t,n){const{defaultSlots:o,defaultSlotProps:a,slots:i,slotProps:s}=t,l=Qe(t,Nx),c=(t=>{const r=vh(),n=qs(),{defaultSlots:o,defaultSlotProps:a,slots:i={},slotProps:s={},hideMenu:l,colDef:c,addDividers:d=!0}=t,u=e.useMemo(()=>Ge({},o,i),[o,i]),m=e.useMemo(()=>{if(!s||0===Object.keys(s).length)return a;const e=Ge({},s);return Object.entries(a).forEach(([t,r])=>{e[t]=Ge({},r,s[t]||{})}),e},[a,s]),p=r.current.unstable_applyPipeProcessors("columnMenu",[],t.colDef),h=e.useMemo(()=>{const e=Object.keys(o);return Object.keys(i).filter(t=>!e.includes(t))},[i,o]);return e.useMemo(()=>{const e=Array.from(new Set([...p,...h])).filter(e=>null!=u[e]).sort((e,t)=>{const r=m[e],n=m[t];return(Number.isFinite(r?.displayOrder)?r.displayOrder:100)-(Number.isFinite(n?.displayOrder)?n.displayOrder:100)});return e.reduce((t,r,o)=>{let a={colDef:c,onClick:l};const i=m[r];if(i){const e=Qe(i,Sx);a=Ge({},a,e)}return d&&o!==e.length-1?[...t,[u[r],a],[n.slots.baseDivider,{}]]:[...t,[u[r],a]]},[])},[d,c,p,l,u,m,h,n.slots.baseDivider])})(Ge({},l,{defaultSlots:o,defaultSlotProps:a,slots:i,slotProps:s}));return r.jsx(jx,Ge({},l,{ref:n,children:c.map(([e,t],n)=>r.jsx(e,Ge({},t),n))}))}),Dx=us(function(e,t){return r.jsx(Mx,Ge({},e,{ref:t,defaultSlots:Px,defaultSlotProps:Ix}))}),Tx=["className"],Ex=x("div",{name:"MuiDataGrid",slot:"PanelWrapper"})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),Fx=us(function(e,t){const{className:n}=e,o=Qe(e,Tx),a=qs(),i=(e=>{const{classes:t}=e;return _l({root:["panelWrapper"]},Cc,t)})(a);return r.jsx(Ex,Ge({tabIndex:-1,className:et(i.root,n),ownerState:a},o,{ref:t}))});const Ax=["children","className","classes","onClose"],Ox=wc("MuiDataGrid",["panel","paper"]),Hx=x(td,{name:"MuiDataGrid",slot:"panel"})({zIndex:Zs.zIndex.panel}),Lx=x("div",{name:"MuiDataGrid",slot:"panelContent"})({backgroundColor:Zs.colors.background.overlay,borderRadius:Zs.radius.base,boxShadow:Zs.shadows.overlay,display:"flex",maxWidth:`calc(100vw - ${Zs.spacing(2)})`,overflow:"auto"}),$x=us((t,n)=>{const{children:o,className:a,onClose:i}=t,s=Qe(t,Ax),l=$s(),c=qs(),d=Ox,[u,m]=e.useState(!1),p=Vu(),h=cs(()=>m(!0)),g=cs(()=>m(!1)),f=cs(()=>{i?.()}),x=cs(e=>{"Escape"===e.key&&i?.()}),[b,y]=e.useState(null);return e.useEffect(()=>{const e=l.current.rootElementRef?.current?.querySelector('[data-id="gridPanelAnchor"]');e&&y(e)},[l]),b?r.jsx(Hx,Ge({as:c.slots.basePopper,ownerState:c,placement:"bottom-end",className:et(d.panel,a,p),flip:!0,onDidShow:h,onDidHide:g,onClickAway:f,clickAwayMouseEvent:"onPointerUp",clickAwayTouchEvent:!1,focusTrap:!0},s,c.slotProps?.basePopper,{target:t.target??b,ref:n,children:r.jsx(Lx,{className:d.paper,ownerState:c,onKeyDown:x,children:u&&o})})):null}),zx=["className"],qx=pt("div",{name:"MuiDataGrid",slot:"PanelContent"})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400,padding:Zs.spacing(2.5,1.5,2,1),gap:Zs.spacing(2.5)});function Bx(e){const{className:t}=e,n=Qe(e,zx),o=qs(),a=(e=>{const{classes:t}=e;return _l({root:["panelContent"]},Cc,t)})(o);return r.jsx(qx,Ge({className:et(a.root,t),ownerState:o},n))}const Vx=["className"],Wx=x("div",{name:"MuiDataGrid",slot:"PanelFooter"})({padding:Zs.spacing(1),display:"flex",justifyContent:"space-between",borderTop:`1px solid ${Zs.colors.border.base}`});function Gx(e){const{className:t}=e,n=Qe(e,Vx),o=qs(),a=(e=>{const{classes:t}=e;return _l({root:["panelFooter"]},Cc,t)})(o);return r.jsx(Wx,Ge({className:et(a.root,t),ownerState:o},n))}const Ux=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","readOnly","children"],Kx=["InputComponentProps"],_x=x("div",{name:"MuiDataGrid",slot:"FilterForm"})({display:"flex",gap:Zs.spacing(1.5)}),Qx=x("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon"})({flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center"}),Xx=x("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput"})({minWidth:75,justifyContent:"end"}),Yx=x("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput"})({width:150}),Zx=x("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput"})({width:150}),Jx=x("div",{name:"MuiDataGrid",slot:"FilterFormValueInput"})({width:190}),eb=e=>e.headerName||e.field,tb=new Intl.Collator,rb=us(function(t,n){const{item:o,hasMultipleFilters:a,deleteFilter:i,applyFilterChanges:s,showMultiFilterOperators:l,disableMultiFilterOperator:c,applyMultiFilterOperatorChanges:d,focusElementRef:u,logicOperators:m=[Wd.And,Wd.Or],columnsSort:p,filterColumns:h,deleteIconProps:g={},logicOperatorInputProps:f={},operatorInputProps:x={},columnInputProps:b={},valueInputProps:y={},readOnly:v}=t,w=Qe(t,Ux),C=$s(),j=Uc(C,su),S=Uc(C,xu),k=Uc(C,Im),R=Md(),N=Md(),P=Md(),I=Md(),M=qs(),D=(e=>{const{classes:t}=e;return _l({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Cc,t)})(M),T=e.useRef(null),E=e.useRef(null),F=k.logicOperator??Wd.And,A=a&&m.length>0,O=(M.slotProps?.baseSelect||{}).native??!1,H=M.slotProps?.baseSelectOption||{},{InputComponentProps:L}=y,$=Qe(y,Kx),z=Uc(C,lg),q=Uc(C,dg),{filteredColumns:B,selectedField:V}=e.useMemo(()=>{let e=o.field;const t=!1===j[o.field].filterable?j[o.field]:null;if(t)return{filteredColumns:[t],selectedField:e};if(z)return{filteredColumns:S.filter(e=>void 0!==q.get(e.field)),selectedField:e};if(void 0===h||"function"!=typeof h)return{filteredColumns:S,selectedField:e};const r=h({field:o.field,columns:S,currentFilters:k?.items||[]});return{filteredColumns:S.filter(t=>{const n=r.includes(t.field);return t.field!==o.field||n||(e=void 0),n}),selectedField:e}},[o.field,j,z,h,S,k?.items,q]),W=e.useMemo(()=>{switch(p){case"asc":return B.sort((e,t)=>tb.compare(eb(e),eb(t)));case"desc":return B.sort((e,t)=>-tb.compare(eb(e),eb(t)));default:return B}},[B,p]),G=o.field?C.current.getColumn(o.field):null,U=e.useMemo(()=>o.operator&&G?G.filterOperators?.find(e=>e.value===o.operator):null,[o,G]),K=e.useCallback(e=>{const t=e.target.value,r=C.current.getColumn(t);if(r.field===G.field)return;const n=r.filterOperators.find(e=>e.value===o.operator)||r.filterOperators[0];let a=!n.InputComponent||n.InputComponent!==U?.InputComponent||r.type!==G.type?void 0:o.value;if("singleSelect"===r.type&&void 0!==a){const e=r,t=Vp(e);Array.isArray(a)?a=a.filter(r=>void 0!==Wp(r,t,e?.getOptionValue)):void 0===Wp(o.value,t,e?.getOptionValue)&&(a=void 0)}s(Ge({},o,{field:t,operator:n.value,value:a}))},[C,s,o,G,U]),_=e.useCallback(e=>{const t=e.target.value,r=G?.filterOperators.find(e=>e.value===t);s(Ge({},o,{operator:t,value:!r?.InputComponent||r?.InputComponent!==U?.InputComponent?void 0:o.value}))},[s,o,G,U]),Q=e.useCallback(e=>{const t=e.target.value===Wd.And.toString()?Wd.And:Wd.Or;d(t)},[d]);return e.useImperativeHandle(u,()=>({focus:()=>{U?.InputComponent?T?.current?.focus():E.current.focus()}}),[U]),r.jsxs(_x,Ge({className:D.root,"data-id":o.id,ownerState:M},w,{ref:n,children:[r.jsx(Qx,Ge({},g,{className:et(D.deleteIcon,g.className),ownerState:M,children:r.jsx(M.slots.baseIconButton,Ge({"aria-label":C.current.getLocaleText("filterPanelDeleteIconLabel"),title:C.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:()=>{i(o)},size:"small",disabled:v},M.slotProps?.baseIconButton,{children:r.jsx(M.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),r.jsx(Xx,Ge({as:M.slots.baseSelect,sx:[A?{display:"flex"}:{display:"none"},l?{visibility:"visible"}:{visibility:"hidden"},f.sx],className:et(D.logicOperatorInput,f.className),ownerState:M},f,{size:"small",slotProps:{htmlInput:{"aria-label":C.current.getLocaleText("filterPanelLogicOperator")}},value:F??"",onChange:Q,disabled:!!c||1===m.length,native:O},M.slotProps?.baseSelect,{children:m.map(t=>e.createElement(M.slots.baseSelectOption,Ge({},H,{native:O,key:t.toString(),value:t.toString()}),C.current.getLocaleText((e=>{switch(e){case Wd.And:return"filterPanelOperatorAnd";case Wd.Or:return"filterPanelOperatorOr";default:throw new Error("MUI X: Invalid `logicOperator` property in the `GridFilterPanel`.")}})(t))))})),r.jsx(Yx,Ge({as:M.slots.baseSelect},b,{className:et(D.columnInput,b.className),ownerState:M,size:"small",labelId:N,id:R,label:C.current.getLocaleText("filterPanelColumns"),value:V??"",onChange:K,native:O,disabled:v},M.slotProps?.baseSelect,{children:W.map(t=>e.createElement(M.slots.baseSelectOption,Ge({},H,{native:O,key:t.field,value:t.field}),eb(t)))})),r.jsx(Zx,Ge({as:M.slots.baseSelect,size:"small"},x,{className:et(D.operatorInput,x.className),ownerState:M,labelId:I,label:C.current.getLocaleText("filterPanelOperator"),id:P,value:o.operator,onChange:_,native:O,inputRef:E,disabled:v},M.slotProps?.baseSelect,{children:G?.filterOperators?.map(t=>e.createElement(M.slots.baseSelectOption,Ge({},H,{native:O,key:t.value,value:t.value}),t.label||C.current.getLocaleText(`filterOperator${Qg(t.value)}`)))})),r.jsx(Jx,Ge({},$,{className:et(D.valueInput,$.className),ownerState:M,children:U?.InputComponent?r.jsx(U.InputComponent,Ge({apiRef:C,item:o,applyValue:s,focusElementRef:T,disabled:v,slotProps:{root:{size:"small"}}},U.InputComponentProps,L),o.field):null}))]}))}),nb=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],ob=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(1e5*Math.random())}),ab=us(function(t,n){const o=$s(),a=qs(),i=Uc(o,Im),s=Uc(o,xu),l=Uc(o,bu),c=e.useRef(null),d=e.useRef(null),{logicOperators:u=[Wd.And,Wd.Or],columnsSort:m,filterFormProps:p,getColumnForNewFilter:h,disableAddFilterButton:g=!1,disableRemoveAllButton:f=!1}=t,x=Qe(t,nb),b=o.current.upsertFilterItem,y=e.useCallback(e=>{o.current.setFilterLogicOperator(e)},[o]),v=e.useCallback(()=>{let e;if(h&&"function"==typeof h){const t=h({currentFilters:i?.items||[],columns:s});if(null===t)return null;e=s.find(({field:e})=>e===t)}else e=s.find(e=>e.filterOperators?.length);return e?ob(e):null},[i?.items,s,h]),w=e.useCallback(()=>{if(void 0===h||"function"!=typeof h)return v();const e=i.items.length?i.items:[v()].filter(Boolean),t=h({currentFilters:e,columns:s});if(null===t)return null;const r=s.find(({field:e})=>e===t);return r?ob(r):null},[i.items,s,h,v]),C=e.useMemo(()=>i.items.length?i.items:(d.current||(d.current=v()),d.current?[d.current]:[]),[i.items,v]),j=C.length>1,{readOnlyFilters:S,validFilters:k}=e.useMemo(()=>C.reduce((e,t)=>(l[t.field]?e.validFilters.push(t):e.readOnlyFilters.push(t),e),{readOnlyFilters:[],validFilters:[]}),[C,l]),R=e.useCallback(()=>{const e=w();e&&o.current.upsertFilterItems([...C,e])},[o,w,C]),N=e.useCallback(e=>{const t=1===k.length;o.current.deleteFilterItem(e),t&&o.current.hideFilterPanel()},[o,k.length]),P=e.useCallback(()=>1===k.length&&void 0===k[0].value?(o.current.deleteFilterItem(k[0]),o.current.hideFilterPanel()):o.current.setFilterModel(Ge({},i,{items:S}),"removeAllFilterItems"),[o,S,i,k]);return e.useEffect(()=>{u.length>0&&i.logicOperator&&!u.includes(i.logicOperator)&&y(u[0])},[u,y,i.logicOperator]),e.useEffect(()=>{k.length>0&&c.current.focus()},[k.length]),r.jsxs(Fx,Ge({},x,{ref:n,children:[r.jsxs(Bx,{children:[S.map((e,t)=>r.jsx(rb,Ge({item:e,applyFilterChanges:b,deleteFilter:N,hasMultipleFilters:j,showMultiFilterOperators:t>0,disableMultiFilterOperator:1!==t,applyMultiFilterOperatorChanges:y,focusElementRef:null,readOnly:!0,logicOperators:u,columnsSort:m},p),null==e.id?t:e.id)),k.map((e,t)=>r.jsx(rb,Ge({item:e,applyFilterChanges:b,deleteFilter:N,hasMultipleFilters:j,showMultiFilterOperators:S.length+t>0,disableMultiFilterOperator:S.length+t!==1,applyMultiFilterOperatorChanges:y,focusElementRef:t===k.length-1?c:null,logicOperators:u,columnsSort:m},p),null==e.id?t+S.length:e.id))]}),a.disableMultipleColumnsFiltering||g&&f?null:r.jsxs(Gx,{children:[g?r.jsx("span",{}):r.jsx(a.slots.baseButton,Ge({onClick:R,startIcon:r.jsx(a.slots.filterPanelAddIcon,{})},a.slotProps?.baseButton,{children:o.current.getLocaleText("filterPanelAddFilter")})),!f&&k.length>0?r.jsx(a.slots.baseButton,Ge({onClick:P,startIcon:r.jsx(a.slots.filterPanelRemoveAllIcon,{})},a.slotProps?.baseButton,{children:o.current.getLocaleText("filterPanelRemoveAll")})):null]})]}))}),ib=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1,sb=["children"],lb=gt({from:{opacity:0},to:{opacity:1}}),cb=gt({"from, to":{"--scrollable":'" "'}}),db=pt("div",{name:"MuiDataGrid",slot:"ShadowScrollArea"})`
  flex: 1;
  display: flex;
  flex-direction: column;
  animation: ${cb};
  animation-timeline: --scroll-timeline;
  animation-fill-mode: none;
  box-sizing: border-box;
  overflow: auto;
  scrollbar-width: thin;
  scroll-timeline: --scroll-timeline block;

  &::before,
  &::after {
    content: '';
    flex-shrink: 0;
    display: block;
    position: sticky;
    left: 0;
    width: 100%;
    height: 4px;
    animation: ${lb} linear both;
    animation-timeline: --scroll-timeline;

    // Custom property toggle trick:
    // - Detects if the element is scrollable
    // - https://css-tricks.com/the-css-custom-property-toggle-trick/
    --visibility-scrollable: var(--scrollable) visible;
    --visibility-not-scrollable: hidden;
    visibility: var(--visibility-scrollable, var(--visibility-not-scrollable));
  }

  &::before {
    top: 0;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.05) 0, transparent 100%);
    animation-range: 0 4px;
  }

  &::after {
    bottom: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.05) 0, transparent 100%);
    animation-direction: reverse;
    animation-range: calc(100% - 4px) 100%;
  }
`,ub=us(function(e,t){const{children:n}=e,o=Qe(e,sb);return r.jsx(db,Ge({},o,{ref:t,children:n}))}),mb=new Intl.Collator;const pb=x("div",{name:"MuiDataGrid",slot:"ColumnsManagement"})({display:"flex",flexDirection:"column",padding:Zs.spacing(.5,1.5)}),hb=x(ub,{name:"MuiDataGrid",slot:"ColumnsManagementScrollArea"})({maxHeight:300}),gb=x("div",{name:"MuiDataGrid",slot:"ColumnsManagementHeader"})({padding:Zs.spacing(1.5,2),borderBottom:`1px solid ${Zs.colors.border.base}`}),fb=x(td,{name:"MuiDataGrid",slot:"ColumnsManagementSearchInput"})({[`& .${ft.input}::-webkit-search-decoration,\n      & .${ft.input}::-webkit-search-cancel-button,\n      & .${ft.input}::-webkit-search-results-button,\n      & .${ft.input}::-webkit-search-results-decoration`]:{display:"none"}}),xb=x("div",{name:"MuiDataGrid",slot:"ColumnsManagementFooter"})({padding:Zs.spacing(1,1,1,1.5),display:"flex",justifyContent:"space-between",borderTop:`1px solid ${Zs.colors.border.base}`}),bb=x("div",{name:"MuiDataGrid",slot:"ColumnsManagementEmptyText"})({padding:Zs.spacing(1,0),alignSelf:"center",font:Zs.typography.font.body}),yb=us(function(e,t){const{slotProps:n={}}=e,o=n.button||{},a=n.tooltip||{},i=Md(),s=Md(),l=$s(),c=qs(),{columnsPanelTriggerRef:d}=bf(),u=Uc(l,Eg),m=ss(t,d);if(c.disableColumnSelector)return null;const p=u.open&&u.panelId===s;return r.jsx(c.slots.baseTooltip,Ge({title:l.current.getLocaleText("toolbarColumnsLabel"),enterDelay:1e3},c.slotProps?.baseTooltip,a,{children:r.jsx(c.slots.baseButton,Ge({id:i,size:"small","aria-label":l.current.getLocaleText("toolbarColumnsLabel"),"aria-haspopup":"menu","aria-expanded":p,"aria-controls":p?s:void 0,startIcon:r.jsx(c.slots.columnSelectorIcon,{})},c.slotProps?.baseButton,o,{onPointerUp:e=>{u.open&&e.stopPropagation(),o.onPointerUp?.(e)},onClick:e=>{u.open&&u.openedPanelValue===Ag.columns?l.current.hidePreferences():l.current.showPreferences(Ag.columns,s,i),o.onClick?.(e)},ref:m,children:l.current.getLocaleText("toolbarColumns")}))}))}),vb=us(function(t,n){const{slotProps:o={}}=t,a=o.button||{},i=o.tooltip||{},s=$s(),l=qs(),c=Uc(s,_c),d=Md(),u=Md(),[m,p]=e.useState(!1),h=e.useRef(null),g=ss(n,h),f=[{icon:r.jsx(l.slots.densityCompactIcon,{}),label:s.current.getLocaleText("toolbarDensityCompact"),value:"compact"},{icon:r.jsx(l.slots.densityStandardIcon,{}),label:s.current.getLocaleText("toolbarDensityStandard"),value:"standard"},{icon:r.jsx(l.slots.densityComfortableIcon,{}),label:s.current.getLocaleText("toolbarDensityComfortable"),value:"comfortable"}],x=e.useMemo(()=>{switch(c){case"compact":return r.jsx(l.slots.densityCompactIcon,{});case"comfortable":return r.jsx(l.slots.densityComfortableIcon,{});default:return r.jsx(l.slots.densityStandardIcon,{})}},[c,l]);if(l.disableDensitySelector)return null;const b=f.map((e,t)=>r.jsx(l.slots.baseMenuItem,{onClick:()=>{return t=e.value,s.current.setDensity(t),void p(!1);var t},selected:e.value===c,iconStart:e.icon,children:e.label},t));return r.jsxs(e.Fragment,{children:[r.jsx(l.slots.baseTooltip,Ge({title:s.current.getLocaleText("toolbarDensityLabel"),enterDelay:1e3},l.slotProps?.baseTooltip,i,{children:r.jsx(l.slots.baseButton,Ge({size:"small",startIcon:x,"aria-label":s.current.getLocaleText("toolbarDensityLabel"),"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?u:void 0,id:d},l.slotProps?.baseButton,a,{onClick:e=>{p(e=>!e),a.onClick?.(e)},ref:g,children:s.current.getLocaleText("toolbarDensity")}))})),r.jsx(Ku,{open:m,target:h.current,onClose:()=>{p(!1)},position:"bottom-end",children:r.jsx(l.slots.baseMenuList,{id:u,className:jc.menuList,"aria-labelledby":d,autoFocusItem:m,children:b})})]})}),wb=x("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList"})({margin:Zs.spacing(1,1,.5),padding:Zs.spacing(0,1)}),Cb=us(function(t,n){const{slotProps:o={}}=t,a=o.button||{},i=o.tooltip||{},s=o.badge||{},l=$s(),c=qs(),d=Uc(l,qm),u=Uc(l,su),m=Uc(l,Eg),p=(e=>{const{classes:t}=e;return _l({root:["toolbarFilterList"]},Cc,t)})(c),h=Md(),g=Md(),{filterPanelTriggerRef:f}=bf(),x=ss(n,f),b=e.useMemo(()=>{if(m.open)return l.current.getLocaleText("toolbarFiltersTooltipHide");if(0===d.length)return l.current.getLocaleText("toolbarFiltersTooltipShow");const e=e=>u[e.field].filterOperators.find(t=>t.value===e.operator).label||l.current.getLocaleText(`filterOperator${Qg(e.operator)}`).toString(),t=e=>{const{getValueAsString:t}=u[e.field].filterOperators.find(t=>t.value===e.operator);return t?t(e.value):e.value};return r.jsxs("div",{children:[l.current.getLocaleText("toolbarFiltersTooltipActive")(d.length),r.jsx(wb,{className:p.root,ownerState:c,children:d.map((n,o)=>Ge({},u[n.field]&&r.jsx("li",{children:`${u[n.field].headerName||n.field}\n                  ${e(n)}\n                  ${null!=n.value?t(n):""}`},o)))})]})},[l,c,m.open,d,u,p]);if(c.disableColumnFilter)return null;const y=m.open&&m.panelId===g;return r.jsx(c.slots.baseTooltip,Ge({title:b,enterDelay:1e3},c.slotProps?.baseTooltip,i,{children:r.jsx(c.slots.baseButton,Ge({id:h,size:"small","aria-label":l.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":y?g:void 0,"aria-expanded":y,"aria-haspopup":!0,startIcon:r.jsx(c.slots.baseBadge,Ge({badgeContent:d.length,color:"primary"},c.slotProps?.baseBadge,s,{children:r.jsx(c.slots.openFilterButtonIcon,{})}))},c.slotProps?.baseButton,a,{onClick:e=>{const{open:t,openedPanelValue:r}=m;t&&r===Ag.filters?l.current.hidePreferences():l.current.showPreferences(Ag.filters,g,h),a.onClick?.(e)},onPointerUp:e=>{m.open&&e.stopPropagation(),a.onPointerUp?.(e)},ref:x,children:l.current.getLocaleText("toolbarFilters")}))}))}),jb=us(function(t,n){const{children:o,slotProps:a={}}=t,i=a.button||{},s=a.tooltip||{},l=$s(),c=qs(),d=Md(),u=Md(),[m,p]=e.useState(!1),h=e.useRef(null),g=ss(n,h),f=()=>p(!1);return null==o?null:r.jsxs(e.Fragment,{children:[r.jsx(c.slots.baseTooltip,Ge({title:l.current.getLocaleText("toolbarExportLabel"),enterDelay:1e3},c.slotProps?.baseTooltip,s,{children:r.jsx(c.slots.baseButton,Ge({size:"small",startIcon:r.jsx(c.slots.exportIcon,{}),"aria-expanded":m,"aria-label":l.current.getLocaleText("toolbarExportLabel"),"aria-haspopup":"menu","aria-controls":m?u:void 0,id:d},c.slotProps?.baseButton,i,{onClick:e=>{p(e=>!e),i.onClick?.(e)},ref:g,children:l.current.getLocaleText("toolbarExport")}))})),r.jsx(Ku,{open:m,target:h.current,onClose:f,position:"bottom-end",children:r.jsx(c.slots.baseMenuList,{id:u,className:jc.menuList,"aria-labelledby":d,autoFocusItem:m,children:e.Children.map(o,t=>e.isValidElement(t)?e.cloneElement(t,{hideMenu:f}):t)})})]})}),Sb=["hideMenu","options"],kb=["hideMenu","options"],Rb=["csvOptions","printOptions","excelOptions"];function Nb(e){const t=$s(),n=qs(),{hideMenu:o,options:a}=e,i=Qe(e,Sb);return r.jsx(n.slots.baseMenuItem,Ge({onClick:()=>{t.current.exportDataAsCsv(a),o?.()}},i,{children:t.current.getLocaleText("toolbarExportCSV")}))}function Pb(e){const t=$s(),n=qs(),{hideMenu:o,options:a}=e,i=Qe(e,kb);return r.jsx(n.slots.baseMenuItem,Ge({onClick:()=>{t.current.exportDataAsPrint(a),o?.()}},i,{children:t.current.getLocaleText("toolbarExportPrint")}))}const Ib=us(function(t,n){const o=t,{csvOptions:a={},printOptions:i={},excelOptions:s}=o,l=Qe(o,Rb),c=$s().current.unstable_applyPipeProcessors("exportMenu",[],{excelOptions:s,csvOptions:a,printOptions:i}).sort((e,t)=>e.componentName>t.componentName?1:-1);return 0===c.length?null:r.jsx(jb,Ge({},l,{ref:n,children:c.map((t,r)=>e.cloneElement(t.component,{key:r}))}))});function Mb(e,t=166){let r;function n(...n){clearTimeout(r),r=setTimeout(()=>{e.apply(this,n)},t)}return n.clear=()=>{clearTimeout(r)},n}function Db(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n+=1)if(!Db(e[n],t[n]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let e=0;e<r.length;e+=1)if(!t.has(r[e][0]))return!1;for(let e=0;e<r.length;e+=1){const n=r[e];if(!Db(n[1],t.get(n[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let e=0;e<r.length;e+=1)if(!t.has(r[e][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(let e=0;e<n;e+=1)if(!Object.prototype.hasOwnProperty.call(t,r[e]))return!1;for(let o=0;o<n;o+=1){const n=r[o];if(!Db(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}const Tb=e.createContext(void 0);function Eb(){const t=e.useContext(Tb);if(void 0===t)throw new Error("MUI X: Missing context. Quick Filter subcomponents must be placed within a <QuickFilter /> component.");return t}const Fb=["render","className","parser","formatter","debounceMs","defaultExpanded","expanded","onExpandedChange"],Ab=e=>e.split(" ").filter(e=>""!==e),Ob=e=>e.join(" ");function Hb(t){const n=qs(),{render:o,className:a,parser:i=Ab,formatter:s=Ob,debounceMs:l=n.filterDebounceMs,defaultExpanded:c,expanded:d,onExpandedChange:u}=t,m=Qe(t,Fb),p=$s(),h=e.useRef(null),g=e.useRef(null),f=Uc(p,Mm),[x,b]=e.useState(s(f??[])),[y,v]=e.useState(c??x.length>0),w=d??y,C=e.useMemo(()=>({value:x,expanded:w}),[x,w]),j="function"==typeof a?a(C):a,S=e.useRef(null),k=Md(),R=e.useCallback(e=>{u&&u(e),void 0===d&&v(e)},[u,d]),N=e.useRef(f);e.useEffect(()=>{Db(N.current,f)||(N.current=f,b(e=>Db(i(e),f)?e:s(f??[])))},[f,s,i]);const P=e.useRef(!0),I=e.useRef(w);e.useEffect(()=>{P.current?P.current=!1:I.current!==w&&(w?requestAnimationFrame(()=>{h.current?.focus({preventScroll:!0})}):g.current?.focus({preventScroll:!0}),I.current=w)},[w]);const M=e.useMemo(()=>Mb(e=>{const t=i(e);N.current=t,p.current.setQuickFilterValues(t)},l),[p,l,i]);e.useEffect(()=>M.clear,[M]);const D=e.useCallback(e=>{const t=e.target.value;b(t),M(t)},[M]),T=e.useCallback(()=>{b(""),p.current.setQuickFilterValues([]),h.current?.focus()},[p,h]),E=e.useMemo(()=>({controlRef:h,triggerRef:g,state:C,controlId:k,clearValue:T,onValueChange:D,onExpandedChange:R}),[k,C,D,T,R]);ls(()=>{S.current&&g.current&&S.current.style.setProperty("--trigger-width",`${g.current?.offsetWidth}px`)},[]);const F=Mf("div",o,Ge({className:j},m,{ref:S}),C);return r.jsx(Tb.Provider,{value:E,children:F})}const Lb=["render","className","slotProps","onKeyDown","onChange"],$b=us(function(t,n){const{render:o,className:a,slotProps:i,onKeyDown:s,onChange:l}=t,c=Qe(t,Lb),d=qs(),{state:u,controlId:m,controlRef:p,onValueChange:h,onExpandedChange:g,clearValue:f}=Eb(),x="function"==typeof a?a(u):a,b=ss(p,n),y=Mf(d.slots.baseTextField,o,Ge({},d.slotProps?.baseTextField,{slotProps:Ge({htmlInput:Ge({role:"searchbox",id:m,tabIndex:u.expanded?void 0:-1},i?.htmlInput,{onBlur:e=>{""===u.value&&g(!1),i?.htmlInput?.onBlur?.(e)}})},i),value:u.value,className:x},c,{onChange:e=>{u.expanded||g(!0),h(e),l?.(e)},onKeyDown:e=>{"Escape"===e.key&&(""===u.value?g(!1):f()),s?.(e)},ref:b}),u);return r.jsx(e.Fragment,{children:y})}),zb=["render","className","onClick"],qb=us(function(t,n){const{render:o,className:a,onClick:i}=t,s=Qe(t,zb),l=qs(),{state:c,clearValue:d}=Eb(),u="function"==typeof a?a(c):a,m=Mf(l.slots.baseIconButton,o,Ge({},l.slotProps?.baseIconButton,{className:u,tabIndex:-1},s,{onClick:e=>{d(),i?.(e)},ref:n}),c);return r.jsx(e.Fragment,{children:m})}),Bb=["render","className","onClick"],Vb=us(function(t,n){const{render:o,className:a,onClick:i}=t,s=Qe(t,Bb),l=qs(),{state:c,controlId:d,onExpandedChange:u,triggerRef:m}=Eb(),p="function"==typeof a?a(c):a,h=ss(m,n),g=Mf(l.slots.baseButton,o,Ge({},l.slotProps?.baseButton,{className:p,"aria-controls":d,"aria-expanded":c.expanded},s,{onClick:e=>{u(!c.expanded),i?.(e)},ref:h}),c);return r.jsx(e.Fragment,{children:g})}),Wb=["quickFilterParser","quickFilterFormatter","debounceMs","className","slotProps"],Gb=["ref","slotProps"],Ub=pt("div",{name:"MuiDataGrid",slot:"ToolbarQuickFilter"})({display:"grid",alignItems:"center"}),Kb=pt(Hf,{name:"MuiDataGrid",slot:"ToolbarQuickFilterTrigger"})(({ownerState:e})=>({gridArea:"1 / 1",width:"min-content",height:"min-content",zIndex:1,opacity:e.expanded?0:1,pointerEvents:e.expanded?"none":"auto",transition:Zs.transition(["opacity"])})),_b=pt(e=>{throw new Error("Failed assertion: should not be rendered")},{name:"MuiDataGrid",slot:"ToolbarQuickFilterControl"})(({ownerState:e})=>({gridArea:"1 / 1",overflowX:"clip",width:e.expanded?260:"var(--trigger-width)",opacity:e.expanded?1:0,transition:Zs.transition(["width","opacity"])}));function Qb(e){const t=$s(),n=qs(),o={classes:n.classes,expanded:!1},a=(e=>{const{classes:t}=e;return _l({root:["toolbarQuickFilter"],trigger:["toolbarQuickFilterTrigger"],control:["toolbarQuickFilterControl"]},Cc,t)})(o),{quickFilterParser:i,quickFilterFormatter:s,debounceMs:l,className:c,slotProps:d}=e,u=Qe(e,Wb);return r.jsx(Hb,{parser:i,formatter:s,debounceMs:l,render:(e,i)=>{const s=Ge({},o,{expanded:i.expanded});return r.jsxs(Ub,Ge({},e,{className:et(a.root,c),children:[r.jsx(Vb,{render:e=>r.jsx(n.slots.baseTooltip,{title:t.current.getLocaleText("toolbarQuickFilterLabel"),enterDelay:0,children:r.jsx(Kb,Ge({className:a.trigger},e,{ownerState:s,color:"default","aria-disabled":i.expanded,children:r.jsx(n.slots.quickFilterIcon,{fontSize:"small"})}))})}),r.jsx($b,{render:e=>{let{ref:o,slotProps:i}=e,l=Qe(e,Gb);return r.jsx(_b,Ge({as:n.slots.baseTextField,className:a.control,ownerState:s,inputRef:o,"aria-label":t.current.getLocaleText("toolbarQuickFilterLabel"),placeholder:t.current.getLocaleText("toolbarQuickFilterPlaceholder"),size:"small",slotProps:Ge({input:Ge({startAdornment:r.jsx(n.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:l.value?r.jsx(qb,{render:r.jsx(n.slots.baseIconButton,{size:"small",edge:"end","aria-label":t.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),children:r.jsx(n.slots.quickFilterClearIcon,{fontSize:"small"})})}):null},i?.input)},i)},n.slotProps?.baseTextField,l,d?.root,u))}})]}))}})}const Xb=["render","className","onClick","onPointerUp"],Yb=us(function(t,n){const{render:o,className:a,onClick:i,onPointerUp:s}=t,l=Qe(t,Xb),c=qs(),d=Md(),u=Md(),m=$s(),p=Uc(m,Eg),h=p.open&&p.openedPanelValue===Ag.filters,g=Uc(m,qm).length,f={open:h,filterCount:g},x="function"==typeof a?a(f):a,{filterPanelTriggerRef:b}=bf(),y=ss(n,b),v=Mf(c.slots.baseButton,o,Ge({},c.slotProps?.baseButton,{id:d,"aria-haspopup":"true","aria-expanded":h?"true":void 0,"aria-controls":h?u:void 0,onClick:e=>{h?m.current.hidePreferences():m.current.showPreferences(Ag.filters,u,d),i?.(e)},onPointerUp:e=>{h&&e.stopPropagation(),s?.(e)},className:x},l,{ref:y}),f);return r.jsx(e.Fragment,{children:v})}),Zb=["render","className","onClick","onPointerUp"],Jb=us(function(t,n){const{render:o,className:a,onClick:i,onPointerUp:s}=t,l=Qe(t,Zb),c=qs(),d=Md(),u=Md(),m=$s(),p=Uc(m,Eg),h=p.open&&p.openedPanelValue===Ag.columns,g={open:h},f="function"==typeof a?a(g):a,{columnsPanelTriggerRef:x}=bf(),b=ss(n,x),y=Mf(c.slots.baseButton,o,Ge({},c.slotProps?.baseButton,{id:d,"aria-haspopup":"true","aria-expanded":h?"true":void 0,"aria-controls":h?u:void 0,className:f},l,{onPointerUp:e=>{h&&e.stopPropagation(),s?.(e)},onClick:e=>{h?m.current.hidePreferences():m.current.showPreferences(Ag.columns,u,d),i?.(e)},ref:b}),g);return r.jsx(e.Fragment,{children:y})}),ey=["render","options","onClick"],ty=us(function(t,n){const{render:o,options:a,onClick:i}=t,s=Qe(t,ey),l=qs(),c=$s(),d=Mf(l.slots.baseButton,o,Ge({},l.slotProps?.baseButton,{onClick:e=>{c.current.exportDataAsCsv(a),i?.(e)}},s,{ref:n}));return r.jsx(e.Fragment,{children:d})}),ry=["render","options","onClick"],ny=us(function(t,n){const{render:o,options:a,onClick:i}=t,s=Qe(t,ry),l=qs(),c=$s(),d=Mf(l.slots.baseButton,o,Ge({},l.slotProps?.baseButton,{onClick:e=>{c.current.exportDataAsPrint(a),i?.(e)}},s,{ref:n}));return r.jsx(e.Fragment,{children:d})}),oy=["className"],ay=["className"],iy=e=>{const{classes:t}=e;return _l({divider:["toolbarDivider"],label:["toolbarLabel"]},Cc,t)},sy=pt(td,{name:"MuiDataGrid",slot:"ToolbarDivider"})({height:"50%",margin:Zs.spacing(0,.5)}),ly=pt("span",{name:"MuiDataGrid",slot:"ToolbarLabel"})({flex:1,font:Zs.typography.font.large,fontWeight:Zs.typography.fontWeight.medium,margin:Zs.spacing(0,.5),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"});function cy(e){const t=Qe(e,oy),n=qs(),o=iy(n);return r.jsx(sy,Ge({as:n.slots.baseDivider,orientation:"vertical",className:o.divider},t))}function dy(e){const t=Qe(e,ay),n=qs(),o=iy(n);return r.jsx(ly,Ge({className:o.label},t))}const uy=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],my=us(function(e,t){const n=e,{csvOptions:o,printOptions:a,excelOptions:i,showQuickFilter:s=!0,quickFilterProps:l={}}=n,c=Qe(n,uy),d=qs();return d.disableColumnFilter&&d.disableColumnSelector&&d.disableDensitySelector&&!s?null:r.jsxs(zf,Ge({},c,{ref:t,children:[d.label&&r.jsx(dy,{children:d.label}),r.jsx(yb,{}),r.jsx(Cb,{}),r.jsx(vb,{}),r.jsx(Ib,{csvOptions:o,printOptions:a,excelOptions:i}),r.jsx("div",{style:{flex:1}}),s&&r.jsx(Qb,Ge({},l))]}))}),py=["className","selectedRowCount"],hy=pt("div",{name:"MuiDataGrid",slot:"SelectedRowCount"})({alignItems:"center",display:"flex",margin:Zs.spacing(0,2),visibility:"hidden",width:0,height:0,[Zs.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}}),gy=us(function(e,t){const{className:n,selectedRowCount:o}=e,a=Qe(e,py),i=$s(),s=qs(),l=(e=>{const{classes:t}=e;return _l({root:["selectedRowCount"]},Cc,t)})(s),c=i.current.getLocaleText("footerRowSelected")(o);return r.jsx(hy,Ge({className:et(l.root,n),ownerState:s},a,{ref:t,children:c}))}),fy=us(function(e,t){const n=$s(),o=qs(),a=Uc(n,ld),i=Uc(n,Gm),s=Uc(n,$m),l=!o.hideFooterSelectedRowCount&&i>0?r.jsx(gy,{selectedRowCount:i}):r.jsx("div",{}),c=o.hideFooterRowCount||o.pagination?null:r.jsx(o.slots.footerRowCount,Ge({},o.slotProps?.footerRowCount,{rowCount:a,visibleRowCount:s})),d=o.pagination&&!o.hideFooterPagination&&o.slots.pagination&&r.jsx(o.slots.pagination,{});return r.jsxs(Rf,Ge({},e,{ref:t,children:[l,c,d]}))}),xy=(e,t,r,n,o,a)=>{let i;switch(e){case mm.LEFT:i=n[r];break;case mm.RIGHT:i=o-n[r]-t+a;break;default:i=void 0}return i},by=(e,t,r,n,o)=>{const a=t===r-1;return!(e!==mm.LEFT||!a)||!!n&&(e===mm.LEFT||(e===mm.RIGHT?!a:!a||o))},yy=(e,t)=>e===mm.RIGHT&&0===t,vy={root:jc.scrollbarFiller,header:jc["scrollbarFiller--header"],borderTop:jc["scrollbarFiller--borderTop"],borderBottom:jc["scrollbarFiller--borderBottom"],pinnedRight:jc["scrollbarFiller--pinnedRight"]};function wy({header:e,borderTop:t=!0,borderBottom:n,pinnedRight:o}){return r.jsx("div",{role:"presentation",className:et(vy.root,e&&vy.header,t&&vy.borderTop,n&&vy.borderBottom,o&&vy.pinnedRight)})}const Cy=["skeletonRowsCount","visibleColumns","showFirstRowBorder"],jy=pt("div",{name:"MuiDataGrid",slot:"SkeletonLoadingOverlay"})({minWidth:"100%",width:"max-content",height:"100%",overflow:"clip"}),Sy=e=>parseInt(e.getAttribute("data-colindex"),10),ky=us(function(t,n){const o=qs(),{slots:a}=o,i=mt(),s=(e=>{const{classes:t}=e;return _l({root:["skeletonLoadingOverlay"]},Cc,t)})({classes:o.classes}),l=e.useRef(null),c=ss(l,n),d=$s(),u=Uc(d,tc),m=Uc(d,rc),p=Uc(d,fu),h=e.useMemo(()=>p.filter(e=>e<=m).length,[m,p]),{skeletonRowsCount:g,visibleColumns:f,showFirstRowBorder:x}=t,b=Qe(t,Cy),y=Uc(d,uu),v=e.useMemo(()=>y.slice(0,h),[y,h]),w=Uc(d,hu),C=e.useCallback(e=>-1!==w.left.findIndex(t=>t.field===e)?mm.LEFT:-1!==w.right.findIndex(t=>t.field===e)?mm.RIGHT:void 0,[w.left,w.right]),j=e.useMemo(()=>{const e=[];for(let t=0;t<g;t+=1){const n=[];for(let e=0;e<v.length;e+=1){const s=v[e],l=C(s.field),c=l===mm.LEFT,d=l===mm.RIGHT,m=Yg(l,i),h=m?w[m].length:v.length-w.left.length-w.right.length,g=m?w[m].findIndex(e=>e.field===s.field):e-w.left.length,x=u.hasScrollY?u.scrollbarSize:0,b=Zg({},i,l,xy(l,s.computedWidth,e,p,u.columnsTotalWidth,x)),y=u.columnsTotalWidth<u.viewportOuterSize.width,j=by(l,g,h,o.showCellVerticalBorder,y),S=yy(l,g),k=e===v.length-1,R=d&&0===g,N=R&&y,P=k&&!R&&y,I=u.viewportOuterSize.width-u.columnsTotalWidth,M=Math.max(0,I),D=r.jsx(a.skeletonCell,{width:M,empty:!0},`skeleton-filler-column-${t}`),T=k&&0!==x;N&&n.push(D),n.push(r.jsx(a.skeletonCell,{field:s.field,type:s.type,align:s.align,width:"var(--width)",height:u.rowHeight,"data-colindex":e,empty:f&&!f.has(s.field),className:et(c&&jc["cell--pinnedLeft"],d&&jc["cell--pinnedRight"],j&&jc["cell--withRightBorder"],S&&jc["cell--withLeftBorder"]),style:Ge({"--width":`${s.computedWidth}px`},b)},`skeleton-column-${t}-${s.field}`)),P&&n.push(D),T&&n.push(r.jsx(wy,{pinnedRight:w.right.length>0},`skeleton-scrollbar-filler-${t}`))}e.push(r.jsx("div",{className:et(jc.row,jc.rowSkeleton,0===t&&!x&&jc["row--firstVisible"]),children:n},`skeleton-row-${t}`))}return e},[g,v,C,i,w,u.hasScrollY,u.scrollbarSize,u.columnsTotalWidth,u.viewportOuterSize.width,u.rowHeight,p,o.showCellVerticalBorder,a,f,x]);return Mc(d,"columnResize",e=>{const{colDef:t,width:r}=e,n=l.current?.querySelectorAll(`[data-field="${Wf(t.field)}"]`);if(!n)throw new Error("MUI X: Expected skeleton cells to be defined with `data-field` attribute.");const o=v.findIndex(e=>e.field===t.field),a=C(t.field),i=a===mm.LEFT,s=a===mm.RIGHT,c=getComputedStyle(n[0]).getPropertyValue("--width"),d=parseInt(c,10)-r;if(n&&n.forEach(e=>{e.style.setProperty("--width",`${r}px`)}),i){const e=l.current?.querySelectorAll(`.${jc["cell--pinnedLeft"]}`);e?.forEach(e=>{Sy(e)>o&&(e.style.left=parseInt(getComputedStyle(e).left,10)-d+"px")})}if(s){const e=l.current?.querySelectorAll(`.${jc["cell--pinnedRight"]}`);e?.forEach(e=>{Sy(e)<o&&(e.style.right=`${parseInt(getComputedStyle(e).right,10)+d}px`)})}}),r.jsx(jy,Ge({className:s.root},b,{ref:c,children:j}))}),Ry=us(function(e,t){const n=Uc($s(),tc),o=n?.viewportInnerSize.height??0,a=Math.ceil(o/n.rowHeight);return r.jsx(ky,Ge({},e,{skeletonRowsCount:a,ref:t}))}),Ny=["variant","noRowsVariant","style"],Py={"circular-progress":{component:e=>e.slots.baseCircularProgress,style:{}},"linear-progress":{component:e=>e.slots.baseLinearProgress,style:{display:"block"}},skeleton:{component:()=>Ry,style:{display:"block"}}},Iy=us(function(e,t){const{variant:n="linear-progress",noRowsVariant:o="skeleton",style:a}=e,i=Qe(e,Ny),s=$s(),l=qs(),c=Uc(s,id),d=Py[0===c?o:n],u=d.component(l);return r.jsx(If,Ge({style:Ge({},d.style,a)},i,{ref:t,children:r.jsx(u,{})}))}),My=us(function(e,t){const n=$s().current.getLocaleText("noRowsLabel");return r.jsx(If,Ge({},e,{ref:t,children:n}))}),Dy=us(function(e,t){const n=qs(),o=$s(),a=Uc(o,iu),i=!n.disableColumnSelector&&a.length>0;return r.jsxs(If,Ge({},e,{ref:t,children:[o.current.getLocaleText("noColumnsOverlayLabel"),i&&r.jsx(n.slots.baseButton,Ge({size:"small"},n.slotProps?.baseButton,{onClick:()=>{o.current.showPreferences(Ag.columns)},children:o.current.getLocaleText("noColumnsOverlayManageColumns")}))]}))}),Ty=x(td)({maxHeight:"calc(100% + 1px)",flexGrow:1});const Ey=["className","rowCount","visibleRowCount"],Fy=pt("div",{name:"MuiDataGrid",slot:"RowCount"})({alignItems:"center",display:"flex",margin:Zs.spacing(0,2)}),Ay=us(function(e,t){const{className:n,rowCount:o,visibleRowCount:a}=e,i=Qe(e,Ey),s=$s(),l=qs(),c=(e=>{const{classes:t}=e;return _l({root:["rowCount"]},Cc,t)})(l);if(0===o)return null;const d=a<o?s.current.getLocaleText("footerTotalVisibleRows")(a,o):o.toLocaleString();return r.jsxs(Fy,Ge({className:et(c.root,n),ownerState:l},i,{ref:t,children:[s.current.getLocaleText("footerTotalRows")," ",d]}))});const Oy=["selected","rowId","row","index","style","rowHeight","className","visibleColumns","pinnedColumns","offsetLeft","columnsTotalWidth","firstColumnIndex","lastColumnIndex","focusedColumnIndex","isFirstVisible","isLastVisible","isNotVisible","showBottomBorder","scrollbarWidth","gridHasFiller","onClick","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver"],Hy=Yl(Mg,(e,t)=>{if(!t)return!1;return!!Cm(e)}),Ly=gc(us(function(t,n){const{selected:o,rowId:a,row:i,index:s,style:l,rowHeight:c,className:d,visibleColumns:u,pinnedColumns:m,offsetLeft:p,columnsTotalWidth:h,firstColumnIndex:g,lastColumnIndex:f,focusedColumnIndex:x,isFirstVisible:b,isLastVisible:y,isNotVisible:v,showBottomBorder:w,scrollbarWidth:C,gridHasFiller:j,onClick:S,onDoubleClick:k,onMouseEnter:R,onMouseLeave:N,onMouseOut:P,onMouseOver:I}=t,M=Qe(t,Oy),D=vh(),T=qu(),E=e.useRef(null),F=qs(),A=Nh(D),O=Uc(D,Rm),H=Uc(D,gd),L=Uc(D,fu),$=F.rowReordering,z=Uc(D,Hy,$),q=ss(E,n),B=ud(D,a),V=Uc(D,Dg,{rowId:a,editMode:F.editMode}),W=F.editMode===qd.Row,G=void 0!==x,U=G&&x>=m.left.length&&x<g,K=G&&x<u.length-m.right.length&&x>=f,_=function(e,t){return _l(t,Cc,e)}(F.classes,{root:["row",o&&"selected",W&&"row--editable",V&&"row--editing",b&&"row--firstVisible",y&&"row--lastVisible",w&&"row--borderBottom","auto"===c&&"row--dynamicHeight"]}),Q=T.hooks.useGridRowAriaAttributes();e.useLayoutEffect(()=>{if(A.range){const e=D.current.getRowIndexRelativeToVisibleRows(a);void 0!==e&&D.current.unstable_setLastMeasuredRowIndex(e)}if(E.current&&"auto"===c)return D.current.observeRowHeight(E.current,a)},[D,A.range,c,a]);const X=e.useCallback((e,t)=>r=>{Uf(r)||D.current.getRow(a)&&(D.current.publishEvent(e,D.current.getRowParams(a),r),t&&t(r))},[D,a]),Y=e.useCallback(e=>{const t=Vf(e.target,jc.cell),r=t?.getAttribute("data-field");if(r){if(r===Np.field)return;if(r===um)return;if("__reorder__"===r)return;if(D.current.getCellMode(a,r)===Bd.Edit)return;const e=D.current.getColumn(r);if(e?.type===Xu)return}X("rowClick",S)(e)},[D,S,X,a]),{slots:Z,slotProps:J,disableColumnReorder:ee}=F,te=Uc(D,()=>Ge({},D.current.getRowHeightEntry(a)),void 0,qc),re=e.useMemo(()=>{if(v)return{opacity:0,width:0,height:0};const e=Ge({},l,{maxHeight:"auto"===c?"none":c,minHeight:c,"--height":"number"==typeof c?`${c}px`:c});if(te.spacingTop){e["border"===F.rowSpacingType?"borderTopWidth":"marginTop"]=te.spacingTop}if(te.spacingBottom){const t="border"===F.rowSpacingType?"borderBottomWidth":"marginBottom";let r=e[t];"number"!=typeof r&&(r=parseInt(r||"0",10)),r+=te.spacingBottom,e[t]=r}return e},[v,c,l,te,F.rowSpacingType]),ne=D.current.unstable_applyPipeProcessors("rowClassName",[],a),oe=Q(B,s);if("function"==typeof F.getRowClassName){const e=s-(A.range?.firstRowIndex||0),t=Ge({},D.current.getRowParams(a),{isFirstVisible:0===e,isLastVisible:e===A.rows.length-1,indexRelativeToCurrentPage:e});ne.push(F.getRowClassName(t))}const ae=(e,t,n,o,s=mm.NONE)=>{const l=D.current.unstable_getCellColSpanInfo(a,n);if(l?.spannedByColSpan)return null;const d=l?.cellProps.width??e.computedWidth,u=l?.cellProps.colSpan??1,m=xy(s,e.computedWidth,n,L,h,C);if("skeletonRow"===B.type)return r.jsx(Z.skeletonCell,{type:e.type,width:d,height:c,field:e.field,align:e.align},e.field);const p="__reorder__"===e.field,g=!(ee||e.disableReorder),f=z&&!O.length&&H<=1,x=!(g||p&&f),b=s===mm.VIRTUAL,y=yy(s,t),v=by(s,t,o,F.showCellVerticalBorder,j);return r.jsx(Z.cell,Ge({column:e,width:d,rowId:a,align:e.align||"left",colIndex:n,colSpan:u,disableDragEvents:x,isNotVisible:b,pinnedOffset:m,pinnedPosition:s,showLeftBorder:y,showRightBorder:v,row:i,rowNode:B},J?.cell),e.field)},ie=m.left.map((e,t)=>ae(e,t,t,m.left.length,mm.LEFT)),se=m.right.map((e,t)=>{const r=u.length-m.right.length+t;return ae(e,t,r,m.right.length,mm.RIGHT)}),le=u.length-m.left.length-m.right.length,ce=[];U&&ce.push(ae(u[x],x-m.left.length,x,le,mm.VIRTUAL));for(let e=g;e<f;e+=1){const t=u[e],r=e-m.left.length;t&&ce.push(ae(t,r,e,le))}K&&ce.push(ae(u[x],x-m.left.length,x,le,mm.VIRTUAL));const de=i?{onClick:Y,onDoubleClick:X("rowDoubleClick",k),onMouseEnter:X("rowMouseEnter",R),onMouseLeave:X("rowMouseLeave",N),onMouseOut:X("rowMouseOut",P),onMouseOver:X("rowMouseOver",I)}:null;return r.jsxs("div",Ge({"data-id":a,"data-rowindex":s,role:"row",className:et(...ne,_.root,d),style:re},oe,de,M,{ref:q,children:[ie,r.jsx("div",{role:"presentation",className:jc.cellOffsetLeft,style:{width:p}}),ce,r.jsx("div",{role:"presentation",className:et(jc.cell,jc.cellEmpty)}),se,0!==C&&r.jsx(wy,{pinnedRight:m.right.length>0,borderTop:!b})]}))}));function $y({privateApiRef:t,configuration:n,props:o,children:a}){const i=e.useRef(t.current.getPublicApi());return r.jsx(zu.Provider,{value:n,children:r.jsx(zs.Provider,{value:o,children:r.jsx(yh.Provider,{value:t,children:r.jsx(Ls.Provider,{value:i,children:r.jsx(yf,{children:r.jsx(Wu,{children:a})})})})})})}const zy=function(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}()&&null!=window.localStorage.getItem("DEBUG"),qy=()=>{},By={debug:qy,info:qy,warn:qy,error:qy},Vy=["debug","info","warn","error"];function Wy(e,t,r=console){const n=Vy.indexOf(t);if(-1===n)throw new Error(`MUI X: Log level ${t} not recognized.`);return Vy.reduce((t,o,a)=>(t[o]=a>=n?(...t)=>{const[n,...a]=t;r[o](`MUI X: ${e} - ${n}`,...a)}:qy,t),{})}const Gy=(t,r,n,o=!0)=>{const a=e.useRef(null),i=e.useRef(`mui-${Math.round(1e9*Math.random())}`),s=e.useCallback(()=>{a.current=t.current.registerPipeProcessor(r,i.current,n)},[t,n,r]);kh(()=>{o&&s()});const l=e.useRef(!0);e.useEffect(()=>(l.current?l.current=!1:o&&s(),()=>{a.current&&(a.current(),a.current=null)}),[s,o])},Uy=(t,r,n)=>{const o=e.useRef(null),a=e.useRef(`mui-${Math.round(1e9*Math.random())}`),i=e.useCallback(()=>{o.current=t.current.registerPipeApplier(r,a.current,n)},[t,n,r]);kh(()=>{i()});const s=e.useRef(!0);e.useEffect(()=>(s.current?s.current=!1:i(),()=>{o.current&&(o.current(),o.current=null)}),[i])};let Ky=function(e){return e.DataSource="dataSource",e.RowTree="rowTree",e}({});const _y=(t,r,n,o)=>{const a=e.useCallback(()=>{t.current.registerStrategyProcessor(r,n,o)},[t,o,n,r]);kh(()=>{a()});const i=e.useRef(!0);e.useEffect(()=>{i.current?i.current=!1:a()},[a])},Qy="none",Xy={dataSourceRowsUpdate:Ky.DataSource,rowTreeCreation:Ky.RowTree,filtering:Ky.RowTree,sorting:Ky.RowTree,visibleRowsLookupCreation:Ky.RowTree},Yy=(e,t)=>Ge({},e,{props:{getRowId:t.getRowId}}),Zy=(t,r)=>{(t=>{const r=e.useRef(null),n=e.useRef(null),o=e.useRef(null),a=e.useRef(null),i=e.useRef(null),s=e.useRef(null);t.current.register("public",{rootElementRef:r}),t.current.register("private",{mainElementRef:n,virtualScrollerRef:o,virtualScrollbarVerticalRef:a,virtualScrollbarHorizontalRef:i,columnHeadersContainerRef:s})})(t),((t,r)=>{e.useEffect(()=>{t.current.setState(e=>Ge({},e,{props:{getRowId:r.getRowId}}))},[t,r.getRowId])})(t,r),(t=>{const r=mt();void 0===t.current.state.isRtl&&(t.current.state.isRtl=r);const n=e.useRef(!0);e.useEffect(()=>{n.current?n.current=!1:t.current.setState(e=>Ge({},e,{isRtl:r}))},[t,r])})(t),((t,r)=>{Ch(t,{getLogger:e.useCallback(e=>zy?Wy(e,"debug",r.logger):r.logLevel?Wy(e,r.logLevel.toString(),r.logger):By,[r.logLevel,r.logger])},"private")})(t,r),(t=>{const r=e.useRef({}),n=e.useCallback(e=>{r.current[e.stateId]=e},[]),o=e.useCallback((e,n)=>{let o;if(o="function"==typeof e?e(t.current.state):e,t.current.state===o)return!1;const a={current:{state:o}};let i=!1;const s=[];if(Object.keys(r.current).forEach(e=>{const n=r.current[e],o=n.stateSelector(t),l=n.stateSelector(a);l!==o&&(s.push({stateId:n.stateId,hasPropChanged:l!==n.propModel}),void 0!==n.propModel&&l!==n.propModel&&(i=!0))}),s.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${s[0].stateId}, therefore, you're not allowed to update ${s.map(e=>e.stateId).join(", ")} in the same transaction.`);if(i||(t.current.state=o,t.current.publishEvent("stateChange",o),t.current.store.update(o)),1===s.length){const{stateId:e,hasPropChanged:o}=s[0],l=r.current[e],c=l.stateSelector(a);l.propOnChange&&o&&l.propOnChange(c,{reason:n,api:t.current}),i||t.current.publishEvent(l.changeEvent,c,{reason:n})}return!i},[t]),a={updateControlState:e.useCallback((e,r,n)=>t.current.setState(t=>Ge({},t,{[e]:r(t[e])}),n),[t]),registerControlState:n};Ch(t,{setState:o},"public"),Ch(t,a,"private")})(t),(t=>{const r=e.useRef({}),n=e.useRef(!1),o=e.useCallback(e=>{!n.current&&e&&(n.current=!0,Object.values(e.appliers).forEach(e=>{e()}),n.current=!1)},[]),a=e.useCallback((e,t,n)=>{r.current[e]||(r.current[e]={processors:new Map,processorsAsArray:[],appliers:{}});const a=r.current[e];return a.processors.get(t)!==n&&(a.processors.set(t,n),a.processorsAsArray=Array.from(r.current[e].processors.values()).filter(e=>null!==e),o(a)),()=>{r.current[e].processors.set(t,null),r.current[e].processorsAsArray=Array.from(r.current[e].processors.values()).filter(e=>null!==e)}},[o]),i=e.useCallback((e,t,n)=>(r.current[e]||(r.current[e]={processors:new Map,processorsAsArray:[],appliers:{}}),r.current[e].appliers[t]=n,()=>{const n=r.current[e].appliers,o=Qe(n,[t].map(xt));r.current[e].appliers=o}),[]),s=e.useCallback(e=>{o(r.current[e])},[o]),l={unstable_applyPipeProcessors:e.useCallback((...e)=>{const[t,n,o]=e;if(!r.current[t])return n;const a=r.current[t].processorsAsArray;let i=n;for(let r=0;r<a.length;r+=1)i=a[r](i,o);return i},[])};Ch(t,{registerPipeProcessor:a,registerPipeApplier:i,requestPipeProcessorsApplication:s},"private"),Ch(t,l,"public")})(t),(t=>{const r=e.useRef(new Map),n=e.useRef({}),o=e.useCallback((e,r,o)=>{const a=()=>{const t=n.current[r],o=Qe(t,[e].map(xt));n.current[r]=o};n.current[r]||(n.current[r]={});const i=n.current[r],s=i[e];return i[e]=o,s&&s!==o?(e===t.current.getActiveStrategy(Xy[r])&&t.current.publishEvent("activeStrategyProcessorChange",r),a):a},[t]),a=e.useCallback((e,r)=>{const o=t.current.getActiveStrategy(Xy[e]);if(null==o)throw new Error("Can't apply a strategy processor before defining an active strategy");const a=n.current[e];if(!a||!a[o])throw new Error(`No processor found for processor "${e}" on strategy "${o}"`);return(0,a[o])(r)},[t]),i=e.useCallback(e=>{const t=Array.from(r.current.entries()).find(([,t])=>t.group===e&&t.isAvailable());return t?.[0]??Qy},[]),s=e.useCallback((e,n,o)=>{r.current.set(n,{group:e,isAvailable:o}),t.current.publishEvent("strategyAvailabilityChange")},[t]);Ch(t,{registerStrategyProcessor:o,applyStrategyProcessor:a,getActiveStrategy:i,setStrategyAvailability:s},"private")})(t),((t,r)=>{const n=e.useCallback(e=>{if(null==r.localeText[e])throw new Error(`Missing translation for key ${e}.`);return r.localeText[e]},[r.localeText]);t.current.register("public",{getLocaleText:n})})(t,r),t.current.register("private",{rootProps:r})},Jy=(t,r,n)=>{const o=e.useRef(!1);o.current||(r.current.state=t(r.current.state,n,r),o.current=!0)};function ev(e,t){if(null==e)return"";const r="string"==typeof e?e:`${e}`;if(t.shouldAppendQuotes||t.escapeFormulas){const e=r.replace(/"/g,'""');return t.escapeFormulas&&["=","+","-","@","\t","\r"].includes(e[0])?`"'${e}"`:[t.delimiter,"\n","\r",'"'].some(e=>r.includes(e))?`"${e}"`:e}return r}const tv=(e,t)=>{const{csvOptions:r,ignoreValueFormatter:n}=t;let o;if(n){const t=e.colDef.type;o="number"===t?String(e.value):"date"===t||"dateTime"===t?e.value?.toISOString():"function"==typeof e.value?.toString?e.value.toString():e.value}else o=e.formattedValue;return ev(o,r)};class rv{constructor(e){this.options=void 0,this.rowString="",this.isEmpty=!0,this.options=e}addValue(e){this.isEmpty||(this.rowString+=this.options.csvOptions.delimiter),"function"==typeof this.options.sanitizeCellValue?this.rowString+=this.options.sanitizeCellValue(e,this.options.csvOptions):this.rowString+=e,this.isEmpty=!1}getRowString(){return this.rowString}}function nv(e){const{columns:t,rowIds:r,csvOptions:n,ignoreValueFormatter:o,apiRef:a}=e,i=r.reduce((e,r)=>`${e}${(({id:e,columns:t,getCellParams:r,csvOptions:n,ignoreValueFormatter:o})=>{const a=new rv({csvOptions:n});return t.forEach(t=>{const i=r(e,t.field);a.addValue(tv(i,{ignoreValueFormatter:o,csvOptions:n}))}),a.getRowString()})({id:r,columns:t,getCellParams:a.current.getCellParams,ignoreValueFormatter:o,csvOptions:n})}\r\n`,"").trim();if(!n.includeHeaders)return i;const s=t.filter(e=>e.field!==Np.field),l=[];if(n.includeColumnGroupsHeaders){const e=a.current.getAllGroupDetails();let t=0;const r=s.reduce((e,r)=>{const n=a.current.getColumnGroupPath(r.field);return e[r.field]=n,t=Math.max(t,n.length),e},{});for(let o=0;o<t;o+=1){const t=new rv({csvOptions:n,sanitizeCellValue:ev});l.push(t),s.forEach(n=>{const a=(r[n.field]||[])[o],i=e[a];t.addValue(i?i.headerName||i.groupId:"")})}}const c=new rv({csvOptions:n,sanitizeCellValue:ev});s.forEach(e=>{c.addValue(e.headerName||e.field)}),l.push(c);return`${`${l.map(e=>e.getRowString()).join("\r\n")}\r\n`}${i}`.trim()}function ov(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const r=document.createRange();r.selectNode(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(r);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}const av=(t,r)=>{const n=r.ignoreValueFormatterDuringExport,o=("object"==typeof n?n?.clipboardExport:n)||!1,a=r.clipboardCopyCellDelimiter,i=e.useCallback(e=>{if(!function(e){return(e.ctrlKey||e.metaKey)&&"C"===String.fromCharCode(e.keyCode)&&!e.shiftKey&&!e.altKey}(e))return;if(r=e.target,window.getSelection()?.toString()||r&&(r.selectionEnd||0)-(r.selectionStart||0)>0)return;var r;let n="";if(Gm(t)>0)n=t.current.getDataAsCsv({includeHeaders:!1,delimiter:a,shouldAppendQuotes:!1,escapeFormulas:!1});else{const e=tp(t);if(e){const r=t.current.getCellParams(e.id,e.field);n=tv(r,{csvOptions:{delimiter:a,shouldAppendQuotes:!1,escapeFormulas:!1},ignoreValueFormatter:o})}}var i;n=t.current.unstable_applyPipeProcessors("clipboardCopy",n),n&&(i=n,navigator.clipboard?navigator.clipboard.writeText(i).catch(()=>{ov(i)}):ov(i),t.current.publishEvent("clipboardCopy",n))},[t,o,a]);Sh(t,()=>t.current.rootElementRef.current,"keydown",i),Tc(t,"clipboardCopy",r.onClipboardCopy)},iv=e=>Ge({},e,{columnMenu:{open:!1}}),sv=(e,t,r)=>{const n=ph({apiRef:r,columnsToUpsert:t.columns,initialState:t.initialState?.columns,columnVisibilityModel:t.columnVisibilityModel??t.initialState?.columns?.columnVisibilityModel??{},keepOnlyColumnsToUpsert:!0});return Ge({},e,{columns:n,pinnedColumns:e.pinnedColumns??nu})};function lv(t,n){const o=jh(t,"useGridColumns"),a=e.useRef(n.columns);t.current.registerControlState({stateId:"visibleColumns",propModel:n.columnVisibilityModel,propOnChange:n.onColumnVisibilityModelChange,stateSelector:cu,changeEvent:"columnVisibilityModelChange"});const i=e.useCallback(e=>{o.debug("Updating columns state."),t.current.setState(function(e){return t=>Ge({},t,{columns:e})}(e)),t.current.publishEvent("columnsChange",e.orderedFields)},[o,t]),s=e.useCallback(e=>su(t)[e],[t]),l=e.useCallback(()=>lu(t),[t]),c=e.useCallback(()=>uu(t),[t]),d=e.useCallback((e,r=!0)=>(r?uu(t):lu(t)).findIndex(t=>t.field===e),[t]),u=e.useCallback(e=>{const r=d(e);return fu(t)[r]},[t,d]),m=e.useCallback(e=>{cu(t)!==e&&(t.current.setState(r=>Ge({},r,{columns:ph({apiRef:t,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:e,keepOnlyColumnsToUpsert:!1})})),t.current.updateRenderContext?.())},[t]),p=e.useCallback(e=>{if(lg(t))return void t.current.updateNonPivotColumns(e);const r=ph({apiRef:t,columnsToUpsert:e,initialState:void 0,keepOnlyColumnsToUpsert:!1,updateInitialVisibilityModel:!0});i(r)},[t,i]),h=e.useCallback((e,r)=>{const n=cu(t);if(r!==(n[e]??!0)){const o=Ge({},n,{[e]:r});t.current.setColumnVisibilityModel(o)}},[t]),g=e.useCallback(e=>iu(t).findIndex(t=>t===e),[t]),f=e.useCallback((e,r)=>{const n=iu(t),a=g(e);if(a===r)return;o.debug(`Moving column ${e} to index ${r}`);const s=[...n],l=s.splice(a,1)[0];s.splice(r,0,l),i(Ge({},au(t),{orderedFields:s}));const c={column:t.current.getColumn(e),targetIndex:t.current.getColumnIndexRelativeToVisibleColumns(e),oldIndex:a};t.current.publishEvent("columnIndexChange",c)},[t,o,i,g]),x=e.useCallback((e,r)=>{o.debug(`Updating column ${e} width to ${r}`);const n=au(t),a=n.lookup[e],s=Ge({},a,{width:r,hasBeenResized:!0});i(uh(Ge({},n,{lookup:Ge({},n.lookup,{[e]:s})}),t.current.getRootDimensions())),t.current.publishEvent("columnWidthChange",{element:t.current.getColumnHeaderElement(e),colDef:s,width:r})},[t,o,i]),b={setColumnIndex:f};Ch(t,{getColumn:s,getAllColumns:l,getColumnIndex:d,getColumnPosition:u,getVisibleColumns:c,getColumnIndexRelativeToVisibleColumns:g,updateColumns:p,setColumnVisibilityModel:m,setColumnVisibility:h,setColumnWidth:x},"public"),Ch(t,b,n.signature===Sc.DataGrid?"private":"public");const y=e.useCallback((e,r)=>{const o={},a=cu(t);(!r.exportOnlyDirtyModels||null!=n.columnVisibilityModel||Object.keys(n.initialState?.columns?.columnVisibilityModel??{}).length>0||Object.keys(a).length>0)&&(o.columnVisibilityModel=a),o.orderedFields=iu(t);const i=lu(t),s={};return i.forEach(e=>{if(e.hasBeenResized){const t={};ch.forEach(r=>{let n=e[r];n===1/0&&(n=-1),t[r]=n}),s[e.field]=t}}),Object.keys(s).length>0&&(o.dimensions=s),Ge({},e,{columns:o})},[t,n.columnVisibilityModel,n.initialState?.columns]),v=e.useCallback((e,r)=>{const n=r.stateToRestore.columns,o=n?.columnVisibilityModel;if(null==n)return e;const a=ph({apiRef:t,columnsToUpsert:[],initialState:n,columnVisibilityModel:o,keepOnlyColumnsToUpsert:!1});return null!=n&&t.current.setState(e=>Ge({},e,{columns:Ge({},e.columns,{lookup:a.lookup,orderedFields:a.orderedFields,initialColumnVisibilityModel:a.initialColumnVisibilityModel})})),null!=o&&t.current.setState(e=>Ge({},e,{columns:Ge({},e.columns,{columnVisibilityModel:o})})),null!=n&&t.current.publishEvent("columnsChange",a.orderedFields),e},[t]),w=e.useCallback((e,t)=>{if(t===Ag.columns){const e=n.slots.columnsPanel;return r.jsx(e,Ge({},n.slotProps?.columnsPanel))}return e},[n.slots.columnsPanel,n.slotProps?.columnsPanel]),C=e.useCallback(e=>{const r=lg(t);return n.disableColumnSelector||r?e:[...e,"columnMenuColumnsItem"]},[n.disableColumnSelector,t]);Gy(t,"columnMenu",C),Gy(t,"exportState",y),Gy(t,"restoreState",v),Gy(t,"preferencePanel",w);const j=e.useRef(null);Mc(t,"viewportInnerSizeChange",e=>{if(j.current!==e.width){j.current=e.width;if(!uu(t).some(e=>e.flex&&e.flex>0))return;i(uh(au(t),t.current.getRootDimensions()))}});const S=e.useCallback(()=>{o.info("Columns pipe processing have changed, regenerating the columns");const e=ph({apiRef:t,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});i(e)},[t,o,i]);Uy(t,"hydrateColumns",S);const k=e.useRef(!0);e.useEffect(()=>{if(k.current)return void(k.current=!1);if(o.info(`GridColumns have changed, new length ${n.columns.length}`),a.current===n.columns)return;const e=ph({apiRef:t,initialState:void 0,columnsToUpsert:n.columns,keepOnlyColumnsToUpsert:!0,updateInitialVisibilityModel:!0});a.current=n.columns,i(e)},[o,t,i,n.columns]),e.useEffect(()=>{void 0!==n.columnVisibilityModel&&t.current.setColumnVisibilityModel(n.columnVisibilityModel)},[t,o,n.columnVisibilityModel])}const cv=(e,t)=>Ge({},e,{density:t.initialState?.density??t.density??"standard"});const dv=({apiRef:e,options:t})=>{const r=lu(e);if(t.fields)return t.fields.reduce((e,t)=>{const n=r.find(e=>e.field===t);return n&&e.push(n),e},[]);return(t.allColumns?r:uu(e)).filter(e=>!e.disableExport)},uv=({apiRef:e})=>{const t=Om(e),r=dd(e),n=Gm(e),o=t.filter(e=>"footer"!==r[e].type),a=bd(e),i=a?.top?.map(e=>e.id)||[],s=a?.bottom?.map(e=>e.id)||[];if(o.unshift(...i),o.push(...s),n>0){const t=Um(e);return o.filter(e=>t.has(e))}return o},mv=(t,n)=>{const o=jh(t,"useGridCsvExport"),a=n.ignoreValueFormatterDuringExport,i=("object"==typeof a?a?.csvExport:a)||!1,s=e.useCallback((e={})=>{o.debug("Get data as CSV");return nv({columns:dv({apiRef:t,options:e}),rowIds:(e.getRowsToExport??uv)({apiRef:t}),csvOptions:{delimiter:e.delimiter||",",shouldAppendQuotes:e.shouldAppendQuotes??!0,includeHeaders:e.includeHeaders??!0,includeColumnGroupsHeaders:e.includeColumnGroupsHeaders??!0,escapeFormulas:e.escapeFormulas??!0},ignoreValueFormatter:i,apiRef:t})},[o,t,i]),l=e.useCallback(e=>{o.debug("Export data as CSV");const t=s(e);!function(e,t="csv",r=document.title||"untitled"){const n=`${r}.${t}`;if("download"in HTMLAnchorElement.prototype){const t=URL.createObjectURL(e),r=document.createElement("a");return r.href=t,r.download=n,r.click(),void setTimeout(()=>{URL.revokeObjectURL(t)})}throw new Error("MUI X: exportAs not supported.")}(new Blob([e?.utf8WithBom?new Uint8Array([239,187,191]):"",t],{type:"text/csv"}),"csv",e?.fileName)},[o,s]);Ch(t,{getDataAsCsv:s,exportDataAsCsv:l},"public");const c=e.useCallback((e,t)=>t.csvOptions?.disableToolbarButton?e:[...e,{component:r.jsx(Nb,{options:t.csvOptions}),componentName:"csvExport"}],[]);Gy(t,"exportMenu",c)};const pv=(e,t,r)=>{let n=e.paginationModel;const o=e.rowCount,a=r?.pageSize??n.pageSize,i=r?.page??n.page,s=lp(o,a,i);!r||r?.page===n.page&&r?.pageSize===n.pageSize||(n=r);const l=-1===a?0:((e,t=0)=>0===t?e:Math.max(Math.min(e,t-1),0))(n.page,s);return l!==n.page&&(n=Ge({},n,{page:l})),dp(n.pageSize,t),n};const hv=(t,n)=>{const o=null!==t.current.rootElementRef.current,a=jh(t,"useGridPrintExport"),i=e.useRef(null),s=e.useRef(null),l=e.useRef({}),c=e.useRef([]),d=e.useRef(null);e.useEffect(()=>{i.current=_g(t.current.rootElementRef.current)},[t,o]);const u=e.useCallback((e,r,n)=>new Promise(o=>{const a=dv({apiRef:t,options:{fields:e,allColumns:r}}).map(e=>e.field),i=lu(t),s={};i.forEach(e=>{s[e.field]=a.includes(e.field)}),n&&(s[Np.field]=!0),t.current.setColumnVisibilityModel(s),o()}),[t]),m=e.useCallback(e=>{const r=e({apiRef:t}).reduce((e,r)=>{const n=t.current.getRow(r);return n[Ju]||e.push(n),e},[]);t.current.setRows(r)},[t]),p=e.useCallback((e,r)=>{const o=Ge({copyStyles:!0,hideToolbar:!1,hideFooter:!1,includeCheckboxes:!1},r),a=e.contentDocument;if(!a)return;const s=Ih(t),l=t.current.rootElementRef.current,c=l.cloneNode(!0);c.querySelector(`.${jc.main}`).style.overflow="visible",c.style.contain="size";let d=l.querySelector(`.${jc.toolbarContainer}`)?.offsetHeight||0,u=l.querySelector(`.${jc.footerContainer}`)?.offsetHeight||0;const m=c.querySelector(`.${jc.footerContainer}`);o.hideToolbar&&(c.querySelector(`.${jc.toolbarContainer}`)?.remove(),d=0),o.hideFooter&&m&&(m.remove(),u=0);const p=s.currentPageTotalHeight+hh(t,n)+d+u;c.style.height=`${p}px`,c.style.boxSizing="content-box",!o.hideFooter&&m&&(m.style.position="absolute",m.style.width="100%",m.style.top=p-u+"px");const h=document.createElement("div");h.appendChild(c),a.body.style.marginTop="0px",a.body.innerHTML=h.innerHTML;const g="function"==typeof o.pageStyle?o.pageStyle():o.pageStyle;if("string"==typeof g){const e=a.createElement("style");e.appendChild(a.createTextNode(g)),a.head.appendChild(e)}o.bodyClassName&&a.body.classList.add(...o.bodyClassName.split(" "));let f=[];if(o.copyStyles){const e=l.getRootNode();f=function(e,t){const r=[],n=t.querySelectorAll("style, link[rel='stylesheet']");for(let o=0;o<n.length;o+=1){const t=n[o];if("STYLE"===t.tagName){const r=e.createElement(t.tagName),n=t.sheet;if(n){let t="";for(let e=0;e<n.cssRules.length;e+=1)"string"==typeof n.cssRules[e].cssText&&(t+=`${n.cssRules[e].cssText}\r\n`);r.appendChild(e.createTextNode(t)),e.head.appendChild(r)}}else if(t.getAttribute("href")){const n=e.createElement(t.tagName);for(let e=0;e<t.attributes.length;e+=1){const r=t.attributes[e];r&&n.setAttribute(r.nodeName,r.nodeValue||"")}r.push(new Promise(e=>{n.addEventListener("load",()=>e())})),e.head.appendChild(n)}}return r}(a,"ShadowRoot"===e.constructor.name?e:i.current)}Promise.all(f).then(()=>{e.contentWindow.print()})},[t,i,n]),h=e.useCallback(e=>{i.current.body.removeChild(e),t.current.restoreState(s.current||{}),s.current?.columns?.columnVisibilityModel||t.current.setColumnVisibilityModel(l.current),t.current.setState(e=>Ge({},e,{virtualization:d.current})),t.current.setRows(c.current),s.current=null,l.current={},c.current=[]},[t]),g=e.useCallback(async e=>{if(a.debug("Export data as Print"),!t.current.rootElementRef.current)throw new Error("MUI X: No grid root element available.");if(s.current=t.current.exportState(),l.current=cu(t),c.current=t.current.getSortedRows().filter(e=>!e[Ju]),n.pagination){const e={page:0,pageSize:Lm(t)};t.current.setState(t=>Ge({},t,{pagination:Ge({},t.pagination,{paginationModel:pv(t.pagination,"DataGridPro",e)})}))}d.current=t.current.state.virtualization,t.current.setState(e=>Ge({},e,{virtualization:Ge({},e.virtualization,{enabled:!1,enabledForColumns:!1})})),await u(e?.fields,e?.allColumns,e?.includeCheckboxes),m(e?.getRowsToExport??uv),await new Promise(e=>{requestAnimationFrame(()=>{e()})});const r=function(e){const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}(e?.fileName);r.onload=()=>{p(r,e);r.contentWindow.matchMedia("print").addEventListener("change",e=>{!1===e.matches&&h(r)})},i.current.body.appendChild(r)},[n,a,t,p,h,u,m]);Ch(t,{exportDataAsPrint:g},"public");const f=e.useCallback((e,t)=>t.printOptions?.disableToolbarButton?e:[...e,{component:r.jsx(Pb,{options:t.printOptions}),componentName:"printExport"}],[]);Gy(t,"exportMenu",f)},gv=(e,t,r)=>{const n=t.filterModel??t.initialState?.filter?.filterModel??eu();return Ge({},e,{filter:Ge({filterModel:Cu(n,t.disableMultipleColumnsFiltering,r)},Jd),visibleRowsLookup:{}})},fv=e=>e.filteredRowsLookup;function xv(e,t){return e.current.applyStrategyProcessor("visibleRowsLookupCreation",{tree:t.rows.tree,filteredRowsLookup:t.filter.filteredRowsLookup})}function bv(){return xr(Object.values)}const yv=e=>Ge({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}),vv=({currentColIndex:e,firstColIndex:t,lastColIndex:r,isRtl:n})=>{if(n){if(e<r)return e+1}else if(!n&&e>t)return e-1;return null},wv=({currentColIndex:e,firstColIndex:t,lastColIndex:r,isRtl:n})=>{if(n){if(e>t)return e-1}else if(!n&&e<r)return e+1;return null};const Cv=Zl(Cp,bd,(e,t)=>(t.top||[]).concat(e.rows,t.bottom||[])),jv=(t,r)=>{const n=jh(t,"useGridKeyboardNavigation"),o=mt(),a=r.listView,i=e.useCallback(()=>Cv(t),[t]),s="DataGrid"!==r.signature&&r.headerFilters,l=e.useCallback((e,r,o="left",i="up")=>{const s=Em(t),l=t.current.unstable_getCellColSpanInfo(r,e);l&&l.spannedByColSpan&&("left"===o?e=l.leftVisibleCellIndex:"right"===o&&(e=l.rightVisibleCellIndex));const c=a?qh(t).field:mu(t)[e],d=function(e,t,r,n){const o=Lh(e);if(!o[t]?.[r])return t;const a=Om(e);let i=a.indexOf(t)+("down"===n?1:-1);for(;i>=0&&i<a.length;){const e=a[i];if(!o[e]?.[r])return e;i+="down"===n?1:-1}return t}(t,r,c,i),u=s.findIndex(e=>e.id===d);n.debug(`Navigating to cell row ${u}, col ${e}`),t.current.scrollToIndexes({colIndex:e,rowIndex:u}),t.current.setCellFocus(d,c)},[t,n,a]),c=e.useCallback((e,r)=>{n.debug(`Navigating to header col ${e}`),t.current.scrollToIndexes({colIndex:e});const o=t.current.getVisibleColumns()[e].field;t.current.setColumnHeaderFocus(o,r)},[t,n]),d=e.useCallback((e,r)=>{n.debug(`Navigating to header filter col ${e}`),t.current.scrollToIndexes({colIndex:e});const o=t.current.getVisibleColumns()[e].field;t.current.setColumnHeaderFilterFocus(o,r)},[t,n]),u=e.useCallback((e,r,o)=>{n.debug(`Navigating to header col ${e}`),t.current.scrollToIndexes({colIndex:e});const{field:a}=t.current.getVisibleColumns()[e];t.current.setColumnGroupHeaderFocus(a,r,o)},[t,n]),m=e.useCallback(e=>i()[e]?.id,[i]),p=e.useCallback((e,r)=>{const n=r.currentTarget.querySelector(`.${jc.columnHeaderTitleContainerContent}`);if(!!n&&n.contains(r.target)&&e.field!==Np.field)return;const a=i(),p=t.current.getViewportPageSize(),h=e.field?t.current.getColumnIndex(e.field):0,g=a.length>0?0:null,f=a.length-1,x=uu(t).length-1,b=lh(t);let y=!0;switch(r.key){case"ArrowDown":s?d(h,r):null!==g&&l(h,m(g));break;case"ArrowRight":{const e=wv({currentColIndex:h,firstColIndex:0,lastColIndex:x,isRtl:o});null!==e&&c(e,r);break}case"ArrowLeft":{const e=vv({currentColIndex:h,firstColIndex:0,lastColIndex:x,isRtl:o});null!==e&&c(e,r);break}case"ArrowUp":b>0&&u(h,b-1,r);break;case"PageDown":null!==g&&null!==f&&l(h,m(Math.min(g+p,f)));break;case"Home":c(0,r);break;case"End":c(x,r);break;case"Enter":(r.ctrlKey||r.metaKey)&&t.current.toggleColumnMenu(e.field);break;case" ":break;default:y=!1}y&&r.preventDefault()},[t,i,s,d,l,m,o,c,u]),h=e.useCallback((e,r)=>{const n=rh(t)===e.field,a=nh(t)===e.field;if(n||a||!Hu(r.key))return;const s=i(),u=t.current.getViewportPageSize(),p=e.field?t.current.getColumnIndex(e.field):0,h=s.length-1,g=uu(t).length-1;let f=!0;switch(r.key){case"ArrowDown":{const e=m(0);null!=e&&l(p,e);break}case"ArrowRight":{const e=wv({currentColIndex:p,firstColIndex:0,lastColIndex:g,isRtl:o});null!==e&&d(e,r);break}case"ArrowLeft":{const n=vv({currentColIndex:p,firstColIndex:0,lastColIndex:g,isRtl:o});null!==n?d(n,r):t.current.setColumnHeaderFilterFocus(e.field,r);break}case"ArrowUp":c(p,r);break;case"PageDown":null!==h&&l(p,m(Math.min(0+u,h)));break;case"Home":d(0,r);break;case"End":d(g,r);break;case" ":break;default:f=!1}f&&r.preventDefault()},[t,i,d,o,c,l,m]),g=e.useCallback((e,r)=>{const n=np(t);if(null===n)return;const{field:o,depth:a}=n,{fields:s,depth:d,maxDepth:p}=e,h=i(),g=t.current.getViewportPageSize(),f=t.current.getColumnIndex(o),x=o?t.current.getColumnIndex(o):0,b=h.length-1,y=uu(t).length-1;let v=!0;switch(r.key){case"ArrowDown":d===p-1?c(f,r):u(f,a+1,r);break;case"ArrowUp":d>0&&u(f,a-1,r);break;case"ArrowRight":{const e=s.length-s.indexOf(o)-1;f+e+1<=y&&u(f+e+1,a,r);break}case"ArrowLeft":{const e=s.indexOf(o);f-e-1>=0&&u(f-e-1,a,r);break}case"PageDown":null!==b&&l(x,m(Math.min(0+g,b)));break;case"Home":u(0,a,r);break;case"End":u(y,a,r);break;case" ":break;default:v=!1}v&&r.preventDefault()},[t,i,c,u,l,m]),f=e.useCallback((e,r)=>{if(Uf(r))return;const n=t.current.getCellParams(e.id,e.field);if(n.cellMode===Bd.Edit||!Hu(r.key))return;if(!t.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:r,cell:n}))return;const u=i();if(0===u.length)return;const p=t.current.getViewportPageSize(),h=a?()=>0:t.current.getColumnIndex,g=e.field?h(e.field):0,f=u.findIndex(t=>t.id===e.id),x=u.length-1,b=(a?[qh(t)]:uu(t)).length-1;let y=!0;switch(r.key){case"ArrowDown":f<x&&l(g,m(f+1),o?"right":"left","down");break;case"ArrowUp":f>0?l(g,m(f-1)):s?d(g,r):c(g,r);break;case"ArrowRight":{const e=wv({currentColIndex:g,firstColIndex:0,lastColIndex:b,isRtl:o});null!==e&&l(e,m(f),o?"left":"right");break}case"ArrowLeft":{const e=vv({currentColIndex:g,firstColIndex:0,lastColIndex:b,isRtl:o});null!==e&&l(e,m(f),o?"right":"left");break}case"Tab":r.shiftKey&&g>0?l(g-1,m(f),"left"):!r.shiftKey&&g<b&&l(g+1,m(f),"right");break;case" ":{if(e.field===um)break;const t=e.colDef;if(t&&("__tree_data_group__"===t.field||(e=>e===dm||null!==(e=>{const t=e.match(/^__row_group_by_columns_group_(.*)__$/);return t?t[1]:null})(e))(t.field)))break;!r.shiftKey&&f<x&&l(g,m(Math.min(f+p,x)));break}case"PageDown":f<x&&l(g,m(Math.min(f+p,x)));break;case"PageUp":{const e=Math.max(f-p,0);e!==f&&e>=0?l(g,m(e)):c(g,r);break}case"Home":r.ctrlKey||r.metaKey||r.shiftKey?l(0,m(0)):l(0,m(f));break;case"End":r.ctrlKey||r.metaKey||r.shiftKey?l(b,m(x)):l(b,m(f));break;default:y=!1}y&&r.preventDefault()},[t,i,o,l,m,s,d,c,a]),x=e.useCallback((e,{event:t})=>" "!==t.key&&e,[]);Gy(t,"canStartEditing",x),Mc(t,"columnHeaderKeyDown",p),Mc(t,"headerFilterKeyDown",h),Mc(t,"columnGroupHeaderKeyDown",g),Mc(t,"cellKeyDown",f)},Sv=(e,t)=>{const r=Ge({},cp(t.autoPageSize),t.paginationModel??t.initialState?.pagination?.paginationModel);dp(r.pageSize,t.signature);const n=t.rowCount??t.initialState?.pagination?.rowCount??("client"===t.paginationMode?e.rows?.totalRowCount:void 0),o=t.paginationMeta??t.initialState?.pagination?.meta??{};return Ge({},e,{pagination:Ge({},e.pagination,{paginationModel:r,rowCount:n,meta:o,enabled:!0===t.pagination,paginationMode:t.paginationMode})})},kv=(t,r)=>{((t,r)=>{const n=jh(t,"useGridPaginationMeta"),o=Uc(t,gp);t.current.registerControlState({stateId:"paginationMeta",propModel:r.paginationMeta,propOnChange:r.onPaginationMetaChange,stateSelector:gp,changeEvent:"paginationMetaChange"});const a=e.useCallback(e=>{o!==e&&(n.debug("Setting 'paginationMeta' to",e),t.current.setState(t=>Ge({},t,{pagination:Ge({},t.pagination,{meta:e})})))},[t,n,o]);Ch(t,{setPaginationMeta:a},"public");const i=e.useCallback((e,n)=>{const o=gp(t);return n.exportOnlyDirtyModels&&null==r.paginationMeta&&null==r.initialState?.pagination?.meta?e:Ge({},e,{pagination:Ge({},e.pagination,{meta:o})})},[t,r.paginationMeta,r.initialState?.pagination?.meta]),s=e.useCallback((e,r)=>{const n=r.stateToRestore.pagination?.meta?r.stateToRestore.pagination.meta:gp(t);return t.current.setState(e=>Ge({},e,{pagination:Ge({},e.pagination,{meta:n})})),e},[t]);Gy(t,"exportState",i),Gy(t,"restoreState",s),e.useEffect(()=>{r.paginationMeta&&t.current.setPaginationMeta(r.paginationMeta)},[t,r.paginationMeta])})(t,r),((t,r)=>{const n=jh(t,"useGridPaginationModel"),o=Uc(t,Qc),a=e.useRef(Im(t)),i=Math.floor(r.rowHeight*o);t.current.registerControlState({stateId:"paginationModel",propModel:r.paginationModel,propOnChange:r.onPaginationModelChange,stateSelector:pp,changeEvent:"paginationModelChange"});const s=e.useCallback(e=>{const r=pp(t);e!==r.page&&(n.debug(`Setting page to ${e}`),t.current.setPaginationModel({page:e,pageSize:r.pageSize}))},[t,n]),l=e.useCallback(e=>{const r=pp(t);e!==r.pageSize&&(n.debug(`Setting page size to ${e}`),t.current.setPaginationModel({pageSize:e,page:r.page}))},[t,n]),c=e.useCallback(e=>{const o=pp(t);e!==o&&(n.debug("Setting 'paginationModel' to",e),t.current.setState(t=>Ge({},t,{pagination:Ge({},t.pagination,{paginationModel:pv(t.pagination,r.signature,e)})}),"setPaginationModel"))},[t,n,r.signature]);Ch(t,{setPage:s,setPageSize:l,setPaginationModel:c},"public");const d=e.useCallback((e,n)=>{const o=pp(t);return!n.exportOnlyDirtyModels||null!=r.paginationModel||null!=r.initialState?.pagination?.paginationModel||0!==o.page&&o.pageSize!==(r.autoPageSize?0:100)?Ge({},e,{pagination:Ge({},e.pagination,{paginationModel:o})}):e},[t,r.paginationModel,r.initialState?.pagination?.paginationModel,r.autoPageSize]),u=e.useCallback((e,n)=>{const o=n.stateToRestore.pagination?.paginationModel?Ge({},cp(r.autoPageSize),n.stateToRestore.pagination?.paginationModel):pp(t);return t.current.setState(e=>Ge({},e,{pagination:Ge({},e.pagination,{paginationModel:pv(e.pagination,r.signature,o)})}),"stateRestorePreProcessing"),e},[t,r.autoPageSize,r.signature]);Gy(t,"exportState",d),Gy(t,"restoreState",u);const m=e.useCallback(()=>{if(!r.autoPageSize)return;const e=t.current.getRootDimensions(),n=Math.max(1,Math.floor(e.viewportInnerSize.height/i));t.current.setPageSize(n)},[t,r.autoPageSize,i]),p=e.useCallback(e=>{if(null==e)return;const r=pp(t);if(0===r.page)return;const n=bp(t);r.page>n-1&&t.current.setPage(Math.max(0,n-1))},[t]),h=e.useCallback(()=>{0!==pp(t).page&&t.current.setPage(0),0!==t.current.getScrollPosition().top&&t.current.scroll({top:0})},[t]),g=e.useCallback(e=>{const r=Ge({},e,{items:qm(t)});Db(r,a.current)||(a.current=r,h())},[t,h]);Mc(t,"viewportInnerSizeChange",m),Mc(t,"paginationModelChange",()=>{const e=pp(t);t.current.virtualScrollerRef?.current&&t.current.scrollToIndexes({rowIndex:e.page*e.pageSize})}),Mc(t,"rowCountChange",p),Mc(t,"sortModelChange",h),Mc(t,"filterModelChange",g);const f=e.useRef(!0);e.useEffect(()=>{f.current?f.current=!1:r.pagination&&t.current.setState(e=>Ge({},e,{pagination:Ge({},e.pagination,{paginationModel:pv(e.pagination,r.signature,r.paginationModel)})}))},[t,r.paginationModel,r.signature,r.pagination]),e.useEffect(()=>{t.current.setState(e=>{const t=!0===r.pagination;return e.pagination.paginationMode===r.paginationMode||e.pagination.enabled===t?e:Ge({},e,{pagination:Ge({},e.pagination,{paginationMode:r.paginationMode,enabled:!0===r.pagination})})})},[t,r.paginationMode,r.pagination]),e.useEffect(m,[m])})(t,r),((t,r)=>{const n=jh(t,"useGridRowCount"),o=Uc(t,$m),a=Uc(t,hp),i=Uc(t,gp),s=Uc(t,pp),l=$c(()=>pp(t).pageSize);t.current.registerControlState({stateId:"paginationRowCount",propModel:r.rowCount,propOnChange:r.onRowCountChange,stateSelector:hp,changeEvent:"rowCountChange"});const c=e.useCallback(e=>{a!==e&&(n.debug("Setting 'rowCount' to",e),t.current.setState(t=>Ge({},t,{pagination:Ge({},t.pagination,{rowCount:e})})))},[t,n,a]);Ch(t,{setRowCount:c},"public");const d=e.useCallback((e,n)=>{const o=hp(t);return n.exportOnlyDirtyModels&&null==r.rowCount&&null==r.initialState?.pagination?.rowCount?e:Ge({},e,{pagination:Ge({},e.pagination,{rowCount:o})})},[t,r.rowCount,r.initialState?.pagination?.rowCount]),u=e.useCallback((e,r)=>{const n=r.stateToRestore.pagination?.rowCount?r.stateToRestore.pagination.rowCount:hp(t);return t.current.setState(e=>Ge({},e,{pagination:Ge({},e.pagination,{rowCount:n})})),e},[t]);Gy(t,"exportState",d),Gy(t,"restoreState",u);const m=e.useCallback(e=>{"client"!==r.paginationMode&&l.current&&e.pageSize!==l.current&&(l.current=e.pageSize,-1===a&&t.current.setPage(0))},[r.paginationMode,l,a,t]);Mc(t,"paginationModelChange",m),e.useEffect(()=>{"client"===r.paginationMode?t.current.setRowCount(o):null!=r.rowCount&&t.current.setRowCount(r.rowCount)},[t,r.paginationMode,o,r.rowCount]);const p=!1===i.hasNextPage;e.useEffect(()=>{p&&-1===a&&t.current.setRowCount(s.pageSize*s.page+o)},[t,o,p,a,s])})(t,r)},Rv=(e,t)=>Ge({},e,{preferencePanel:t.initialState?.preferencePanel??{open:!1}}),Nv=e=>{switch(e.type){case"boolean":return!1;case"date":case"dateTime":case"number":return;case"singleSelect":return null;default:return""}},Pv=["id","field"],Iv=["id","field"],Mv=["id"],Dv=["id"],Tv=e=>Ge({},e,{editRows:{}}),Ev=(t,r)=>{((t,r)=>{const[n,o]=e.useState({}),a=e.useRef(n),i=e.useRef({}),{processRowUpdate:s,onProcessRowUpdateError:l,cellModesModel:c,onCellModesModelChange:d}=r,u=e=>(...t)=>{r.editMode===qd.Cell&&e(...t)},m=e.useCallback((e,r)=>{const n=t.current.getCellParams(e,r);if(!t.current.isCellEditable(n))throw new Error(`MUI X: The cell with id=${e} and field=${r} is not editable.`)},[t]),p=e.useCallback((e,r,n)=>{if(t.current.getCellMode(e,r)!==n)throw new Error(`MUI X: The cell with id=${e} and field=${r} is not in ${n} mode.`)},[t]),h=e.useCallback((e,r)=>{if(!e.isEditable)return;if(e.cellMode===Bd.Edit)return;const n=Ge({},e,{reason:_d.cellDoubleClick});t.current.publishEvent("cellEditStart",n,r)},[t]),g=e.useCallback((e,r)=>{if(e.cellMode===Bd.View)return;if(t.current.getCellMode(e.id,e.field)===Bd.View)return;const n=Ge({},e,{reason:Qd.cellFocusOut});t.current.publishEvent("cellEditStop",n,r)},[t]),f=e.useCallback((e,r)=>{if(e.cellMode===Bd.Edit){if(229===r.which)return;let n;if("Escape"===r.key?n=Qd.escapeKeyDown:"Enter"===r.key?n=Qd.enterKeyDown:"Tab"===r.key&&(n=r.shiftKey?Qd.shiftTabKeyDown:Qd.tabKeyDown,r.preventDefault()),n){const o=Ge({},e,{reason:n});t.current.publishEvent("cellEditStop",o,r)}}else if(e.isEditable){let n;if(!t.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:r,cellParams:e,editMode:"cell"}))return;if(Ou(r)?n=_d.printableKeyDown:$u(r)?n=_d.pasteKeyDown:"Enter"===r.key?n=_d.enterKeyDown:"Backspace"!==r.key&&"Delete"!==r.key||(n=_d.deleteKeyDown),n){const o=Ge({},e,{reason:n,key:r.key});t.current.publishEvent("cellEditStart",o,r)}}},[t]),x=e.useCallback(e=>{const{id:r,field:n,reason:o}=e,a={id:r,field:n};o!==_d.printableKeyDown&&o!==_d.deleteKeyDown&&o!==_d.pasteKeyDown||(a.deleteValue=!0),t.current.startCellEditMode(a)},[t]),b=e.useCallback(e=>{const{id:r,field:n,reason:o}=e;let a;t.current.runPendingEditCellValueMutation(r,n),o===Qd.enterKeyDown?a="below":o===Qd.tabKeyDown?a="right":o===Qd.shiftTabKeyDown&&(a="left");const i="escapeKeyDown"===o;t.current.stopCellEditMode({id:r,field:n,ignoreModifications:i,cellToFocusAfter:a})},[t]);var y;Mc(t,"cellDoubleClick",u(h)),Mc(t,"cellFocusOut",u(g)),Mc(t,"cellKeyDown",u(f)),Mc(t,"cellEditStart",u(x)),Mc(t,"cellEditStop",u(b)),Tc(t,"cellEditStart",r.onCellEditStart),Tc(t,"cellEditStop",(y=r.onCellEditStop,async(...e)=>{if(y){const{id:r,field:n}=e[0],o=t.current.state.editRows,a=o[r][n]?.error;a||y(...e)}}));const v=e.useCallback((e,r)=>{const n=Mg(t);return n[e]&&n[e][r]?Bd.Edit:Bd.View},[t]),w=cs(e=>{const n=e!==r.cellModesModel;d&&n&&d(e,{api:t.current}),r.cellModesModel&&n||(o(e),a.current=e,t.current.publishEvent("cellModesModelChange",e))}),C=e.useCallback((e,t,r)=>{const n=Ge({},a.current);if(null!==r)n[e]=Ge({},n[e],{[t]:Ge({},r)});else{const r=n[e],o=Qe(r,[t].map(xt));n[e]=o,0===Object.keys(n[e]).length&&delete n[e]}w(n)},[w]),j=e.useCallback((e,r,n)=>{t.current.setState(t=>{const o=Ge({},t.editRows);return null!==n?o[e]=Ge({},o[e],{[r]:Ge({},n)}):(delete o[e][r],0===Object.keys(o[e]).length&&delete o[e]),Ge({},t,{editRows:o})})},[t]),S=e.useCallback(e=>{const{id:t,field:r}=e,n=Qe(e,Pv);m(t,r),p(t,r,Bd.View),C(t,r,Ge({mode:Bd.Edit},n))},[m,p,C]),k=cs(async e=>{const{id:r,field:n,deleteValue:o,initialValue:a}=e,i=t.current.getCellValue(r,n);let s=i;o?s=Nv(t.current.getColumn(n)):a&&(s=a);const l=t.current.getColumn(n),c=!!l.preProcessEditCellProps&&o;let d={value:s,error:!1,isProcessingProps:c};if(j(r,n,d),t.current.setCellFocus(r,n),c&&(d=await Promise.resolve(l.preProcessEditCellProps({id:r,row:t.current.getRow(r),props:d,hasChanged:s!==i})),t.current.getCellMode(r,n)===Bd.Edit)){const e=Mg(t);j(r,n,Ge({},d,{value:e[r][n].value,isProcessingProps:!1}))}}),R=e.useCallback(e=>{const{id:t,field:r}=e,n=Qe(e,Iv);p(t,r,Bd.Edit),C(t,r,Ge({mode:Bd.View},n))},[p,C]),N=cs(async e=>{const{id:n,field:o,ignoreModifications:a,cellToFocusAfter:c="none"}=e;p(n,o,Bd.Edit),t.current.runPendingEditCellValueMutation(n,o);const d=()=>{j(n,o,null),C(n,o,null),"none"!==c&&t.current.moveFocusToRelativeCell(n,o,c)};if(a)return void d();const u=Mg(t),{error:m,isProcessingProps:h}=u[n][o],g=t.current.getRow(n);if(m||h)return i.current[n][o].mode=Bd.Edit,void C(n,o,{mode:Bd.Edit});const f=t.current.getRowWithUpdatedValuesFromCellEditing(n,o);if(r.dataSource?.updateRow){if(Db(g,f))return void d();const e=()=>{i.current[n][o].mode=Bd.Edit,C(n,o,{mode:Bd.Edit})},r={rowId:n,updatedRow:f,previousRow:g};try{await t.current.dataSource.editRow(r),d()}catch{e()}}else if(s){const e=e=>{i.current[n][o].mode=Bd.Edit,C(n,o,{mode:Bd.Edit}),l&&l(e)};try{Promise.resolve(s(f,g,{rowId:n})).then(e=>{t.current.updateRows([e]),d()}).catch(e)}catch(x){e(x)}}else t.current.updateRows([f]),d()}),P={setCellEditingEditCellValue:e.useCallback(async e=>{const{id:r,field:n,value:o,debounceMs:a,unstable_skipValueParser:i}=e;m(r,n),p(r,n,Bd.Edit);const s=t.current.getColumn(n),l=t.current.getRow(r);let c=o;s.valueParser&&!i&&(c=s.valueParser(o,l,s,t));let d=Mg(t),u=Ge({},d[r][n],{value:c,changeReason:a?"debouncedSetEditCellValue":"setEditCellValue"});if(s.preProcessEditCellProps){const e=o!==d[r][n].value;u=Ge({},u,{isProcessingProps:!0}),j(r,n,u),u=await Promise.resolve(s.preProcessEditCellProps({id:r,row:l,props:u,hasChanged:e}))}return t.current.getCellMode(r,n)!==Bd.View&&(d=Mg(t),u=Ge({},u,{isProcessingProps:!1}),u.value=s.preProcessEditCellProps?d[r][n].value:c,j(r,n,u),d=Mg(t),!d[r]?.[n]?.error)},[t,m,p,j]),getRowWithUpdatedValuesFromCellEditing:e.useCallback((e,r)=>{const n=t.current.getColumn(r),o=Mg(t),a=t.current.getRow(e);if(!o[e]||!o[e][r])return t.current.getRow(e);const{value:i}=o[e][r];return n.valueSetter?n.valueSetter(i,a,n,t):Ge({},a,{[r]:i})},[t])};Ch(t,{getCellMode:v,startCellEditMode:S,stopCellEditMode:R},"public"),Ch(t,P,"private"),e.useEffect(()=>{c&&w(c)},[c,w]),ls(()=>{const e=cd(t),r=i.current;i.current=Ld(n),Object.entries(n).forEach(([n,o])=>{Object.entries(o).forEach(([o,a])=>{const i=r[n]?.[o]?.mode||Bd.View,s=e[n]?t.current.getRowId(e[n]):n;a.mode===Bd.Edit&&i===Bd.View?k(Ge({id:s,field:o},a)):a.mode===Bd.View&&i===Bd.Edit&&N(Ge({id:s,field:o},a))})})},[t,n,k,N])})(t,r),((t,r)=>{const[n,o]=e.useState({}),a=e.useRef(n),i=e.useRef({}),s=e.useRef({}),l=e.useRef(void 0),c=e.useRef(null),{processRowUpdate:d,onProcessRowUpdateError:u,rowModesModel:m,onRowModesModelChange:p}=r,h=e=>(...t)=>{r.editMode===qd.Row&&e(...t)},g=e.useCallback((e,r)=>{const n=t.current.getCellParams(e,r);if(!t.current.isCellEditable(n))throw new Error(`MUI X: The cell with id=${e} and field=${r} is not editable.`)},[t]),f=e.useCallback((e,r)=>{if(t.current.getRowMode(e)!==r)throw new Error(`MUI X: The row with id=${e} is not in ${r} mode.`)},[t]),x=e.useCallback(e=>{const r=Mg(t);return Object.values(r[e]).some(e=>e.error)},[t]),b=e.useCallback((e,r)=>{if(!e.isEditable)return;if(t.current.getRowMode(e.id)===Vd.Edit)return;const n=t.current.getRowParams(e.id),o=Ge({},n,{field:e.field,reason:Xd.cellDoubleClick});t.current.publishEvent("rowEditStart",o,r)},[t]),y=e.useCallback(e=>{c.current=e},[]),v=e.useCallback((e,r)=>{e.isEditable&&t.current.getRowMode(e.id)!==Vd.View&&(c.current=null,l.current=setTimeout(()=>{if(c.current?.id!==e.id){if(!t.current.getRow(e.id))return;if(t.current.getRowMode(e.id)===Vd.View)return;if(x(e.id))return;const n=t.current.getRowParams(e.id),o=Ge({},n,{field:e.field,reason:Yd.rowFocusOut});t.current.publishEvent("rowEditStop",o,r)}}))},[t,x]);e.useEffect(()=>()=>{clearTimeout(l.current)},[]);const w=e.useCallback((e,r)=>{if(e.cellMode===Vd.Edit){if(229===r.which)return;let n;if("Escape"===r.key)n=Yd.escapeKeyDown;else if("Enter"===r.key)n=Yd.enterKeyDown;else if("Tab"===r.key){const o=mu(t).filter(r=>t.current.getColumn(r).type===Xu||t.current.isCellEditable(t.current.getCellParams(e.id,r)));if(r.shiftKey?e.field===o[0]&&(n=Yd.shiftTabKeyDown):e.field===o[o.length-1]&&(n=Yd.tabKeyDown),r.preventDefault(),!n){const n=o.findIndex(t=>t===e.field),a=o[r.shiftKey?n-1:n+1];t.current.setCellFocus(e.id,a)}}if(n){if(n!==Yd.escapeKeyDown&&x(e.id))return;const o=Ge({},t.current.getRowParams(e.id),{reason:n,field:e.field});t.current.publishEvent("rowEditStop",o,r)}}else if(e.isEditable){let n;if(!t.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:r,cellParams:e,editMode:"row"}))return;if(Ou(r)||$u(r)?n=Xd.printableKeyDown:"Enter"===r.key?n=Xd.enterKeyDown:"Backspace"!==r.key&&"Delete"!==r.key||(n=Xd.deleteKeyDown),n){const o=t.current.getRowParams(e.id),a=Ge({},o,{field:e.field,reason:n});t.current.publishEvent("rowEditStart",a,r)}}},[t,x]),C=e.useCallback(e=>{const{id:r,field:n,reason:o}=e,a={id:r,fieldToFocus:n};o!==Xd.printableKeyDown&&o!==Xd.deleteKeyDown||(a.deleteValue=!!n),t.current.startRowEditMode(a)},[t]),j=e.useCallback(e=>{const{id:r,reason:n,field:o}=e;let a;t.current.runPendingEditCellValueMutation(r),n===Yd.enterKeyDown?a="below":n===Yd.tabKeyDown?a="right":n===Yd.shiftTabKeyDown&&(a="left");const i="escapeKeyDown"===n;t.current.stopRowEditMode({id:r,ignoreModifications:i,field:o,cellToFocusAfter:a})},[t]);Mc(t,"cellDoubleClick",h(b)),Mc(t,"cellFocusIn",h(y)),Mc(t,"cellFocusOut",h(v)),Mc(t,"cellKeyDown",h(w)),Mc(t,"rowEditStart",h(C)),Mc(t,"rowEditStop",h(j)),Tc(t,"rowEditStart",r.onRowEditStart),Tc(t,"rowEditStop",r.onRowEditStop);const S=e.useCallback(e=>Dg(t,{rowId:e,editMode:r.editMode})?Vd.Edit:Vd.View,[t,r.editMode]),k=cs(e=>{const n=e!==r.rowModesModel;p&&n&&p(e,{api:t.current}),r.rowModesModel&&n||(o(e),a.current=e,t.current.publishEvent("rowModesModelChange",e))}),R=e.useCallback((e,t)=>{const r=Ge({},a.current);null!==t?r[e]=Ge({},t):delete r[e],k(r)},[k]),N=e.useCallback((e,r)=>{t.current.setState(t=>{const n=Ge({},t.editRows);return null!==r?n[e]=r:delete n[e],Ge({},t,{editRows:n})})},[t]),P=e.useCallback((e,r,n)=>{t.current.setState(t=>{const o=Ge({},t.editRows);return null!==n?o[e]=Ge({},o[e],{[r]:Ge({},n)}):(delete o[e][r],0===Object.keys(o[e]).length&&delete o[e]),Ge({},t,{editRows:o})})},[t]),I=e.useCallback(e=>{const{id:t}=e,r=Qe(e,Mv);f(t,Vd.View),R(t,Ge({mode:Vd.Edit},r))},[f,R]),M=cs(e=>{const{id:r,fieldToFocus:n,deleteValue:o,initialValue:a}=e,i=t.current.getRow(r),l=lu(t),c=l.reduce((e,i)=>{const s=i.field;if(!t.current.getCellParams(r,s).isEditable)return e;const l=t.current.getColumn(s);let c=t.current.getCellValue(r,s);return n===s&&(o||a)&&(o?c=Nv(l):a&&(c=a)),e[s]={value:c,error:!1,isProcessingProps:l.editable&&!!l.preProcessEditCellProps&&o},e},{});s.current[r]=i,N(r,c),n&&t.current.setCellFocus(r,n),l.filter(e=>e.editable&&!!e.preProcessEditCellProps&&o).forEach(e=>{const n=e.field,s=t.current.getCellValue(r,n),l=o?Nv(e):a??s;Promise.resolve(e.preProcessEditCellProps({id:r,row:i,props:c[n],hasChanged:l!==s})).then(e=>{if(t.current.getRowMode(r)===Vd.Edit){const o=Mg(t);P(r,n,Ge({},e,{value:o[r][n].value,isProcessingProps:!1}))}})})}),D=e.useCallback(e=>{const{id:t}=e,r=Qe(e,Dv);f(t,Vd.Edit),R(t,Ge({mode:Vd.View},r))},[f,R]),T=cs(async e=>{const{id:n,ignoreModifications:o,field:a,cellToFocusAfter:l="none"}=e;t.current.runPendingEditCellValueMutation(n);const c=()=>{"none"!==l&&a&&t.current.moveFocusToRelativeCell(n,a,l),N(n,null),R(n,null),delete s.current[n]};if(o)return void c();const m=Mg(t),p=s.current[n];if(Object.values(m[n]).some(e=>e.isProcessingProps))return void(i.current[n].mode=Vd.Edit);if(x(n))return i.current[n].mode=Vd.Edit,void R(n,{mode:Vd.Edit});const h=t.current.getRowWithUpdatedValuesFromRowEditing(n);if(r.dataSource?.updateRow){if(Db(p,h))return void c();const e=()=>{i.current[n].mode=Vd.Edit,R(n,{mode:Vd.Edit})},r={rowId:n,updatedRow:h,previousRow:p};try{await t.current.dataSource.editRow(r),c()}catch{e()}}else if(d){const e=e=>{i.current[n]&&(i.current[n].mode=Vd.Edit,R(n,{mode:Vd.Edit})),u&&u(e)};try{Promise.resolve(d(h,p,{rowId:n})).then(e=>{t.current.updateRows([e]),c()}).catch(e)}catch(g){e(g)}}else t.current.updateRows([h]),c()}),E={setRowEditingEditCellValue:e.useCallback(e=>{const{id:r,field:n,value:o,debounceMs:a,unstable_skipValueParser:i}=e;g(r,n);const s=t.current.getColumn(n),l=t.current.getRow(r);let c=o;s.valueParser&&!i&&(c=s.valueParser(o,l,s,t));let d=Mg(t),u=Ge({},d[r][n],{value:c,changeReason:a?"debouncedSetEditCellValue":"setEditCellValue"});return s.preProcessEditCellProps||P(r,n,u),new Promise(e=>{const o=[];if(s.preProcessEditCellProps){const a=u.value!==d[r][n].value;u=Ge({},u,{isProcessingProps:!0}),P(r,n,u);const i=d[r],m=Qe(i,[n].map(xt)),p=Promise.resolve(s.preProcessEditCellProps({id:r,row:l,props:u,hasChanged:a,otherFieldsProps:m})).then(o=>{t.current.getRowMode(r)!==Vd.View?(d=Mg(t),(o=Ge({},o,{isProcessingProps:!1})).value=s.preProcessEditCellProps?d[r][n].value:c,P(r,n,o)):e(!1)});o.push(p)}Object.entries(d[r]).forEach(([a,i])=>{if(a===n)return;const s=t.current.getColumn(a);if(!s.preProcessEditCellProps)return;i=Ge({},i,{isProcessingProps:!0}),P(r,a,i),d=Mg(t);const c=d[r],u=Qe(c,[a].map(xt)),m=Promise.resolve(s.preProcessEditCellProps({id:r,row:l,props:i,hasChanged:!1,otherFieldsProps:u})).then(n=>{t.current.getRowMode(r)!==Vd.View?(n=Ge({},n,{isProcessingProps:!1}),P(r,a,n)):e(!1)});o.push(m)}),Promise.all(o).then(()=>{t.current.getRowMode(r)===Vd.Edit?(d=Mg(t),e(!d[r][n].error)):e(!1)})})},[t,g,P]),getRowWithUpdatedValuesFromRowEditing:e.useCallback(e=>{const r=Mg(t),n=t.current.getRow(e);if(!r[e])return t.current.getRow(e);let o=Ge({},s.current[e],n);return Object.entries(r[e]).forEach(([e,r])=>{const n=t.current.getColumn(e);n?.valueSetter?o=n.valueSetter(r.value,o,n,t):o[e]=r.value}),o},[t])};Ch(t,{getRowMode:S,startRowEditMode:I,stopRowEditMode:D},"public"),Ch(t,E,"private"),e.useEffect(()=>{m&&k(m)},[m,k]),ls(()=>{const e=cd(t),r=i.current;i.current=Ld(n);const o=new Set([...Object.keys(n),...Object.keys(r)]);Array.from(o).forEach(o=>{const a=n[o]??{mode:Vd.View},i=r[o]?.mode||Vd.View,s=e[o]?t.current.getRowId(e[o]):o;a.mode===Vd.Edit&&i===Vd.View?M(Ge({id:s},a)):a.mode===Vd.View&&i===Vd.Edit&&T(Ge({id:s},a))})},[t,n,M,T])})(t,r);const n=e.useRef({}),{isCellEditable:o}=r,a=e.useCallback(e=>!om(e.rowNode)&&(!!e.colDef.editable&&(!!e.colDef.renderEditCell&&(!o||o(e)))),[o]);e.useEffect(()=>{const e=n.current;return()=>{Object.entries(e).forEach(([t,r])=>{Object.keys(r).forEach(r=>{const[n]=e[t][r];clearTimeout(n),delete e[t][r]})})}},[]);const i=e.useCallback((e,t)=>{if(n.current[e])if(t){if(n.current[e][t]){const[,r]=n.current[e][t];r()}}else Object.keys(n.current[e]).forEach(t=>{const[,r]=n.current[e][t];r()})},[]),s=e.useCallback(e=>{const{id:o,field:a,debounceMs:i}=e;return new Promise(s=>{((e,t,r,o)=>{if(!r)return void o();if(n.current[e]||(n.current[e]={}),n.current[e][t]){const[r]=n.current[e][t];clearTimeout(r)}const a=setTimeout(()=>{o(),delete n.current[e][t]},r);n.current[e][t]=[a,()=>{const[r]=n.current[e][t];clearTimeout(r),o(),delete n.current[e][t]}]})(o,a,i,async()=>{const n=r.editMode===qd.Row?t.current.setRowEditingEditCellValue:t.current.setCellEditingEditCellValue;if(t.current.getCellMode(o,a)===Bd.Edit){const t=await n(e);s(t)}})})},[t,r.editMode]),l=e.useCallback((e,n)=>r.editMode===qd.Cell?t.current.getRowWithUpdatedValuesFromCellEditing(e,n):t.current.getRowWithUpdatedValuesFromRowEditing(e),[t,r.editMode]),c=e.useCallback((e,r)=>{const n=Mg(t);return n[e]?.[r]??null},[t]),d={runPendingEditCellValueMutation:i};Ch(t,{isCellEditable:a,setEditCellValue:s,getRowWithUpdatedValues:l,unstable_getEditCellMeta:c},"public"),Ch(t,d,"private")},Fv=(e,t,r)=>{const n=!!t.dataSource;return r.current.caches.rows=tm({rows:n?[]:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),Ge({},e,{rows:nm({apiRef:r,rowCountProp:t.rowCount,loadingProp:!!n||t.loading,previousTree:null,previousTreeDepths:null})})},Av=e=>"full"===e.updates.type?(e=>{const t={[Zu]:Ge({},{type:"group",id:Zu,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null},{children:e})};for(let r=0;r<e.length;r+=1){const n=e[r];t[n]={id:n,depth:0,parent:Zu,type:"leaf",groupingKey:null}}return{groupingName:Qy,tree:t,treeDepths:{0:e.length},dataRowIds:e}})(e.updates.rows):(({previousTree:e,actions:t})=>{const r=Ge({},e),n={};for(let i=0;i<t.remove.length;i+=1){const e=t.remove[i];n[e]=!0,delete r[e]}for(let i=0;i<t.insert.length;i+=1){const e=t.insert[i];r[e]={id:e,depth:0,parent:Zu,type:"leaf",groupingKey:null}}const o=r[Zu];let a=[...o.children,...t.insert];return Object.values(n).length&&(a=a.filter(e=>!n[e])),r[Zu]=Ge({},o,{children:a}),{groupingName:Qy,tree:r,treeDepths:{0:a.length},dataRowIds:a}})({previousTree:e.previousTree,actions:e.updates.actions});class Ov extends Error{}function Hv(t,r){const n=e.useCallback(e=>({field:e,colDef:t.current.getColumn(e)}),[t]),o=e.useCallback(e=>{const r=t.current.getRow(e);if(!r)throw new Ov(`No row with id #${e} found`);return{id:e,columns:t.current.getAllColumns(),row:r}},[t]),a=e.useCallback((e,r,n,{cellMode:o,colDef:a,hasFocus:i,rowNode:s,tabIndex:l})=>{const c=n[r],d=a?.valueGetter?a.valueGetter(c,n,a,t):c,u={id:e,field:r,row:n,rowNode:s,colDef:a,cellMode:o,hasFocus:i,tabIndex:l,value:d,formattedValue:d,isEditable:!1,api:t.current};return a&&a.valueFormatter&&(u.formattedValue=a.valueFormatter(d,n,a,t)),u.isEditable=a&&t.current.isCellEditable(u),u},[t]),i=e.useCallback((e,n)=>{const o=t.current.getRow(e),a=ud(t,e);if(!o||!a)throw new Ov(`No row with id #${e} found`);const i=tp(t),s=ap(t),l=t.current.getCellMode(e,n);return t.current.getCellParamsForRow(e,n,o,{colDef:r.listView&&r.listViewColumn?.field===n?qh(t):t.current.getColumn(n),rowNode:a,hasFocus:null!==i&&i.field===n&&i.id===e,tabIndex:s&&s.field===n&&s.id===e?0:-1,cellMode:l})},[t,r.listView,r.listViewColumn?.field]),s=e.useCallback((e,r)=>{const n=t.current.getColumn(r),o=t.current.getRow(e);if(!o)throw new Ov(`No row with id #${e} found`);return n&&n.valueGetter?n.valueGetter(o[n.field],o,n,t):o[r]},[t]),l=e.useCallback((e,r)=>((e,t,r)=>{const n=t.field;if(!t||!t.valueGetter)return e[n];const o=e[t.field];return t.valueGetter(o,e,t,r)})(e,r,t),[t]),c=e.useCallback((e,r)=>{const n=l(e,r);return r&&r.valueFormatter?r.valueFormatter(n,e,r,t):n},[t,l]),d=e.useCallback(e=>t.current.rootElementRef.current?function(e,t){return e.querySelector(`[role="columnheader"][data-field="${Wf(t)}"]`)}(t.current.rootElementRef.current,e):null,[t]),u=e.useCallback(e=>t.current.rootElementRef.current?function(e,t){return e.querySelector(Gf(t))}(t.current.rootElementRef.current,e):null,[t]),m=e.useCallback((e,r)=>t.current.rootElementRef.current?function(e,{id:t,field:r}){const n=`${Gf(t)} .${jc.cell}[data-field="${Wf(r)}"]`;return e.querySelector(n)}(t.current.rootElementRef.current,{id:e,field:r}):null,[t]),p={getCellParamsForRow:a};Ch(t,{getCellValue:s,getCellParams:i,getCellElement:m,getRowValue:l,getRowFormattedValue:c,getRowParams:o,getRowElement:u,getColumnHeaderParams:n,getColumnHeaderElement:d},"public"),Ch(t,p,"private")}const Lv={type:"include",ids:new Set},$v=(e,t)=>Ge({},e,{rowSelection:t.rowSelection?t.rowSelectionModel??Lv:Lv}),zv=(t,r)=>{const n=(t=>{const{classes:r}=t;return e.useMemo(()=>_l({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Cc,r),[r])})({classes:r.classes}),o=e.useCallback(e=>{const o=Ge({},Np,{cellClassName:n.cellCheckbox,headerClassName:n.columnHeaderCheckbox,headerName:t.current.getLocaleText("checkboxSelectionHeaderName")}),a=r.checkboxSelection,i=null!=e.lookup[Rp];return a&&!i?(e.lookup[Rp]=o,e.orderedFields=[Rp,...e.orderedFields]):!a&&i?(delete e.lookup[Rp],e.orderedFields=e.orderedFields.filter(e=>e!==Rp)):a&&i&&(e.lookup[Rp]=Ge({},o,e.lookup[Rp]),r.columns.some(e=>e.field===Rp)||(e.orderedFields=[Rp,...e.orderedFields.filter(e=>e!==Rp)])),e},[t,n,r.columns,r.checkboxSelection]);Gy(t,"hydrateColumns",o)},qv=(e,t)=>{const r=t.sortModel??t.initialState?.sorting?.sortModel??[];return Ge({},e,{sorting:{sortModel:vd(r,t.disableMultipleColumnsSorting),sortedRows:[]}})};function Bv(e){const{containerSize:t,scrollPosition:r,elementSize:n,elementOffset:o}=e,a=o+n;return n>t?o:a-t>r?a-t:o<r?o:void 0}const Vv={autoHeight:!1,autoPageSize:!1,autosizeOnMount:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,clipboardCopyCellDelimiter:"\t",columnBufferPx:150,columnHeaderHeight:56,disableAutosize:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnReorder:!1,disableColumnResize:!1,disableColumnSelector:!1,disableColumnSorting:!1,disableDensitySelector:!1,disableEval:!1,disableMultipleColumnsFiltering:!1,disableMultipleColumnsSorting:!1,disableMultipleRowSelection:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:qd.Cell,filterDebounceMs:150,filterMode:"client",hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,ignoreDiacritics:!1,ignoreValueFormatterDuringExport:!1,keepColumnPositionIfDraggedOutside:!1,keepNonExistentRowsSelected:!1,loading:!1,logger:console,logLevel:"error",pageSizeOptions:[25,50,100],pagination:!1,paginationMode:"client",resizeThrottleMs:60,rowBufferPx:150,rowHeight:52,rows:[],rowSelection:!0,rowSpacingType:"margin",rowSpanning:!1,showCellVerticalBorder:!1,showColumnVerticalBorder:!1,showToolbar:!1,sortingMode:"client",sortingOrder:["asc","desc",null],throttleRowsMs:0,virtualizeColumnsWithAutoRowHeight:!1},Wv={width:0,height:0},Gv={isReady:!1,root:Wv,viewportOuterSize:Wv,viewportInnerSize:Wv,contentSize:Wv,minimumSize:Wv,hasScrollX:!1,hasScrollY:!1,scrollbarSize:0,headerHeight:0,groupHeaderHeight:0,headerFilterHeight:0,rowWidth:0,rowHeight:0,columnsTotalWidth:0,leftPinnedWidth:0,rightPinnedWidth:0,headersTotalHeight:0,topContainerHeight:0,bottomContainerHeight:0},Uv=(e,t,r)=>{const n=Gv,o=Qc(r);return Ge({},e,{dimensions:Ge({},n,Xv(t,r,o,hu(r)))})},Kv=Yl(uu,fu,(e,t)=>{const r=e.length;return 0===r?0:Vh(t[r-1]+e[r-1].computedWidth,1)});function _v(t,r){const n=jh(t,"useResizeContainer"),o=e.useRef(!1),a=e.useRef(Wv),i=Uc(t,hu),s=Uc(t,Qc),l=Uc(t,Kv),c=e.useRef(!0),{rowHeight:d,headerHeight:u,groupHeaderHeight:m,headerFilterHeight:p,headersTotalHeight:h,leftPinnedWidth:g,rightPinnedWidth:f}=Xv(r,t,s,i),x=e.useCallback(()=>tc(t),[t]),b=e.useCallback(e=>{t.current.setState(t=>Ge({},t,{dimensions:e})),t.current.rootElementRef.current&&Qv(t.current.rootElementRef.current,tc(t))},[t]),y=e.useCallback(()=>{const e=tc(t);if(!e.isReady)return 0;const n=Rh(t);if(r.getRowHeight){const e=Eh(t),r=e.lastRowIndex-e.firstRowIndex;return Math.min(r-1,n.rows.length)}const o=Math.floor(e.viewportInnerSize.height/d);return Math.min(o,n.rows.length)},[t,r.getRowHeight,d]),v=e.useCallback(()=>{if(c.current)return;const e=function(e,t){if(void 0!==t)return t;if(null===e)return 0;const r=Yv.get(e);if(void 0!==r)return r;const n=_g(e).createElement("div");n.style.width="99px",n.style.height="99px",n.style.position="absolute",n.style.overflow="scroll",n.className="scrollDiv",e.appendChild(n);const o=n.offsetWidth-n.clientWidth;return e.removeChild(n),Yv.set(e,o),o}(t.current.mainElementRef.current,r.scrollbarSize),n=Ih(t),o=h+n.pinnedTopRowsTotalHeight,i=n.pinnedBottomRowsTotalHeight,s={width:l,height:Vh(n.currentPageTotalHeight,1)};let x,y,v=!1,w=!1;if(r.autoHeight)w=!1,v=Math.round(l)>Math.round(a.current.width),x={width:a.current.width,height:o+i+s.height},y={width:Math.max(0,x.width-(w?e:0)),height:Math.max(0,x.height-(v?e:0))};else{x={width:a.current.width,height:a.current.height},y={width:Math.max(0,x.width),height:Math.max(0,x.height-o-i)};const t=s,r=y,n=t.width>r.width,l=t.height>r.height;(n||l)&&(w=l,v=t.width+(w?e:0)>r.width,v&&(w=t.height+e>r.height)),w&&(y.width-=e),v&&(y.height-=e)}const C=Math.max(x.width,l+(w?e:0)),j={width:l,height:o+s.height+i},S={isReady:!0,root:a.current,viewportOuterSize:x,viewportInnerSize:y,contentSize:s,minimumSize:j,hasScrollX:v,hasScrollY:w,scrollbarSize:e,headerHeight:u,groupHeaderHeight:m,headerFilterHeight:p,rowWidth:C,rowHeight:d,columnsTotalWidth:l,leftPinnedWidth:g,rightPinnedWidth:f,headersTotalHeight:h,topContainerHeight:o,bottomContainerHeight:i},k=t.current.state.dimensions;var R,N;Db(k,S)||(b(S),R=S.viewportInnerSize,N=k.viewportInnerSize,(R.width!==N.width||R.height!==N.height)&&t.current.publishEvent("viewportInnerSizeChange",S.viewportInnerSize),t.current.updateRenderContext?.())},[t,b,r.scrollbarSize,r.autoHeight,d,u,m,p,l,h,g,f]),w=cs(v),C=e.useMemo(()=>r.resizeThrottleMs>0?function(e,t=166){let r,n;const o=()=>{r=void 0,e(...n)};function a(...e){n=e,void 0===r&&(r=setTimeout(o,t))}return a.clear=()=>{clearTimeout(r),r=void 0},a}(()=>{w(),t.current.publishEvent("debouncedResize",a.current)},r.resizeThrottleMs):void 0,[t,r.resizeThrottleMs,w]);e.useEffect(()=>C?.clear,[C]);const j={getRootDimensions:x},S={updateDimensions:v,getViewportPageSize:y};ls(v,[v]),Ch(t,j,"public"),Ch(t,S,"private");const k=e.useCallback(e=>{Qv(e,tc(t))},[t]),R=e.useCallback(e=>{if(a.current=e,0!==e.height||o.current||r.autoHeight||Wh||(n.error(["The parent DOM element of the Data Grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),o.current=!0),0!==e.width||o.current||Wh||(n.error(["The parent DOM element of the Data Grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),o.current=!0),c.current||!C)return c.current=!1,void v();C()},[v,r.autoHeight,C,n]);Tc(t,"rootMount",k),Tc(t,"resize",R),Tc(t,"debouncedResize",r.onResize)}function Qv(e,t){const r=(t,r)=>e.style.setProperty(t,r);r("--DataGrid-hasScrollX",`${Number(t.hasScrollX)}`),r("--DataGrid-hasScrollY",`${Number(t.hasScrollY)}`),r("--DataGrid-scrollbarSize",`${t.scrollbarSize}px`),r("--DataGrid-rowWidth",`${t.rowWidth}px`),r("--DataGrid-columnsTotalWidth",`${t.columnsTotalWidth}px`),r("--DataGrid-leftPinnedWidth",`${t.leftPinnedWidth}px`),r("--DataGrid-rightPinnedWidth",`${t.rightPinnedWidth}px`),r("--DataGrid-headerHeight",`${t.headerHeight}px`),r("--DataGrid-headersTotalHeight",`${t.headersTotalHeight}px`),r("--DataGrid-topContainerHeight",`${t.topContainerHeight}px`),r("--DataGrid-bottomContainerHeight",`${t.bottomContainerHeight}px`),r("--height",`${t.rowHeight}px`)}function Xv(e,t,r,n){const o=cm(e.rowHeight,Vv.rowHeight);return{rowHeight:Math.floor(o*r),headerHeight:Math.floor(e.columnHeaderHeight*r),groupHeaderHeight:Math.floor((e.columnGroupHeaderHeight??e.columnHeaderHeight)*r),headerFilterHeight:Math.floor((e.headerFilterHeight??e.columnHeaderHeight)*r),columnsTotalWidth:Kv(t),headersTotalHeight:hh(t,e),leftPinnedWidth:n.left.reduce((e,t)=>e+t.computedWidth,0),rightPinnedWidth:n.right.reduce((e,t)=>e+t.computedWidth,0)}}const Yv=new WeakMap;const Zv=void 0!==globalThis.ResizeObserver?globalThis.ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},Jv=(e,t,r)=>{r.current.caches.rowsMeta={heights:new Map};const n=nc(r),o=id(r),a=up(r),i=Math.min(a.enabled?a.paginationModel.pageSize:o,o);return Ge({},e,{rowsMeta:{currentPageTotalHeight:i*n,positions:Array.from({length:i},(e,t)=>t*n),pinnedTopRowsTotalHeight:0,pinnedBottomRowsTotalHeight:0}})};function ew(e){const{apiRef:t,lookup:r,columnIndex:n,rowId:o,minFirstColumnIndex:a,maxLastColumnIndex:i,columns:s}=e,l=s.length,c=s[n],d=t.current.getRow(o),u=t.current.getRowValue(d,c),m="function"==typeof c.colSpan?c.colSpan(u,d,c,t):c.colSpan;if(!m||1===m)return tw(r,o,n,{spannedByColSpan:!1,cellProps:{colSpan:1,width:c.computedWidth}}),{colSpan:1};let p=c.computedWidth;for(let h=1;h<m;h+=1){const e=n+h;if(e>=a&&e<i){p+=s[e].computedWidth,tw(r,o,n+h,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(n+m,l-1),leftVisibleCellIndex:n})}tw(r,o,n,{spannedByColSpan:!1,cellProps:{colSpan:m,width:p}})}return{colSpan:m}}function tw(e,t,r,n){e[t]||(e[t]={}),e[t][r]=n}const rw=(e,t,r)=>{if(Zd(e)){if(void 0!==r[e.field])throw new Error(["MUI X: columnGroupingModel contains duplicated field",`column field ${e.field} occurs two times in the grouping model:`,`- ${r[e.field].join(" > ")}`,`- ${t.join(" > ")}`].join("\n"));return void(r[e.field]=t)}const{groupId:n,children:o}=e;o.forEach(e=>{rw(e,[...t,n],r)})},nw=e=>{if(!e)return{};const t={};return e.forEach(e=>{rw(e,[],t)}),t},ow=(e,t,r)=>{const n=e=>t[e]??[],o=[],a=Math.max(...e.map(e=>n(e).length)),i=(e,t,r)=>Db(n(e).slice(0,r+1),n(t).slice(0,r+1));for(let s=0;s<a;s+=1){const t=e.reduce((e,t)=>{const o=n(t)[s]??null;if(0===e.length)return[{columnFields:[t],groupId:o}];const a=e[e.length-1],l=a.columnFields[a.columnFields.length-1];return a.groupId!==o||!i(l,t,s)||(c=l,d=t,r?.left&&r.left.includes(c)&&!r.left.includes(d)||r?.right&&!r.right.includes(c)&&r.right.includes(d))?[...e,{columnFields:[t],groupId:o}]:[...e.slice(0,e.length-1),{columnFields:[...a.columnFields,t],groupId:o}];var c,d},[]);o.push(t)}return o},aw=["groupId","children"],iw=e=>{let t={};return e.forEach(e=>{if(Zd(e))return;const{groupId:r,children:n}=e,o=Qe(e,aw);if(!r)throw new Error("MUI X: An element of the columnGroupingModel does not have either `field` or `groupId`.");const a=Ge({},o,{groupId:r}),i=iw(n);if(void 0!==i[r]||void 0!==t[r])throw new Error(`MUI X: The groupId ${r} is used multiple times in the columnGroupingModel.`);t=Ge({},t,i,{[r]:a})}),Ge({},t)},sw=(e,t,r)=>{if(!t.columnGroupingModel)return e;const n=iu(r),o=mu(r),a=iw(t.columnGroupingModel??[]),i=nw(t.columnGroupingModel??[]),s=ow(n,i,r.current.state.pinnedColumns??{}),l=0===o.length?0:Math.max(...o.map(e=>i[e]?.length??0));return Ge({},e,{columnGrouping:{lookup:a,unwrappedGroupingModel:i,headerStructure:s,maxDepth:l}})};function lw(e,t){if(void 0!==t&&e.changedTouches){for(let r=0;r<e.changedTouches.length;r+=1){const n=e.changedTouches[r];if(n.identifier===t)return{x:n.clientX,y:n.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function cw(e,t,r,n){let o=e;return o+="Right"===n?t-r.left:r.right-t,o}function dw(e){e.preventDefault(),e.stopImmediatePropagation()}function uw(t){const r=e.useRef(void 0),n=()=>Dh(t),o=Uc(t,n);e.useEffect(()=>{r.current&&!1===o&&(r.current.resolve(),r.current=void 0)});return()=>{if(!r.current){if(!1===n())return Promise.resolve();r.current=function(){let e,t;const r=new Promise((r,n)=>{e=r,t=n});return r.resolve=e,r.reject=t,r}()}return r.current}}function mw(e,t,r){const n={},o=e.current.rootElementRef.current;return o.classList.add(jc.autosizing),r.forEach(r=>{const o=function(e,t){const r=e.virtualScrollerRef.current;return Array.from(r.querySelectorAll(`:scope > div > div > div > [data-field="${Wf(t)}"][role="gridcell"]`))}(e.current,r.field),a=o.map(e=>e.getBoundingClientRect().width??0),i=t.includeOutliers?a:function(e,t){if(e.length<4)return e;const r=e.slice();r.sort((e,t)=>e-t);const n=r[Math.floor(.25*r.length)],o=r[Math.floor(.75*r.length)-1],a=o-n,i=a<5?5:a*t;return r.filter(e=>e>n-i&&e<o+i)}(a,t.outliersFactor);if(t.includeHeaders){const t=(s=e.current,l=r.field,s.columnHeadersContainerRef.current.querySelector(`:scope > div > [data-field="${Wf(l)}"][role="columnheader"]`));if(t){const e=t.querySelector(`.${jc.columnHeaderTitle}`),r=t.querySelector(`.${jc.columnHeaderTitleContainerContent}`),n=t.querySelector(`.${jc.iconButtonContainer}`),o=t.querySelector(`.${jc.menuIcon}`),a=e??r,s=window.getComputedStyle(t,null),l=parseInt(s.paddingLeft,10)+parseInt(s.paddingRight,10),c=a.scrollWidth+1+l+(n?.clientWidth??0)+(o?.clientWidth??0);i.push(c)}}var s,l;const c=r.minWidth!==-1/0&&void 0!==r.minWidth,d=r.maxWidth!==1/0&&void 0!==r.maxWidth,u=c?r.minWidth:0,m=d?r.maxWidth:1/0,p=0===i.length?0:Math.max(...i);n[r.field]=Od(p,u,m)}),o.classList.remove(jc.autosizing),n}const pw=e=>Ge({},e,{columnResize:{resizingColumnField:""}});function hw(){return{colDef:void 0,initialColWidth:0,initialTotalWidth:0,previousMouseClickEvent:void 0,columnHeaderElement:void 0,headerFilterElement:void 0,groupHeaderElements:[],cellElements:[],leftPinnedCellsAfter:[],rightPinnedCellsBefore:[],fillerLeft:void 0,fillerRight:void 0,leftPinnedHeadersAfter:[],rightPinnedHeadersBefore:[]}}const gw=(t,r)=>{const n=mt(),o=jh(t,"useGridColumnResize"),a=$c(hw).current,i=e.useRef(null),s=e.useRef(null),l=Jc(),c=e.useRef(void 0),d=e=>{o.debug(`Updating width to ${e} for col ${a.colDef.field}`);const r=a.columnHeaderElement.offsetWidth,n=e-r,i=e-a.initialColWidth;if(i>0){const e=a.initialTotalWidth+i;t.current.rootElementRef?.current?.style.setProperty("--DataGrid-rowWidth",`${e}px`)}a.colDef.computedWidth=e,a.colDef.width=e,a.colDef.flex=0,a.columnHeaderElement.style.width=`${e}px`;const s=a.headerFilterElement;s&&(s.style.width=`${e}px`),a.groupHeaderElements.forEach(t=>{const r=t;let o;o="1"===r.getAttribute("aria-colspan")?`${e}px`:`${r.offsetWidth+n}px`,r.style.width=o}),a.cellElements.forEach(t=>{const r=t;let o;o="1"===r.getAttribute("aria-colspan")?`${e}px`:`${r.offsetWidth+n}px`,r.style.setProperty("--width",o)});const l=t.current.unstable_applyPipeProcessors("isColumnPinned",!1,a.colDef.field);l===ru.LEFT&&(fw(a.fillerLeft,"width",n),a.leftPinnedCellsAfter.forEach(e=>{fw(e,"left",n)}),a.leftPinnedHeadersAfter.forEach(e=>{fw(e,"left",n)})),l===ru.RIGHT&&(fw(a.fillerRight,"width",n),a.rightPinnedCellsBefore.forEach(e=>{fw(e,"right",n)}),a.rightPinnedHeadersBefore.forEach(e=>{fw(e,"right",n)}))},u=e=>{if(b(),a.previousMouseClickEvent){const r=a.previousMouseClickEvent,n=r.timeStamp,o=r.clientX,i=r.clientY;if(e.timeStamp-n<300&&e.clientX===o&&e.clientY===i)return a.previousMouseClickEvent=void 0,void t.current.publishEvent("columnResizeStop",null,e)}if(a.colDef){t.current.setColumnWidth(a.colDef.field,a.colDef.width),o.debug(`Updating col ${a.colDef.field} with new width: ${a.colDef.width}`);const e=au(t);a.groupHeaderElements.forEach(t=>{const r=t,n=`${t.getAttribute("data-fields").slice(2,-2).split("-|-").reduce((t,r)=>!1!==e.columnVisibilityModel[r]?t+e.lookup[r].computedWidth:t,0)}px`;r.style.width=n})}l.start(0,()=>{t.current.publishEvent("columnResizeStop",null,e)})},m=(e,r,o)=>{const l=t.current.rootElementRef.current;var c,d;a.initialColWidth=e.computedWidth,a.initialTotalWidth=t.current.getRootDimensions().rowWidth,a.colDef=e,a.columnHeaderElement=(c=t.current.columnHeadersContainerRef.current,d=e.field,c.querySelector(`[data-field="${Wf(d)}"]`));const u=l.querySelector(`.${jc.headerFilterRow} [data-field="${Wf(e.field)}"]`);u&&(a.headerFilterElement=u),a.groupHeaderElements=function(e,t){return Array.from(e.querySelectorAll(`[data-fields*="|-${Wf(t)}-|"]`)??[])}(t.current.columnHeadersContainerRef?.current,e.field),a.cellElements=function(e,t){if(!Vf(e,jc.root))throw new Error("MUI X: The root element is not found.");const r=e.getAttribute("aria-colindex");if(!r)return[];const n=Number(r)-1,o=[];return t.virtualScrollerRef?.current?(Xf(t).forEach(e=>{const r=e.getAttribute("data-id");if(!r)return;let a=n;const i=t.unstable_getCellColSpanInfo(r,n);i&&i.spannedByColSpan&&(a=i.leftVisibleCellIndex);const s=e.querySelector(`[data-colindex="${a}"]`);s&&o.push(s)}),o):[]}(a.columnHeaderElement,t.current),a.fillerLeft=Kf(t.current,n?"filler--pinnedRight":"filler--pinnedLeft"),a.fillerRight=Kf(t.current,n?"filler--pinnedLeft":"filler--pinnedRight");const m=t.current.unstable_applyPipeProcessors("isColumnPinned",!1,a.colDef.field);a.leftPinnedCellsAfter=m!==ru.LEFT?[]:function(e,t,r){const n=Yf(t);return _f({api:e,colIndex:n,position:r?"right":"left",filterFn:e=>r?e<n:e>n})}(t.current,a.columnHeaderElement,n),a.rightPinnedCellsBefore=m!==ru.RIGHT?[]:function(e,t,r){const n=Yf(t);return _f({api:e,colIndex:n,position:r?"left":"right",filterFn:e=>r?e>n:e<n})}(t.current,a.columnHeaderElement,n),a.leftPinnedHeadersAfter=m!==ru.LEFT?[]:function(e,t,r){const n=Yf(t);return Qf({api:e,position:r?"right":"left",colIndex:n,filterFn:e=>r?e<n:e>n})}(t.current,a.columnHeaderElement,n),a.rightPinnedHeadersBefore=m!==ru.RIGHT?[]:function(e,t,r){const n=Yf(t);return Qf({api:e,position:r?"left":"right",colIndex:n,filterFn:(e,t)=>!t.classList.contains(jc["columnHeader--last"])&&(r?e>n:e<n)})}(t.current,a.columnHeaderElement,n),s.current=function(e,t){const r=e.classList.contains(jc["columnSeparator--sideRight"])?"Right":"Left";return t?function(e){return"Right"===e?"Left":"Right"}(r):r}(r,n),i.current=function(e,t,r){return"Left"===r?e-t.left:t.right-e}(o,a.columnHeaderElement.getBoundingClientRect(),s.current)},p=cs(u),h=cs(e=>{if(0===e.buttons)return void p(e);let r=cw(i.current,e.clientX,a.columnHeaderElement.getBoundingClientRect(),s.current);r=Od(r,a.colDef.minWidth,a.colDef.maxWidth),d(r);const n={element:a.columnHeaderElement,colDef:a.colDef,width:r};t.current.publishEvent("columnResize",n,e)}),g=cs(e=>{lw(e,c.current)&&u(e)}),f=cs(e=>{const r=lw(e,c.current);if(!r)return;if("mousemove"===e.type&&0===e.buttons)return void g(e);let n=cw(i.current,r.x,a.columnHeaderElement.getBoundingClientRect(),s.current);n=Od(n,a.colDef.minWidth,a.colDef.maxWidth),d(n);const o={element:a.columnHeaderElement,colDef:a.colDef,width:n};t.current.publishEvent("columnResize",o,e)}),x=cs(e=>{const r=Vf(e.target,jc["columnSeparator--resizable"]);if(!r)return;const n=e.changedTouches[0];null!=n&&(c.current=n.identifier);const a=Vf(e.target,jc.columnHeader),i=a.getAttribute("data-field");const s=t.current.getColumn(i);o.debug(`Start Resize on col ${s.field}`),t.current.publishEvent("columnResizeStart",{field:i},e),m(s,r,n.clientX);const l=_g(e.currentTarget);l.addEventListener("touchmove",f),l.addEventListener("touchend",g)}),b=e.useCallback(()=>{const e=_g(t.current.rootElementRef.current);e.body.style.removeProperty("cursor"),e.removeEventListener("mousemove",h),e.removeEventListener("mouseup",p),e.removeEventListener("touchmove",f),e.removeEventListener("touchend",g),setTimeout(()=>{e.removeEventListener("click",dw,!0)},100),a.columnHeaderElement&&(a.columnHeaderElement.style.pointerEvents="unset")},[t,a,h,p,f,g]),y=e.useCallback(({field:e})=>{t.current.setState(t=>Ge({},t,{columnResize:Ge({},t.columnResize,{resizingColumnField:e})}))},[t]),v=e.useCallback(()=>{t.current.setState(e=>Ge({},e,{columnResize:Ge({},e.columnResize,{resizingColumnField:""})}))},[t]),w=cs(({colDef:e},r)=>{if(0!==r.button)return;if(!r.currentTarget.classList.contains(jc["columnSeparator--resizable"]))return;r.preventDefault(),o.debug(`Start Resize on col ${e.field}`),t.current.publishEvent("columnResizeStart",{field:e.field},r),m(e,r.currentTarget,r.clientX);const n=_g(t.current.rootElementRef.current);n.body.style.cursor="col-resize",a.previousMouseClickEvent=r.nativeEvent,n.addEventListener("mousemove",h),n.addEventListener("mouseup",p),n.addEventListener("click",dw,!0)}),C=cs((e,n)=>{if(r.disableAutosize)return;if(0!==n.button)return;const o=t.current.state.columns.lookup[e.field];!1!==o.resizable&&t.current.autosizeColumns(Ge({},r.autosizeOptions,{disableColumnVirtualization:!1,columns:[o.field]}))}),j=uw(t),S=e.useRef(!1),k=e.useCallback(async e=>{const n=t.current.rootElementRef?.current;if(!n)return;if(S.current)return;S.current=!0;const o=au(t),a=Ge({},Ig,e,{columns:e?.columns??o.orderedFields});a.columns=a.columns.filter(e=>!1!==o.columnVisibilityModel[e]);const i=a.columns.map(e=>t.current.state.columns.lookup[e]);try{!r.disableVirtualization&&a.disableColumnVirtualization&&(t.current.unstable_setColumnVirtualization(!1),await j());const e=mw(t,a,i),n=i.map(t=>Ge({},t,{width:e[t.field],computedWidth:e[t.field],flex:0}));if(a.expand){const r=o.orderedFields.map(e=>o.lookup[e]).filter(e=>!1!==o.columnVisibilityModel[e.field]).reduce((t,r)=>t+(e[r.field]??r.computedWidth??r.width),0),a=t.current.getRootDimensions(),i=a.viewportInnerSize.width-r;if(i>0){const e=i/(n.length||1);n.forEach(t=>{t.width+=e,t.computedWidth+=e})}}t.current.updateColumns(n),n.forEach((e,r)=>{if(e.width!==i[r].width){const r=e.width;t.current.publishEvent("columnWidthChange",{element:t.current.getColumnHeaderElement(e.field),colDef:e,width:r})}})}finally{r.disableVirtualization||t.current.unstable_setColumnVirtualization(!0),S.current=!1}},[t,j,r.disableVirtualization]);e.useEffect(()=>b,[b]),Yc(()=>{r.autosizeOnMount&&Promise.resolve().then(()=>{t.current.autosizeColumns(r.autosizeOptions)})}),Sh(t,()=>t.current.columnHeadersContainerRef?.current,"touchstart",x,{passive:!0}),Ch(t,{autosizeColumns:k},"public"),Mc(t,"columnResizeStop",v),Mc(t,"columnResizeStart",y),Mc(t,"columnSeparatorMouseDown",w),Mc(t,"columnSeparatorDoubleClick",C),Tc(t,"columnResize",r.onColumnResize),Tc(t,"columnWidthChange",r.onColumnWidthChange)};function fw(e,t,r){e&&(e.style[t]=`${parseInt(e.style[t],10)+r}px`)}function xw(e){return 0!==e.firstRowIndex||0!==e.lastRowIndex}const bw=(e,t,r)=>{if(!e)return null;let n=e[t.field];const o=t.rowSpanValueGetter??t.valueGetter;return o&&(n=o(n,e,t,r)),n},yw={spannedCells:{},hiddenCells:{},hiddenCellOriginMap:{}},vw={firstRowIndex:0,lastRowIndex:0},ww=new Set([Rp,"__reorder__",um]),Cw=(e,t,r,n,o,a,i)=>{const s=a?{}:Ge({},e.current.state.rowSpanning.spannedCells),l=a?{}:Ge({},e.current.state.rowSpanning.hiddenCells),c=a?{}:Ge({},e.current.state.rowSpanning.hiddenCellOriginMap);return a&&(i=vw),t.forEach(t=>{if(!ww.has(t.field)){for(let a=o.firstRowIndex;a<o.lastRowIndex;a+=1){const i=r[a];if(l[i.id]?.[t.field])continue;const d=bw(i.model,t,e);if(null==d)continue;let u=i.id,m=a,p=0;const h=[];if(a===o.firstRowIndex){let o=a-1,i=r[o];for(;o>=n.firstRowIndex&&i&&bw(i.model,t,e)===d;){const e=r[o+1];l[e.id]?l[e.id][t.field]=!0:l[e.id]={[t.field]:!0},h.push(a),p+=1,u=i.id,m=o,o-=1,i=r[o]}}h.forEach(e=>{c[e]?c[e][t.field]=m:c[e]={[t.field]:m}});let g=a+1;for(;g<=n.lastRowIndex&&r[g]&&bw(r[g].model,t,e)===d;){const e=r[g];l[e.id]?l[e.id][t.field]=!0:l[e.id]={[t.field]:!0},c[g]?c[g][t.field]=m:c[g]={[t.field]:m},g+=1,p+=1}p>0&&(s[u]?s[u][t.field]=p+1:s[u]={[t.field]:p+1})}i={firstRowIndex:Math.min(i.firstRowIndex,o.firstRowIndex),lastRowIndex:Math.max(i.lastRowIndex,o.lastRowIndex)}}}),{spannedCells:s,hiddenCells:l,hiddenCellOriginMap:c,processedRange:i}},jw=(e,t)=>{const r=fd(t).length;if(e.pagination){const e=xp(t);let n=20;return e>0&&(n=e-1),{firstRowIndex:0,lastRowIndex:Math.min(n,r)}}return{firstRowIndex:0,lastRowIndex:Math.min(20,r)}},Sw=(e,t,r)=>{if(!t.rowSpanning)return Ge({},e,{rowSpanning:yw});const n=e.rows.dataRowIds||[],o=e.columns.orderedFields||[],a=e.rows.dataRowIdToModelLookup,i=e.columns.lookup,s=Boolean(e.filter.filterModel.items.length)||Boolean(e.filter.filterModel.quickFilterValues?.length);if(!n.length||!o.length||!a||!i||s)return Ge({},e,{rowSpanning:yw});const l=jw(t,r),c=n.map(e=>({id:e,model:a[e]})),d=o.map(e=>i[e]),{spannedCells:u,hiddenCells:m,hiddenCellOriginMap:p}=Cw(r,d,c,l,l,!0,vw);return Ge({},e,{rowSpanning:{spannedCells:u,hiddenCells:m,hiddenCellOriginMap:p}})},kw=(e,t,r)=>Ge({},e,{listViewColumn:t.listViewColumn?Ge({},t.listViewColumn,{computedWidth:Rw(r)}):void 0});function Rw(e){return tc(e).viewportInnerSize.width}const Nw=Yl(Im,Rm,pp,(e,t,r)=>({groupKeys:[],paginationModel:r,sortModel:t,filterModel:e,start:r.page*r.pageSize,end:r.page*r.pageSize+r.pageSize-1}));let Pw=function(e){return e.Default="set-new-rows",e.LazyLoading="replace-row-range",e}({});class Iw{constructor(e){this.chunkSize=void 0,this.getCacheKeys=e=>{if(this.chunkSize<1||"number"!=typeof e.start)return[e];const t=[];for(let r=e.start;r<=e.end;r+=this.chunkSize){const n=Math.min(r+this.chunkSize-1,e.end);t.push(Ge({},e,{start:r,end:n}))}return t},this.splitResponse=(e,t)=>{const r=this.getCacheKeys(e),n=new Map;return r.forEach(r=>{const o=r.end===e.end,a=Ge({},t,{pageInfo:Ge({},t.pageInfo,{hasNextPage:void 0!==t.pageInfo?.hasNextPage&&!o||t.pageInfo?.hasNextPage,nextCursor:void 0===t.pageInfo?.nextCursor||o?t.pageInfo?.nextCursor:t.rows[r.end+1].id}),rows:"number"!=typeof r.start||"number"!=typeof e.start?t.rows:t.rows.slice(r.start-e.start,r.end-e.start+1)});n.set(r,a)}),n},this.chunkSize=e}}Iw.mergeResponses=e=>1===e.length?e[0]:e.reduce((e,t)=>({rows:[...e.rows,...t.rows],rowCount:t.rowCount,pageInfo:t.pageInfo}),{rows:[],rowCount:0,pageInfo:{}});const Mw={clear:()=>{},get:()=>{},set:()=>{}};function Dw(e,t={}){return null===e?Mw:e??new Hg(t)}const Tw=(t,r)=>{const{api:n,strategyProcessor:o,events:a,setStrategyAvailability:i}=((t,r,n={})=>{const o=e.useCallback(()=>{t.current.setStrategyAvailability(Ky.DataSource,Pw.Default,r.dataSource?()=>!0:()=>!1)},[t,r.dataSource]),[a,i]=e.useState(!1),s=Uc(t,pp),l=e.useRef(0),c=r.onDataSourceError,d=$c(()=>{const e=r.pageSizeOptions.map(e=>"number"==typeof e?e:e.value).sort((e,t)=>e-t),t=Math.min(s.pageSize,e[0]);return new Iw(t)}).current,[u,m]=e.useState(()=>Dw(r.dataSourceCache,n.cacheOptions)),p=e.useCallback(async(e,o)=>{const i=r.dataSource?.getRows;if(!i)return;if(e&&e!==Zu&&"DataGrid"!==r.signature)return void n.fetchRowChildren?.([e]);n.clearDataSourceState?.();const s=Ge({},Nw(t),t.current.unstable_applyPipeProcessors("getRowsParams",{}),o),m=d.getCacheKeys(s).map(e=>u.get(e));if(m.every(e=>void 0!==e))return void t.current.applyStrategyProcessor("dataSourceRowsUpdate",{response:Iw.mergeResponses(m),fetchParams:s});(a||0===t.current.getRowsCount())&&t.current.setLoading(!0);const p=l.current+1;l.current=p;try{const e=await i(s);d.splitResponse(s,e).forEach((e,t)=>u.set(t,e)),l.current===p&&t.current.applyStrategyProcessor("dataSourceRowsUpdate",{response:e,fetchParams:s})}catch(h){l.current===p&&(t.current.applyStrategyProcessor("dataSourceRowsUpdate",{error:h,fetchParams:s}),"function"==typeof c&&c(new Lg({message:h?.message,params:s,cause:h})))}finally{a&&l.current===p&&t.current.setLoading(!1)}},[d,u,t,a,r.dataSource?.getRows,c,n,r.signature]),h=e.useCallback(()=>{i(t.current.getActiveStrategy(Ky.DataSource)===Pw.Default)},[t]),g=e.useCallback(e=>{if("error"in e)return void t.current.setRows([]);const{response:r}=e;void 0!==r.rowCount&&t.current.setRowCount(r.rowCount),t.current.setRows(r.rows),t.current.unstable_applyPipeProcessors("processDataSourceRows",{params:e.fetchParams,response:r},!0)},[t]),f=r.dataSource?.updateRow,x=n.handleEditRow,b=e.useCallback(async e=>{if(f)try{const r=await f(e);return"function"==typeof x?(x(e,r),r):(t.current.updateNestedRows([r],[]),r&&!Db(r,e.previousRow)&&t.current.dataSource.cache.clear(),r)}catch(r){throw"function"==typeof c&&c(new $g({message:r?.message,params:e,cause:r})),r}},[t,f,c,x]),y={dataSource:{fetchRows:p,cache:u,editRow:b}},v=e.useMemo(()=>Mb(p,0),[p]),w=e.useRef(!0);return e.useEffect(()=>{if(w.current)return void(w.current=!1);if(void 0===r.dataSourceCache)return;const e=Dw(r.dataSourceCache,n.cacheOptions);m(t=>t!==e?e:t)},[r.dataSourceCache,n.cacheOptions]),e.useEffect(()=>(r.dataSource&&(t.current.dataSource.cache.clear(),t.current.dataSource.fetchRows()),()=>{l.current+=1}),[t,r.dataSource]),{api:{public:y},debouncedFetchRows:v,strategyProcessor:{strategyName:Pw.Default,group:"dataSourceRowsUpdate",processor:g},setStrategyAvailability:o,cacheChunkManager:d,cache:u,events:{strategyAvailabilityChange:h,sortModelChange:$d(a,()=>v()),filterModelChange:$d(a,()=>v()),paginationModelChange:$d(a,()=>v())}}})(t,r);Ch(t,n.public,"public"),_y(t,o.strategyName,o.group,o.processor),Object.entries(a).forEach(([e,r])=>{Mc(t,e,r)}),e.useEffect(()=>{i()},[i])},Ew=(t,n)=>{Zy(t,n),zv(t,n),(e=>{_y(e,Qy,"rowTreeCreation",Av)})(t),Jy(Yy,t,n),Jy($v,t,n),Jy(sv,t,n),Jy(Fv,t,n),Jy(Sv,t,n),Jy(Tv,t,n),Jy(yv,t,n),Jy(qv,t,n),Jy(Rv,t,n),Jy(gv,t,n),Jy(Sw,t,n),Jy(cv,t,n),Jy(pw,t,n),Jy(iv,t,n),Jy(sw,t,n),Jy(Oh,t,n),Jy(Uv,t,n),Jy(Jv,t,n),Jy(kw,t,n),jv(t,n),((t,r)=>{const n=jh(t,"useGridSelection"),o=e.useCallback(e=>(...t)=>{r.rowSelection&&e(...t)},[r.rowSelection]),a=r.signature!==Sc.DataGrid&&(r.rowSelectionPropagation?.parents||r.rowSelectionPropagation?.descendants),i=e.useMemo(()=>r.rowSelectionModel,[r.rowSelectionModel]),s=e.useRef(null);t.current.registerControlState({stateId:"rowSelection",propModel:i,propOnChange:r.onRowSelectionModelChange,stateSelector:Vm,changeEvent:"rowSelectionChange"});const{checkboxSelection:l,disableRowSelectionOnClick:c,isRowSelectable:d}=r,u=Qm(r),m=Uc(t,dd),p=Uc(t,gd)>1,h=e.useCallback(e=>{let r=e;const n=s.current??e,o=t.current.isRowSelected(e);if(o){const e=Fm(t),o=e.findIndex(e=>e===n),a=e.findIndex(e=>e===r);if(o===a)return;r=o>a?e[a+1]:e[a-1]}s.current=e,t.current.selectRowRange({startId:n,endId:r},!o)},[t]),g=cs(()=>r.pagination&&r.checkboxSelectionVisibleOnly&&"client"===r.paginationMode?wp(t):Fm(t)),f=e.useCallback((e,o)=>{if(r.signature===Sc.DataGrid&&!u&&("include"!==e.type||e.ids.size>1))throw new Error(["MUI X: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join("\n"));Vm(t)!==e&&(n.debug("Setting selection model"),t.current.setState(t=>Ge({},t,{rowSelection:r.rowSelection?e:Lv}),o))},[t,n,r.rowSelection,r.signature,u]),x=e.useCallback(e=>Wm(t).has(e),[t]),b=e.useCallback(e=>{if(!1===r.rowSelection)return!1;if(d&&!d(t.current.getRowParams(e)))return!1;const n=ud(t,e);return"footer"!==n?.type&&"pinnedRow"!==n?.type},[t,r.rowSelection,d]),y=e.useCallback(()=>Um(t),[t]),v=e.useCallback((e,o=!0,i=!1)=>{if(t.current.isRowSelectable(e))if(s.current=e,i){n.debug(`Setting selection for row ${e}`);const i={type:"include",ids:new Set},s=e=>{i.ids.add(e)};o&&(s(e),a&&Xm(t,m,e,r.rowSelectionPropagation?.descendants??!1,r.rowSelectionPropagation?.parents??!1,s)),t.current.setRowSelectionModel(i,"singleRowSelection")}else{n.debug(`Toggling selection for row ${e}`);const i=Vm(t),s={type:i.type,ids:new Set(i.ids)},l=Kd(s);l.unselect(e);const c=e=>{l.select(e)},d=e=>{l.unselect(e)};o?(c(e),a&&Xm(t,m,e,r.rowSelectionPropagation?.descendants??!1,r.rowSelectionPropagation?.parents??!1,c)):a&&Ym(t,m,e,r.rowSelectionPropagation?.descendants??!1,r.rowSelectionPropagation?.parents??!1,d),("include"===s.type&&s.ids.size<2||u)&&t.current.setRowSelectionModel(s,"singleRowSelection")}},[t,n,a,m,r.rowSelectionPropagation?.descendants,r.rowSelectionPropagation?.parents,u]),w=e.useCallback((e,o=!0,i=!1)=>{if(n.debug("Setting selection for several rows"),!1===r.rowSelection)return;const s=new Set;for(let r=0;r<e.length;r+=1){const n=e[r];t.current.isRowSelectable(n)&&s.add(n)}const l=Vm(t);let c;if(i){if(c={type:"include",ids:s},o){const e=Kd(c);if(a){const n=t=>{e.select(t)};for(const e of s)Xm(t,m,e,r.rowSelectionPropagation?.descendants??!1,r.rowSelectionPropagation?.parents??!1,n)}}else c.ids=new Set;if(l.type===c.type&&c.ids.size===l.ids.size&&Array.from(c.ids).every(e=>l.ids.has(e)))return}else{c={type:l.type,ids:new Set(l.ids)};const e=Kd(c),n=t=>{e.select(t)},i=t=>{e.unselect(t)};for(const l of s)o?(e.select(l),a&&Xm(t,m,l,r.rowSelectionPropagation?.descendants??!1,r.rowSelectionPropagation?.parents??!1,n)):(i(l),a&&Ym(t,m,l,r.rowSelectionPropagation?.descendants??!1,r.rowSelectionPropagation?.parents??!1,i))}("include"===c.type&&c.ids.size<2||u)&&t.current.setRowSelectionModel(c,"multipleRowsSelection")},[n,a,u,t,m,r.rowSelectionPropagation?.descendants,r.rowSelectionPropagation?.parents,r.rowSelection]),C=e.useCallback(e=>{if(!p||!a||0===e.ids.size&&"include"===e.type)return e;const n={type:e.type,ids:new Set(e.ids)},o=Kd(n),i=e=>{o.select(e)};for(const a of e.ids)Xm(t,m,a,r.rowSelectionPropagation?.descendants??!1,r.rowSelectionPropagation?.parents??!1,i,o);return n},[t,m,r.rowSelectionPropagation?.descendants,r.rowSelectionPropagation?.parents,p,a]),j={selectRows:w,selectRowRange:e.useCallback(({startId:e,endId:r},o=!0,a=!1)=>{if(!t.current.getRow(e)||!t.current.getRow(r))return;n.debug(`Expanding selection from row ${e} to row ${r}`);const i=Fm(t),s=i.indexOf(e),l=i.indexOf(r),[c,d]=s>l?[l,s]:[s,l],u=i.slice(c,d+1);t.current.selectRows(u,o,a)},[t,n]),getPropagatedRowSelectionModel:C};Ch(t,{selectRow:v,setRowSelectionModel:f,getSelectedRows:y,isRowSelected:x,isRowSelectable:b},"public"),Ch(t,j,r.signature===Sc.DataGrid?"private":"public");const S=e.useRef(!0),k=e.useCallback((e=!1)=>{if(S.current)return;const n=Vm(t),o=cd(t),a=Tm(t),i=e=>"server"===r.filterMode?!o[e]:!o[e]||!1===a[e],s={type:n.type,ids:new Set(n.ids)},l=Kd(s);let c=!1;for(const t of n.ids){if(i(t)){if(r.keepNonExistentRowsSelected)continue;l.unselect(t),c=!0;continue}if(!r.rowSelectionPropagation?.parents)continue;const e=m[t];if("group"===e?.type){if(e.isAutoGenerated){l.unselect(t),c=!0;continue}e.children.every(e=>!1===a[e])||(l.unselect(t),c=!0)}}const d=p&&r.rowSelectionPropagation?.parents&&(s.ids.size>0||"exclude"===s.type);if(c||d&&!e)if(d)if("exclude"===s.type){const e=g(),n=[];for(let t=0;t<e.length;t+=1){const o=e[t];!r.keepNonExistentRowsSelected&&i(o)||!l.has(o)||n.push(o)}t.current.selectRows(n,!0,!0)}else t.current.selectRows(Array.from(s.ids),!0,!0);else t.current.setRowSelectionModel(s,"multipleRowsSelection")},[t,p,r.rowSelectionPropagation?.parents,r.keepNonExistentRowsSelected,r.filterMode,m,g]),R=e.useCallback((e,r)=>{const n=r.metaKey||r.ctrlKey,o=!l&&!n&&!(e=>!!e.key)(r),a=!u||o,i=t.current.isRowSelected(e),s=Gm(t)>1&&a||!i;t.current.selectRow(e,s,a)},[t,u,l]),N=e.useCallback((e,r)=>{if(c)return;const n=r.target.closest(`.${jc.cell}`)?.getAttribute("data-field");if(n!==Np.field&&n!==um){if(n){const e=t.current.getColumn(n);if(e?.type===Xu)return}"pinnedRow"!==ud(t,e.id).type&&(r.shiftKey&&u?h(e.id):R(e.id,r))}},[c,u,t,h,R]),P=e.useCallback((e,t)=>{u&&t.shiftKey&&window.getSelection()?.removeAllRanges()},[u]),I=e.useCallback((e,r)=>{u&&r.nativeEvent.shiftKey?h(e.id):t.current.selectRow(e.id,e.value,!u)},[t,h,u]),M=e.useCallback(e=>{const n=Im(t),o=Mm(t),i=n.items.length>0||o?.some(e=>e.length);r.isRowSelectable||r.checkboxSelectionVisibleOnly||!a||i?t.current.selectRows(g(),e):t.current.setRowSelectionModel({type:e?"exclude":"include",ids:new Set})},[t,a,g,r.checkboxSelectionVisibleOnly,r.isRowSelectable]),D=e.useCallback(e=>{M(e.value)},[M]),T=e.useCallback((e,r)=>{if(t.current.getCellMode(e.id,e.field)!==Bd.Edit&&!Uf(r)){if(Hu(r.key)&&r.shiftKey){const n=tp(t);if(n&&n.id!==e.id){r.preventDefault();const o=t.current.isRowSelected(n.id);if(!u)return void t.current.selectRow(n.id,!o,!0);const a=t.current.getRowIndexRelativeToVisibleRows(n.id),i=t.current.getRowIndexRelativeToVisibleRows(e.id);let s,l;a>i?o?(s=i,l=a-1):(s=i,l=a):o?(s=a+1,l=i):(s=a,l=i);const c=Rh(t),d=[];for(let e=s;e<=l;e+=1)d.push(c.rows[e].id);return void t.current.selectRows(d,!o)}}if(" "===r.key&&r.shiftKey)return r.preventDefault(),void R(e.id,r);"A"===String.fromCharCode(r.keyCode)&&(r.ctrlKey||r.metaKey)&&(r.preventDefault(),M(!0))}},[t,u,R,M]),E=cs(()=>{if(!r.rowSelection)return void t.current.setRowSelectionModel(Lv);if(void 0===i)return;if(!a||!p||"include"===i.type&&0===i.ids.size)return void t.current.setRowSelectionModel(i);const e=t.current.getPropagatedRowSelectionModel(i);e.type===i.type&&e.ids.size===i.ids.size&&Array.from(i.ids).every(t=>e.ids.has(t))?t.current.setRowSelectionModel(i):t.current.setRowSelectionModel(e)});Mc(t,"sortedRowsSet",o(()=>k(!0))),Mc(t,"filteredRowsSet",o(()=>k())),Mc(t,"rowClick",o(N)),Mc(t,"rowSelectionCheckboxChange",o(I)),Mc(t,"headerSelectionCheckboxChange",D),Mc(t,"cellMouseDown",o(P)),Mc(t,"cellKeyDown",o(T)),e.useEffect(()=>{E()},[t,i,r.rowSelection,E]);const F=null!=i;e.useEffect(()=>{if(F||!r.rowSelection||"function"!=typeof b)return;const e=Vm(t);if("include"!==e.type)return;const n=new Set;for(const t of e.ids)b(t)&&n.add(t);n.size<e.ids.size&&t.current.setRowSelectionModel({type:e.type,ids:n})},[t,b,F,r.rowSelection]),e.useEffect(()=>{if(!r.rowSelection||F)return;const e=Vm(t);!u&&("include"===e.type&&e.ids.size>1||"exclude"===e.type)&&t.current.setRowSelectionModel(Lv)},[t,u,l,F,r.rowSelection]),e.useEffect(()=>{o(k)},[k,o]),e.useEffect(()=>{S.current&&(S.current=!1)},[])})(t,n),lv(t,n),((t,r)=>{const n=jh(t,"useGridRows"),o=e.useRef(Date.now()),a=e.useRef(r.rowCount),i=Jc(),s=e.useCallback(e=>{const r=cd(t)[e];if(r)return r;const n=ud(t,e);return n&&om(n)?{[Ju]:e}:null},[t]),l=e.useCallback(e=>kp(t,e),[t]),c=e.useCallback(({cache:e,throttle:n})=>{const a=()=>{o.current=Date.now(),t.current.setState(e=>Ge({},e,{rows:nm({apiRef:t,rowCountProp:r.rowCount,loadingProp:r.loading,previousTree:dd(t),previousTreeDepths:hd(t),previousGroupsToFetch:md(t)})})),t.current.publishEvent("rowsSet")};if(i.clear(),t.current.caches.rows=e,!n)return void a();const s=r.throttleRowsMs-(Date.now()-o.current);s>0?i.start(s,a):a()},[r.throttleRowsMs,r.rowCount,r.loading,t,i]),d=e.useCallback(e=>{if(n.debug(`Updating all rows, new length ${e.length}`),lg(t))return void t.current.updateNonPivotRows(e,!1);const o=tm({rows:e,getRowId:r.getRowId,loading:r.loading,rowCount:r.rowCount}),a=t.current.caches.rows;o.rowsBeforePartialUpdates=a.rowsBeforePartialUpdates,c({cache:o,throttle:!0})},[n,r.getRowId,r.loading,r.rowCount,c,t]),u=e.useCallback(e=>{if(r.signature===Sc.DataGrid&&e.length>1)throw new Error(["MUI X: You cannot update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(lg(t))return void t.current.updateNonPivotRows(e);const n=lm(t,e,r.getRowId),o=im({updates:n,getRowId:r.getRowId,previousCache:t.current.caches.rows});c({cache:o,throttle:!0})},[r.signature,r.getRowId,c,t]),m=e.useCallback((e,n)=>{const o=lm(t,e,r.getRowId),a=im({updates:o,getRowId:r.getRowId,previousCache:t.current.caches.rows,groupKeys:n??[]});c({cache:a,throttle:!1})},[r.getRowId,c,t]),p=e.useCallback(e=>{n.debug(`Setting loading to ${e}`),t.current.setState(t=>Ge({},t,{rows:Ge({},t.rows,{loading:e})})),t.current.caches.rows.loadingPropBeforePartialUpdates=e},[t,n]),h=e.useCallback(()=>{const e=fd(t),r=cd(t);return new Map(e.map(e=>[e,r[e]??{}]))},[t]),g=e.useCallback(()=>id(t),[t]),f=e.useCallback(()=>fd(t),[t]),x=e.useCallback(e=>{const{rowIdToIndexMap:r}=Rh(t);return r.get(e)},[t]),b=e.useCallback((e,r)=>{const n=ud(t,e);if(!n)throw new Error(`MUI X: No row with id #${e} found.`);if("group"!==n.type)throw new Error("MUI X: Only group nodes can be expanded or collapsed.");const o=Ge({},n,{childrenExpanded:r});t.current.setState(t=>Ge({},t,{rows:Ge({},t.rows,{tree:Ge({},t.rows.tree,{[e]:o})})})),t.current.publishEvent("rowExpansionChange",o)},[t]),y=e.useCallback(e=>ud(t,e)??null,[t]),v=e.useCallback(({skipAutoGeneratedRows:e=!0,groupId:r,applySorting:n,applyFiltering:o})=>{const a=dd(t);let i;if(n){const n=a[r];if(!n)return[];const o=Sm(t);i=[];for(let t=o.findIndex(e=>e===r)+1;t<o.length&&a[o[t]].depth>n.depth;t+=1){const r=o[t];e&&om(a[r])||i.push(r)}}else i=am(a,r,e);if(o){const e=Tm(t);i=Cm(e)?i:i.filter(t=>!1!==e[t])}return i},[t]),w=e.useCallback((e,r)=>{const o=ud(t,e);if(!o)throw new Error(`MUI X: No row with id #${e} found.`);if(o.parent!==Zu)throw new Error("MUI X: The row reordering do not support reordering of grouped rows yet.");if("leaf"!==o.type)throw new Error("MUI X: The row reordering do not support reordering of footer or grouping rows.");t.current.setState(o=>{const a=dd(t)[Zu],i=a.children,s=i.findIndex(t=>t===e);if(-1===s||s===r)return o;n.debug(`Moving row ${e} to index ${r}`);const l=[...i];return l.splice(r,0,l.splice(s,1)[0]),Ge({},o,{rows:Ge({},o.rows,{tree:Ge({},o.rows.tree,{[Zu]:Ge({},a,{children:l})})})})}),t.current.publishEvent("rowsSet")},[t,n]),C={getRow:s,setLoading:p,getRowId:l,getRowModels:h,getRowsCount:g,getAllRowIds:f,setRows:d,updateRows:u,getRowNode:y,getRowIndexRelativeToVisibleRows:x,unstable_replaceRows:e.useCallback((e,n)=>{if(r.signature===Sc.DataGrid&&n.length>1)throw new Error(["MUI X: You cannot replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(0===n.length)return;if(gd(t)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const o=Ge({},dd(t)),a=Ge({},cd(t)),i=o[Zu],s=[...i.children],l=new Set;for(let t=0;t<n.length;t+=1){const i=n[t],c=em(i,r.getRowId,"A row was provided without id when calling replaceRows()."),[d]=s.splice(e+t,1,c);l.has(d)||(delete a[d],delete o[d]);const u={id:c,depth:0,parent:Zu,type:"leaf",groupingKey:null};a[c]=i,o[c]=u,l.add(c)}o[Zu]=Ge({},i,{children:s});const c=s.filter(e=>"leaf"===o[e]?.type);t.current.caches.rows.dataRowIdToModelLookup=a,t.current.setState(e=>Ge({},e,{rows:Ge({},e.rows,{loading:r.loading,totalRowCount:Math.max(r.rowCount||0,s.length),dataRowIdToModelLookup:a,dataRowIds:c,tree:o})})),t.current.publishEvent("rowsSet")},[t,r.signature,r.getRowId,r.loading,r.rowCount])},j={setRowIndex:w,setRowChildrenExpansion:b,getRowGroupChildren:v},S={updateNestedRows:m},k=e.useCallback(()=>{let e;n.info("Row grouping pre-processing have changed, regenerating the row tree"),e=t.current.caches.rows.rowsBeforePartialUpdates===r.rows?Ge({},t.current.caches.rows,{updates:{type:"full",rows:fd(t)}}):tm({rows:r.rows,getRowId:r.getRowId,loading:r.loading,rowCount:r.rowCount}),c({cache:e,throttle:!1})},[n,t,r.rows,r.getRowId,r.loading,r.rowCount,c]),R=$c(()=>r.dataSource),N=e.useCallback(e=>{r.dataSource&&r.dataSource!==R.current?R.current=r.dataSource:"rowTreeCreation"===e&&k()},[k,R,r.dataSource]),P=e.useCallback(()=>{t.current.getActiveStrategy(Ky.RowTree)!==pd(t)&&k()},[t,k]);Mc(t,"activeStrategyProcessorChange",N),Mc(t,"strategyAvailabilityChange",P);const I=e.useCallback(()=>{t.current.setState(e=>{const n=t.current.unstable_applyPipeProcessors("hydrateRows",{tree:dd(t),treeDepths:hd(t),dataRowIds:fd(t),dataRowIdToModelLookup:cd(t)});return Ge({},e,{rows:Ge({},e.rows,n,{totalTopLevelRowCount:rm({tree:n.tree,rowCountProp:r.rowCount})})})}),t.current.publishEvent("rowsSet")},[t,r.rowCount]);Uy(t,"hydrateRows",I),Ch(t,C,"public"),Ch(t,j,r.signature===Sc.DataGrid?"private":"public"),Ch(t,S,"private");const M=e.useRef(!0);e.useEffect(()=>{if(M.current)return void(M.current=!1);let e=!1;r.rowCount!==a.current&&(e=!0,a.current=r.rowCount);const o=r.dataSource?xd(t):r.rows,i=t.current.caches.rows.rowsBeforePartialUpdates===o,s=t.current.caches.rows.loadingPropBeforePartialUpdates===r.loading,l=t.current.caches.rows.rowCountPropBeforePartialUpdates===r.rowCount;i&&(s||(t.current.setState(e=>Ge({},e,{rows:Ge({},e.rows,{loading:r.loading})})),t.current.caches.rows.loadingPropBeforePartialUpdates=r.loading),l||(t.current.setState(e=>Ge({},e,{rows:Ge({},e.rows,{totalRowCount:Math.max(r.rowCount||0,e.rows.totalRowCount),totalTopLevelRowCount:Math.max(r.rowCount||0,e.rows.totalTopLevelRowCount)})})),t.current.caches.rows.rowCountPropBeforePartialUpdates=r.rowCount),!e)||(n.debug(`Updating all rows, new length ${o?.length}`),c({cache:tm({rows:o,getRowId:r.getRowId,loading:r.loading,rowCount:r.rowCount}),throttle:!1}))},[r.rows,r.rowCount,r.getRowId,r.loading,r.dataSource,n,c,t])})(t,n),((t,r)=>{const n=$c(()=>t.current.state.rowSpanning!==yw?jw(r,t):vw),o=e.useCallback((e,o=!1)=>{const{range:a,rows:i}=Rh(t,(r.pagination,r.paginationMode));if(null===a||!xw(e))return;o&&(n.current=vw);const s=function(e,t){return e.firstRowIndex>=t.firstRowIndex&&e.lastRowIndex<=t.lastRowIndex?null:e.firstRowIndex>=t.firstRowIndex&&e.lastRowIndex>t.lastRowIndex?{firstRowIndex:t.lastRowIndex,lastRowIndex:e.lastRowIndex}:e.firstRowIndex<t.firstRowIndex&&e.lastRowIndex<=t.lastRowIndex?{firstRowIndex:e.firstRowIndex,lastRowIndex:t.firstRowIndex-1}:e}({firstRowIndex:e.firstRowIndex,lastRowIndex:Math.min(e.lastRowIndex,a.lastRowIndex+1)},n.current);if(null===s)return;const l=uu(t),{spannedCells:c,hiddenCells:d,hiddenCellOriginMap:u,processedRange:m}=Cw(t,l,i,a,s,o,n.current);n.current=m;const p=Object.keys(c).length,h=Object.keys(d).length,g=Object.keys(t.current.state.rowSpanning.spannedCells).length,f=Object.keys(t.current.state.rowSpanning.hiddenCells).length;(o||p!==g||h!==f)&&(0!==p||0!==g)&&t.current.setState(e=>Ge({},e,{rowSpanning:{spannedCells:c,hiddenCells:d,hiddenCellOriginMap:u}}))},[t,n,r.pagination,r.paginationMode]),a=e.useCallback(()=>{const e=Eh(t);xw(e)&&o(e,!0)},[t,o]);Mc(t,"renderedRowsIntervalChange",$d(r.rowSpanning,o)),Mc(t,"sortedRowsSet",$d(r.rowSpanning,a)),Mc(t,"paginationModelChange",$d(r.rowSpanning,a)),Mc(t,"filteredRowsSet",$d(r.rowSpanning,a)),Mc(t,"columnsChange",$d(r.rowSpanning,a)),e.useEffect(()=>{r.rowSpanning?t.current.state.rowSpanning===yw&&a():t.current.state.rowSpanning!==yw&&t.current.setState(e=>Ge({},e,{rowSpanning:yw}))},[t,a,r.rowSpanning])})(t,n),Hv(t,n),(t=>{const r=e.useRef({}),n=()=>{r.current={}},o={resetColSpan:n,calculateColSpan:e.useCallback(({rowId:e,minFirstColumn:n,maxLastColumn:o,columns:a})=>{for(let i=n;i<o;i+=1){const s=ew({apiRef:t,lookup:r.current,columnIndex:i,rowId:e,minFirstColumnIndex:n,maxLastColumnIndex:o,columns:a});s.colSpan>1&&(i+=s.colSpan-1)}},[t])};Ch(t,{unstable_getCellColSpanInfo:(e,t)=>r.current[e]?.[t]},"public"),Ch(t,o,"private"),Mc(t,"columnOrderChange",n)})(t),((t,r)=>{const n=e.useCallback(e=>ah(t)[e]??[],[t]),o=e.useCallback(()=>ih(t),[t]);Ch(t,{getColumnGroupPath:n,getAllGroupDetails:o},"public");const a=e.useCallback(()=>{const e=nw(r.columnGroupingModel??[]);t.current.setState(t=>{const r=t.columns?.orderedFields??[],n=t.pinnedColumns??{},o=ow(r,e,n);return Ge({},t,{columnGrouping:Ge({},t.columnGrouping,{headerStructure:o})})})},[t,r.columnGroupingModel]),i=e.useCallback(e=>{const r=t.current.getPinnedColumns?.()??{},n=iu(t),o=mu(t),a=iw(e??[]),i=nw(e??[]),s=ow(n,i,r),l=0===o.length?0:Math.max(...o.map(e=>i[e]?.length??0));t.current.setState(e=>Ge({},e,{columnGrouping:{lookup:a,unwrappedGroupingModel:i,headerStructure:s,maxDepth:l}}))},[t]);Mc(t,"columnIndexChange",a),Mc(t,"columnsChange",()=>{i(r.columnGroupingModel)}),Mc(t,"columnVisibilityModelChange",()=>{i(r.columnGroupingModel)}),e.useEffect(()=>{i(r.columnGroupingModel)},[i,r.columnGroupingModel])})(t,n),Ev(t,n),((t,r)=>{const n=jh(t,"useGridFocus"),o=e.useRef(null),a=null!==t.current.rootElementRef.current,i=e.useCallback((e,r)=>{e&&t.current.getRow(e.id)&&t.current.publishEvent("cellFocusOut",t.current.getCellParams(e.id,e.field),r)},[t]),s=e.useCallback((e,r)=>{const o=tp(t);o?.id===e&&o?.field===r||(t.current.setState(t=>(n.debug(`Focusing on cell with id=${e} and field=${r}`),Ge({},t,{tabIndex:{cell:{id:e,field:r},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},focus:{cell:{id:e,field:r},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))),t.current.getRow(e)&&(o&&i(o,{}),t.current.publishEvent("cellFocusIn",t.current.getCellParams(e,r))))},[t,n,i]),l=e.useCallback((e,r={})=>{const o=tp(t);i(o,r),t.current.setState(t=>(n.debug(`Focusing on column header with colIndex=${e}`),Ge({},t,{tabIndex:{columnHeader:{field:e},columnHeaderFilter:null,cell:null,columnGroupHeader:null},focus:{columnHeader:{field:e},columnHeaderFilter:null,cell:null,columnGroupHeader:null}})))},[t,n,i]),c=e.useCallback((e,r={})=>{const o=tp(t);i(o,r),t.current.setState(t=>(n.debug(`Focusing on column header filter with colIndex=${e}`),Ge({},t,{tabIndex:{columnHeader:null,columnHeaderFilter:{field:e},cell:null,columnGroupHeader:null},focus:{columnHeader:null,columnHeaderFilter:{field:e},cell:null,columnGroupHeader:null}})))},[t,n,i]),d=e.useCallback((e,r,n={})=>{const o=tp(t);o&&t.current.publishEvent("cellFocusOut",t.current.getCellParams(o.id,o.field),n),t.current.setState(t=>Ge({},t,{tabIndex:{columnGroupHeader:{field:e,depth:r},columnHeader:null,columnHeaderFilter:null,cell:null},focus:{columnGroupHeader:{field:e,depth:r},columnHeader:null,columnHeaderFilter:null,cell:null}}))},[t]),u=e.useCallback(()=>np(t),[t]),m=e.useCallback((e,n,o)=>{let a=t.current.getColumnIndex(n);const i=uu(t),s=Rh(t,(r.pagination,r.paginationMode)),l=bd(t),c=[].concat(l.top||[],s.rows,l.bottom||[]);let d=c.findIndex(t=>t.id===e);"right"===o?a+=1:"left"===o?a-=1:d+=1,a>=i.length?(d+=1,d<c.length&&(a=0)):a<0&&(d-=1,d>=0&&(a=i.length-1)),d=Od(d,0,c.length-1);const u=c[d];if(!u)return;const m=t.current.unstable_getCellColSpanInfo(u.id,a);m&&m.spannedByColSpan&&("left"===o||"below"===o?a=m.leftVisibleCellIndex:"right"===o&&(a=m.rightVisibleCellIndex)),a=Od(a,0,i.length-1);const p=i[a];t.current.setCellFocus(u.id,p.field)},[t,r.pagination,r.paginationMode]),p=e.useCallback(({id:e,field:r})=>{t.current.setCellFocus(e,r)},[t]),h=e.useCallback((e,r)=>{"Enter"===r.key||"Tab"===r.key||"Shift"===r.key||Hu(r.key)||t.current.setCellFocus(e.id,e.field)},[t]),g=e.useCallback(({field:e},r)=>{r.target===r.currentTarget&&t.current.setColumnHeaderFocus(e,r)},[t]),f=e.useCallback(({fields:e,depth:r},n)=>{if(n.target!==n.currentTarget)return;const o=np(t);null!==o&&o.depth===r&&e.includes(o.field)||t.current.setColumnGroupHeaderFocus(e[0],r,n)},[t]),x=e.useCallback((e,r)=>{r.relatedTarget?.getAttribute("class")?.includes(jc.columnHeader)||(n.debug("Clearing focus"),t.current.setState(e=>Ge({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))},[n,t]),b=e.useCallback(e=>{o.current=e},[]),y=e.useCallback(e=>{const r=o.current;o.current=null;const n=tp(t);if(!t.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:e,cell:r}))return;if(!n)return void(r&&t.current.setCellFocus(r.id,r.field));if(r?.id===n.id&&r?.field===n.field)return;const a=t.current.getCellElement(n.id,n.field);a?.contains(e.target)||(r?t.current.setCellFocus(r.id,r.field):(t.current.setState(e=>Ge({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})),i(n,e)))},[t,i]),v=e.useCallback(e=>{if("view"===e.cellMode)return;const r=tp(t);r?.id===e.id&&r?.field===e.field||t.current.setCellFocus(e.id,e.field)},[t]),w=e.useCallback(()=>{const e=tp(t);if(e&&!t.current.getRow(e.id)){const n=e.id;let o=null;if(void 0!==n){const e=t.current.getRowElement(n),a=e?.dataset.rowindex?Number(e?.dataset.rowindex):0,i=Rh(t,(r.pagination,r.paginationMode)),s=i.rows[Od(a,0,i.rows.length-1)];o=s?.id??null}t.current.setState(t=>Ge({},t,{focus:{cell:null===o?null:{id:o,field:e.field},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))}},[t,r.pagination,r.paginationMode]),C=cs(()=>{const e=tp(t);if(!e)return;const n=Rh(t,(r.pagination,r.paginationMode));if(n.rows.find(t=>t.id===e.id)||0===n.rows.length)return;const o=uu(t);t.current.setState(e=>Ge({},e,{tabIndex:{cell:{id:n.rows[0].id,field:o[0].field},columnGroupHeader:null,columnHeader:null,columnHeaderFilter:null}}))}),j={moveFocusToRelativeCell:m,setColumnGroupHeaderFocus:d,getColumnGroupHeaderFocus:u};Ch(t,{setCellFocus:s,setColumnHeaderFocus:l,setColumnHeaderFilterFocus:c},"public"),Ch(t,j,"private"),e.useEffect(()=>{const e=_g(t.current.rootElementRef.current);return e.addEventListener("mouseup",y),()=>{e.removeEventListener("mouseup",y)}},[t,a,y]),Mc(t,"columnHeaderBlur",x),Mc(t,"cellDoubleClick",p),Mc(t,"cellMouseDown",b),Mc(t,"cellKeyDown",h),Mc(t,"cellModeChange",v),Mc(t,"columnHeaderFocus",g),Mc(t,"columnGroupHeaderFocus",f),Mc(t,"rowsSet",w),Mc(t,"paginationModelChange",C)})(t,n),((t,r)=>{const n=jh(t,"useGridPreferencesPanel"),o=e.useCallback(()=>{t.current.setState(e=>{if(!e.preferencePanel.open)return e;n.debug("Hiding Preferences Panel");const r=Eg(t);return t.current.publishEvent("preferencePanelClose",{openedPanelValue:r.openedPanelValue}),Ge({},e,{preferencePanel:{open:!1}})})},[t,n]),a=e.useCallback((e,r,o)=>{n.debug("Opening Preferences Panel"),t.current.setState(t=>Ge({},t,{preferencePanel:Ge({},t.preferencePanel,{open:!0,openedPanelValue:e,panelId:r,labelId:o})})),t.current.publishEvent("preferencePanelOpen",{openedPanelValue:e})},[n,t]);Ch(t,{showPreferences:a,hidePreferences:o},"public");const i=e.useCallback((e,n)=>{const o=Eg(t);return!n.exportOnlyDirtyModels||null!=r.initialState?.preferencePanel||o.open?Ge({},e,{preferencePanel:o}):e},[t,r.initialState?.preferencePanel]),s=e.useCallback((e,r)=>{const n=r.stateToRestore.preferencePanel;return null!=n&&t.current.setState(e=>Ge({},e,{preferencePanel:n})),e},[t]);Gy(t,"exportState",i),Gy(t,"restoreState",s)})(t,n),((t,n)=>{const o=jh(t,"useGridFilter");t.current.registerControlState({stateId:"filter",propModel:n.filterModel,propOnChange:n.onFilterModelChange,stateSelector:Im,changeEvent:"filterModelChange"});const a=e.useCallback(()=>{t.current.setState(e=>{const r=Im(t),n=t.current.getFilterState(r),o=Ge({},e,{filter:Ge({},e.filter,n)}),a=xv(t,o);return Ge({},o,{visibleRowsLookup:a})}),t.current.publishEvent("filteredRowsSet")},[t]),i=e.useCallback((e,t)=>null==t||!1===t.filterable||n.disableColumnFilter?e:[...e,"columnMenuFilterItem"],[n.disableColumnFilter]),s=e.useCallback(e=>{const r=Im(t),n=[...r.items],o=n.findIndex(t=>t.id===e.id);-1===o?n.push(e):n[o]=e,t.current.setFilterModel(Ge({},r,{items:n}),"upsertFilterItem")},[t]),l=e.useCallback(e=>{const r=Im(t),n=[...r.items];e.forEach(e=>{const t=n.findIndex(t=>t.id===e.id);-1===t?n.push(e):n[t]=e}),t.current.setFilterModel(Ge({},r,{items:n}),"upsertFilterItems")},[t]),c=e.useCallback(e=>{const r=Im(t),n=r.items.filter(t=>t.id!==e.id);n.length!==r.items.length&&t.current.setFilterModel(Ge({},r,{items:n}),"deleteFilterItem")},[t]),d=e.useCallback((e,r,a)=>{if(o.debug("Displaying filter panel"),e){const r=Im(t),o=r.items.filter(e=>{if(void 0!==e.value)return!Array.isArray(e.value)||0!==e.value.length;const r=t.current.getColumn(e.field),n=r.filterOperators?.find(t=>t.value===e.operator);return!(void 0===n?.requiresFilterValue||n?.requiresFilterValue)});let a;const i=o.find(t=>t.field===e),s=t.current.getColumn(e);a=i?o:n.disableMultipleColumnsFiltering?[wu({field:e,operator:s.filterOperators[0].value},t)]:[...o,wu({field:e,operator:s.filterOperators[0].value},t)],t.current.setFilterModel(Ge({},r,{items:a}))}t.current.showPreferences(Ag.filters,r,a)},[t,o,n.disableMultipleColumnsFiltering]),u=e.useCallback(()=>{o.debug("Hiding filter panel"),t.current.hidePreferences()},[t,o]),m=e.useCallback(e=>{const r=Im(t);r.logicOperator!==e&&t.current.setFilterModel(Ge({},r,{logicOperator:e}),"changeLogicOperator")},[t]),p=e.useCallback(e=>{const r=Im(t);Db(r.quickFilterValues,e)||t.current.setFilterModel(Ge({},r,{quickFilterValues:[...e]}))},[t]),h=e.useCallback((e,r)=>{Im(t)!==e&&(o.debug("Setting filter model"),t.current.updateControlState("filter",ju(e,n.disableMultipleColumnsFiltering,t),r),t.current.unstable_applyFilters())},[t,o,n.disableMultipleColumnsFiltering]),g=e.useCallback(e=>{const r=Cu(e,n.disableMultipleColumnsFiltering,t),o="client"===n.filterMode?Iu(r,t,n.disableEval):null,a=t.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:o,filterModel:r??eu()});return Ge({},a,{filterModel:r})},[n.disableMultipleColumnsFiltering,n.filterMode,n.disableEval,t]),f={setFilterLogicOperator:m,unstable_applyFilters:a,deleteFilterItem:c,upsertFilterItem:s,upsertFilterItems:l,setFilterModel:h,showFilterPanel:d,hideFilterPanel:u,setQuickFilterValues:p,ignoreDiacritics:n.ignoreDiacritics,getFilterState:g};Ch(t,f,"public");const x=e.useCallback((e,r)=>{const o=Im(t);return o.items.forEach(e=>{delete e.fromInput}),r.exportOnlyDirtyModels&&null==n.filterModel&&null==n.initialState?.filter?.filterModel&&Db(o,eu())?e:Ge({},e,{filter:{filterModel:o}})},[t,n.filterModel,n.initialState?.filter?.filterModel]),b=e.useCallback((e,r)=>{const o=r.stateToRestore.filter?.filterModel;return null==o?e:(t.current.updateControlState("filter",ju(o,n.disableMultipleColumnsFiltering,t),"restoreState"),Ge({},e,{callbacks:[...e.callbacks,t.current.unstable_applyFilters]}))},[t,n.disableMultipleColumnsFiltering]),y=e.useCallback((e,t)=>{if(t===Ag.filters){const e=n.slots.filterPanel;return r.jsx(e,Ge({},n.slotProps?.filterPanel))}return e},[n.slots.filterPanel,n.slotProps?.filterPanel]),{getRowId:v}=n,w=$c(bv),C=e.useCallback(e=>{if("client"!==n.filterMode||!e.isRowMatchingFilters||!e.filterModel.items.length&&!e.filterModel.quickFilterValues?.length)return Jd;const r=cd(t),o={},{isRowMatchingFilters:a}=e,i={},s={passingFilterItems:null,passingQuickFilterValues:null},l=w.current(t.current.state.rows.dataRowIdToModelLookup);for(let n=0;n<l.length;n+=1){const r=l[n],c=v?v(r):r.id;a(r,void 0,s);const d=Du([s.passingFilterItems],[s.passingQuickFilterValues],e.filterModel,t,i);d||(o[c]=d)}const c="auto-generated-group-footer-root";return r[c]&&(o[c]=!0),{filteredRowsLookup:o,filteredChildrenCountLookup:{},filteredDescendantCountLookup:{}}},[t,n.filterMode,v,w]);Gy(t,"columnMenu",i),Gy(t,"exportState",x),Gy(t,"restoreState",b),Gy(t,"preferencePanel",y),_y(t,Qy,"filtering",C),_y(t,Qy,"visibleRowsLookupCreation",fv);const j=e.useCallback(()=>{o.debug("onColUpdated - GridColumns changed, applying filters");const e=Im(t),r=su(t),n=e.items.filter(e=>e.field&&r[e.field]);n.length<e.items.length&&t.current.setFilterModel(Ge({},e,{items:n}))},[t,o]),S=e.useCallback(e=>{"filtering"===e&&t.current.unstable_applyFilters()},[t]),k=e.useCallback(()=>{t.current.setState(e=>Ge({},e,{visibleRowsLookup:xv(t,e)}))},[t]);Mc(t,"rowsSet",a),Mc(t,"columnsChange",j),Mc(t,"activeStrategyProcessorChange",S),Mc(t,"rowExpansionChange",k),Mc(t,"columnVisibilityModelChange",()=>{const e=Im(t);e.quickFilterValues&&Pu(e)&&t.current.unstable_applyFilters()}),kh(()=>{t.current.unstable_applyFilters()}),ls(()=>{void 0!==n.filterModel&&t.current.setFilterModel(n.filterModel)},[t,o,n.filterModel])})(t,n),((t,r)=>{const n=jh(t,"useGridSorting");t.current.registerControlState({stateId:"sortModel",propModel:r.sortModel,propOnChange:r.onSortModelChange,stateSelector:Rm,changeEvent:"sortModelChange"});const o=e.useCallback((e,r)=>{const n=Rm(t),o=n.findIndex(t=>t.field===e);let a=[...n];return o>-1?null==r?.sort?a.splice(o,1):a.splice(o,1,r):a=[...n,r],a},[t]),a=e.useCallback((e,n)=>{const o=Rm(t).find(t=>t.field===e.field);if(o){const t=void 0===n?jd(e.sortingOrder??r.sortingOrder,o.sort):n;return void 0===t?void 0:Ge({},o,{sort:t})}return{field:e.field,sort:void 0===n?jd(e.sortingOrder??r.sortingOrder):n}},[t,r.sortingOrder]),i=e.useCallback((e,t)=>null==t||!1===t.sortable||r.disableColumnSorting?e:(t.sortingOrder||r.sortingOrder).some(e=>!!e)?[...e,"columnMenuSortItem"]:e,[r.sortingOrder,r.disableColumnSorting]),s=e.useCallback(()=>{t.current.setState(e=>{if("server"===r.sortingMode)return n.debug("Skipping sorting rows as sortingMode = server"),Ge({},e,{sorting:Ge({},e.sorting,{sortedRows:am(dd(t),Zu,!1)})});const o=Rm(t),a=Cd(o,t),i=t.current.applyStrategyProcessor("sorting",{sortRowList:a});return Ge({},e,{sorting:Ge({},e.sorting,{sortedRows:i})})}),t.current.publishEvent("sortedRowsSet")},[t,n,r.sortingMode]),l=e.useCallback(e=>{Rm(t)!==e&&(n.debug("Setting sort model"),t.current.setState(wd(e,r.disableMultipleColumnsSorting)),t.current.applySorting())},[t,n,r.disableMultipleColumnsSorting]),c=e.useCallback((e,n,i)=>{const s=t.current.getColumn(e),l=a(s,n);let c;c=!i||r.disableMultipleColumnsSorting?null==l?.sort?[]:[l]:o(s.field,l),t.current.setSortModel(c)},[t,o,a,r.disableMultipleColumnsSorting]),d=e.useCallback(()=>Rm(t),[t]),u=e.useCallback(()=>km(t).map(e=>e.model),[t]),m=e.useCallback(()=>Sm(t),[t]),p=e.useCallback(e=>t.current.getSortedRowIds()[e],[t]);Ch(t,{getSortModel:d,getSortedRows:u,getSortedRowIds:m,getRowIdFromRowIndex:p,setSortModel:l,sortColumn:c,applySorting:s},"public");const h=e.useCallback((e,n)=>{const o=Rm(t);return!n.exportOnlyDirtyModels||null!=r.sortModel||null!=r.initialState?.sorting?.sortModel||o.length>0?Ge({},e,{sorting:{sortModel:o}}):e},[t,r.sortModel,r.initialState?.sorting?.sortModel]),g=e.useCallback((e,n)=>{const o=n.stateToRestore.sorting?.sortModel;return null==o?e:(t.current.setState(wd(o,r.disableMultipleColumnsSorting)),Ge({},e,{callbacks:[...e.callbacks,t.current.applySorting]}))},[t,r.disableMultipleColumnsSorting]),f=e.useCallback(e=>{const r=dd(t),n=r[Zu],o=e.sortRowList?e.sortRowList(n.children.map(e=>r[e])):[...n.children];return null!=n.footerId&&o.push(n.footerId),o},[t]);Gy(t,"exportState",h),Gy(t,"restoreState",g),_y(t,Qy,"sorting",f);const x=e.useCallback(({field:e,colDef:t},n)=>{if(!t.sortable||r.disableColumnSorting)return;const o="always"===r.multipleColumnsSortingMode||n.shiftKey||n.metaKey||n.ctrlKey;c(e,void 0,o)},[c,r.disableColumnSorting,r.multipleColumnsSortingMode]),b=e.useCallback(({field:e,colDef:t},n)=>{t.sortable&&!r.disableColumnSorting&&("Enter"!==n.key||n.ctrlKey||n.metaKey||c(e,void 0,"always"===r.multipleColumnsSortingMode||n.shiftKey))},[c,r.disableColumnSorting,r.multipleColumnsSortingMode]),y=e.useCallback(()=>{const e=Rm(t),r=su(t);if(e.length>0){const n=e.filter(e=>r[e.field]);n.length<e.length&&t.current.setSortModel(n)}},[t]),v=e.useCallback(e=>{"sorting"===e&&t.current.applySorting()},[t]);Gy(t,"columnMenu",i),Mc(t,"columnHeaderClick",x),Mc(t,"columnHeaderKeyDown",b),Mc(t,"rowsSet",t.current.applySorting),Mc(t,"columnsChange",y),Mc(t,"activeStrategyProcessorChange",v),kh(()=>{t.current.applySorting()}),ls(()=>{void 0!==r.sortModel&&t.current.setSortModel(r.sortModel)},[t,r.sortModel])})(t,n),((t,r)=>{const n=jh(t,"useDensity");t.current.registerControlState({stateId:"density",propModel:r.density,propOnChange:r.onDensityChange,stateSelector:_c,changeEvent:"densityChange"});const o=cs(e=>{_c(t)!==e&&(n.debug(`Set grid density to ${e}`),t.current.setState(t=>Ge({},t,{density:e})))});Ch(t,{setDensity:o},"public");const a=e.useCallback((e,n)=>{const o=_c(t);return n.exportOnlyDirtyModels&&null==r.density&&null==r.initialState?.density?e:Ge({},e,{density:o})},[t,r.density,r.initialState?.density]),i=e.useCallback((e,r)=>{const n=r.stateToRestore?.density?r.stateToRestore.density:_c(t);return t.current.setState(e=>Ge({},e,{density:n})),e},[t]);Gy(t,"exportState",a),Gy(t,"restoreState",i),e.useEffect(()=>{r.density&&t.current.setDensity(r.density)},[t,r.density])})(t,n),gw(t,n),kv(t,n),((t,r)=>{const{getRowHeight:n,getRowSpacing:o,getEstimatedRowHeight:a}=r,i=t.current.caches.rowsMeta.heights,s=e.useRef(-1),l=e.useRef(!1),c=e.useRef(!1),d=Uc(t,Qc),u=Nh(t),m=Uc(t,bd),p=Uc(t,nc),h=e.useCallback(e=>{const r=tc(t).rowHeight,i=t.current.getRowHeightEntry(e.id);if(n){const t=n(Ge({},e,{densityFactor:d}));if("auto"===t){if(i.needsFirstMeasurement){const t=a?a(Ge({},e,{densityFactor:d})):r;i.content=t??r}l.current=!0,i.autoHeight=!0}else i.content=cm(t,r),i.needsFirstMeasurement=!1,i.autoHeight=!1}else i.content=r,i.needsFirstMeasurement=!1;if(o){const r=t.current.getRowIndexRelativeToVisibleRows(e.id),n=o(Ge({},e,{isFirstVisible:0===r,isLastVisible:r===u.rows.length-1,indexRelativeToCurrentPage:r}));i.spacingTop=n.top??0,i.spacingBottom=n.bottom??0}else i.spacingTop=0,i.spacingBottom=0;return t.current.unstable_applyPipeProcessors("rowHeight",i,e),i},[t,u.rows,n,a,p,o,d]),g=e.useCallback(()=>{l.current=!1;const e=m.top.reduce((e,t)=>{const r=h(t);return e+r.content+r.spacingTop+r.spacingBottom+r.detail},0),r=m.bottom.reduce((e,t)=>{const r=h(t);return e+r.content+r.spacingTop+r.spacingBottom+r.detail},0),n=[],o=u.rows.reduce((e,t)=>{n.push(e);const r=h(t);return e+(r.content+r.spacingTop+r.spacingBottom+r.detail)},0);l.current||(s.current=1/0);const a=e!==t.current.state.rowsMeta.pinnedTopRowsTotalHeight||r!==t.current.state.rowsMeta.pinnedBottomRowsTotalHeight||o!==t.current.state.rowsMeta.currentPageTotalHeight,i={currentPageTotalHeight:o,positions:n,pinnedTopRowsTotalHeight:e,pinnedBottomRowsTotalHeight:r};t.current.setState(e=>Ge({},e,{rowsMeta:i})),a&&t.current.updateDimensions(),c.current=!0},[t,m,u.rows,h]),f=$c(()=>new Zv(e=>{for(let r=0;r<e.length;r+=1){const n=e[r],o=n.borderBoxSize&&n.borderBoxSize.length>0?n.borderBoxSize[0].blockSize:n.contentRect.height,a=n.target.__mui_id,i=Bh(t)?.id;if(i===a&&0===o)return;t.current.unstable_storeRowHeightMeasurement(a,o)}c.current||requestAnimationFrame(()=>{t.current.requestPipeProcessorsApplication("rowHeight")})})).current;Uy(t,"rowHeight",g),ls(()=>{g()},[g]);const x={unstable_getRowHeight:e=>i.get(e)?.content??p,unstable_setLastMeasuredRowIndex:e=>{l.current&&e>s.current&&(s.current=e)},unstable_storeRowHeightMeasurement:(e,r)=>{const n=t.current.getRowHeightEntry(e),o=n.content!==r;n.needsFirstMeasurement=!1,n.content=r,c.current&&=!o},resetRowHeights:()=>{i.clear(),g()}},b={hydrateRowsMeta:g,observeRowHeight:(e,t)=>(e.__mui_id=t,f.observe(e),()=>f.unobserve(e)),rowHasAutoHeight:e=>i.get(e)?.autoHeight??!1,getRowHeightEntry:e=>{let t=i.get(e);return void 0===t&&(t={content:p,spacingTop:0,spacingBottom:0,detail:0,autoHeight:!1,needsFirstMeasurement:!0},i.set(e,t)),t},getLastMeasuredRowIndex:()=>s.current};Ch(t,x,"public"),Ch(t,b,"private")})(t,n),((t,r)=>{const n=mt(),o=jh(t,"useGridScroll"),a=t.current.columnHeadersContainerRef,i=t.current.virtualScrollerRef,s=Uc(t,Em),l=e.useCallback(e=>{const n=tc(t),a=id(t),l=r.listView?[qh(t)]:uu(t);if(null!=e.rowIndex&&0===a||0===l.length)return!1;o.debug(`Scrolling to cell at row ${e.rowIndex}, col: ${e.colIndex} `);let c={};if(void 0!==e.colIndex){const r=fu(t);let o;if(void 0!==e.rowIndex){const r=s[e.rowIndex]?.id,n=t.current.unstable_getCellColSpanInfo(r,e.colIndex);n&&!n.spannedByColSpan&&(o=n.cellProps.width)}void 0===o&&(o=l[e.colIndex].computedWidth),c.left=Bv({containerSize:n.viewportOuterSize.width,scrollPosition:Math.abs(i.current.scrollLeft),elementSize:o,elementOffset:r[e.colIndex]})}if(void 0!==e.rowIndex){const o=Ih(t),a=fp(t),s=xp(t),l=r.pagination?e.rowIndex-a*s:e.rowIndex,d=o.positions[l+1]?o.positions[l+1]-o.positions[l]:o.currentPageTotalHeight-o.positions[l];c.top=Bv({containerSize:n.viewportInnerSize.height,scrollPosition:i.current.scrollTop,elementSize:d,elementOffset:o.positions[l]})}return c=t.current.unstable_applyPipeProcessors("scrollToIndexes",c,e),(void 0!==typeof c.left||void 0!==typeof c.top)&&(t.current.scroll(c),!0)},[o,t,i,r.pagination,s,r.listView]),c=e.useCallback(e=>{if(i.current&&void 0!==e.left&&a.current){const t=n?-1:1;a.current.scrollLeft=e.left,i.current.scrollLeft=t*e.left,o.debug(`Scrolling left: ${e.left}`)}i.current&&void 0!==e.top&&(i.current.scrollTop=e.top,o.debug(`Scrolling top: ${e.top}`)),o.debug("Scrolling, updating container, and viewport")},[i,n,a,o]),d=e.useCallback(()=>i?.current?{top:i.current.scrollTop,left:i.current.scrollLeft}:{top:0,left:0},[i]);Ch(t,{scroll:c,scrollToIndexes:l,getScrollPosition:d},"public")})(t,n),(t=>{const r=jh(t,"useGridColumnMenu"),n=e.useCallback(e=>{const n=ug(t),o=e;(!0!==n.open||o!==n.field)&&(t.current.setState(t=>t.columnMenu.open&&t.columnMenu.field===e?t:(r.debug("Opening Column Menu"),Ge({},t,{columnMenu:{open:!0,field:e}}))),t.current.hidePreferences())},[t,r]),o=e.useCallback(()=>{const e=ug(t);if(e.field){const r=su(t),n=cu(t),o=iu(t);let a=e.field;if(r[a]||(a=o[0]),!1===n[a]){const e=o.filter(e=>e===a||!1!==n[e]),t=e.indexOf(a);a=e[t+1]||e[t-1]}t.current.setColumnHeaderFocus(a)}const n={open:!1,field:void 0};(n.open!==e.open||n.field!==e.field)&&t.current.setState(e=>(r.debug("Hiding Column Menu"),Ge({},e,{columnMenu:n})))},[t,r]),a=e.useCallback(e=>{r.debug("Toggle Column Menu");const a=ug(t);a.open&&a.field===e?o():n(e)},[t,r,n,o]);Ch(t,{showColumnMenu:n,hideColumnMenu:o,toggleColumnMenu:a},"public"),Mc(t,"columnResizeStart",o),Mc(t,"virtualScrollerWheel",t.current.hideColumnMenu),Mc(t,"virtualScrollerTouchMove",t.current.hideColumnMenu)})(t),mv(t,n),hv(t,n),av(t,n),_v(t,n),function(e,t){Tc(e,"columnHeaderClick",t.onColumnHeaderClick),Tc(e,"columnHeaderContextMenu",t.onColumnHeaderContextMenu),Tc(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),Tc(e,"columnHeaderOver",t.onColumnHeaderOver),Tc(e,"columnHeaderOut",t.onColumnHeaderOut),Tc(e,"columnHeaderEnter",t.onColumnHeaderEnter),Tc(e,"columnHeaderLeave",t.onColumnHeaderLeave),Tc(e,"cellClick",t.onCellClick),Tc(e,"cellDoubleClick",t.onCellDoubleClick),Tc(e,"cellKeyDown",t.onCellKeyDown),Tc(e,"preferencePanelClose",t.onPreferencePanelClose),Tc(e,"preferencePanelOpen",t.onPreferencePanelOpen),Tc(e,"menuOpen",t.onMenuOpen),Tc(e,"menuClose",t.onMenuClose),Tc(e,"rowDoubleClick",t.onRowDoubleClick),Tc(e,"rowClick",t.onRowClick),Tc(e,"stateChange",t.onStateChange)}(t,n),(t=>{const r=e.useCallback((e={})=>t.current.unstable_applyPipeProcessors("exportState",{},e),[t]),n=e.useCallback(e=>{t.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:e}).callbacks.forEach(e=>{e()})},[t]);Ch(t,{exportState:r,restoreState:n},"public")})(t),function(t,r){const n=e=>{t.current.setState(t=>Ge({},t,{virtualization:Ge({},t.virtualization,{enabled:e,enabledForColumns:e,enabledForRows:e&&!r.autoHeight})}))},o={unstable_setVirtualization:n,unstable_setColumnVirtualization:e=>{t.current.setState(t=>Ge({},t,{virtualization:Ge({},t.virtualization,{enabledForColumns:e})}))}};Ch(t,o,"public"),e.useEffect(()=>{n(!r.disableVirtualization)},[r.disableVirtualization,r.autoHeight])}(t,n),function(t,r){const n=()=>{t.current.setState(e=>e.listViewColumn?Ge({},e,{listViewColumn:Ge({},e.listViewColumn,{computedWidth:Rw(t)})}):e)},o=e.useRef(null);Mc(t,"viewportInnerSizeChange",e=>{o.current!==e.width&&(o.current=e.width,n())}),Mc(t,"columnVisibilityModelChange",n),ls(()=>{const e=r.listViewColumn;e&&t.current.setState(r=>Ge({},r,{listViewColumn:Ge({},e,{computedWidth:Rw(t)})}))},[t,r.listViewColumn]),e.useEffect(()=>{r.listView&&r.listViewColumn},[r.listView,r.listViewColumn])}(t,n),Tw(t,n)};function Fw(t){const{groupId:n,width:o,depth:a,maxDepth:i,fields:s,height:l,colIndex:c,hasFocus:d,tabIndex:u,isLastColumn:m,pinnedPosition:p,pinnedOffset:h}=t,g=qs(),f=mt(),x=e.useRef(null),b=$s(),y=Uc(b,ih),v=n?y[n]:{},{headerName:w=n??"",description:C="",headerAlign:j}=v;let S;const k=n&&y[n]?.renderHeaderGroup,R=e.useMemo(()=>({groupId:n,headerName:w,description:C,depth:a,maxDepth:i,fields:s,colIndex:c,isLastColumn:m}),[n,w,C,a,i,s,c,m]);n&&k&&(S=k(R));const N=Ge({},t,{classes:g.classes,headerAlign:j,depth:a,isDragging:!1}),P=w??n,I=Md(),M=null===n?`empty-group-cell-${I}`:n,D=(e=>{const{classes:t,headerAlign:r,isDragging:n,isLastColumn:o,showLeftBorder:a,showRightBorder:i,groupId:s,pinnedPosition:l}=e;return _l({root:["columnHeader","left"===r&&"columnHeader--alignLeft","center"===r&&"columnHeader--alignCenter","right"===r&&"columnHeader--alignRight",n&&"columnHeader--moving",i&&"columnHeader--withRightBorder",a&&"columnHeader--withLeftBorder","withBorderColor",null===s?"columnHeader--emptyGroup":"columnHeader--filledGroup",l===mm.LEFT&&"columnHeader--pinnedLeft",l===mm.RIGHT&&"columnHeader--pinnedRight",o&&"columnHeader--last"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},Cc,t)})(N);e.useLayoutEffect(()=>{if(d){const e=x.current.querySelector('[tabindex="0"]')||x.current;e?.focus()}},[b,d]);const T=e.useCallback(e=>t=>{Uf(t)||b.current.publishEvent(e,R,t)},[b,R]),E=e.useMemo(()=>({onKeyDown:T("columnGroupHeaderKeyDown"),onFocus:T("columnGroupHeaderFocus"),onBlur:T("columnGroupHeaderBlur")}),[T]),F="function"==typeof v.headerClassName?v.headerClassName(R):v.headerClassName,A=e.useMemo(()=>Zg(Ge({},t.style),f,p,h),[p,h,t.style,f]);return r.jsx(sx,Ge({ref:x,classes:D,columnMenuOpen:!1,colIndex:c,height:l,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:u,isDraggable:!1,headerComponent:S,headerClassName:F,description:C,elementId:M,width:o,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:P,"aria-colspan":s.length,"data-fields":`|-${s.join("-|-")}-|`,style:A},E))}const Aw=x("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow"})({display:"flex"}),Ow=["className"],Hw=pt("div",{name:"MuiDataGrid",slot:"ColumnHeaders"})({display:"flex",flexDirection:"column",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),Lw=us(function(e,t){const{className:n}=e,o=Qe(e,Ow),a=qs(),i=(e=>{const{classes:t}=e;return _l({root:["columnHeaders"]},Cc,t)})(a);return r.jsx(Hw,Ge({className:et(i.root,n),ownerState:a},o,{role:"presentation",ref:t}))}),$w=["className","visibleColumns","sortColumnLookup","filterColumnLookup","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],zw=gc(us(function(t,n){const{visibleColumns:o,sortColumnLookup:a,filterColumnLookup:i,columnHeaderTabIndexState:s,columnGroupHeaderTabIndexState:l,columnHeaderFocus:c,columnGroupHeaderFocus:d,headerGroupingMaxDepth:u,columnMenuState:m,columnVisibility:p,columnGroupsHeaderStructure:h,hasOtherElementInTabSequence:g}=t,f=Qe(t,$w),{getInnerProps:x,getColumnHeadersRow:b,getColumnGroupHeadersRows:y}=(t=>{const{visibleColumns:n,sortColumnLookup:o,filterColumnLookup:a,columnHeaderTabIndexState:i,columnGroupHeaderTabIndexState:s,columnHeaderFocus:l,columnGroupHeaderFocus:c,headerGroupingMaxDepth:d,columnMenuState:u,columnVisibility:m,columnGroupsHeaderStructure:p,hasOtherElementInTabSequence:h}=t,[g,f]=e.useState(""),[x,b]=e.useState(""),y=vh(),v=qs(),w=Uc(y,ah),C=Uc(y,fu),j=Uc(y,Fh),S=Uc(y,hu),k=Uc(y,su),R=rg(C,j,S.left.length),N=Uc(y,rc),P=Uc(y,sc),I=Uc(y,lc),M=Uc(y,cc),D=Uc(y,uc),T=e.useCallback(e=>b(e.field),[]),E=e.useCallback(()=>b(""),[]),F=e.useCallback(e=>f(e.field),[]),A=e.useCallback(()=>f(""),[]),O=e.useMemo(()=>S.left.length?{firstColumnIndex:0,lastColumnIndex:S.left.length}:null,[S.left.length]),H=e.useMemo(()=>S.right.length?{firstColumnIndex:n.length-S.right.length,lastColumnIndex:n.length}:null,[S.right.length,n.length]);Mc(y,"columnResizeStart",T),Mc(y,"columnResizeStop",E),Mc(y,"columnHeaderDragStart",F),Mc(y,"columnHeaderDragEndNative",A);const L=e=>{const{renderContext:t=j}=e||{},r=t.firstColumnIndex,o=t.lastColumnIndex;return{renderedColumns:n.slice(r,o),firstColumnToRender:r,lastColumnToRender:o}},$=(t,n,o,a=!1)=>{const i=t?.position===mm.RIGHT,s=void 0===t?.position,l=S.right.length>0&&i||0===S.right.length&&s,c=R-o;return r.jsxs(e.Fragment,{children:[s&&r.jsx("div",{role:"presentation",style:{width:c}}),n,s&&r.jsx("div",{role:"presentation",className:et(jc.filler,a&&jc["filler--borderBottom"])}),l&&r.jsx(wy,{header:!0,pinnedRight:i,borderBottom:a,borderTop:!1})]})},z=(e,t={})=>{const{renderedColumns:n,firstColumnToRender:s}=L(e),c=[];for(let d=0;d<n.length;d+=1){const m=n[d],p=s+d,f=0===p,b=null!==i&&i.field===m.field||f&&!h?0:-1,y=null!==l&&l.field===m.field,w=u.open&&u.field===m.field,j=e?.position,k=xy(j,m.computedWidth,p,C,N,D),R=j===mm.RIGHT?n[d-1]:n[d+1],M=!!R&&null!==l&&l.field===R.field,T=p+1===C.length-S.right.length,E=d,F=n.length,A=yy(j,E),O=by(j,E,F,v.showColumnVerticalBorder,P);c.push(r.jsx(lx,Ge({},o[m.field],{columnMenuOpen:w,filterItemsCounter:a[m.field]&&a[m.field].length,headerHeight:I,isDragging:m.field===g,colDef:m,colIndex:p,isResizing:x===m.field,isLast:p===C.length-1,hasFocus:y,tabIndex:b,pinnedPosition:j,pinnedOffset:k,isLastUnpinned:T,isSiblingFocused:M,showLeftBorder:A,showRightBorder:O},t),m.field))}return $(e,c,0)},q=({depth:e,params:t})=>{const o=L(t);if(0===o.renderedColumns.length)return null;const{firstColumnToRender:a,lastColumnToRender:i}=o,l=p[e],u=n[a].field,h=w[u]?.[e]??null,g=l.findIndex(({groupId:e,columnFields:t})=>e===h&&t.includes(u)),f=n[i-1].field,x=w[f]?.[e]??null,b=l.findIndex(({groupId:e,columnFields:t})=>e===x&&t.includes(f)),y=l.slice(g,b+1).map(e=>Ge({},e,{columnFields:e.columnFields.filter(e=>!1!==m[e])})).filter(e=>e.columnFields.length>0),j=y[0].columnFields.indexOf(u),S=y[0].columnFields.slice(0,j).reduce((e,t)=>e+(k[t].computedWidth??0),0);let R=a;const I=y.map(({groupId:n,columnFields:o},a)=>{const i=null!==c&&c.depth===e&&o.includes(c.field),l=null!==s&&s.depth===e&&o.includes(s.field)?0:-1,u={width:o.reduce((e,t)=>e+k[t].computedWidth,0),fields:o,colIndex:R},m=t.position,p=xy(m,u.width,R,C,N,D);R+=o.length;let h=a;return m===mm.LEFT&&(h=R-1),r.jsx(Fw,{groupId:n,width:u.width,fields:u.fields,colIndex:u.colIndex,depth:e,isLastColumn:a===y.length-1,maxDepth:d,height:M,hasFocus:i,tabIndex:l,pinnedPosition:m,pinnedOffset:p,showLeftBorder:yy(m,h),showRightBorder:by(m,h,y.length,v.showColumnVerticalBorder,P)},a)});return $(t,I,S)};return{renderContext:j,leftRenderContext:O,rightRenderContext:H,pinnedColumns:S,visibleColumns:n,columnPositions:C,getFillers:$,getColumnHeadersRow:()=>r.jsxs(Aw,{role:"row","aria-rowindex":d+1,ownerState:v,className:jc["row--borderBottom"],style:{height:I},children:[O&&z({position:mm.LEFT,renderContext:O},{disableReorder:!0}),z({renderContext:j}),H&&z({position:mm.RIGHT,renderContext:H},{disableReorder:!0,separatorSide:nx.Left})]}),getColumnsToRender:L,getColumnGroupHeadersRows:()=>{if(0===d)return null;const e=[];for(let t=0;t<d;t+=1)e.push(r.jsxs(Aw,{role:"row","aria-rowindex":t+1,ownerState:v,style:{height:M},children:[O&&q({depth:t,params:{position:mm.LEFT,renderContext:O,maxLastColumn:O.lastColumnIndex}}),q({depth:t,params:{renderContext:j}}),H&&q({depth:t,params:{position:mm.RIGHT,renderContext:H,maxLastColumn:H.lastColumnIndex}})]},t));return e},getPinnedCellOffset:xy,isDragging:!!g,getInnerProps:()=>({role:"rowgroup"})}})({visibleColumns:o,sortColumnLookup:a,filterColumnLookup:i,columnHeaderTabIndexState:s,columnGroupHeaderTabIndexState:l,columnHeaderFocus:c,columnGroupHeaderFocus:d,headerGroupingMaxDepth:u,columnMenuState:m,columnVisibility:p,columnGroupsHeaderStructure:h,hasOtherElementInTabSequence:g});return r.jsxs(Lw,Ge({},f,x(),{ref:n,children:[y(),b()]}))}));const qw=us(function(e,t){const n=$s().current.getLocaleText("noResultsOverlayLabel");return r.jsx(If,Ge({},e,{ref:t,children:n}))}),Bw=pt("div")({position:"sticky",zIndex:40,bottom:"calc(var(--DataGrid-hasScrollX) * var(--DataGrid-scrollbarSize))"});const Vw=Ge({},Kl,{cell:tf,skeletonCell:lf,columnHeaderFilterIconButton:function(e){return e.counter?r.jsx(yx,Ge({},e)):null},columnHeaderSortIcon:bx,columnMenu:Dx,columnHeaders:zw,detailPanels:function(e){return null},bottomContainer:function(e){const t=_l({root:["bottomContainer"]},Cc,{});return r.jsx(Bw,Ge({},e,{className:et(t.root,jc["container--bottom"]),role:"presentation"}))},footer:fy,footerRowCount:Ay,toolbar:function(t){const{showQuickFilter:n=!0,quickFilterProps:o,csvOptions:a,printOptions:i,additionalItems:s,additionalExportMenuItems:l}=t,c=$s(),d=qs(),[u,m]=e.useState(!1),p=e.useRef(null),h=Md(),g=Md(),f=!a?.disableToolbarButton||!i?.disableToolbarButton||l,x=()=>m(!1);return r.jsxs(Af,{children:[d.label&&r.jsx(dy,{children:d.label}),!d.disableColumnSelector&&r.jsx(d.slots.baseTooltip,{title:c.current.getLocaleText("toolbarColumns"),children:r.jsx(Jb,{render:r.jsx(Hf,{}),children:r.jsx(d.slots.columnSelectorIcon,{fontSize:"small"})})}),!d.disableColumnFilter&&r.jsx(d.slots.baseTooltip,{title:c.current.getLocaleText("toolbarFilters"),children:r.jsx(Yb,{render:(e,t)=>r.jsx(Hf,Ge({},e,{color:t.filterCount>0?"primary":"default",children:r.jsx(d.slots.baseBadge,{badgeContent:t.filterCount,color:"primary",variant:"dot",children:r.jsx(d.slots.openFilterButtonIcon,{fontSize:"small"})})}))})}),s,f&&(!d.disableColumnFilter||!d.disableColumnSelector)&&r.jsx(cy,{}),f&&r.jsxs(e.Fragment,{children:[r.jsx(d.slots.baseTooltip,{title:c.current.getLocaleText("toolbarExport"),disableInteractive:u,children:r.jsx(Hf,{ref:p,id:g,"aria-controls":h,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:()=>m(!u),children:r.jsx(d.slots.exportIcon,{fontSize:"small"})})}),r.jsx(Ku,{target:p.current,open:u,onClose:x,position:"bottom-end",children:r.jsxs(d.slots.baseMenuList,Ge({id:h,"aria-labelledby":g,autoFocusItem:!0},d.slotProps?.baseMenuList,{children:[!i?.disableToolbarButton&&r.jsx(ny,{render:r.jsx(d.slots.baseMenuItem,Ge({},d.slotProps?.baseMenuItem)),options:i,onClick:x,children:c.current.getLocaleText("toolbarExportPrint")}),!a?.disableToolbarButton&&r.jsx(ty,{render:r.jsx(d.slots.baseMenuItem,Ge({},d.slotProps?.baseMenuItem)),options:a,onClick:x,children:c.current.getLocaleText("toolbarExportCSV")}),l?.(x)]}))})]}),n&&r.jsxs(e.Fragment,{children:[r.jsx(cy,{}),r.jsx(Qb,Ge({},o))]})]})},pinnedRows:function(e){return null},loadingOverlay:Iy,noResultsOverlay:qw,noRowsOverlay:My,noColumnsOverlay:Dy,pagination:function(){const t=$s(),n=qs(),o=Uc(t,pp),a=Uc(t,hp),i=Uc(t,bp),{paginationMode:s,loading:l}=n,c=-1===a&&"server"===s&&l,d=e.useMemo(()=>Math.max(0,i-1),[i]),u=e.useMemo(()=>-1===a||o.page<=d?o.page:d,[d,o.page,a]),m=e.useCallback(e=>{t.current.setPageSize(e)},[t]),p=e.useCallback((e,r)=>{t.current.setPage(r)},[t]),h=(e=>{for(let t=0;t<n.pageSizeOptions.length;t+=1){const r=n.pageSizeOptions[t];if("number"==typeof r){if(r===e)return!0}else if(r.value===e)return!0}return!1})(o.pageSize)?n.pageSizeOptions:[];return r.jsx(Ty,{as:n.slots.basePagination,count:a,page:u,rowsPerPageOptions:h,rowsPerPage:o.pageSize,onPageChange:p,onRowsPerPageChange:m,disabled:c})},filterPanel:ab,columnsPanel:function(e){const t=qs();return r.jsx(Fx,Ge({},e,{children:r.jsx(t.slots.columnsManagement,Ge({},t.slotProps?.columnsManagement))}))},columnsManagement:function(t){const n=$s(),o=e.useRef(null),a=Uc(n,du),i=Uc(n,cu),s=qs(),[l,c]=e.useState(""),d=(e=>{const{classes:t}=e;return _l({root:["columnsManagement"],header:["columnsManagementHeader"],searchInput:["columnsManagementSearchInput"],footer:["columnsManagementFooter"],row:["columnsManagementRow"]},Cc,t)})(s),u=Uc(n,lu),m=Uc(n,lg),p=Uc(n,dg),h=e.useMemo(()=>m?Array.from(p.values()):u,[m,p,u]),{sort:g,searchPredicate:f=ib,autoFocusSearchField:x=!0,disableShowHideToggle:b=!1,disableResetButton:y=!1,toggleAllMode:v="all",getTogglableColumns:w,searchInputProps:C}=t,j=e.useMemo(()=>((e,t)=>{const r=new Set(Object.keys(e).filter(t=>!1===e[t])),n=new Set(Object.keys(t).filter(e=>!1===t[e]));if(r.size!==n.size)return!1;let o=!0;return r.forEach(e=>{n.has(e)||(o=!1)}),o})(i,a),[i,a]),S=e.useMemo(()=>{switch(g){case"asc":return[...h].sort((e,t)=>mb.compare(e.headerName||e.field,t.headerName||t.field));case"desc":return[...h].sort((e,t)=>-mb.compare(e.headerName||e.field,t.headerName||t.field));default:return h}},[h,g]),k=e=>{const{name:t}=e.target;n.current.setColumnVisibility(t,!1===i[t])},R=e.useMemo(()=>{const e=w?w(S):null,t=e?S.filter(({field:t})=>e.includes(t)):S;return l?t.filter(e=>f(e,l.toLowerCase())):t},[S,l,f,w]),N=e.useCallback(e=>{const t=cu(n),r=Ge({},t),o=w?w(h):null;return("filteredOnly"===v?R:h).forEach(t=>{t.hideable&&(null==o||o.includes(t.field))&&(e?delete r[t.field]:r[t.field]=!1)}),n.current.setColumnVisibilityModel(r)},[n,h,w,v,R]),P=e.useCallback(e=>{c(e.target.value)},[]),I=e.useMemo(()=>R.filter(e=>e.hideable),[R]),M=e.useMemo(()=>I.every(e=>null==i[e.field]||!1!==i[e.field]),[i,I]),D=e.useMemo(()=>I.every(e=>!1===i[e.field]),[i,I]),T=e.useRef(null);e.useEffect(()=>{x?o.current?.focus():T.current&&"function"==typeof T.current.focus&&T.current.focus()},[x]);let E=!1;const F=e=>!1===E&&!1!==e.hideable&&(E=!0,!0),A=e.useCallback(()=>{c(""),o.current?.focus()},[]);return r.jsxs(e.Fragment,{children:[r.jsx(gb,{className:d.header,ownerState:s,children:r.jsx(fb,Ge({as:s.slots.baseTextField,ownerState:s,placeholder:n.current.getLocaleText("columnsManagementSearchTitle"),inputRef:o,className:d.searchInput,value:l,onChange:P,size:"small",type:"search",slotProps:{input:{startAdornment:r.jsx(s.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:r.jsx(s.slots.baseIconButton,Ge({size:"small","aria-label":n.current.getLocaleText("columnsManagementDeleteIconLabel"),style:l?{visibility:"visible"}:{visibility:"hidden"},tabIndex:-1,onClick:A,edge:"end"},s.slotProps?.baseIconButton,{children:r.jsx(s.slots.quickFilterClearIcon,{fontSize:"small"})}))},htmlInput:{"aria-label":n.current.getLocaleText("columnsManagementSearchTitle")}},autoComplete:"off",fullWidth:!0},s.slotProps?.baseTextField,C))}),r.jsx(hb,{ownerState:s,children:r.jsxs(pb,{className:d.root,ownerState:s,children:[R.map(e=>r.jsx(s.slots.baseCheckbox,Ge({className:d.row,disabled:!1===e.hideable||m,checked:!1!==i[e.field],onChange:k,name:e.field,inputRef:F(e)?T:void 0,label:e.headerName||e.field,density:"compact",fullWidth:!0},s.slotProps?.baseCheckbox),e.field)),0===R.length&&r.jsx(bb,{ownerState:s,children:n.current.getLocaleText("columnsManagementNoColumns")})]})}),b&&y?null:r.jsxs(xb,{ownerState:s,className:d.footer,children:[b?r.jsx("span",{}):r.jsx(s.slots.baseCheckbox,Ge({disabled:0===I.length||m,checked:M,indeterminate:!M&&!D,onChange:()=>N(!M),name:n.current.getLocaleText("columnsManagementShowHideAllText"),label:n.current.getLocaleText("columnsManagementShowHideAllText"),density:"compact"},s.slotProps?.baseCheckbox)),y?null:r.jsx(s.slots.baseButton,Ge({onClick:()=>n.current.setColumnVisibilityModel(a),disabled:j||m},s.slotProps?.baseButton,{children:n.current.getLocaleText("columnsManagementReset")}))]})]})},panel:$x,row:Ly}),Ww={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid",listView:!1},Gw=Vw,Uw=t=>{const r=F(),n=e.useMemo(()=>bt({props:t,theme:r,name:"MuiDataGrid"}),[r,t]),o=e.useMemo(()=>Ge({},fc,n.localeText),[n.localeText]),a=e.useMemo(()=>function({defaultSlots:e,slots:t}){const r=t;if(!r||0===Object.keys(r).length)return e;const n=Ge({},e);return Object.keys(r).forEach(e=>{const t=e;void 0!==r[t]&&(n[t]=r[t])}),n}({defaultSlots:Gw,slots:n.slots}),[n.slots]),i=e.useMemo(()=>Object.keys(Vv).reduce((e,t)=>(e[t]=n[t]??Vv[t],e),{}),[n]);return e.useMemo(()=>Ge({},n,i,{localeText:o,slots:a},(e=>Ge({},Ww,e.dataSource?{filterMode:"server",sortingMode:"server",paginationMode:"server"}:{}))(n)),[n,o,a,i])};class Kw{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,t,r={}){let n=this.events[e];n||(n={highPriority:new Map,regular:new Map},this.events[e]=n),r.isFirst?n.highPriority.set(t,!0):n.regular.set(t,!0)}removeListener(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}removeAllListeners(){this.events={}}emit(e,...t){const r=this.events[e];if(!r)return;const n=Array.from(r.highPriority.keys()),o=Array.from(r.regular.keys());for(let a=n.length-1;a>=0;a-=1){const e=n[a];r.highPriority.has(e)&&e.apply(this,t)}for(let a=0;a<o.length;a+=1){const e=o[a];r.regular.has(e)&&e.apply(this,t)}}once(e,t){const r=this;this.on(e,function n(...o){r.removeListener(e,n),t.apply(r,o)})}}const _w=Symbol("mui.api_private");let Qw=0;function Xw(t,r){const n=e.useRef(null),o=e.useRef(null);o.current||(o.current=function(e){const t=e.current?.[_w];if(t)return t;const r={},n={state:r,store:Xl.create(r),instanceId:{id:Qw}};return Qw+=1,n.getPublicApi=()=>e.current,n.register=(t,r)=>{Object.keys(r).forEach(o=>{const a=r[o],i=n[o];if(!0===i?.spying?i.target=a:n[o]=a,"public"===t){const t=e.current,r=t[o];!0===r?.spying?r.target=a:t[o]=a}})},n.register("private",{caches:{},eventManager:new Kw}),n}(n)),n.current||(n.current=function(e){return{get state(){return e.current.state},get store(){return e.current.store},get instanceId(){return e.current.instanceId},[_w]:e.current}}(o));const a=e.useCallback((...e)=>{const[t,n,a={}]=e;if(a.defaultMuiPrevented=!1,(e=>void 0!==e.isPropagationStopped)(a)&&a.isPropagationStopped())return;const i=r.signature===Sc.DataGridPro||r.signature===Sc.DataGridPremium?{api:o.current.getPublicApi()}:{};o.current.eventManager.emit(t,n,a,i)},[o,r.signature]),i=e.useCallback((e,t,r)=>{o.current.eventManager.on(e,t,r);const n=o.current;return()=>{n.eventManager.removeListener(e,t)}},[o]);return Ch(o,{subscribeEvent:i,publishEvent:a},"public"),t&&!t.current?.state&&(t.current=n.current),e.useImperativeHandle(t,()=>n.current,[n]),e.useEffect(()=>{const e=o.current;return()=>{e.publishEvent("unmount")}},[o]),o}const Yw={hooks:{useCSSVariables:function(){const t=F();return e.useMemo(()=>{const e=Ks(function(e){const t=new WeakSet;return JSON.stringify(e,(e,r)=>{if("undefined"!=typeof window&&r===window||"undefined"!=typeof document&&r===document)return r.toString();if(null!==r&&"object"==typeof r){if(t.has(r))return null;t.add(r)}return r})}(t)),r=function(e){const t=function(e){if(e.vars)return e.vars.palette.TableCell.border;if("light"===e.palette.mode)return Ke(Ue(e.palette.divider,1),.88);return _e(Ue(e.palette.divider,1),.68)}(e),r=(e.vars||e).palette.DataGrid,n=r?.bg??(e.vars||e).palette.background.default,o=r?.headerBg??n,a=r?.pinnedBg??n,i=e.vars?`rgba(${e.vars.palette.background.defaultChannel} / ${e.vars.palette.action.disabledOpacity})`:Ue(e.palette.background.default,e.palette.action.disabledOpacity),s="dark"===e.palette.mode?`color-mix(in srgb, ${(e.vars||e).palette.background.paper} 95%, #fff)`:(e.vars||e).palette.background.paper,l=e.vars?`rgb(${e.vars.palette.primary.mainChannel})`:e.palette.primary.main,c=function(e){if(e.vars)return e.vars.shape.borderRadius;return"number"==typeof e.shape.borderRadius?`${e.shape.borderRadius}px`:e.shape.borderRadius}(e),d=e.vars?.font?.body2??tl(e.typography.body2),u=e.vars?.font?.caption??tl(e.typography.caption),m=e.vars?.font?.body1??tl(e.typography.body1),p=Zs.keys;return{[p.spacingUnit]:e.vars?e.vars.spacing??e.spacing(1):e.spacing(1),[p.colors.border.base]:t,[p.colors.background.base]:n,[p.colors.background.overlay]:s,[p.colors.background.backdrop]:i,[p.colors.foreground.base]:(e.vars||e).palette.text.primary,[p.colors.foreground.muted]:(e.vars||e).palette.text.secondary,[p.colors.foreground.accent]:(e.vars||e).palette.primary.dark,[p.colors.foreground.disabled]:(e.vars||e).palette.text.disabled,[p.colors.foreground.error]:(e.vars||e).palette.error.dark,[p.colors.interactive.hover]:(e.vars||e).palette.action.hover,[p.colors.interactive.hoverOpacity]:(e.vars||e).palette.action.hoverOpacity,[p.colors.interactive.focus]:el((e.vars||e).palette.primary.main),[p.colors.interactive.focusOpacity]:(e.vars||e).palette.action.focusOpacity,[p.colors.interactive.disabled]:el((e.vars||e).palette.action.disabled),[p.colors.interactive.disabledOpacity]:(e.vars||e).palette.action.disabledOpacity,[p.colors.interactive.selected]:l,[p.colors.interactive.selectedOpacity]:(e.vars||e).palette.action.selectedOpacity,[p.header.background.base]:o,[p.cell.background.pinned]:a,[p.radius.base]:c,[p.typography.fontFamily.base]:e.typography.fontFamily,[p.typography.fontWeight.light]:e.typography.fontWeightLight,[p.typography.fontWeight.regular]:e.typography.fontWeightRegular,[p.typography.fontWeight.medium]:e.typography.fontWeightMedium,[p.typography.fontWeight.bold]:e.typography.fontWeightBold,[p.typography.font.body]:d,[p.typography.font.small]:u,[p.typography.font.large]:m,[p.transitions.easing.easeIn]:e.transitions.easing.easeIn,[p.transitions.easing.easeOut]:e.transitions.easing.easeOut,[p.transitions.easing.easeInOut]:e.transitions.easing.easeInOut,[p.transitions.duration.short]:`${e.transitions.duration.shorter}ms`,[p.transitions.duration.base]:`${e.transitions.duration.short}ms`,[p.transitions.duration.long]:`${e.transitions.duration.standard}ms`,[p.shadows.base]:(e.vars||e).shadows[2],[p.shadows.overlay]:(e.vars||e).shadows[8],[p.zIndex.panel]:(e.vars||e).zIndex.modal,[p.zIndex.menu]:(e.vars||e).zIndex.modal}}(t);return{id:e,variables:r}},[t])},useGridAriaAttributes:()=>{const e=vh(),t=qs(),r=Uc(e,uu),n=Uc(e,Lm),o=Uc(e,lh),a=Uc(e,yd),i=t["aria-label"],s=t["aria-labelledby"];return{role:"grid","aria-label":!i&&!s&&t.label?t.label:i,"aria-labelledby":s,"aria-colcount":r.length,"aria-rowcount":o+1+a+n,"aria-multiselectable":Qm(t)}},useGridRowAriaAttributes:()=>{const t=vh(),r=Uc(t,lh);return e.useCallback((e,n)=>{const o={},a=n+r+2;return o["aria-rowindex"]=a,t.current.isRowSelectable(e.id)&&(o["aria-selected"]=t.current.isRowSelected(e.id)),o},[t,r])},useCellAggregationResult:()=>null}},Zw=function(e,t){const n=Uw(e),o=Xw(n.apiRef,n);return Ew(o,n),r.jsx($y,{privateApiRef:o,configuration:Yw,props:n,children:r.jsx(jf,Ge({className:n.className,style:n.style,sx:n.sx},n.slotProps?.root,{ref:t}))})},Jw=e.memo(us(Zw));Zw.propTypes={apiRef:yt.shape({current:yt.object}),"aria-label":yt.string,"aria-labelledby":yt.string,autoHeight:yt.bool,autoPageSize:yt.bool,autosizeOnMount:yt.bool,autosizeOptions:yt.shape({columns:yt.arrayOf(yt.string),disableColumnVirtualization:yt.bool,expand:yt.bool,includeHeaders:yt.bool,includeOutliers:yt.bool,outliersFactor:yt.number}),cellModesModel:yt.object,checkboxSelection:yt.bool,classes:yt.object,className:yt.string,clipboardCopyCellDelimiter:yt.string,columnBufferPx:yt.number,columnGroupHeaderHeight:yt.number,columnGroupingModel:yt.arrayOf(yt.object),columnHeaderHeight:yt.number,columns:yt.arrayOf(yt.object).isRequired,columnVisibilityModel:yt.object,dataSource:yt.shape({getRows:yt.func.isRequired,updateRow:yt.func}),dataSourceCache:yt.shape({clear:yt.func.isRequired,get:yt.func.isRequired,set:yt.func.isRequired}),density:yt.oneOf(["comfortable","compact","standard"]),disableAutosize:yt.bool,disableColumnFilter:yt.bool,disableColumnMenu:yt.bool,disableColumnResize:yt.bool,disableColumnSelector:yt.bool,disableColumnSorting:yt.bool,disableDensitySelector:yt.bool,disableEval:yt.bool,disableMultipleRowSelection:yt.bool,disableRowSelectionOnClick:yt.bool,disableVirtualization:yt.bool,editMode:yt.oneOf(["cell","row"]),estimatedRowCount:yt.number,experimentalFeatures:yt.shape({warnIfFocusStateIsNotSynced:yt.bool}),filterDebounceMs:yt.number,filterMode:yt.oneOf(["client","server"]),filterModel:yt.shape({items:yt.arrayOf(yt.shape({field:yt.string.isRequired,id:yt.oneOfType([yt.number,yt.string]),operator:yt.string.isRequired,value:yt.any})).isRequired,logicOperator:yt.oneOf(["and","or"]),quickFilterExcludeHiddenColumns:yt.bool,quickFilterLogicOperator:yt.oneOf(["and","or"]),quickFilterValues:yt.array}),getCellClassName:yt.func,getDetailPanelContent:yt.func,getEstimatedRowHeight:yt.func,getRowClassName:yt.func,getRowHeight:yt.func,getRowId:yt.func,getRowSpacing:yt.func,hideFooter:yt.bool,hideFooterPagination:yt.bool,hideFooterSelectedRowCount:yt.bool,ignoreDiacritics:yt.bool,ignoreValueFormatterDuringExport:yt.oneOfType([yt.shape({clipboardExport:yt.bool,csvExport:yt.bool}),yt.bool]),initialState:yt.object,isCellEditable:yt.func,isRowSelectable:yt.func,keepNonExistentRowsSelected:yt.bool,label:yt.string,loading:yt.bool,localeText:yt.object,logger:yt.shape({debug:yt.func.isRequired,error:yt.func.isRequired,info:yt.func.isRequired,warn:yt.func.isRequired}),logLevel:yt.oneOf(["debug","error","info","warn",!1]),nonce:yt.string,onCellClick:yt.func,onCellDoubleClick:yt.func,onCellEditStart:yt.func,onCellEditStop:yt.func,onCellKeyDown:yt.func,onCellModesModelChange:yt.func,onClipboardCopy:yt.func,onColumnHeaderClick:yt.func,onColumnHeaderContextMenu:yt.func,onColumnHeaderDoubleClick:yt.func,onColumnHeaderEnter:yt.func,onColumnHeaderLeave:yt.func,onColumnHeaderOut:yt.func,onColumnHeaderOver:yt.func,onColumnOrderChange:yt.func,onColumnResize:yt.func,onColumnVisibilityModelChange:yt.func,onColumnWidthChange:yt.func,onDataSourceError:yt.func,onDensityChange:yt.func,onFilterModelChange:yt.func,onMenuClose:yt.func,onMenuOpen:yt.func,onPaginationMetaChange:yt.func,onPaginationModelChange:yt.func,onPreferencePanelClose:yt.func,onPreferencePanelOpen:yt.func,onProcessRowUpdateError:yt.func,onResize:yt.func,onRowClick:yt.func,onRowCountChange:yt.func,onRowDoubleClick:yt.func,onRowEditStart:yt.func,onRowEditStop:yt.func,onRowModesModelChange:yt.func,onRowSelectionModelChange:yt.func,onSortModelChange:yt.func,onStateChange:yt.func,pageSizeOptions:yt.arrayOf(yt.oneOfType([yt.number,yt.shape({label:yt.string.isRequired,value:yt.number.isRequired})]).isRequired),pagination:yt.oneOf([!0]),paginationMeta:yt.shape({hasNextPage:yt.bool}),paginationMode:yt.oneOf(["client","server"]),paginationModel:yt.shape({page:yt.number.isRequired,pageSize:yt.number.isRequired}),processRowUpdate:yt.func,resizeThrottleMs:yt.number,rowBufferPx:yt.number,rowCount:yt.number,rowHeight:yt.number,rowModesModel:yt.object,rows:yt.arrayOf(yt.object),rowSelection:yt.bool,rowSelectionModel:yt.shape({ids:yt.instanceOf(Set).isRequired,type:yt.oneOf(["exclude","include"]).isRequired}),rowSpacingType:yt.oneOf(["border","margin"]),rowSpanning:yt.bool,scrollbarSize:yt.number,showCellVerticalBorder:yt.bool,showColumnVerticalBorder:yt.bool,showToolbar:yt.bool,slotProps:yt.object,slots:yt.object,sortingMode:yt.oneOf(["client","server"]),sortingOrder:yt.arrayOf(yt.oneOf(["asc","desc"])),sortModel:yt.arrayOf(yt.shape({field:yt.string.isRequired,sort:yt.oneOf(["asc","desc"])})),style:yt.object,sx:yt.oneOfType([yt.arrayOf(yt.oneOfType([yt.func,yt.object,yt.bool])),yt.func,yt.object]),virtualizeColumnsWithAutoRowHeight:yt.bool};const eC=({className:t})=>{const{t:n}=Rt(),[o,a]=e.useState([]),[i,s]=e.useState(!0),[l,d]=e.useState(null),[p,h]=e.useState(!1),[g,f]=e.useState({open:!1,message:"",severity:"success"});e.useEffect(()=>{(async()=>{try{s(!0);const e=localStorage.getItem("token"),t=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch users");const r=await t.json();a(r)}catch(e){a([])}finally{s(!1)}})()},[]);const x=(e,t)=>{f({open:!0,message:e,severity:t})},w=[{field:"id",headerName:n("admin.users.columns.id","ID"),width:70,type:"number"},{field:"fullName",headerName:n("admin.users.columns.name","Name"),width:180,renderCell:e=>e&&e.row?`${e.row.firstName||""} ${e.row.lastName||""}`:""},{field:"email",headerName:n("admin.users.columns.email","Email"),width:250},{field:"phoneNumber",headerName:n("admin.users.columns.phone","Phone"),width:150},{field:"preferredLanguage",headerName:n("admin.users.columns.language","Language"),width:120,renderCell:e=>r.jsx(y,{label:e.value,size:"small",color:"Chinese"===e.value?"secondary":"primary",variant:"filled"})},{field:"isVerified",headerName:n("admin.users.columns.verified","Verified"),width:120,renderCell:e=>r.jsx(y,{label:e.value?n("verified","Verified"):n("unverified","Unverified"),size:"small",color:e.value?"success":"warning",variant:e.value?"filled":"outlined"})},{field:"isActive",headerName:n("admin.users.columns.status","Status"),width:120,renderCell:e=>r.jsx(y,{label:e.value?n("active","Active"):n("inactive","Inactive"),size:"small",color:e.value?"success":"error",variant:e.value?"filled":"outlined"})},{field:"rating",headerName:n("admin.users.columns.rating","Rating"),width:120,renderCell:e=>r.jsxs(c,{className:"flex items-center",children:[r.jsx("span",{className:"mr-1",children:"⭐"}),r.jsx("span",{children:e.value.toFixed(1)}),r.jsxs("span",{className:"text-gray-500 ml-1",children:["(",e.row.totalRatings,")"]})]})},{field:"createdAt",headerName:n("admin.users.columns.joinedDate","Joined"),width:120,valueFormatter:e=>new Date(e.value).toLocaleDateString()},{field:"actions",headerName:n("admin.users.columns.actions","Actions"),width:200,sortable:!1,filterable:!1,renderCell:e=>r.jsxs(c,{className:"flex space-x-1",sx:{display:"flex",alignItems:"center",height:"100%"},children:[!e.row.isVerified&&r.jsx(D,{title:n("admin.users.actions.verify","Verify User"),children:r.jsx(j,{size:"small",onClick:()=>(async e=>{try{const t=localStorage.getItem("token");if(!(await fetch(`/api/admin/users/${e}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to verify user");a(t=>t.map(t=>t.id===e?{...t,isVerified:!0}:t)),x(n("admin.users.userVerified","User verified successfully"),"success")}catch(t){x(n("admin.users.verifyError","Failed to verify user"),"error")}})(e.row.id),className:"text-green-600 hover:bg-green-50",children:r.jsx(ze,{fontSize:"small"})})}),r.jsx(D,{title:e.row.isActive?n("admin.users.actions.deactivate","Deactivate"):n("admin.users.actions.activate","Activate"),children:r.jsx(j,{size:"small",onClick:()=>(async(e,t)=>{try{const r=localStorage.getItem("token");if(!(await fetch(`/api/admin/users/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({isActive:!t})})).ok)throw new Error("Failed to update user status");a(r=>r.map(r=>r.id===e?{...r,isActive:!t}:r)),x(n("admin.users.statusUpdated","User status updated successfully"),"success")}catch(r){x(n("admin.users.statusUpdateError","Failed to update user status"),"error")}})(e.row.id,e.row.isActive),className:e.row.isActive?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50",children:e.row.isActive?r.jsx(vt,{fontSize:"small"}):r.jsx(N,{fontSize:"small"})})})]})}];return r.jsxs(c,{className:`h-full ${t}`,children:[r.jsx(c,{className:"mb-4 flex justify-between items-center",children:r.jsx(u,{variant:"h6",className:"font-semibold",children:n("admin.users.title","User Management")})}),r.jsx(c,{style:{height:600,width:"100%"},children:r.jsx(Jw,{rows:o,columns:w,loading:i,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],initialState:{pagination:{paginationModel:{pageSize:10}}},slots:{toolbar:my},slotProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}},className:"bg-white dark:bg-gray-800"})}),r.jsxs(me,{open:p,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(pe,{children:n("admin.users.editDialog.title","Edit User")}),r.jsx(he,{children:l&&r.jsxs(c,{className:"mt-4 space-y-4",children:[r.jsx(ae,{fullWidth:!0,label:n("firstName","First Name"),value:l.firstName,variant:"outlined"}),r.jsx(ae,{fullWidth:!0,label:n("lastName","Last Name"),value:l.lastName,variant:"outlined"}),r.jsx(ae,{fullWidth:!0,label:n("email","Email"),value:l.email,variant:"outlined",disabled:!0}),r.jsx(ae,{fullWidth:!0,label:n("phoneNumber","Phone Number"),value:l.phoneNumber||"",variant:"outlined"})]})}),r.jsxs(ge,{children:[r.jsx(m,{onClick:()=>h(!1),children:n("cancel","Cancel")}),r.jsx(m,{variant:"contained",onClick:()=>h(!1),children:n("save","Save")})]})]}),r.jsx(v,{open:g.open,autoHideDuration:6e3,onClose:()=>f(e=>({...e,open:!1})),children:r.jsx(b,{severity:g.severity,onClose:()=>f(e=>({...e,open:!1})),children:g.message})})]})},tC=({className:t})=>{const{t:n}=Rt(),[o,a]=e.useState([]),[i,s]=e.useState(!0),[l,d]=e.useState(null),[p,h]=e.useState(!1),[g,f]=e.useState(""),[x,w]=e.useState({open:!1,message:"",severity:"success"}),[C,j]=e.useState(null),[S,k]=e.useState(null),[R,P]=e.useState(!1);e.useEffect(()=>{I()},[]);const I=async()=>{try{s(!0);const e=localStorage.getItem("token"),t=await fetch("/api/verification/pending",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch verification documents");const r=(await t.json()).map(e=>({...e,id:e.documentId||e.id,userEmail:e.userName||e.userEmail}));a(r)}catch(e){D(n("admin.verifications.fetchError","Failed to fetch verification documents"),"error"),a(M())}finally{s(!1)}},M=()=>[{id:1,userId:2,userName:"Jane Smith",userEmail:"jane.smith@example.com",fileName:"passport_jane_smith.pdf",contentType:"application/pdf",uploadedAt:"2024-07-11T09:30:00Z",isApproved:!1,isRejected:!1,documentReferences:"Passport: P123456789, issued by New Zealand Government, expires 2029-05-15"},{id:2,userId:4,userName:"Chen Wei",userEmail:"chen.wei@example.com",fileName:"drivers_license_chen.jpg",contentType:"image/jpeg",uploadedAt:"2024-07-11T14:15:00Z",isApproved:!1,isRejected:!1,documentReferences:"Driver License: DL987654321, issued by Auckland Council, expires 2026-12-31"},{id:3,userId:5,userName:"Sarah Johnson",userEmail:"sarah.johnson@example.com",fileName:"id_card_sarah.png",contentType:"image/png",uploadedAt:"2024-07-10T16:45:00Z",isApproved:!0,isRejected:!1,documentReferences:"ID Card: ID987654321, issued by New Zealand Government, expires 2028-05-15",adminComment:"Document verified successfully. Clear photo and valid ID."}],D=(e,t)=>{w({open:!0,message:e,severity:t})},T=e=>e.isApproved?r.jsx(y,{label:n("approved","Approved"),color:"success",size:"small"}):e.isRejected?r.jsx(y,{label:n("rejected","Rejected"),color:"error",size:"small"}):r.jsx(y,{label:n("pending","Pending"),color:"warning",size:"small"}),E=[{field:"id",headerName:n("admin.verifications.columns.id","ID"),width:70},{field:"user",headerName:n("admin.verifications.columns.user","User"),width:200,renderCell:e=>r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx($e,{src:e.row.userAvatar,alt:e.row.userName,sx:{width:32,height:32},children:e.row.userName.split(" ").map(e=>e[0]).join("")}),r.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:1,lineHeight:1},children:[r.jsx(u,{variant:"body2",className:"font-medium",children:e.row.userName}),r.jsx(u,{variant:"caption",className:"text-gray-500",children:e.row.userEmail})]})]})},{field:"fileName",headerName:n("admin.verifications.columns.document","Document"),width:200,renderCell:e=>r.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:1,lineHeight:1},children:[r.jsx(u,{variant:"body2",className:"font-medium",children:e.value}),r.jsx(u,{variant:"caption",className:"text-gray-500",children:e.row.contentType})]})},{field:"uploadedAt",headerName:n("admin.verifications.columns.uploadedAt","Uploaded"),width:140,valueFormatter:e=>new Date(e.value).toLocaleDateString()},{field:"status",headerName:n("admin.verifications.columns.status","Status"),width:120,renderCell:e=>T(e.row)},{field:"adminComment",headerName:n("admin.verifications.columns.comment","Comment"),width:200,renderCell:e=>r.jsx(u,{variant:"body2",className:"text-gray-600 truncate",children:e.value||"-"})},{field:"actions",headerName:n("admin.verifications.columns.actions","Actions"),width:150,sortable:!1,filterable:!1,renderCell:e=>r.jsx(c,{className:"flex space-x-1",sx:{display:"flex",alignItems:"center",height:"100%"},children:r.jsx(m,{size:"small",startIcon:r.jsx(Ee,{}),onClick:()=>(async e=>{if(d(e),f(e.adminComment||""),h(!0),j(null),k(null),e.id){P(!0);try{const t=localStorage.getItem("token"),r=await fetch(`/api/verification/download/${e.id}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to fetch file URL");const n=await r.json();j(n.downloadUrl),k(e.contentType)}catch(t){j(null),k(null),D(n("admin.verifications.fileFetchError","Failed to fetch file for preview"),"error")}finally{P(!1)}}})(e.row),className:"text-blue-600",children:n("admin.verifications.actions.review","Review")})})}];return r.jsxs(c,{className:t,children:[r.jsx(c,{className:"mb-4 flex justify-between items-center",children:r.jsx(u,{variant:"h6",className:"font-semibold",children:n("admin.verifications.title","Verification Management")})}),r.jsx(c,{style:{height:600,width:"100%"},children:r.jsx(Jw,{rows:o,columns:E,loading:i,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],initialState:{pagination:{paginationModel:{pageSize:10}}},getRowId:e=>e.documentId||e.id,slots:{toolbar:my},slotProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}},className:"bg-white dark:bg-gray-800"})}),r.jsxs(me,{open:p,onClose:()=>h(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(pe,{children:n("admin.verifications.reviewDialog.title","Review Verification Document")}),r.jsx(he,{children:l&&r.jsx(c,{className:"mt-4",children:r.jsxs(Q,{container:!0,spacing:3,children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(fe,{className:"mb-4",children:r.jsxs(xe,{children:[r.jsx(u,{variant:"h6",className:"mb-2",children:n("admin.verifications.reviewDialog.userInfo","User Information")}),r.jsx(c,{className:"space-y-2",children:r.jsxs(c,{className:"flex items-center space-x-2",children:[r.jsx($e,{src:l.userAvatar,children:l.userName.split(" ").map(e=>e[0]).join("")}),r.jsxs(c,{children:[r.jsx(u,{variant:"body1",className:"font-medium",children:l.userName}),r.jsx(u,{variant:"body2",className:"text-gray-600",children:l.userEmail})]})]})})]})})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(fe,{className:"mb-4",children:r.jsxs(xe,{children:[r.jsx(u,{variant:"h6",className:"mb-2",children:n("admin.verifications.reviewDialog.documentInfo","Document Information")}),r.jsxs(c,{className:"space-y-2",children:[r.jsxs(u,{variant:"body2",children:[r.jsxs("strong",{children:[n("fileName","File Name"),":"]})," ",l.fileName]}),r.jsxs(u,{variant:"body2",children:[r.jsxs("strong",{children:[n("fileType","File Type"),":"]})," ",l.contentType]}),r.jsxs(u,{variant:"body2",children:[r.jsxs("strong",{children:[n("uploadedAt","Uploaded At"),":"]})," ",new Date(l.uploadedAt).toLocaleString()]}),r.jsxs(u,{variant:"body2",children:[r.jsxs("strong",{children:[n("status","Status"),":"]})," ",T(l)]})]})]})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(fe,{className:"mb-4",children:r.jsxs(xe,{children:[r.jsx(u,{variant:"h6",className:"mb-2",children:n("admin.verifications.reviewDialog.documentReferences","Document References")}),r.jsx(u,{variant:"body2",className:"bg-gray-50 p-3 rounded",children:l.documentReferences})]})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(fe,{className:"mb-4",children:r.jsxs(xe,{children:[r.jsx(u,{variant:"h6",className:"mb-2",children:n("admin.verifications.reviewDialog.filePreview","File Preview")}),R?r.jsx(u,{variant:"body2",children:n("loading","Loading...")}):C&&S?S.startsWith("image/")?r.jsx("img",{src:C,alt:l.fileName,style:{maxWidth:"100%",maxHeight:400,borderRadius:8,border:"1px solid #eee"}}):"application/pdf"===S?r.jsx("iframe",{src:C,title:"PDF Preview",width:"100%",height:"400px",style:{border:"1px solid #eee",borderRadius:8}}):r.jsx(m,{variant:"outlined",href:C,target:"_blank",rel:"noopener noreferrer",children:n("admin.verifications.reviewDialog.downloadFile","Download File")}):r.jsx(u,{variant:"body2",color:"textSecondary",children:n("admin.verifications.reviewDialog.noPreview","No preview available.")})]})})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(ae,{fullWidth:!0,multiline:!0,rows:3,label:n("admin.verifications.reviewDialog.adminComment","Admin Comment"),value:g,onChange:e=>f(e.target.value),placeholder:n("admin.verifications.reviewDialog.commentPlaceholder","Add your review comments here..."),variant:"outlined"})})]})})}),r.jsxs(ge,{className:"px-6 pb-4",children:[r.jsx(m,{onClick:()=>h(!1),children:n("cancel","Cancel")}),r.jsx(m,{variant:"outlined",color:"error",startIcon:r.jsx(Ae,{}),onClick:()=>l&&(async e=>{try{const t=localStorage.getItem("token");if(!(await fetch(`/api/verification/review/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({approve:!1,comment:g})})).ok)throw new Error("Failed to reject verification");a(t=>t.map(t=>t.id===e?{...t,isApproved:!1,isRejected:!0,adminComment:g}:t)),D(n("admin.verifications.rejectSuccess","Verification rejected"),"info"),h(!1)}catch(t){D(n("admin.verifications.rejectError","Failed to reject verification"),"error")}})(l.id),className:"mr-2",children:n("admin.verifications.actions.reject","Reject")}),r.jsx(m,{variant:"contained",color:"success",startIcon:r.jsx(N,{}),onClick:()=>l&&(async e=>{try{const t=localStorage.getItem("token");if(!(await fetch(`/api/verification/review/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({approve:!0,comment:g})})).ok)throw new Error("Failed to approve verification");a(t=>t.map(t=>t.id===e?{...t,isApproved:!0,isRejected:!1,adminComment:g}:t)),D(n("admin.verifications.approveSuccess","Verification approved successfully"),"success"),h(!1)}catch(t){D(n("admin.verifications.approveError","Failed to approve verification"),"error")}})(l.id),children:n("admin.verifications.actions.approve","Approve")})]})]}),r.jsx(v,{open:x.open,autoHideDuration:6e3,onClose:()=>w(e=>({...e,open:!1})),children:r.jsx(b,{severity:x.severity,onClose:()=>w(e=>({...e,open:!1})),children:x.message})})]})},rC=({children:e,value:t,index:n,...o})=>r.jsx("div",{role:"tabpanel",hidden:t!==n,id:`admin-tabpanel-${n}`,"aria-labelledby":`admin-tab-${n}`,...o,children:t===n&&r.jsx(c,{sx:{p:3},children:e})}),nC=({className:t})=>{const{t:n}=Rt(),o=ea(ni),a=ea(ri),[i,d]=e.useState(0),[m,p]=e.useState(!0),[h,g]=e.useState(!1),[f,x]=e.useState(null);e.useEffect(()=>{(async()=>{if(a&&o)try{const e=localStorage.getItem("token");if(e){const t=JSON.parse(atob(e.split(".")[1])),r=t?.role||t?.roles||t?.["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||[],n=Array.isArray(r)?r.includes("Admin"):"Admin"===r;g(n)}}catch(e){g(!1)}finally{p(!1)}else p(!1)})()},[a,o]),e.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/admin/stats",{headers:{Authorization:`Bearer ${e}`}});t.ok&&x(await t.json())}catch(e){}})()},[]);return m?r.jsxs(c,{className:"flex justify-center items-center min-h-96",children:[r.jsx(P,{}),r.jsx(u,{variant:"h6",className:"ml-4",children:n("admin.checkingAccess","Checking admin access...")})]}):a?h?r.jsxs(s,{maxWidth:"xl",className:`py-8 ${t}`,children:[r.jsxs(c,{className:"mb-8",children:[r.jsx(u,{variant:"h4",component:"h1",className:"font-bold text-gray-900 dark:text-white mb-2",children:n("admin.dashboard.title","Admin Dashboard")}),r.jsx(u,{variant:"subtitle1",className:"text-gray-600 dark:text-gray-300",children:n("admin.dashboard.subtitle","Manage users and verifications")})]}),r.jsxs(Q,{container:!0,spacing:3,className:"mb-8",children:[r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(fe,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:r.jsxs(xe,{className:"flex items-center justify-between",children:[r.jsxs(c,{children:[r.jsx(u,{variant:"h4",className:"font-bold",children:f?f.totalUsers:"--"}),r.jsx(u,{variant:"body2",className:"opacity-80",children:n("admin.stats.totalUsers","Total Users")})]}),r.jsx(wt,{className:"text-4xl opacity-80"})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(fe,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:r.jsxs(xe,{className:"flex items-center justify-between",children:[r.jsxs(c,{children:[r.jsx(u,{variant:"h4",className:"font-bold",children:f?f.verifiedUsers:"--"}),r.jsx(u,{variant:"body2",className:"opacity-80",children:n("admin.stats.verifiedUsers","Verified Users")})]}),r.jsx(ze,{className:"text-4xl opacity-80"})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(fe,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:r.jsxs(xe,{className:"flex items-center justify-between",children:[r.jsxs(c,{children:[r.jsx(u,{variant:"h4",className:"font-bold",children:f?f.activeUsers:"--"}),r.jsx(u,{variant:"body2",className:"opacity-80",children:n("admin.stats.activeUsers","Active Users")})]}),r.jsx(Ct,{className:"text-4xl opacity-80"})]})})}),r.jsx(Q,{item:!0,xs:12,sm:6,md:3,children:r.jsx(fe,{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white",children:r.jsxs(xe,{className:"flex items-center justify-between",children:[r.jsxs(c,{children:[r.jsx(u,{variant:"h4",className:"font-bold",children:f?`${f.verificationRate.toFixed(1)}%`:"--"}),r.jsx(u,{variant:"body2",className:"opacity-80",children:n("admin.stats.verificationRate","Verification Rate")})]}),r.jsx(ze,{className:"text-4xl opacity-80"})]})})})]}),r.jsxs(l,{className:"bg-white dark:bg-gray-800",children:[r.jsx(c,{sx:{borderBottom:1,borderColor:"divider"},children:r.jsxs(le,{value:i,onChange:(e,t)=>{d(t)},"aria-label":"admin dashboard tabs",variant:"scrollable",scrollButtons:"auto",children:[r.jsx(ce,{icon:r.jsx(wt,{}),label:n("admin.tabs.users","User Management"),id:"admin-tab-0","aria-controls":"admin-tabpanel-0"}),r.jsx(ce,{icon:r.jsx(ze,{}),label:n("admin.tabs.verifications","Verifications"),id:"admin-tab-1","aria-controls":"admin-tabpanel-1"})]})}),r.jsx(rC,{value:i,index:0,children:r.jsx(eC,{})}),r.jsx(rC,{value:i,index:1,children:r.jsx(tC,{})})]})]}):r.jsx(s,{maxWidth:"lg",className:`py-8 ${t}`,children:r.jsx(b,{severity:"error",children:n("admin.accessDenied","Access denied. Admin privileges required.")})}):r.jsx(s,{maxWidth:"lg",className:`py-8 ${t}`,children:r.jsx(b,{severity:"warning",children:n("admin.loginRequired","Please log in to access the admin dashboard.")})})},oC=Sr({email:kr().email({message:"Invalid email address"}),password:kr().min(6,{message:"Password must be at least 6 characters"})}),aC=()=>{const e=Jo(),t=ea(ai),n=ea(oi),o=Et(),[a,s]=i.useState(!1),[l,d]=i.useState(null),p=localStorage.getItem("savedEmail")||"",{register:h,handleSubmit:g,setValue:f,watch:x,formState:{errors:y}}=Pr({resolver:wi(oC),defaultValues:{email:p}});i.useEffect(()=>{const e=x(e=>{void 0!==e.email&&localStorage.setItem("savedEmail",e.email)});return()=>e.unsubscribe()},[x]);return r.jsxs(r.Fragment,{children:[r.jsx(v,{open:a&&!!l,autoHideDuration:6e3,onClose:()=>s(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(b,{severity:"error",onClose:()=>s(!1),sx:{width:"100%"},children:l})}),r.jsxs(c,{maxWidth:400,mx:"auto",my:20,p:3,boxShadow:2,borderRadius:2,bgcolor:"background.paper",children:[r.jsx(u,{variant:"h5",mb:2,className:"text-center",children:"Login"}),r.jsxs("form",{onSubmit:g(async r=>{d(null),s(!1),localStorage.setItem("savedEmail",r.email);const n=await e(Bn(r));let a="Login failed.";if(n?.payload)if("string"==typeof n.payload)try{const e=JSON.parse(n.payload);a=e&&"string"==typeof e.message?e.message:n.payload}catch{a=n.payload}else"object"==typeof n.payload&&"string"==typeof n.payload.message&&(a=n.payload.message);else t&&(a=t);n?.type&&n.type.endsWith("/fulfilled")&&n?.payload?.token?o("/flight-companion"):(d(a),s(!0))}),noValidate:!0,children:[r.jsx(ae,{label:"Email",fullWidth:!0,margin:"normal",...h("email"),error:!!y.email,helperText:y.email?.message}),r.jsx(ae,{label:"Password",type:"password",fullWidth:!0,margin:"normal",...h("password"),error:!!y.password,helperText:y.password?.message}),r.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:n,sx:{mt:2,padding:2,fontSize:16,fontWeight:"bold"},children:n?"Logging in...":"Login"})]})]})]})},iC=()=>{const{t:e}=Rt(),[t,n]=i.useState(null),[o,a]=i.useState(!1),[s,l]=i.useState(!1),d=Et(),p=i.useMemo(()=>Sr({firstName:kr().min(2,{message:e("validation.firstNameRequired")}),lastName:kr().min(2,{message:e("validation.lastNameRequired")}),email:kr().email({message:e("validation.invalidEmail")}),password:kr().min(6,{message:e("validation.passwordMin")}),confirmPassword:kr(),phoneNumber:kr().optional(),preferredLanguage:kr().optional(),emergencyContact:kr().optional(),emergencyPhone:kr().optional()}).refine(e=>e.password===e.confirmPassword,{message:e("validation.passwordsDontMatch"),path:["confirmPassword"]}),[e]),h=Jo();ea(ai);const g=ea(oi),{register:f,handleSubmit:x,formState:{errors:y}}=Pr({resolver:wi(p)});return r.jsxs(r.Fragment,{children:[r.jsx(v,{open:o&&!!t,autoHideDuration:6e3,onClose:()=>a(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(b,{severity:"error",onClose:()=>a(!1),sx:{width:"100%"},children:t})}),r.jsx(v,{open:s,autoHideDuration:6e3,onClose:()=>l(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(b,{severity:"success",onClose:()=>l(!1),sx:{width:"100%"},children:e("registrationSuccess","Registration successful! Welcome to the platform.")})}),r.jsxs(c,{maxWidth:800,mx:"auto",my:6,p:6,boxShadow:2,borderRadius:2,bgcolor:"background.paper",children:[r.jsx(u,{variant:"h5",mb:2,align:"center",children:e("registerTitle")}),r.jsx("form",{onSubmit:x(async e=>{n(null),a(!1);const t=await fetch("/api/User/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber||null,preferredLanguage:e.preferredLanguage||null,emergencyContact:e.emergencyContact||null,emergencyPhone:e.emergencyPhone||null})});if(t.ok)await h(Bn({email:e.email,password:e.password})),l(!0),setTimeout(()=>{d("/login")},1500);else{let e="Registration failed.";try{const r=await t.json();if(r?.Message?e=r.Message:r?.message?e=r.message:r?.error?.message&&(e=r.error.message),r?.error?.validationErrors){const t=r.error.validationErrors,n=Object.keys(t)[0];Array.isArray(t[n])&&t[n].length>0&&(e=t[n][0])}}catch{}n(e),a(!0)}}),noValidate:!0,children:r.jsxs(Q,{container:!0,spacing:1,children:[r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ae,{label:e("firstName")+" *",fullWidth:!0,margin:"normal",placeholder:"Maximum 50 characters",...f("firstName"),error:!!y.firstName,FormHelperTextProps:{sx:{color:y.firstName?"error.main":"info.main"}},helperText:y.firstName?.message||"Maximum 50 characters"})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ae,{label:e("lastName")+" *",fullWidth:!0,margin:"normal",placeholder:"Maximum 50 characters",...f("lastName"),error:!!y.lastName,FormHelperTextProps:{sx:{color:y.lastName?"error.main":"info.main"}},helperText:y.lastName?.message||"Maximum 50 characters"})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(ae,{label:e("email")+" *",fullWidth:!0,margin:"normal",placeholder:"Enter a valid email address",...f("email"),error:!!y.email,FormHelperTextProps:{sx:{color:y.email?"error.main":"info.main"}},helperText:y.email?.message||"Enter a valid email address"})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ae,{label:e("password")+" *",type:"password",fullWidth:!0,margin:"normal",placeholder:"Minimum 6 characters, must include letters and at least one number or symbol",...f("password"),error:!!y.password,FormHelperTextProps:{sx:{color:y.password?"error.main":"info.main"}},helperText:y.password?.message||"Minimum 6 characters, must include letters and at least one number or symbol"})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ae,{label:e("confirmPassword")+" *",type:"password",fullWidth:!0,margin:"normal",placeholder:"Re-enter your password",...f("confirmPassword"),error:!!y.confirmPassword,FormHelperTextProps:{sx:{color:y.confirmPassword?"error.main":"info.main"}},helperText:y.confirmPassword?.message||"Re-enter your password"})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ae,{label:e("phoneNumber")+" ("+e("optional","optional")+")",fullWidth:!0,margin:"normal",placeholder:"Optional. Enter a valid phone number",...f("phoneNumber"),error:!!y.phoneNumber,FormHelperTextProps:{sx:{color:y.phoneNumber?"error.main":"info.main"}},helperText:y.phoneNumber?.message||"Optional. Enter a valid phone number"})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsxs(ie,{fullWidth:!0,margin:"normal",children:[r.jsx(se,{id:"preferred-language-label",children:"Preferred Language (optional)"}),r.jsxs(T,{labelId:"preferred-language-label",id:"preferredLanguage",defaultValue:"",...f("preferredLanguage"),label:"Preferred Language (optional)",sx:{textAlign:"left"},error:!!y.preferredLanguage,children:[r.jsx(E,{value:"",children:"None"}),r.jsx(E,{value:"English",children:"English"}),r.jsx(E,{value:"Chinese",children:"Chinese"})]})]})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ae,{label:e("emergencyContact")+" ("+e("optional","optional")+")",fullWidth:!0,margin:"normal",placeholder:"Optional. Maximum 100 characters",...f("emergencyContact"),error:!!y.emergencyContact,FormHelperTextProps:{sx:{color:y.emergencyContact?"error.main":"info.main"}},helperText:y.emergencyContact?.message||"Optional. Maximum 100 characters"})}),r.jsx(Q,{item:!0,xs:12,md:6,children:r.jsx(ae,{label:e("emergencyPhone")+" ("+e("optional","optional")+")",fullWidth:!0,margin:"normal",placeholder:"Optional. Enter a valid phone number",...f("emergencyPhone"),error:!!y.emergencyPhone,FormHelperTextProps:{sx:{color:y.emergencyPhone?"error.main":"info.main"}},helperText:y.emergencyPhone?.message||"Optional. Enter a valid phone number"})}),r.jsx(Q,{item:!0,xs:12,children:r.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:g,sx:{mt:2,padding:2,fontSize:16,fontWeight:"bold"},children:g?e("registering","Registering..."):e("register")})})]})})]})]})},sC=()=>{const[t,n]=e.useState("disconnected"),[o,a]=e.useState(""),[i,s]=e.useState([]);e.useEffect(()=>((async()=>{n("connecting");try{await Ya.acquire(),Ya.onNotificationReceived(e=>{s(t=>[...t,{type:"notification",data:e,timestamp:new Date}])}),Ya.onMessageReceived(e=>{s(t=>[...t,{type:"message",data:e,timestamp:new Date}])}),Ya.onSystemNotificationReceived(e=>{s(t=>[...t,{type:"system",data:e,timestamp:new Date}])}),n("connected")}catch(e){n("disconnected")}})(),()=>{Ya.release()}),[]);return r.jsx(fe,{className:"m-4",children:r.jsxs(xe,{children:[r.jsx(u,{variant:"h5",component:"h2",gutterBottom:!0,children:"SignalR Connection Test"}),r.jsxs(b,{severity:(()=>{switch(t){case"connected":return"success";case"connecting":return"warning";case"disconnected":return"error"}})(),className:"mb-4",children:["Connection Status: ",t.toUpperCase()]}),r.jsxs(c,{className:"mb-4",children:[r.jsx(m,{variant:"contained",onClick:async()=>{try{await Ya.testConnection("Hello from React frontend!"),a("Test message sent successfully")}catch(e){a(`Test failed: ${e}`)}},disabled:"connected"!==t,className:"mr-2",children:"Test Connection"}),r.jsx(m,{variant:"outlined",onClick:()=>s([]),children:"Clear Notifications"})]}),o&&r.jsx(b,{severity:"info",className:"mb-4",children:o}),r.jsxs(u,{variant:"h6",gutterBottom:!0,children:["Real-time Notifications (",i.length,")"]}),r.jsx(c,{className:"max-h-96 overflow-y-auto",children:0===i.length?r.jsx(u,{variant:"body2",color:"textSecondary",children:"No notifications received yet. Create a pickup match or send a message to test."}):i.reverse().map((e,t)=>r.jsx(fe,{variant:"outlined",className:"mb-2",children:r.jsxs(xe,{className:"py-2",children:[r.jsxs(u,{variant:"subtitle2",color:"primary",children:[e.type.toUpperCase()," - ",e.timestamp.toLocaleTimeString()]}),r.jsx(u,{variant:"body2",component:"pre",className:"whitespace-pre-wrap",children:JSON.stringify(e.data,null,2)})]})},t))})]})})},lC=[{index:1,id:"what-is-app",question:"What is WingCompanion?",answer:"WingCompanion is a platform that connects travelers for safer and more enjoyable journeys, offering flight companion matching and reliable airport pickup services."},{index:2,id:"how-to-find-companion",question:"How do I find a flight companion?",answer:"Sign up, create a request with your flight details, and browse available companions. You can message and coordinate directly through the platform."},{index:3,id:"is-my-data-safe",question:"Is my personal information safe?",answer:"Yes. We use industry-standard security practices to protect your data. See our Privacy Policy for details."},{index:4,id:"how-to-offer-pickup",question:"How can I offer a pickup service?",answer:"Register as a driver, fill out your service details, and respond to pickup requests from travelers needing a ride."},{index:5,id:"how-to-report-issue",question:"How do I report a problem or dispute?",answer:"Use the in-app reporting tools or contact our support team via the Help Center. We take all reports seriously and will investigate promptly."},{index:6,id:"fees-payments",question:"Are there any fees or payments involved?",answer:"Some services may involve payments between users. All transactions are handled securely through our platform. See the Terms of Service for more."},{index:7,id:"emergency-help",question:"What should I do in an emergency?",answer:"Use the Emergency Assistance feature in the app for immediate help, or contact local authorities if you are in danger."},{index:8,id:"can-i-change-language",question:"Can I use the app in different languages?",answer:"Yes, you can switch languages in your profile or via the language selector in the navigation bar."},{index:9,id:"how-to-delete-account",question:"How do I delete my account?",answer:"Go to your profile settings and select the option to delete your account. This will permanently remove your data from our system."},{index:10,id:"contact-support",question:"How do I contact support?",answer:"Visit the Help Center or email support@wingcompanion.com for assistance."}],cC=()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-20",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:r.jsxs("div",{className:"sticky top-6 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-300",children:"Table of Contents"}),r.jsx("ul",{className:"space-y-2 pl-0 list-none",children:lC.map((e,t)=>r.jsx("li",{className:"cursor-pointer list-none",children:r.jsxs("div",{onClick:()=>(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(e.id),className:"text-gray-700 dark:text-gray-200 hover:text-blue-600 transition-colors text-left block w-full",children:[t+1,". ",e.question]})},e.id))})]})}),r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-300 mb-4",children:"Frequently Asked Questions (FAQ)"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Last updated: ",e]})]}),r.jsx("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:lC.map(({id:e,question:t,answer:n,index:o})=>r.jsxs("section",{className:"mb-8",id:e,children:[r.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:[o,". ",t]}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:n}),"is-my-data-safe"===e&&r.jsx(Ft,{to:"/privacy-policy",className:"text-blue-600 hover:underline",children:"Read our Privacy Policy"}),"fees-payments"===e&&r.jsx(Ft,{to:"/terms-of-service",className:"text-blue-600 hover:underline",children:"See Terms of Service"}),"how-to-report-issue"===e&&r.jsx(Ft,{to:"/help",className:"text-blue-600 hover:underline",children:"Go to Help Center"})]},e))})]})]})})},dC=[{index:1,id:"getting-started",title:"Getting Started",content:r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Welcome to WingCompanion! To begin, ",r.jsx("b",{children:"register"})," for an account, verify your email, and complete your profile. You can then search for flight companions or offer/seek pickup services."]}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsx("li",{children:"Sign up with your email or social account"}),r.jsx("li",{children:"Verify your identity for added trust"}),r.jsx("li",{children:"Set your language and notification preferences"})]})]})},{index:2,id:"account-management",title:"Account Management",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Manage your account settings from your profile page. You can update your information, change your password, or delete your account at any time."}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsx("li",{children:"Update your profile photo and details"}),r.jsx("li",{children:"Change your password or email address"}),r.jsx("li",{children:"Enable two-factor authentication for extra security"}),r.jsx("li",{children:"Delete your account (this is permanent)"})]})]})},{index:3,id:"using-services",title:"Using Services",content:r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["WingCompanion offers two main services: ",r.jsx("b",{children:"Flight Companion Matching"})," and ",r.jsx("b",{children:"Pickup Service"}),"."]}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsx("li",{children:"To find a flight companion, create a request with your travel details or browse available offers."}),r.jsx("li",{children:"To offer or request a pickup, use the Pickup Service section and fill out the relevant form."}),r.jsx("li",{children:"Communicate securely with other users via in-app messaging."})]})]})},{index:4,id:"safety-security",title:"Safety & Security",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Your safety is our priority. Please follow these guidelines:"}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsx("li",{children:"Always verify the identity of your companion or driver"}),r.jsx("li",{children:"Meet in public places when possible"}),r.jsx("li",{children:"Use the in-app Emergency Assistance feature if you feel unsafe"}),r.jsx("li",{children:"Report any suspicious or inappropriate behavior"})]}),r.jsxs("p",{className:"mt-2",children:["For more, see our ",r.jsx(Ft,{to:"/community-guidelines",className:"text-blue-600 hover:underline",children:"Community Guidelines"})," and ",r.jsx(Ft,{to:"/privacy-policy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]})]})},{index:5,id:"troubleshooting",title:"Troubleshooting",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"If you encounter issues:"}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsx("li",{children:"Try refreshing the page or restarting the app"}),r.jsx("li",{children:"Check your internet connection"}),r.jsx("li",{children:"Clear your browser cache or app data"}),r.jsx("li",{children:"Ensure you have the latest version of the app"})]}),r.jsx("p",{className:"mt-2",children:"If problems persist, contact our support team below."})]})},{index:6,id:"contact-support",title:"Contact Support",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Need more help? Our support team is here for you:"}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsxs("li",{children:["Email: ",r.jsx("a",{href:"mailto:support@wingcompanion.com",className:"text-blue-600 hover:underline",children:"support@wingcompanion.com"})]}),r.jsx("li",{children:"Phone: +64 21 123 4567"}),r.jsx("li",{children:"Live chat: Available in the app during business hours"})]})]})}],uC=()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-20",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:r.jsxs("div",{className:"sticky top-6 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-300",children:"Help Center"}),r.jsx("ul",{className:"space-y-2 pl-0 list-none",children:dC.map(e=>r.jsx("li",{className:"cursor-pointer list-none",children:r.jsxs("div",{onClick:()=>(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(e.id),className:"text-gray-700 dark:text-gray-200 hover:text-blue-600 transition-colors text-left block w-full",children:[e.index,". ",e.title]})},e.id))})]})}),r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-300 mb-4",children:"Help Center"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Last updated: ",e]})]}),r.jsx("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:dC.map(({id:e,title:t,content:n,index:o})=>r.jsxs("section",{className:"mb-8",id:e,children:[r.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:[o,". ",t]}),r.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:n})]},e))})]})]})})},mC=[{index:1,id:"general-inquiries",title:"General Inquiries",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"For general questions about WingCompanion, our services, or your account, please reach out to us via email or phone. We aim to respond within 1-2 business days."}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsxs("li",{children:["Email:"," ",r.jsx("a",{href:"mailto:info@wingcompanion.com",className:"text-blue-600 hover:underline",children:"info@wingcompanion.com"})]}),r.jsx("li",{children:"Phone: +64 21 123 4567"})]})]})},{index:2,id:"support",title:"Support",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"If you need help with your account, have technical issues, or want to report a problem, our support team is here for you."}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsxs("li",{children:["Email:"," ",r.jsx("a",{href:"mailto:support@wingcompanion.com",className:"text-blue-600 hover:underline",children:"support@wingcompanion.com"})]}),r.jsx("li",{children:"Live chat: Available in the app during business hours"})]})]})},{index:3,id:"media-partnerships",title:"Media & Partnerships",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"For media inquiries, press releases, or partnership opportunities, please contact our business development team."}),r.jsx("ul",{className:"list-disc pl-6 mt-2",children:r.jsxs("li",{children:["Email:"," ",r.jsx("a",{href:"mailto:media@wingcompanion.com",className:"text-blue-600 hover:underline",children:"media@wingcompanion.com"})]})})]})},{index:4,id:"office-location",title:"Office Location",content:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Our main office is located in Auckland, New Zealand. Visits are by appointment only."}),r.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[r.jsx("li",{children:"Address: 123 Queen Street, Auckland, New Zealand"}),r.jsx("li",{children:"Phone: +64 21 123 4567"})]})]})}],pC=()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-20",children:r.jsx("div",{className:"gap-8",children:r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-300 mb-4",children:"Contact Us"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Last updated: ",e]})]}),r.jsx("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:mC.map(({id:e,title:t,content:n,index:o})=>"contact-form"!==e?r.jsxs("section",{className:"mb-8",id:e,children:[r.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300 mb-4",children:[o,". ",t]}),r.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:n})]},e):null)})]})})})},hC=[{icon:"🛫",title:"Flight Companion Matching",desc:"Find and connect with trusted travelers on your route for a safer, more social journey."},{icon:"🚗",title:"Airport Pickup Service",desc:"Book reliable airport pickups and drop-offs with verified drivers in your area."},{icon:"🛡️",title:"Safety & Verification",desc:"All users are verified for identity and safety, with in-app emergency assistance available."},{icon:"💬",title:"Secure Messaging",desc:"Communicate and coordinate with companions and drivers securely within the app."},{icon:"🌐",title:"Multi-language Support",desc:"Switch between languages for a seamless experience wherever you travel."},{icon:"⭐",title:"Ratings & Reviews",desc:"Build trust with transparent ratings and reviews for all users."}],gC=()=>r.jsxs("div",{className:"w-full max-w-5xl mx-auto animate-fade-in px-0 py-28 ",children:[r.jsx("h2",{className:"text-3xl font-bold mb-10 tracking-tight text-white text-center dark:text-[#00BCD4]",children:"Features"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:hC.map(e=>r.jsxs("div",{className:"rounded-2xl bg-white/70 shadow-lg hover:shadow-2xl transition-shadow duration-300 p-8 flex flex-col items-center border border-[rgba(8,43,109,0.08)] backdrop-blur-sm group",style:{minHeight:280},children:[r.jsx("span",{className:"text-6xl mb-5 drop-shadow-sm group-hover:scale-110 transition-transform duration-300",children:e.icon}),r.jsx("h3",{className:"text-xl font-extrabold mb-3 tracking-tight",style:{color:"var(--color-primary)"},children:e.title}),r.jsx("p",{className:"text-base text-center text-gray-700",style:{color:"#2c3e50"},children:e.desc})]},e.title))})]}),fC=()=>{const e="dark"===F().palette.mode;return r.jsxs("div",{className:e?"min-h-screen bg-gradient-to-b from-[#232B3A] via-[#1A2330] to-[#0B1320]":"min-h-screen bg-gradient-to-b from-[#FCC3C4] via-[#f8D597] to-[#CBDDDF]",style:{transition:"background 0.3s"},children:[r.jsx(Oa,{}),r.jsxs("div",{className:"flex flex-col justify-center min-h-screen relative p-8 md:p-16 lg:p-32",style:{backgroundImage:e?"url('/images/airplane-night.jpg')":"url('/images/airplane.jpg')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",transition:"background 0.3s"},children:[r.jsx("div",{className:e?"absolute inset-0 bg-gradient-to-t from-[#0B1320]/90 to-transparent":"absolute inset-0 bg-gradient-to-t from-transparent to-[#CBDDDF]"}),r.jsxs("div",{className:"relative z-10 text-left max-w-2xl",children:[r.jsx("h1",{className:e?"text-5xl font-bold mb-4 text-[#00BCD4] drop-shadow-lg font-serif":"text-5xl font-bold mb-4 text-white drop-shadow-lg font-serif",children:"WingCompanion"}),r.jsx("p",{className:e?"text-xl font-medium text-gray-200 max-w-xl mb-8 drop-shadow-lg":"text-xl font-medium text-white max-w-xl mb-8 drop-shadow-lg",children:"Connecting travelers for safer, more enjoyable journeys — find trusted flight companions and reliable airport pickups."}),r.jsxs("div",{className:"flex gap-4 flex-col sm:flex-row",children:[r.jsx(Ft,{to:"/flight-companion",className:e?"inline-block no-underline bg-[#232B3A] text-[#00BCD4] font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-[#1A2330] hover:shadow-xl transition-all duration-300 transform hover:scale-105 text-center border-2 border-[#00BCD4]":"inline-block no-underline bg-white text-[#020F6F] font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-blue-50 hover:shadow-xl transition-all duration-300 transform hover:scale-105 text-center",style:{transition:"background 0.3s, color 0.3s"},children:"Flight Companion"}),r.jsx(Ft,{to:"/pickup",className:e?"inline-block no-underline bg-[#00BCD4] text-[#232B3A] font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-[#0097A7] hover:shadow-xl transition-all duration-300 transform hover:scale-105 text-center border-2 border-[#00BCD4]":"inline-block no-underline bg-[#020F6F] text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-blue-800 hover:shadow-xl transition-all duration-300 transform hover:scale-105 text-center border-2 border-white",style:{transition:"background 0.3s, color 0.3s"},children:"Pickup Service"})]})]})]}),r.jsx("div",{className:e?"bg-[#1E202A]":"",children:r.jsx(gC,{})}),r.jsx("div",{className:e?"bg-[#1E202A]":"",children:r.jsx(Ha,{})}),r.jsx("style",{children:"\n        @keyframes fade-in {\n          from { opacity: 0; transform: translateY(40px); }\n          to { opacity: 1; transform: none; }\n        }\n        .animate-fade-in {\n          animation: fade-in 1.2s cubic-bezier(.4,0,.2,1);\n        }\n        body.dark {\n          background: #0B1320;\n        }\n      "})]})},xC=()=>{const t=Jo(),n=ea(e=>e.ui.isLoading),o=Tt();e.useEffect(()=>{localStorage.getItem("token")&&t(Vn())},[t]),(()=>{const t=Jo();e.useEffect(()=>{let e=!0;return(async()=>{try{await Ya.acquire(),Ya.onNotificationReceived(r=>{e&&t(Wa(r))}),Ya.onMessageReceived(r=>{e&&t(Ga(r))}),Ya.onSystemNotificationReceived(r=>{e&&t(Ua(r))}),Ya.onNotificationMarkedAsRead(r=>{e&&r.notificationId&&t(Qa(r.notificationId))}),Ya.onTestResponse(e=>{}),e&&t(_a(!0))}catch(r){e&&t(_a(!1))}})(),()=>{e=!1,Ya.release(),t(_a(!1))}},[t])})();const a=!["/"].includes(o.pathname);return r.jsxs(ca,{onError:(e,t)=>{},showDetails:!1,children:[a?r.jsx(La,{children:r.jsxs(At,{children:[r.jsx(Ot,{path:"/flight-companion",element:r.jsx(Ti,{})}),r.jsx(Ot,{path:"/pickup",element:r.jsx(Ki,{})}),r.jsx(Ot,{path:"/profile",element:r.jsx(rs,{})}),r.jsx(Ot,{path:"/community-guidelines",element:r.jsx(ns,{})}),r.jsx(Ot,{path:"/terms-of-service",element:r.jsx(os,{})}),r.jsx(Ot,{path:"/privacy-policy",element:r.jsx(as,{})}),r.jsx(Ot,{path:"/cookie-policy",element:r.jsx(is,{})}),r.jsx(Ot,{path:"/admin",element:r.jsx(nC,{})}),r.jsx(Ot,{path:"/login",element:r.jsx(aC,{})}),r.jsx(Ot,{path:"/register",element:r.jsx(iC,{})}),r.jsx(Ot,{path:"/signalr-test",element:r.jsx(sC,{})}),r.jsx(Ot,{path:"/faq",element:r.jsx(cC,{})}),r.jsx(Ot,{path:"/help-center",element:r.jsx(uC,{})}),r.jsx(Ot,{path:"/contact",element:r.jsx(pC,{})})]})}):r.jsx(At,{children:r.jsx(Ot,{path:"/",element:r.jsx(fC,{})})}),r.jsx(va,{open:n,message:"Please wait..."}),r.jsx(fa,{maxNotifications:5,position:{vertical:"bottom",horizontal:"right"},transition:"slide",autoHideDuration:6e3})]})},bC=()=>r.jsx(br,{store:Yo,children:r.jsx(na,{children:r.jsx(xC,{})})}),yC=document.getElementById("root");if(yC){Ar.createRoot(yC).render(r.jsx(i.StrictMode,{children:r.jsx(Nt,{i18n:jt,children:r.jsx(Ht,{children:r.jsx(bC,{})})})}))}
